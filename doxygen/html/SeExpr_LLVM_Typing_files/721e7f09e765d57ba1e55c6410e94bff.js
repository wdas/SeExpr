Array.prototype.forEach=Array.prototype.forEach||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}};Array.prototype.map=Array.prototype.map||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c)}}return e};Array.prototype.reduce=Array.prototype.reduce||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=0;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c++];break}if(++c>=a){throw new TypeError()}}while(true)}for(;c<a;c++){if(c in this){d=b.call(null,d,this[c],c,this)}}return d};Array.prototype.reduceRight=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=a-1;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){var d=this[c--];break}if(--c<0){throw new TypeError()}}while(true)}for(;c>=0;c--){if(c in this){d=b.call(null,d,this[c],c,this)}}return d};Array.prototype.filter=Array.prototype.filter||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=new Array();var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c)){e.push(f)}}}return e};Array.prototype.every=Array.prototype.every||function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true};Array.prototype.some=Array.prototype.some||function(b){var d=0,a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var c=arguments[1];for(;d<a;d++){if(d in this&&b.call(c,this[d],d,this)){return true}}return false};Array.prototype.indexOf=Array.prototype.indexOf||function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1};Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(b){var a=this.length;var c=Number(arguments[1]);if(isNaN(c)){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}else{if(c>=a){c=a-1}}}for(;c>-1;c--){if(c in this&&this[c]===b){return c}}return -1};
;
Object.create=Object.create||(function(){var a=Object.defineProperty||function(d,c,e){if(e.hasOwnProperty("value")){d[c]=e.value}};var b=Object.defineProperties||function(e,d){for(var c in d){if(d.hasOwnProperty(c)){a(e,c,d[c])}}};return function(e,c){var d=function(f){if(f){b(this,f)}};d.prototype=e;return new d(c)}})();Object.keys=Object.keys||function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)){b.push(a)}}return b};
;
if(!Array.prototype.inject){Array.prototype.inject=function(f,c,e){var b=this.length>>>0,a=f,d;if(typeof c!="function"){throw new TypeError()}for(d=0;d<b;d+=1){a=c.apply(e,[a,this[d],d])}return a}}if(!Array.prototype.first){Array.prototype.first=function(){return this[0]}}if(!Array.prototype.last){Array.prototype.last=function(){var a=this.length>>>0;return this[a-1]}}if(!Array.prototype.unique){Array.prototype.unique=function unique(){var a=this;return this.filter(function(c,b){return $j.inArray(c,a)>=b})}}if(!Array.prototype.flat){Array.prototype.flat=function(){return this.inject([],function(a,b){if($j.isArray(b)){b.map(function(c){a.push(c)})}else{a.push(b)}return a})}}if(!Array.prototype.zip){Array.prototype.zip=function(){var a=[this].concat(Array.prototype.slice.call(arguments,0));return this.map(function(c,b){return a.map(function(d){return typeof d[b]!="undefined"?d[b]:null})})}};
;
if(typeof(_)=="undefined"){_=undefined}if(!Function.prototype.bind){Function.prototype.bind=function(b){var c=this;var a=Array.prototype.slice.call(arguments,1);return function(){return c.apply(b,a.concat(Array.prototype.slice.call(arguments,0)))}}}if(!Function.prototype.curry){Function.prototype.curry=function(){var b=this,a=Array.prototype.slice.call(arguments);return function(){var c=a.concat(Array.prototype.slice.call(arguments));return b.apply(this,c)}}}if(!Function.prototype.partial){Function.prototype.partial=function(){var c=this,a=Array.prototype.slice.call(arguments),b;var e=[],d;for(b=0;b<a.length;b+=1){if(typeof(a[b])=="undefined"){e.push(b)}}return function(){var g=a.concat(Array.prototype.slice.call(arguments,e.length)),f;for(f=0;f<Math.min(e.length,arguments.length);f+=1){g[e[f]]=arguments[f]}for(f=0;f<g.length;f+=1){if(typeof(g[f])=="undefined"){return c.partial.apply(c,g)}}return c.apply(this,g)}}}if(!Function.prototype.aritize){Function.prototype.aritize=function(b){var a=this;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}}}if(!Function.prototype.sequence){Function.prototype.sequence=function(b){var a=this;return function(){return b.call(this,a.apply(this,Array.prototype.slice.call(arguments)))}}}Function.prototype.delayed=function(b){var a=this;return function(){var c=Array.prototype.slice.call(arguments),d=this;setTimeout(function(){a.apply(d,c)},b||0)}};
;
if(typeof Object.values=="undefined"){Object.values=function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)){b.push(c[a])}}return b}};
;
if(!String.prototype.startsWith){String.prototype.startsWith=function(a){return this.indexOf(a)===0}}if(!String.prototype.endsWith){String.prototype.endsWith=function(a){var b=this.length-a.length;return b>=0&&this.lastIndexOf(a)===b}}if(!String.prototype.camelize){String.prototype.camelize=function(c){var b=this.toLowerCase().split(c||"-");for(var a=1;a<b.length;a++){b[a]=b[a].capitalize()}return b.join("")}}if(!String.prototype.capitalize){String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}};
;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo.Class=function(){};jive.oo.Class.extend=(function(){var b=Object.create||function(e){function d(){}d.prototype=e;return new d()};var a=false;return function c(h){var i=this["protected"]||{},g;a=true;var f=new this();var d=b(i);a=false;if(typeof h=="function"){h.call(f,d,i)}else{for(g in h){if(h.hasOwnProperty(g)){f[g]=h[g]}}}for(g in f){if(f.hasOwnProperty(g)){if(typeof f[g]!="function"){throw"Public members must be methods - public variables are not allowed: '"+g+"'"}else{if(typeof d[g]=="undefined"||!d.hasOwnProperty(g)){d[g]=f[g]}else{throw"Public and protected properties with the same name are not allowed: '"+g+"'"}}}}function e(){var j=this instanceof e?this:b(e.prototype),l,k=b(e["protected"]);function m(n){return function(){var o=k[n].apply(k,arguments);return o===k?j:o}}if(!a&&jive.oo._abstract){for(l in k){if(k[l]===jive.oo._abstract){throw"A class with abstract members cannot be instantiated: '"+l+"'"}}}if(!a){for(l in e.prototype){if(typeof e.prototype[l]=="function"&&typeof k[l]=="function"){j[l]=m(l)}}if(k.init){k.init.apply(k,arguments)}}return j}e.prototype=f;e["protected"]=d;e.definition=h;e.constructor=e;e.superclass=this;e.extend=c;return e}})();
;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo.compose=(function(){function a(f,d){for(var c=0;c<f.length;c+=1){if(f[c]===d){return true}}return false}return function b(){var g=Array.prototype.slice.call(arguments),f=jive.oo.Class,e=[],j=[],h;for(var d=0;d<g.length;d+=1){e.push(g[d]);h=g[d].superclass;if(h!==f&&!a(j,h)&&!a(e,h)){j.push(h)}}if(j.length>1){throw"Cannot create linear inheritance chain. Make sure classes that you are mixing in do not inherit from different parent classes."}else{if(j.length==1&&e[0].superclass!==j[0]){e.unshift(j[0])}}var c=e[0];for(d=1;d<e.length;d+=1){c=c.extend(e[d].definition)}return c}})();
;
jive=this.jive||{};jive.conc=jive.conc||{};jive.conc.nextTick=(function(){if(window.postMessage&&window.addEventListener){return(function(){var b=[],a="next-tick-message";function d(e){b.push(e);window.postMessage(a,"*")}function c(f){if(f.source==window&&f.data==a){f.stopPropagation();if(b.length>0){var e=b.shift();e()}}}window.addEventListener("message",c,true);return d})()}else{return function(a){setTimeout(a,0)}}})();
;
jive=this.jive||{};jive.conc=jive.conc||{};jive.conc.observable=function(a){var b=false;a.listeners=function(d){if(!this._events){this._events={}}if(!this._events[d]){this._events[d]=[]}return this._events[d]};a.addListener=function(d,e){b=true;this.emit("newListener",d,e);b=false;this.listeners(d).push(e);return this};a.removeListener=function(f,g){var e=this.listeners(f);for(var d=0;d<e.length;d+=1){if(e[d]===g||typeof g=="undefined"){e.splice(d,1);d-=1}}return this};var c=jive.conc.nextTick||function(d){setTimeout(d,0)};a.emit=function(g){var j=Array.prototype.slice.call(arguments,1),e=this.listeners(g).slice(),f=this;function h(i){c(function(){i.apply(f,j)})}for(var d=0;d<e.length;d+=1){h(e[d])}if(!b){c(function(){var n=f.listeners(g),m;for(var l=0;l<n.length;l+=1){m=false;for(var k=0;k<e.length;k+=1){if(n[l]===e[k]){m=true}}if(!m){h(n[l])}}})}return this};a.emitP=function(e){var d=Array.prototype.slice.call(arguments),f=new jive.conc.Promise();this.emit.apply(this,d.concat(f));return f};a.proxyListener=function(h,e,g,f){var d=this;if(typeof g=="function"){f=g;g=null}g=g||e;if(f){h.addListener(e,f)}h.addListener(e,function(){var i=Array.prototype.slice.call(arguments);i.unshift(g);d.emit.apply(d,i)});return this};return a};
;
jive.conc.Promise=function(){jive.conc.observable(this);var c=false,d=false,e,f,a=this;this.addCallback=function(g){this.addListener("success",g);return this};this.addErrback=function(g){this.addListener("error",g);return this};this.addCancelback=function(g){this.addListener("cancel",g);return this};this.always=function(g){this.addListener("complete",g);return this};this.emitSuccess=function(){var g=Array.prototype.slice.call(arguments,0);if(!c){c=true;this.emit.apply(this,["success"].concat(g));this.emit("complete")}};this.emitError=function(){var g=Array.prototype.slice.call(arguments,0);if(!c){c=true;this.emit.apply(this,["error"].concat(g));this.emit("complete")}};function b(){var g=Array.prototype.slice.call(arguments,0);a.emit.apply(a,["cancel"].concat(g))}this.cancel=function(){if(!d){d=true;this.removeListener("success");this.removeListener("error");this.removeListener("complete");b()}};this.timeout=function(g){if(typeof g=="undefined"){return e}e=g;if(f){clearTimeout(f);f=null}f=setTimeout(function(){f=null;if(!c&&!d){a.emitError(new Error("timeout"))}},e);return this}};jive.conc.Promise.prototype.then=function(b,a){var c=new jive.conc.Promise();this.addCallback(function(){var d;if(typeof b==="function"){try{d=b.apply(null,arguments);c.emitSuccess(d)}catch(f){c.emitError(f)}}else{c.emitSuccess.apply(c,arguments)}});if(typeof a==="function"){this.addErrback(a)}this.addErrback(function(){c.emitError.apply(c,arguments)});return c};jive.conc.Promise.prototype.map=function(a){return this.then(a)};jive.conc.Promise.prototype.flatMap=function(a){var b=new jive.conc.Promise();this.addCallback(function(){b.proxy(a.apply(null,arguments))}).addErrback(function(){b.emitError.apply(b,arguments)});return b};jive.conc.Promise.prototype.proxy=function(b){var a=this;b.addCallback(function(){a.emitSuccess.apply(a,arguments)}).addErrback(function(){a.emitError.apply(a,arguments)})};jive.conc.Promise.prototype.deferred=function(){var a=new jQuery.Deferred();this.then(function(){a.resolve.apply(a,arguments)},function(){a.reject.apply(a,arguments)});return a.promise()};
;
jive=this.jive||{};jive.conc=jive.conc||{};jive.conc.synchronize=(function(){function a(c){return Object.prototype.toString.call(c)==="[object Array]"}function b(c){return c&&c.addCallback&&c.addErrback&&c.addCancelback}return function(g){var f,d,c=0,h=new jive.conc.Promise();function e(i,j){j.addCallback(function(k){f[i]=k;c-=1;if(c<1){h.emitSuccess(f)}}).addErrback(function(){h.emitError.apply(h,arguments)}).addCancelback(function(){h.cancel.apply(h,arguments)});c+=1}f=a(g)?[]:{};for(d in g){if(g.hasOwnProperty(d)){if(b(g[d])){e(d,g[d])}else{f[d]=g[d]}}}return h}})();
;
var HOSTURL="/";var AJAXPATH="";if(typeof(jive)=="undefined"){jive={}}jive.namespace=function(a,e){var d=a.split("."),c=this,b;for(b=0;b<d.length;b+=1){if(typeof(c[d[b]])==="undefined"){if(b==d.length-1&&typeof(e)!="undefined"){c[d[b]]=e}else{c[d[b]]={}}}c=c[d[b]]}return c};jive.app=jive.app||function(d,c){var e=d.split("."),b=this,a=c||"Main";return this.namespace(d,function(){var g=e.slice(0,-1).reduce(function(j,k){return j[k]},b),h=g[e.last()],i=h[a],f;if($j.isFunction(i)){$j.extend(i,h);i[a]=i;g[e.last()]=i;f=Object.create(i.prototype);i.apply(f,arguments);return f}else{throw ("No class called `"+a+"` was found in jive."+d+".")}})};jive.namespace("gui");jive.namespace("model");jive.namespace("ext.y");jive.namespace("ext.x");jive.namespace("xml");jive.namespace("rte.macros",[]);jive.namespace("rte.plugin");jive.namespace("global");jive.namespace.call(window,"console.log",function(){});jive.namespace.call(window,"console.debug",function(){});jive.namespace.call(window,"console.error",function(){});jive.namespace.call(window,"console.warn",function(){});jive.namespace.call(window,"console.info",function(){});if(typeof(kjs)=="undefined"){kjs={};kjs.require=function(b,a){setTimeout(a,1)}}if(typeof(define)=="undefined"){define=function(b,a){setTimeout(a,1)}};
;
/*
 * jQuery JavaScript Library v1.7
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 3 16:18:21 2011 -0400
 */
var _jqEventCache={};var _jqCreateHandler=(function(){var c=0;function a(e){var d=function(){if(_jqEventCache[e]){_jqEventCache[e].apply(this,arguments)}};d.cid=e;return d}function b(e){var f=c++,d=a(f);_jqEventCache[f]=e;return d}return b})();(function(bc,L){var au=bc.document,bw=bc.navigator,bn=bc.location;var b=(function(){var bH=function(b3,b4){return new bH.fn.init(b3,b4,bF)},bX=bc.jQuery,bJ=bc.$,bF,b1=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bP=/\S/,bL=/^\s+/,bG=/\s+$/,bK=/\d/,bC=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bQ=/^[\],:{}\s]*$/,bZ=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bS=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bM=/(?:^|:|,)(?:\s*\[)+/g,bA=/(webkit)[ \/]([\w.]+)/,bU=/(opera)(?:.*version)?[ \/]([\w.]+)/,bT=/(msie) ([\w.]+)/,bV=/(mozilla)(?:.*? rv:([\w.]+))?/,bD=/-([a-z]|[0-9])/ig,b2=/^-ms-/,bW=function(b3,b4){return(b4+"").toUpperCase()},b0=bw.userAgent,bY,bE,e,bO=Object.prototype.toString,bI=Object.prototype.hasOwnProperty,bB=Array.prototype.push,bN=Array.prototype.slice,bR=String.prototype.trim,bx=Array.prototype.indexOf,bz={};bH.fn=bH.prototype={constructor:bH,init:function(b3,b7,b6){var b5,b8,b4,b9;if(!b3){return this}if(b3.nodeType){this.context=this[0]=b3;this.length=1;return this}if(b3==="body"&&!b7&&au.body){this.context=au;this[0]=au.body;this.selector=b3;this.length=1;return this}if(typeof b3==="string"){if(b3.charAt(0)==="<"&&b3.charAt(b3.length-1)===">"&&b3.length>=3){b5=[null,b3,null]}else{b5=b1.exec(b3)}if(b5&&(b5[1]||!b7)){if(b5[1]){b7=b7 instanceof bH?b7[0]:b7;b9=(b7?b7.ownerDocument||b7:au);b4=bC.exec(b3);if(b4){if(bH.isPlainObject(b7)){b3=[au.createElement(b4[1])];bH.fn.attr.call(b3,b7,true)}else{b3=[b9.createElement(b4[1])]}}else{b4=bH.buildFragment([b5[1]],[b9]);b3=(b4.cacheable?bH.clone(b4.fragment):b4.fragment).childNodes}return bH.merge(this,b3)}else{b8=au.getElementById(b5[2]);if(b8&&b8.parentNode){if(b8.id!==b5[2]){return b6.find(b3)}this.length=1;this[0]=b8}this.context=au;this.selector=b3;return this}}else{if(!b7||b7.jquery){return(b7||b6).find(b3)}else{return this.constructor(b7).find(b3)}}}else{if(bH.isFunction(b3)){return b6.ready(b3)}}if(b3.selector!==L){this.selector=b3.selector;this.context=b3.context}return bH.makeArray(b3,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return bN.call(this,0)},get:function(b3){return b3==null?this.toArray():(b3<0?this[this.length+b3]:this[b3])},pushStack:function(b4,b6,b3){var b5=this.constructor();if(bH.isArray(b4)){bB.apply(b5,b4)}else{bH.merge(b5,b4)}b5.prevObject=this;b5.context=this.context;if(b6==="find"){b5.selector=this.selector+(this.selector?" ":"")+b3}else{if(b6){b5.selector=this.selector+"."+b6+"("+b3+")"}}return b5},each:function(b4,b3){return bH.each(this,b4,b3)},ready:function(b3){bH.bindReady();bE.add(b3);return this},eq:function(b3){return b3===-1?this.slice(b3):this.slice(b3,+b3+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bN.apply(this,arguments),"slice",bN.call(arguments).join(","))},map:function(b3){return this.pushStack(bH.map(this,function(b5,b4){return b3.call(b5,b4,b5)}))},end:function(){return this.prevObject||this.constructor(null)},push:bB,sort:[].sort,splice:[].splice};bH.fn.init.prototype=bH.fn;bH.extend=bH.fn.extend=function(){var cc,b5,b3,b4,b9,ca,b8=arguments[0]||{},b7=1,b6=arguments.length,cb=false;if(typeof b8==="boolean"){cb=b8;b8=arguments[1]||{};b7=2}if(typeof b8!=="object"&&!bH.isFunction(b8)){b8={}}if(b6===b7){b8=this;--b7}for(;b7<b6;b7++){if((cc=arguments[b7])!=null){for(b5 in cc){b3=b8[b5];b4=cc[b5];if(b8===b4){continue}if(cb&&b4&&(bH.isPlainObject(b4)||(b9=bH.isArray(b4)))){if(b9){b9=false;ca=b3&&bH.isArray(b3)?b3:[]}else{ca=b3&&bH.isPlainObject(b3)?b3:{}}b8[b5]=bH.extend(cb,ca,b4)}else{if(b4!==L){b8[b5]=b4}}}}}return b8};bH.extend({noConflict:function(b3){if(bc.$===bH){bc.$=bJ}if(b3&&bc.jQuery===bH){bc.jQuery=bX}return bH},isReady:false,readyWait:1,holdReady:function(b3){if(b3){bH.readyWait++}else{bH.ready(true)}},ready:function(b3){if((b3===true&&!--bH.readyWait)||(b3!==true&&!bH.isReady)){if(!au.body){return setTimeout(bH.ready,1)}bH.isReady=true;if(b3!==true&&--bH.readyWait>0){return}bE.fireWith(au,[bH]);if(bH.fn.trigger){bH(au).trigger("ready").unbind("ready")}}},bindReady:function(){if(bE){return}bE=bH.Callbacks("once memory");if(au.readyState==="complete"){return setTimeout(bH.ready,1)}if(au.addEventListener){au.addEventListener("DOMContentLoaded",e,false);bc.addEventListener("load",bH.ready,false)}else{if(au.attachEvent){au.attachEvent("onreadystatechange",e);bc.attachEvent("onload",bH.ready);var b3=false;try{b3=bc.frameElement==null}catch(b4){}if(au.documentElement.doScroll&&b3){by()}}}},isFunction:function(b3){return bH.type(b3)==="function"},isArray:Array.isArray||function(b3){return bH.type(b3)==="array"},isWindow:function(b3){return b3&&typeof b3==="object"&&"setInterval" in b3},isNumeric:function(b3){return b3!=null&&bK.test(b3)&&!isNaN(b3)},type:function(b3){return b3==null?String(b3):bz[bO.call(b3)]||"object"},isPlainObject:function(b5){if(!b5||bH.type(b5)!=="object"||b5.nodeType||bH.isWindow(b5)){return false}try{if(b5.constructor&&!bI.call(b5,"constructor")&&!bI.call(b5.constructor.prototype,"isPrototypeOf")){return false}}catch(b4){return false}var b3;for(b3 in b5){}return b3===L||bI.call(b5,b3)},isEmptyObject:function(b4){for(var b3 in b4){return false}return true},error:function(b3){throw b3},parseJSON:function(b3){if(typeof b3!=="string"||!b3){return null}b3=bH.trim(b3);if(bc.JSON&&bc.JSON.parse){return bc.JSON.parse(b3)}if(bQ.test(b3.replace(bZ,"@").replace(bS,"]").replace(bM,""))){return(new Function("return "+b3))()}bH.error("Invalid JSON: "+b3)},parseXML:function(b5){var b3,b4;try{if(bc.DOMParser){b4=new DOMParser();b3=b4.parseFromString(b5,"text/xml")}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b5)}}catch(b6){b3=L}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){bH.error("Invalid XML: "+b5)}return b3},noop:function(){},globalEval:function(b3){if(b3&&bP.test(b3)){(bc.execScript||function(b4){bc["eval"].call(bc,b4)})(b3)}},camelCase:function(b3){return b3.replace(b2,"ms-").replace(bD,bW)},nodeName:function(b4,b3){return b4.nodeName&&b4.nodeName.toUpperCase()===b3.toUpperCase()},each:function(b6,b9,b5){var b4,b7=0,b8=b6.length,b3=b8===L||bH.isFunction(b6);if(b5){if(b3){for(b4 in b6){if(b9.apply(b6[b4],b5)===false){break}}}else{for(;b7<b8;){if(b9.apply(b6[b7++],b5)===false){break}}}}else{if(b3){for(b4 in b6){if(b9.call(b6[b4],b4,b6[b4])===false){break}}}else{for(;b7<b8;){if(b9.call(b6[b7],b7,b6[b7++])===false){break}}}}return b6},trim:bR?function(b3){return b3==null?"":bR.call(b3)}:function(b3){return b3==null?"":b3.toString().replace(bL,"").replace(bG,"")},makeArray:function(b6,b4){var b3=b4||[];if(b6!=null){var b5=bH.type(b6);if(b6.length==null||b5==="string"||b5==="function"||b5==="regexp"||bH.isWindow(b6)){bB.call(b3,b6)}else{bH.merge(b3,b6)}}return b3},inArray:function(b5,b6,b4){var b3;if(b6){if(bx){return bx.call(b6,b5,b4)}b3=b6.length;b4=b4?b4<0?Math.max(0,b3+b4):b4:0;for(;b4<b3;b4++){if(b4 in b6&&b6[b4]===b5){return b4}}}return -1},merge:function(b7,b5){var b6=b7.length,b4=0;if(typeof b5.length==="number"){for(var b3=b5.length;b4<b3;b4++){b7[b6++]=b5[b4]}}else{while(b5[b4]!==L){b7[b6++]=b5[b4++]}}b7.length=b6;return b7},grep:function(b4,b9,b3){var b5=[],b8;b3=!!b3;for(var b6=0,b7=b4.length;b6<b7;b6++){b8=!!b9(b4[b6],b6);if(b3!==b8){b5.push(b4[b6])}}return b5},map:function(b3,ca,cb){var b8,b9,b7=[],b5=0,b4=b3.length,b6=b3 instanceof bH||b4!==L&&typeof b4==="number"&&((b4>0&&b3[0]&&b3[b4-1])||b4===0||bH.isArray(b3));if(b6){for(;b5<b4;b5++){b8=ca(b3[b5],b5,cb);if(b8!=null){b7[b7.length]=b8}}}else{for(b9 in b3){b8=ca(b3[b9],b9,cb);if(b8!=null){b7[b7.length]=b8}}}return b7.concat.apply([],b7)},guid:1,proxy:function(b7,b6){if(typeof b6==="string"){var b5=b7[b6];b6=b7;b7=b5}if(!bH.isFunction(b7)){return L}var b3=bN.call(arguments,2),b4=function(){return b7.apply(b6,b3.concat(bN.call(arguments)))};b4.guid=b7.guid=b7.guid||b4.guid||bH.guid++;return b4},access:function(b3,cb,b9,b5,b8,ca){var b4=b3.length;if(typeof cb==="object"){for(var b6 in cb){bH.access(b3,b6,cb[b6],b5,b8,b9)}return b3}if(b9!==L){b5=!ca&&b5&&bH.isFunction(b9);for(var b7=0;b7<b4;b7++){b8(b3[b7],cb,b5?b9.call(b3[b7],b7,b8(b3[b7],cb)):b9,ca)}return b3}return b4?b8(b3[0],cb):L},now:function(){return(new Date()).getTime()},uaMatch:function(b4){b4=b4.toLowerCase();var b3=bA.exec(b4)||bU.exec(b4)||bT.exec(b4)||b4.indexOf("compatible")<0&&bV.exec(b4)||[];return{browser:b3[1]||"",version:b3[2]||"0"}},sub:function(){function b3(b6,b7){return new b3.fn.init(b6,b7)}bH.extend(true,b3,this);b3.superclass=this;b3.fn=b3.prototype=this();b3.fn.constructor=b3;b3.sub=this.sub;b3.fn.init=function b5(b6,b7){if(b7&&b7 instanceof bH&&!(b7 instanceof b3)){b7=b3(b7)}return bH.fn.init.call(this,b6,b7,b4)};b3.fn.init.prototype=b3.fn;var b4=b3(au);return b3},browser:{}});bH.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b4,b3){bz["[object "+b3+"]"]=b3.toLowerCase()});bY=bH.uaMatch(b0);if(bY.browser){bH.browser[bY.browser]=true;bH.browser.version=bY.version}if(bH.browser.webkit){bH.browser.safari=true}if(bP.test("\xA0")){bL=/^[\s\xA0]+/;bG=/[\s\xA0]+$/}bF=bH(au);if(au.addEventListener){e=function(){au.removeEventListener("DOMContentLoaded",e,false);bH.ready()}}else{if(au.attachEvent){e=function(){if(au.readyState==="complete"){au.detachEvent("onreadystatechange",e);bH.ready()}}}}function by(){if(bH.isReady){return}try{au.documentElement.doScroll("left")}catch(b3){setTimeout(by,1);return}bH.ready()}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bH})}return bH})();var a3={};function X(e){var bx=a3[e]={},by,bz;e=e.split(/\s+/);for(by=0,bz=e.length;by<bz;by++){bx[e[by]]=true}return bx}b.Callbacks=function(by){by=by?(a3[by]||X(by)):{};var bD=[],bE=[],bz,bA,bx,bB,bC,bG=function(bH){var bI,bL,bK,bJ,bM;for(bI=0,bL=bH.length;bI<bL;bI++){bK=bH[bI];bJ=b.type(bK);if(bJ==="array"){bG(bK)}else{if(bJ==="function"){if(!by.unique||!bF.has(bK)){bD.push(bK)}}}}},e=function(bI,bH){bH=bH||[];bz=!by.memory||[bI,bH];bA=true;bC=bx||0;bx=0;bB=bD.length;for(;bD&&bC<bB;bC++){if(bD[bC].apply(bI,bH)===false&&by.stopOnFalse){bz=true;break}}bA=false;if(bD){if(!by.once){if(bE&&bE.length){bz=bE.shift();bF.fireWith(bz[0],bz[1])}}else{if(bz===true){bF.disable()}else{bD=[]}}}},bF={add:function(){if(bD){var bH=bD.length;bG(arguments);if(bA){bB=bD.length}else{if(bz&&bz!==true){bx=bH;e(bz[0],bz[1])}}}return this},remove:function(){if(bD){var bH=arguments,bJ=0,bK=bH.length;for(;bJ<bK;bJ++){for(var bI=0;bI<bD.length;bI++){if(bH[bJ]===bD[bI]){if(bA){if(bI<=bB){bB--;if(bI<=bC){bC--}}}bD.splice(bI--,1);if(by.unique){break}}}}}return this},has:function(bI){if(bD){var bH=0,bJ=bD.length;for(;bH<bJ;bH++){if(bI===bD[bH]){return true}}}return false},empty:function(){bD=[];return this},disable:function(){bD=bE=bz=L;return this},disabled:function(){return !bD},lock:function(){bE=L;if(!bz||bz===true){bF.disable()}return this},locked:function(){return !bE},fireWith:function(bI,bH){if(bE){if(bA){if(!by.once){bE.push([bI,bH])}}else{if(!(by.once&&bz)){e(bI,bH)}}}return this},fire:function(){bF.fireWith(this,arguments);return this},fired:function(){return !!bz}};return bF};var aJ=[].slice;b.extend({Deferred:function(bA){var bz=b.Callbacks("once memory"),by=b.Callbacks("once memory"),bx=b.Callbacks("memory"),e="pending",bC={resolve:bz,reject:by,notify:bx},bE={done:bz.add,fail:by.add,progress:bx.add,state:function(){return e},isResolved:bz.fired,isRejected:by.fired,then:function(bG,bF,bH){bD.done(bG).fail(bF).progress(bH);return this},always:function(){return bD.done.apply(bD,arguments).fail.apply(bD,arguments)},pipe:function(bH,bG,bF){return b.Deferred(function(bI){b.each({done:[bH,"resolve"],fail:[bG,"reject"],progress:[bF,"notify"]},function(bK,bN){var bJ=bN[0],bM=bN[1],bL;if(b.isFunction(bJ)){bD[bK](function(){bL=bJ.apply(this,arguments);if(bL&&b.isFunction(bL.promise)){bL.promise().then(bI.resolve,bI.reject,bI.notify)}else{bI[bM+"With"](this===bD?bI:this,[bL])}})}else{bD[bK](bI[bM])}})}).promise()},promise:function(bG){if(bG==null){bG=bE}else{for(var bF in bE){bG[bF]=bE[bF]}}return bG}},bD=bE.promise({}),bB;for(bB in bC){bD[bB]=bC[bB].fire;bD[bB+"With"]=bC[bB].fireWith}bD.done(function(){e="resolved"},by.disable,bx.lock).fail(function(){e="rejected"},bz.disable,bx.lock);if(bA){bA.call(bD,bD)}return bD},when:function(bC){var bz=aJ.call(arguments,0),bx=0,e=bz.length,bD=new Array(e),by=e,bA=e,bE=e<=1&&bC&&b.isFunction(bC.promise)?bC:b.Deferred(),bG=bE.promise();function bF(bH){return function(bI){bz[bH]=arguments.length>1?aJ.call(arguments,0):bI;if(!(--by)){bE.resolveWith(bE,bz)}}}function bB(bH){return function(bI){bD[bH]=arguments.length>1?aJ.call(arguments,0):bI;bE.notifyWith(bG,bD)}}if(e>1){for(;bx<e;bx++){if(bz[bx]&&bz[bx].promise&&b.isFunction(bz[bx].promise)){bz[bx].promise().then(bF(bx),bE.reject,bB(bx))}else{--by}}if(!by){bE.resolveWith(bE,bz)}}else{if(bE!==bC){bE.resolveWith(bE,e?[bC]:[])}}return bG}});b.support=(function(){var bH=au.createElement("div"),bO=au.documentElement,bA,bP,bI,by,bG,bB,bE,bx,bF,bJ,bD,bN,bL,bz,bC,bK,bQ;bH.setAttribute("className","t");bH.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>";bA=bH.getElementsByTagName("*");bP=bH.getElementsByTagName("a")[0];if(!bA||!bA.length||!bP){return{}}bI=au.createElement("select");by=bI.appendChild(au.createElement("option"));bG=bH.getElementsByTagName("input")[0];bE={leadingWhitespace:(bH.firstChild.nodeType===3),tbody:!bH.getElementsByTagName("tbody").length,htmlSerialize:!!bH.getElementsByTagName("link").length,style:/top/.test(bP.getAttribute("style")),hrefNormalized:(bP.getAttribute("href")==="/a"),opacity:/^0.55/.test(bP.style.opacity),cssFloat:!!bP.style.cssFloat,unknownElems:!!bH.getElementsByTagName("nav").length,checkOn:(bG.value==="on"),optSelected:by.selected,getSetAttribute:bH.className!=="t",enctype:!!au.createElement("form").enctype,submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bG.checked=true;bE.noCloneChecked=bG.cloneNode(true).checked;bI.disabled=true;bE.optDisabled=!by.disabled;try{delete bH.test}catch(bM){bE.deleteExpando=false}if(!bH.addEventListener&&bH.attachEvent&&bH.fireEvent){bH.attachEvent("onclick",function(){bE.noCloneEvent=false});bH.cloneNode(true).fireEvent("onclick")}bG=au.createElement("input");bG.value="t";bG.setAttribute("type","radio");bE.radioValue=bG.value==="t";bG.setAttribute("checked","checked");bH.appendChild(bG);bx=au.createDocumentFragment();bx.appendChild(bH.lastChild);bE.checkClone=bx.cloneNode(true).cloneNode(true).lastChild.checked;bH.innerHTML="";bH.style.width=bH.style.paddingLeft="1px";bF=au.getElementsByTagName("body")[0];bD=au.createElement(bF?"div":"body");bN={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(bF){b.extend(bN,{position:"absolute",left:"-999px",top:"-999px"})}for(bK in bN){bD.style[bK]=bN[bK]}bD.appendChild(bH);bJ=bF||bO;bJ.insertBefore(bD,bJ.firstChild);bE.appendChecked=bG.checked;bE.boxModel=bH.offsetWidth===2;if("zoom" in bH.style){bH.style.display="inline";bH.style.zoom=1;bE.inlineBlockNeedsLayout=(bH.offsetWidth===2);bH.style.display="";bH.innerHTML="<div style='width:4px;'></div>";bE.shrinkWrapBlocks=(bH.offsetWidth!==2)}bH.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bL=bH.getElementsByTagName("td");bQ=(bL[0].offsetHeight===0);bL[0].style.display="";bL[1].style.display="none";bE.reliableHiddenOffsets=bQ&&(bL[0].offsetHeight===0);bH.innerHTML="";if(au.defaultView&&au.defaultView.getComputedStyle){bB=au.createElement("div");bB.style.width="0";bB.style.marginRight="0";bH.appendChild(bB);bE.reliableMarginRight=(parseInt((au.defaultView.getComputedStyle(bB,null)||{marginRight:0}).marginRight,10)||0)===0}if(bH.attachEvent){for(bK in {submit:1,change:1,focusin:1}){bC="on"+bK;bQ=(bC in bH);if(!bQ){bH.setAttribute(bC,"return;");bQ=(typeof bH[bC]==="function")}bE[bK+"Bubbles"]=bQ}}b(function(){var bS,bZ,b0,bY,bT,bU,bR=1,bX="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",bW="visibility:hidden;border:0;",e="style='"+bX+"border:5px solid #000;padding:0;'",bV="<div "+e+"><div></div></div><table "+e+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";bF=au.getElementsByTagName("body")[0];if(!bF){return}bS=au.createElement("div");bS.style.cssText=bW+"width:0;height:0;position:static;top:0;margin-top:"+bR+"px";bF.insertBefore(bS,bF.firstChild);bD=au.createElement("div");bD.style.cssText=bX+bW;bD.innerHTML=bV;bS.appendChild(bD);bZ=bD.firstChild;b0=bZ.firstChild;bT=bZ.nextSibling.firstChild.firstChild;bU={doesNotAddBorder:(b0.offsetTop!==5),doesAddBorderForTableAndCells:(bT.offsetTop===5)};b0.style.position="fixed";b0.style.top="20px";bU.fixedPosition=(b0.offsetTop===20||b0.offsetTop===15);b0.style.position=b0.style.top="";bZ.style.overflow="hidden";bZ.style.position="relative";bU.subtractsBorderForOverflowNotVisible=(b0.offsetTop===-5);bU.doesNotIncludeMarginInBodyOffset=(bF.offsetTop!==bR);bF.removeChild(bS);bD=bS=null;b.extend(bE,bU)});bD.innerHTML="";bJ.removeChild(bD);bD=bx=bI=by=bF=bB=bH=bG=null;return bE})();b.boxModel=b.support.boxModel;var aS=/^(?:\{.*\}|\[.*\])$/,az=/([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!T(e)},data:function(bz,bx,bB,bA){if(!b.acceptData(bz)){return}var bI,bC,bF,bG=b.expando,bE=typeof bx==="string",bH=bz.nodeType,e=bH?b.cache:bz,by=bH?bz[b.expando]:bz[b.expando]&&b.expando,bD=bx==="events";if((!by||!e[by]||(!bD&&!bA&&!e[by].data))&&bE&&bB===L){return}if(!by){if(bH){bz[b.expando]=by=++b.uuid}else{by=b.expando}}if(!e[by]){e[by]={};if(!bH){e[by].toJSON=b.noop}}if(typeof bx==="object"||typeof bx==="function"){if(bA){e[by]=b.extend(e[by],bx)}else{e[by].data=b.extend(e[by].data,bx)}}bI=bC=e[by];if(!bA){if(!bC.data){bC.data={}}bC=bC.data}if(bB!==L){bC[b.camelCase(bx)]=bB}if(bD&&!bC[bx]){return bI.events}if(bE){bF=bC[bx];if(bF==null){bF=bC[b.camelCase(bx)]}}else{bF=bC}return bF},removeData:function(bz,bx,bA){if(!b.acceptData(bz)){return}var bD,bC,bB,bE=b.expando,bF=bz.nodeType,e=bF?b.cache:bz,by=bF?bz[b.expando]:b.expando;if(!e[by]){return}if(bx){bD=bA?e[by]:e[by].data;if(bD){if(b.isArray(bx)){bx=bx}else{if(bx in bD){bx=[bx]}else{bx=b.camelCase(bx);if(bx in bD){bx=[bx]}else{bx=bx.split(" ")}}}for(bC=0,bB=bx.length;bC<bB;bC++){delete bD[bx[bC]]}if(!(bA?T:b.isEmptyObject)(bD)){return}}}if(!bA){delete e[by].data;if(!T(e[by])){return}}if(b.support.deleteExpando||!e.setInterval){delete e[by]}else{e[by]=null}if(bF){if(b.support.deleteExpando){delete bz[b.expando]}else{if(bz.removeAttribute){bz.removeAttribute(b.expando)}else{bz[b.expando]=null}}}},_data:function(bx,e,by){return b.data(bx,e,by,true)},acceptData:function(bx){if(bx.nodeName){var e=b.noData[bx.nodeName.toLowerCase()];if(e){return !(e===true||bx.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bA,bC){var bD,e,by,bB=null;if(typeof bA==="undefined"){if(this.length){bB=b.data(this[0]);if(this[0].nodeType===1&&!b._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var bz=0,bx=e.length;bz<bx;bz++){by=e[bz].name;if(by.indexOf("data-")===0){by=b.camelCase(by.substring(5));a6(this[0],by,bB[by])}}b._data(this[0],"parsedAttrs",true)}}return bB}else{if(typeof bA==="object"){return this.each(function(){b.data(this,bA)})}}bD=bA.split(".");bD[1]=bD[1]?"."+bD[1]:"";if(bC===L){bB=this.triggerHandler("getData"+bD[1]+"!",[bD[0]]);if(bB===L&&this.length){bB=b.data(this[0],bA);bB=a6(this[0],bA,bB)}return bB===L&&bD[1]?this.data(bD[0]):bB}else{return this.each(function(){var bF=b(this),bE=[bD[0],bC];bF.triggerHandler("setData"+bD[1]+"!",bE);b.data(this,bA,bC);bF.triggerHandler("changeData"+bD[1]+"!",bE)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a6(bz,by,bA){if(bA===L&&bz.nodeType===1){var bx="data-"+by.replace(az,"-$1").toLowerCase();bA=bz.getAttribute(bx);if(typeof bA==="string"){try{bA=bA==="true"?true:bA==="false"?false:bA==="null"?null:b.isNumeric(bA)?parseFloat(bA):aS.test(bA)?b.parseJSON(bA):bA}catch(bB){}b.data(bz,by,bA)}else{bA=L}}return bA}function T(bx){for(var e in bx){if(e==="data"&&b.isEmptyObject(bx[e])){continue}if(e!=="toJSON"){return false}}return true}function bj(bA,bz,bC){var by=bz+"defer",bx=bz+"queue",e=bz+"mark",bB=b._data(bA,by);if(bB&&(bC==="queue"||!b._data(bA,bx))&&(bC==="mark"||!b._data(bA,e))){setTimeout(function(){if(!b._data(bA,bx)&&!b._data(bA,e)){b.removeData(bA,by,true);bB.fire()}},0)}}b.extend({_mark:function(bx,e){if(bx){e=(e||"fx")+"mark";b._data(bx,e,(b._data(bx,e)||0)+1)}},_unmark:function(bA,bz,bx){if(bA!==true){bx=bz;bz=bA;bA=false}if(bz){bx=bx||"fx";var e=bx+"mark",by=bA?0:((b._data(bz,e)||1)-1);if(by){b._data(bz,e,by)}else{b.removeData(bz,e,true);bj(bz,bx,"mark")}}},queue:function(bx,e,bz){var by;if(bx){e=(e||"fx")+"queue";by=b._data(bx,e);if(bz){if(!by||b.isArray(bz)){by=b._data(bx,e,b.makeArray(bz))}else{by.push(bz)}}return by||[]}},dequeue:function(bA,bz){bz=bz||"fx";var bx=b.queue(bA,bz),by=bx.shift(),e={};if(by==="inprogress"){by=bx.shift()}if(by){if(bz==="fx"){bx.unshift("inprogress")}b._data(bA,bz+".run",e);by.call(bA,function(){b.dequeue(bA,bz)},e)}if(!bx.length){b.removeData(bA,bz+"queue "+bz+".run",true);bj(bA,bz,"queue")}}});b.fn.extend({queue:function(e,bx){if(typeof e!=="string"){bx=e;e="fx"}if(bx===L){return b.queue(this[0],e)}return this.each(function(){var by=b.queue(this,e,bx);if(e==="fx"&&by[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(bx,e){bx=b.fx?b.fx.speeds[bx]||bx:bx;e=e||"fx";return this.queue(e,function(bz,by){var bA=setTimeout(bz,bx);by.stop=function(){clearTimeout(bA)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bF,by){if(typeof bF!=="string"){by=bF;bF=L}bF=bF||"fx";var e=b.Deferred(),bx=this,bA=bx.length,bD=1,bB=bF+"defer",bC=bF+"queue",bE=bF+"mark",bz;function bG(){if(!(--bD)){e.resolveWith(bx,[bx])}}while(bA--){if((bz=b.data(bx[bA],bB,L,true)||(b.data(bx[bA],bC,L,true)||b.data(bx[bA],bE,L,true))&&b.data(bx[bA],bB,b.Callbacks("once memory"),true))){bD++;bz.add(bG)}}bG();return e.promise()}});var aP=/[\n\t\r]/g,af=/\s+/,aU=/\r/g,g=/^(?:button|input)$/i,D=/^(?:button|input|object|select|textarea)$/i,l=/^a(?:rea)?$/i,an=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,F=b.support.getSetAttribute,bf,aY,aE;b.fn.extend({attr:function(e,bx){return b.access(this,e,bx,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,bx){return b.access(this,e,bx,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=L;delete this[e]}catch(bx){}})},addClass:function(bA){var bC,by,bx,bz,bB,bD,e;if(b.isFunction(bA)){return this.each(function(bE){b(this).addClass(bA.call(this,bE,this.className))})}if(bA&&typeof bA==="string"){bC=bA.split(af);for(by=0,bx=this.length;by<bx;by++){bz=this[by];if(bz.nodeType===1){if(!bz.className&&bC.length===1){bz.className=bA}else{bB=" "+bz.className+" ";for(bD=0,e=bC.length;bD<e;bD++){if(!~bB.indexOf(" "+bC[bD]+" ")){bB+=bC[bD]+" "}}bz.className=b.trim(bB)}}}}return this},removeClass:function(bB){var bC,by,bx,bA,bz,bD,e;if(b.isFunction(bB)){return this.each(function(bE){b(this).removeClass(bB.call(this,bE,this.className))})}if((bB&&typeof bB==="string")||bB===L){bC=(bB||"").split(af);for(by=0,bx=this.length;by<bx;by++){bA=this[by];if(bA.nodeType===1&&bA.className){if(bB){bz=(" "+bA.className+" ").replace(aP," ");for(bD=0,e=bC.length;bD<e;bD++){bz=bz.replace(" "+bC[bD]+" "," ")}bA.className=b.trim(bz)}else{bA.className=""}}}}return this},toggleClass:function(bz,bx){var by=typeof bz,e=typeof bx==="boolean";if(b.isFunction(bz)){return this.each(function(bA){b(this).toggleClass(bz.call(this,bA,this.className,bx),bx)})}return this.each(function(){if(by==="string"){var bC,bB=0,bA=b(this),bD=bx,bE=bz.split(af);while((bC=bE[bB++])){bD=e?bD:!bA.hasClass(bC);bA[bD?"addClass":"removeClass"](bC)}}else{if(by==="undefined"||by==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bz===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bz=" "+e+" ",by=0,bx=this.length;for(;by<bx;by++){if(this[by].nodeType===1&&(" "+this[by].className+" ").replace(aP," ").indexOf(bz)>-1){return true}}return false},val:function(bz){var e,bx,bA,by=this[0];if(!arguments.length){if(by){e=b.valHooks[by.nodeName.toLowerCase()]||b.valHooks[by.type];if(e&&"get" in e&&(bx=e.get(by,"value"))!==L){return bx}bx=by.value;return typeof bx==="string"?bx.replace(aU,""):bx==null?"":bx}return L}bA=b.isFunction(bz);return this.each(function(bC){var bB=b(this),bD;if(this.nodeType!==1){return}if(bA){bD=bz.call(this,bC,bB.val())}else{bD=bz}if(bD==null){bD=""}else{if(typeof bD==="number"){bD+=""}else{if(b.isArray(bD)){bD=b.map(bD,function(bE){return bE==null?"":bE+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bD,"value")===L){this.value=bD}})}});b.extend({valHooks:{option:{get:function(e){var bx=e.attributes.value;return !bx||bx.specified?e.value:e.text}},select:{get:function(e){var bC,bx,bB,bz,bA=e.selectedIndex,bD=[],bE=e.options,by=e.type==="select-one";if(bA<0){return null}bx=by?bA:0;bB=by?bA+1:bE.length;for(;bx<bB;bx++){bz=bE[bx];if(bz.selected&&(b.support.optDisabled?!bz.disabled:bz.getAttribute("disabled")===null)&&(!bz.parentNode.disabled||!b.nodeName(bz.parentNode,"optgroup"))){bC=b(bz).val();if(by){return bC}bD.push(bC)}}if(by&&!bD.length&&bE.length){return b(bE[bA]).val()}return bD},set:function(bx,by){var e=b.makeArray(by);b(bx).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){bx.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(bC,bz,bD,bB){var by,e,bA,bx=bC.nodeType;if(!bC||bx===3||bx===8||bx===2){return L}if(bB&&bz in b.attrFn){return b(bC)[bz](bD)}if(!("getAttribute" in bC)){return b.prop(bC,bz,bD)}bA=bx!==1||!b.isXMLDoc(bC);if(bA){bz=bz.toLowerCase();e=b.attrHooks[bz]||(an.test(bz)?aY:bf)}if(bD!==L){if(bD===null){b.removeAttr(bC,bz);return L}else{if(e&&"set" in e&&bA&&(by=e.set(bC,bD,bz))!==L){return by}else{bC.setAttribute(bz,""+bD);return bD}}}else{if(e&&"get" in e&&bA&&(by=e.get(bC,bz))!==null){return by}else{by=bC.getAttribute(bz);return by===null?L:by}}},removeAttr:function(bz,bB){var bA,bC,bx,e,by=0;if(bz.nodeType===1){bC=(bB||"").split(af);e=bC.length;for(;by<e;by++){bx=bC[by].toLowerCase();bA=b.propFix[bx]||bx;b.attr(bz,bx,"");bz.removeAttribute(F?bx:bA);if(an.test(bx)&&bA in bz){bz[bA]=false}}}},attrHooks:{type:{set:function(e,bx){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bx==="radio"&&b.nodeName(e,"input")){var by=e.value;e.setAttribute("type",bx);if(by){e.value=by}return bx}}}},value:{get:function(bx,e){if(bf&&b.nodeName(bx,"button")){return bf.get(bx,e)}return e in bx?bx.value:null},set:function(bx,by,e){if(bf&&b.nodeName(bx,"button")){return bf.set(bx,by,e)}bx.value=by}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bB,bz,bC){var by,e,bA,bx=bB.nodeType;if(!bB||bx===3||bx===8||bx===2){return L}bA=bx!==1||!b.isXMLDoc(bB);if(bA){bz=b.propFix[bz]||bz;e=b.propHooks[bz]}if(bC!==L){if(e&&"set" in e&&(by=e.set(bB,bC,bz))!==L){return by}else{return(bB[bz]=bC)}}else{if(e&&"get" in e&&(by=e.get(bB,bz))!==null){return by}else{return bB[bz]}}},propHooks:{tabIndex:{get:function(bx){var e=bx.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):D.test(bx.nodeName)||l.test(bx.nodeName)&&bx.href?0:L}}}});b.attrHooks.tabindex=b.propHooks.tabIndex;aY={get:function(bx,e){var bz,by=b.prop(bx,e);return by===true||typeof by!=="boolean"&&(bz=bx.getAttributeNode(e))&&bz.nodeValue!==false?e.toLowerCase():L},set:function(bx,bz,e){var by;if(bz===false){b.removeAttr(bx,e)}else{by=b.propFix[e]||e;if(by in bx){bx[by]=true}bx.setAttribute(e,e.toLowerCase())}return e}};if(!F){aE={name:true,id:true};bf=b.valHooks.button={get:function(by,bx){var e;e=by.getAttributeNode(bx);return e&&(aE[bx]?e.nodeValue!=="":e.specified)?e.nodeValue:L},set:function(by,bz,bx){var e=by.getAttributeNode(bx);if(!e){e=au.createAttribute(bx);by.setAttributeNode(e)}return(e.nodeValue=bz+"")}};b.attrHooks.tabindex.set=bf.set;b.each(["width","height"],function(bx,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(by,bz){if(bz===""){by.setAttribute(e,"auto");return bz}}})});b.attrHooks.contenteditable={get:bf.get,set:function(bx,by,e){if(by===""){by="false"}bf.set(bx,by,e)}}}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bx,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bz){var by=bz.getAttribute(e,2);return by===null?L:by}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||L},set:function(e,bx){return(e.style.cssText=""+bx)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bx){var e=bx.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!b.support.enctype){b.propFix.enctype="encoding"}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bx){if(b.isArray(bx)){return(e.checked=b.inArray(b(e).val(),bx)>=0)}}})});var a0=/\.(.*)$/,be=/^(?:textarea|input|select)$/i,O=/\./g,bk=/ /g,aG=/[^\w\s.|`]/g,n=/^([^\.]*)?(?:\.(.+))?$/,J=/\bhover(\.\S+)?/,aO=/^key/,bg=/^(?:mouse|contextmenu)|click/,U=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Y=function(e){var bx=U.exec(e);if(bx){bx[1]=(bx[1]||"").toLowerCase();bx[3]=bx[3]&&new RegExp("(?:^|\\s)"+bx[3]+"(?:\\s|$)")}return bx},j=function(bx,e){return((!e[1]||bx.nodeName.toLowerCase()===e[1])&&(!e[2]||bx.id===e[2])&&(!e[3]||e[3].test(bx.className)))},bv=function(e){return b.event.special.hover?e:e.replace(J,"mouseenter$1 mouseleave$1")};b.event={add:function(bz,bE,bL,bC,bA){var bF,bD,bM,bK,bJ,bH,e,bI,bx,bB,by,bG;if(bz.nodeType===3||bz.nodeType===8||!bE||!bL||!(bF=b._data(bz))){return}if(bL.handler){bx=bL;bL=bx.handler}if(!bL.guid){bL.guid=b.guid++}bM=bF.events;if(!bM){bF.events=bM={}}bD=bF.handle;if(!bD){bF.handle=bD=function(bN){return typeof b!=="undefined"&&(!bN||b.event.triggered!==bN.type)?b.event.dispatch.apply(bD.elem,arguments):L};bD.elem=bz}bE=bv(bE).split(" ");for(bK=0;bK<bE.length;bK++){bJ=n.exec(bE[bK])||[];bH=bJ[1];e=(bJ[2]||"").split(".").sort();bG=b.event.special[bH]||{};bH=(bA?bG.delegateType:bG.bindType)||bH;bG=b.event.special[bH]||{};bI=b.extend({type:bH,origType:bJ[1],data:bC,handler:bL,guid:bL.guid,selector:bA,namespace:e.join(".")},bx);if(bA){bI.quick=Y(bA);if(!bI.quick&&b.expr.match.POS.test(bA)){bI.isPositional=true}}by=bM[bH];if(!by){by=bM[bH]=[];by.delegateCount=0;if(!bG.setup||bG.setup.call(bz,bC,e,bD)===false){if(bz.addEventListener){bz.addEventListener(bH,bD,false)}else{if(bz.attachEvent){bD.realHandle=bD.realHandle||_jqCreateHandler(bD);bz.attachEvent("on"+bH,bD.realHandle)}}}}if(bG.add){bG.add.call(bz,bI);if(!bI.handler.guid){bI.handler.guid=bL.guid}}if(bA){by.splice(by.delegateCount++,0,bI)}else{by.push(bI)}b.event.global[bH]=true}bz=null},global:{},remove:function(by,bD,bJ,bz){var bE=b.hasData(by)&&b._data(by),bK,bL,bG,bx,bA,bB,bI,bF,bC,e,bH;if(!bE||!(bI=bE.events)){return}bD=bv(bD||"").split(" ");for(bK=0;bK<bD.length;bK++){bL=n.exec(bD[bK])||[];bG=bL[1];bx=bL[2];if(!bG){bx=bx?"."+bx:"";for(bB in bI){b.event.remove(by,bB+bx,bJ,bz)}return}bF=b.event.special[bG]||{};bG=(bz?bF.delegateType:bF.bindType)||bG;e=bI[bG]||[];bA=e.length;bx=bx?new RegExp("(^|\\.)"+bx.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(bJ||bx||bz||bF.remove){for(bB=0;bB<e.length;bB++){bH=e[bB];if(!bJ||bJ.guid===bH.guid){if(!bx||bx.test(bH.namespace)){if(!bz||bz===bH.selector||bz==="**"&&bH.selector){e.splice(bB--,1);if(bH.selector){e.delegateCount--}if(bF.remove){bF.remove.call(by,bH)}}}}}}else{e.length=0}if(e.length===0&&bA!==e.length){if(!bF.teardown||bF.teardown.call(by,bx)===false){b.removeEvent(by,bG,bE.handle.realHandle||bE.handle)}delete bI[bG]}}if(b.isEmptyObject(bI)){bC=bE.handle;if(bC){bC.elem=null}if(bC&&bC.realHandle){delete _jqEventCache[bC.realHandle.cid]}b.removeData(by,["events","handle"],true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(bx,bF,bC,bL){if(bC&&(bC.nodeType===3||bC.nodeType===8)){return}var bI=bx.type||bx,bz=[],e,by,bE,bJ,bB,bA,bH,bG,bD,bK;if(bI.indexOf("!")>=0){bI=bI.slice(0,-1);by=true}if(bI.indexOf(".")>=0){bz=bI.split(".");bI=bz.shift();bz.sort()}if((!bC||b.event.customEvent[bI])&&!b.event.global[bI]){return}bx=typeof bx==="object"?bx[b.expando]?bx:new b.Event(bI,bx):new b.Event(bI);bx.type=bI;bx.isTrigger=true;bx.exclusive=by;bx.namespace=bz.join(".");bx.namespace_re=bx.namespace?new RegExp("(^|\\.)"+bz.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;bA=bI.indexOf(":")<0?"on"+bI:"";if(bL||!bC){bx.preventDefault()}if(!bC){e=b.cache;for(bE in e){if(e[bE].events&&e[bE].events[bI]){b.event.trigger(bx,bF,e[bE].handle.elem,true)}}return}bx.result=L;if(!bx.target){bx.target=bC}bF=bF!=null?b.makeArray(bF):[];bF.unshift(bx);bH=b.event.special[bI]||{};if(bH.trigger&&bH.trigger.apply(bC,bF)===false){return}bD=[[bC,bH.bindType||bI]];if(!bL&&!bH.noBubble&&!b.isWindow(bC)){bK=bH.delegateType||bI;bB=null;for(bJ=bC.parentNode;bJ;bJ=bJ.parentNode){bD.push([bJ,bK]);bB=bJ}if(bB&&bB===bC.ownerDocument){bD.push([bB.defaultView||bB.parentWindow||bc,bK])}}for(bE=0;bE<bD.length;bE++){bJ=bD[bE][0];bx.type=bD[bE][1];bG=(b._data(bJ,"events")||{})[bx.type]&&b._data(bJ,"handle");if(bG){bG.apply(bJ,bF)}bG=bA&&bJ[bA];if(bG&&b.acceptData(bJ)){bG.apply(bJ,bF)}if(bx.isPropagationStopped()){break}}bx.type=bI;if(!bx.isDefaultPrevented()){if((!bH._default||bH._default.apply(bC.ownerDocument,bF)===false)&&!(bI==="click"&&b.nodeName(bC,"a"))&&b.acceptData(bC)){if(bA&&bC[bI]&&((bI!=="focus"&&bI!=="blur")||bx.target.offsetWidth!==0)&&!b.isWindow(bC)){bB=bC[bA];if(bB){bC[bA]=null}b.event.triggered=bI;bC[bI]();b.event.triggered=L;if(bB){bC[bA]=bB}}}}return bx.result},dispatch:function(bI){bI=b.event.fix(bI||bc.event);var bE=((b._data(this,"events")||{})[bI.type]||[]),bD=bE.delegateCount,bz=[].slice.call(arguments,0),bF=!bI.exclusive&&!bI.namespace,bB=(b.event.special[bI.type]||{}).handle,bx=[],bK,bH,bA,bM,bJ,bC,by,e,bG,bL,bN;bz[0]=bI;bI.delegateTarget=this;if(bD&&!bI.target.disabled&&!(bI.button&&bI.type==="click")){for(bA=bI.target;bA!=this;bA=bA.parentNode||this){bJ={};by=[];for(bK=0;bK<bD;bK++){e=bE[bK];bG=e.selector;bL=bJ[bG];if(e.isPositional){bL=(bL||(bJ[bG]=b(bG))).index(bA)>=0}else{if(bL===L){bL=bJ[bG]=(e.quick?j(bA,e.quick):b(bA).is(bG))}}if(bL){by.push(e)}}if(by.length){bx.push({elem:bA,matches:by})}}}if(bE.length>bD){bx.push({elem:this,matches:bE.slice(bD)})}for(bK=0;bK<bx.length&&!bI.isPropagationStopped();bK++){bC=bx[bK];bI.currentTarget=bC.elem;for(bH=0;bH<bC.matches.length&&!bI.isImmediatePropagationStopped();bH++){e=bC.matches[bH];if(bF||(!bI.namespace&&!e.namespace)||bI.namespace_re&&bI.namespace_re.test(e.namespace)){bI.data=e.data;bI.handleObj=e;bM=(bB||e.handler).apply(bC.elem,bz);if(bM!==L){bI.result=bM;if(bM===false){bI.preventDefault();bI.stopPropagation()}}}}}return bI.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(bx,e){if(bx.which==null){bx.which=e.charCode!=null?e.charCode:e.keyCode}return bx}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(bz,by){var bA,bB,e,bx=by.button,bC=by.fromElement;if(bz.pageX==null&&by.clientX!=null){bA=bz.target.ownerDocument||au;bB=bA.documentElement;e=bA.body;bz.pageX=by.clientX+(bB&&bB.scrollLeft||e&&e.scrollLeft||0)-(bB&&bB.clientLeft||e&&e.clientLeft||0);bz.pageY=by.clientY+(bB&&bB.scrollTop||e&&e.scrollTop||0)-(bB&&bB.clientTop||e&&e.clientTop||0)}if(!bz.relatedTarget&&bC){bz.relatedTarget=bC===bz.target?by.toElement:bC}if(!bz.which&&bx!==L){bz.which=(bx&1?1:(bx&2?3:(bx&4?2:0)))}return bz}},fix:function(by){if(by[b.expando]){return by}var bx,bB,e=by,bz=b.event.fixHooks[by.type]||{},bA=bz.props?this.props.concat(bz.props):this.props;by=b.Event(e);for(bx=bA.length;bx;){bB=bA[--bx];by[bB]=e[bB]}if(!by.target){by.target=e.srcElement||au}if(by.target.nodeType===3){by.target=by.target.parentNode}if(by.metaKey===L){by.metaKey=by.ctrlKey}return bz.filter?bz.filter(by,e):by},special:{ready:{setup:b.bindReady},focus:{delegateType:"focusin",noBubble:true},blur:{delegateType:"focusout",noBubble:true},beforeunload:{setup:function(by,bx,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(bx,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(by,bA,bz,bx){var bB=b.extend(new b.Event(),bz,{type:by,isSimulated:true,originalEvent:{}});if(bx){b.event.trigger(bB,null,bA)}else{b.event.dispatch.call(bA,bB)}if(bB.isDefaultPrevented()){bz.preventDefault()}}};b.event.handle=b.event.dispatch;b.removeEvent=au.removeEventListener?function(bx,e,by){if(bx.removeEventListener){bx.removeEventListener(e,by,false)}}:function(bx,e,by){if(bx.detachEvent){bx.detachEvent("on"+e,by)}};b.Event=function(bx,e){if(!(this instanceof b.Event)){return new b.Event(bx,e)}if(bx&&bx.type){this.originalEvent=bx;this.type=bx.type;this.isDefaultPrevented=(bx.defaultPrevented||bx.returnValue===false||bx.getPreventDefault&&bx.getPreventDefault())?i:bm}else{this.type=bx}if(e){b.extend(this,e)}this.timeStamp=bx&&bx.timeStamp||b.now();this[b.expando]=true};function bm(){return false}function i(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var bx=this.originalEvent;if(!bx){return}if(bx.preventDefault){bx.preventDefault()}else{bx.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=i;var bx=this.originalEvent;if(!bx){return}if(bx.stopPropagation){bx.stopPropagation()}bx.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i;this.stopPropagation()},isDefaultPrevented:bm,isPropagationStopped:bm,isImmediatePropagationStopped:bm};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bx,e){b.event.special[bx]=b.event.special[e]={delegateType:e,bindType:e,handle:function(bB){var bE=this,bD=bB.relatedTarget,bA=bB.handleObj,by=bA.selector,bC,bz;if(!bD||bA.origType===bB.type||(bD!==bE&&!b.contains(bE,bD))){bC=bB.type;bB.type=bA.origType;bz=bA.handler.apply(this,arguments);bB.type=bC}return bz}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(){if(b.nodeName(this,"form")){return false}b.event.add(this,"click._submit keypress._submit",function(bz){var by=bz.target,bx=b.nodeName(by,"input")||b.nodeName(by,"button")?by.form:L;if(bx&&!bx._submit_attached){b.event.add(bx,"submit._submit",function(e){if(this.parentNode){b.event.simulate("submit",this.parentNode,e,true)}});bx._submit_attached=true}})},teardown:function(){if(b.nodeName(this,"form")){return false}b.event.remove(this,"._submit")}}}if(!b.support.changeBubbles){b.event.special.change={setup:function(){if(be.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){b.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});b.event.add(this,"click._change",function(e){if(this._just_changed){this._just_changed=false;b.event.simulate("change",this,e,true)}})}return false}b.event.add(this,"beforeactivate._change",function(by){var bx=by.target;if(be.test(bx.nodeName)&&!bx._change_attached){b.event.add(bx,"change._change",function(e){if(this.parentNode&&!e.isSimulated){b.event.simulate("change",this.parentNode,e,true)}});bx._change_attached=true}})},handle:function(bx){var e=bx.target;if(this!==e||bx.isSimulated||bx.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bx.handleObj.handler.apply(this,arguments)}},teardown:function(){b.event.remove(this,"._change");return be.test(this.nodeName)}}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bz,e){var bx=0,by=function(bA){b.event.simulate(e,bA.target,b.event.fix(bA),true)};b.event.special[e]={setup:function(){if(bx++===0){au.addEventListener(bz,by,true)}},teardown:function(){if(--bx===0){au.removeEventListener(bz,by,true)}}}})}b.fn.extend({on:function(by,e,bB,bA,bx){var bC,bz;if(typeof by==="object"){if(typeof e!=="string"){bB=e;e=L}for(bz in by){this.on(bz,e,bB,by[bz],bx)}return this}if(bB==null&&bA==null){bA=e;bB=e=L}else{if(bA==null){if(typeof e==="string"){bA=bB;bB=L}else{bA=bB;bB=e;e=L}}}if(bA===false){bA=bm}else{if(!bA){return this}}if(bx===1){bC=bA;bA=function(bD){b().off(bD);return bC.apply(this,arguments)};bA.guid=bC.guid||(bC.guid=b.guid++)}return this.each(function(){b.event.add(this,by,bA,bB,e)})},one:function(bx,e,bz,by){return this.on.call(this,bx,e,bz,by,1)},off:function(by,e,bA){if(by&&by.preventDefault&&by.handleObj){var bx=by.handleObj;b(by.delegateTarget).off(bx.namespace?bx.type+"."+bx.namespace:bx.type,bx.selector,bx.handler);return this}if(typeof by==="object"){for(var bz in by){this.off(bz,e,by[bz])}return this}if(e===false||typeof e==="function"){bA=e;e=L}if(bA===false){bA=bm}return this.each(function(){b.event.remove(this,by,bA,e)})},bind:function(e,by,bx){return this.on(e,null,by,bx)},unbind:function(e,bx){return this.off(e,null,bx)},live:function(e,by,bx){b(this.context).on(e,this.selector,by,bx);return this},die:function(e,bx){b(this.context).off(e,this.selector||"**",bx);return this},delegate:function(e,bx,bz,by){return this.on(bx,e,bz,by)},undelegate:function(e,bx,by){return arguments.length==1?this.off(e,"**"):this.off(bx,e,by)},trigger:function(e,bx){return this.each(function(){b.event.trigger(e,bx,this)})},triggerHandler:function(e,bx){if(this[0]){return b.event.trigger(e,bx,this[0],true)}},toggle:function(bz){var bx=arguments,e=bz.guid||b.guid++,by=0,bA=function(bB){var bC=(b._data(this,"lastToggle"+bz.guid)||0)%by;b._data(this,"lastToggle"+bz.guid,bC+1);bB.preventDefault();return bx[bC].apply(this,arguments)||false};bA.guid=e;while(by<bx.length){bx[by++].guid=e}return this.click(bA)},hover:function(e,bx){return this.mouseenter(e).mouseleave(bx||e)}});b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(bx,e){b.fn[e]=function(bz,by){if(by==null){by=bz;bz=null}return arguments.length>0?this.bind(e,bz,by):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}if(aO.test(e)){b.event.fixHooks[e]=b.event.keyHooks}if(bg.test(e)){b.event.fixHooks[e]=b.event.mouseHooks}});
/*
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bJ=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bE="sizcache"+(Math.random()+"").replace(".",""),bK=0,bN=Object.prototype.toString,bD=false,bC=true,bM=/\\/g,bQ=/\r\n/g,bS=/\W/;[0,0].sort(function(){bC=false;return 0});var bA=function(bX,e,b0,b1){b0=b0||[];e=e||au;var b3=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bX||typeof bX!=="string"){return b0}var bU,b5,b8,bT,b4,b7,b6,bZ,bW=true,bV=bA.isXML(e),bY=[],b2=bX;do{bJ.exec("");bU=bJ.exec(b2);if(bU){b2=bU[3];bY.push(bU[1]);if(bU[2]){bT=bU[3];break}}}while(bU);if(bY.length>1&&bF.exec(bX)){if(bY.length===2&&bG.relative[bY[0]]){b5=bO(bY[0]+bY[1],e,b1)}else{b5=bG.relative[bY[0]]?[e]:bA(bY.shift(),e);while(bY.length){bX=bY.shift();if(bG.relative[bX]){bX+=bY.shift()}b5=bO(bX,b5,b1)}}}else{if(!b1&&bY.length>1&&e.nodeType===9&&!bV&&bG.match.ID.test(bY[0])&&!bG.match.ID.test(bY[bY.length-1])){b4=bA.find(bY.shift(),e,bV);e=b4.expr?bA.filter(b4.expr,b4.set)[0]:b4.set[0]}if(e){b4=b1?{expr:bY.pop(),set:bH(b1)}:bA.find(bY.pop(),bY.length===1&&(bY[0]==="~"||bY[0]==="+")&&e.parentNode?e.parentNode:e,bV);b5=b4.expr?bA.filter(b4.expr,b4.set):b4.set;if(bY.length>0){b8=bH(b5)}else{bW=false}while(bY.length){b7=bY.pop();b6=b7;if(!bG.relative[b7]){b7=""}else{b6=bY.pop()}if(b6==null){b6=e}bG.relative[b7](b8,b6,bV)}}else{b8=bY=[]}}if(!b8){b8=b5}if(!b8){bA.error(b7||bX)}if(bN.call(b8)==="[object Array]"){if(!bW){b0.push.apply(b0,b8)}else{if(e&&e.nodeType===1){for(bZ=0;b8[bZ]!=null;bZ++){if(b8[bZ]&&(b8[bZ]===true||b8[bZ].nodeType===1&&bA.contains(e,b8[bZ]))){b0.push(b5[bZ])}}}else{for(bZ=0;b8[bZ]!=null;bZ++){if(b8[bZ]&&b8[bZ].nodeType===1){b0.push(b5[bZ])}}}}}else{bH(b8,b0)}if(bT){bA(bT,b3,b0,b1);bA.uniqueSort(b0)}return b0};bA.uniqueSort=function(bT){if(bL){bD=bC;bT.sort(bL);if(bD){for(var e=1;e<bT.length;e++){if(bT[e]===bT[e-1]){bT.splice(e--,1)}}}}return bT};bA.matches=function(e,bT){return bA(e,null,null,bT)};bA.matchesSelector=function(e,bT){return bA(bT,null,null,[e]).length>0};bA.find=function(bZ,e,b0){var bY,bU,bW,bV,bX,bT;if(!bZ){return[]}for(bU=0,bW=bG.order.length;bU<bW;bU++){bX=bG.order[bU];if((bV=bG.leftMatch[bX].exec(bZ))){bT=bV[1];bV.splice(1,1);if(bT.substr(bT.length-1)!=="\\"){bV[1]=(bV[1]||"").replace(bM,"");bY=bG.find[bX](bV,e,b0);if(bY!=null){bZ=bZ.replace(bG.match[bX],"");break}}}}if(!bY){bY=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bY,expr:bZ}};bA.filter=function(b3,b2,b6,bW){var bY,e,b1,b8,b5,bT,bV,bX,b4,bU=b3,b7=[],b0=b2,bZ=b2&&b2[0]&&bA.isXML(b2[0]);while(b3&&b2.length){for(b1 in bG.filter){if((bY=bG.leftMatch[b1].exec(b3))!=null&&bY[2]){bT=bG.filter[b1];bV=bY[1];e=false;bY.splice(1,1);if(bV.substr(bV.length-1)==="\\"){continue}if(b0===b7){b7=[]}if(bG.preFilter[b1]){bY=bG.preFilter[b1](bY,b0,b6,b7,bW,bZ);if(!bY){e=b8=true}else{if(bY===true){continue}}}if(bY){for(bX=0;(b5=b0[bX])!=null;bX++){if(b5){b8=bT(b5,bY,bX,b0);b4=bW^b8;if(b6&&b8!=null){if(b4){e=true}else{b0[bX]=false}}else{if(b4){b7.push(b5);e=true}}}}}if(b8!==L){if(!b6){b0=b7}b3=b3.replace(bG.match[b1],"");if(!e){return[]}break}}}if(b3===bU){if(e==null){bA.error(b3)}else{break}}bU=b3}return b0};bA.error=function(e){throw"Syntax error, unrecognized expression: "+e};var by=bA.getText=function(bW){var bU,bV,e=bW.nodeType,bT="";if(e){if(e===1){if(typeof bW.textContent==="string"){return bW.textContent}else{if(typeof bW.innerText==="string"){return bW.innerText.replace(bQ,"")}else{for(bW=bW.firstChild;bW;bW=bW.nextSibling){bT+=by(bW)}}}}else{if(e===3||e===4){return bW.nodeValue}}}else{for(bU=0;(bV=bW[bU]);bU++){if(bV.nodeType!==8){bT+=by(bV)}}}return bT};var bG=bA.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bY,bT){var bV=typeof bT==="string",bX=bV&&!bS.test(bT),bZ=bV&&!bX;if(bX){bT=bT.toLowerCase()}for(var bU=0,e=bY.length,bW;bU<e;bU++){if((bW=bY[bU])){while((bW=bW.previousSibling)&&bW.nodeType!==1){}bY[bU]=bZ||bW&&bW.nodeName.toLowerCase()===bT?bW||false:bW===bT}}if(bZ){bA.filter(bT,bY,true)}},">":function(bY,bT){var bX,bW=typeof bT==="string",bU=0,e=bY.length;if(bW&&!bS.test(bT)){bT=bT.toLowerCase();for(;bU<e;bU++){bX=bY[bU];if(bX){var bV=bX.parentNode;bY[bU]=bV.nodeName.toLowerCase()===bT?bV:false}}}else{for(;bU<e;bU++){bX=bY[bU];if(bX){bY[bU]=bW?bX.parentNode:bX.parentNode===bT}}if(bW){bA.filter(bT,bY,true)}}},"":function(bV,bT,bX){var bW,bU=bK++,e=bP;if(typeof bT==="string"&&!bS.test(bT)){bT=bT.toLowerCase();bW=bT;e=bx}e("parentNode",bT,bU,bV,bW,bX)},"~":function(bV,bT,bX){var bW,bU=bK++,e=bP;if(typeof bT==="string"&&!bS.test(bT)){bT=bT.toLowerCase();bW=bT;e=bx}e("previousSibling",bT,bU,bV,bW,bX)}},find:{ID:function(bT,bU,bV){if(typeof bU.getElementById!=="undefined"&&!bV){var e=bU.getElementById(bT[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bU,bX){if(typeof bX.getElementsByName!=="undefined"){var bT=[],bW=bX.getElementsByName(bU[1]);for(var bV=0,e=bW.length;bV<e;bV++){if(bW[bV].getAttribute("name")===bU[1]){bT.push(bW[bV])}}return bT.length===0?null:bT}},TAG:function(e,bT){if(typeof bT.getElementsByTagName!=="undefined"){return bT.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bV,bT,bU,e,bY,bZ){bV=" "+bV[1].replace(bM,"")+" ";if(bZ){return bV}for(var bW=0,bX;(bX=bT[bW])!=null;bW++){if(bX){if(bY^(bX.className&&(" "+bX.className+" ").replace(/[\t\n\r]/g," ").indexOf(bV)>=0)){if(!bU){e.push(bX)}}else{if(bU){bT[bW]=false}}}}return false},ID:function(e){return e[1].replace(bM,"")},TAG:function(bT,e){return bT[1].replace(bM,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bA.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bT=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bT[1]+(bT[2]||1))-0;e[3]=bT[3]-0}else{if(e[2]){bA.error(e[0])}}e[0]=bK++;return e},ATTR:function(bW,bT,bU,e,bX,bY){var bV=bW[1]=bW[1].replace(bM,"");if(!bY&&bG.attrMap[bV]){bW[1]=bG.attrMap[bV]}bW[4]=(bW[4]||bW[5]||"").replace(bM,"");if(bW[2]==="~="){bW[4]=" "+bW[4]+" "}return bW},PSEUDO:function(bW,bT,bU,e,bX){if(bW[1]==="not"){if((bJ.exec(bW[3])||"").length>1||/^\w/.test(bW[3])){bW[3]=bA(bW[3],null,null,bT)}else{var bV=bA.filter(bW[3],bT,bU,true^bX);if(!bU){e.push.apply(e,bV)}return false}}else{if(bG.match.POS.test(bW[0])||bG.match.CHILD.test(bW[0])){return true}}return bW},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bU,bT,e){return !!bA(e[3],bU).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bU){var e=bU.getAttribute("type"),bT=bU.type;return bU.nodeName.toLowerCase()==="input"&&"text"===bT&&(e===bT||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bT){var e=bT.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bT.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bT){var e=bT.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bT.type},button:function(bT){var e=bT.nodeName.toLowerCase();return e==="input"&&"button"===bT.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bT,e){return e===0},last:function(bU,bT,e,bV){return bT===bV.length-1},even:function(bT,e){return e%2===0},odd:function(bT,e){return e%2===1},lt:function(bU,bT,e){return bT<e[3]-0},gt:function(bU,bT,e){return bT>e[3]-0},nth:function(bU,bT,e){return e[3]-0===bT},eq:function(bU,bT,e){return e[3]-0===bT}},filter:{PSEUDO:function(bU,bZ,bY,b0){var e=bZ[1],bT=bG.filters[e];if(bT){return bT(bU,bY,bZ,b0)}else{if(e==="contains"){return(bU.textContent||bU.innerText||by([bU])||"").indexOf(bZ[3])>=0}else{if(e==="not"){var bV=bZ[3];for(var bX=0,bW=bV.length;bX<bW;bX++){if(bV[bX]===bU){return false}}return true}else{bA.error(e)}}}},CHILD:function(bU,bW){var bV,b2,bY,b1,e,bX,b0,bZ=bW[1],bT=bU;switch(bZ){case"only":case"first":while((bT=bT.previousSibling)){if(bT.nodeType===1){return false}}if(bZ==="first"){return true}bT=bU;case"last":while((bT=bT.nextSibling)){if(bT.nodeType===1){return false}}return true;case"nth":bV=bW[2];b2=bW[3];if(bV===1&&b2===0){return true}bY=bW[0];b1=bU.parentNode;if(b1&&(b1[bE]!==bY||!bU.nodeIndex)){bX=0;for(bT=b1.firstChild;bT;bT=bT.nextSibling){if(bT.nodeType===1){bT.nodeIndex=++bX}}b1[bE]=bY}b0=bU.nodeIndex-b2;if(bV===0){return b0===0}else{return(b0%bV===0&&b0/bV>=0)}}},ID:function(bT,e){return bT.nodeType===1&&bT.getAttribute("id")===e},TAG:function(bT,e){return(e==="*"&&bT.nodeType===1)||!!bT.nodeName&&bT.nodeName.toLowerCase()===e},CLASS:function(bT,e){return(" "+(bT.className||bT.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bX,bV){var bU=bV[1],e=bA.attr?bA.attr(bX,bU):bG.attrHandle[bU]?bG.attrHandle[bU](bX):bX[bU]!=null?bX[bU]:bX.getAttribute(bU),bY=e+"",bW=bV[2],bT=bV[4];return e==null?bW==="!=":!bW&&bA.attr?e!=null:bW==="="?bY===bT:bW==="*="?bY.indexOf(bT)>=0:bW==="~="?(" "+bY+" ").indexOf(bT)>=0:!bT?bY&&e!==false:bW==="!="?bY!==bT:bW==="^="?bY.indexOf(bT)===0:bW==="$="?bY.substr(bY.length-bT.length)===bT:bW==="|="?bY===bT||bY.substr(0,bT.length+1)===bT+"-":false},POS:function(bW,bT,bU,bX){var e=bT[2],bV=bG.setFilters[e];if(bV){return bV(bW,bU,bT,bX)}}}};var bF=bG.match.POS,bz=function(bT,e){return"\\"+(e-0+1)};for(var bB in bG.match){bG.match[bB]=new RegExp(bG.match[bB].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bG.leftMatch[bB]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bG.match[bB].source.replace(/\\(\d+)/g,bz))}var bH=function(bT,e){bT=Array.prototype.slice.call(bT,0);if(e){e.push.apply(e,bT);return e}return bT};try{Array.prototype.slice.call(au.documentElement.childNodes,0)[0].nodeType}catch(bR){bH=function(bW,bV){var bU=0,bT=bV||[];if(bN.call(bW)==="[object Array]"){Array.prototype.push.apply(bT,bW)}else{if(typeof bW.length==="number"){for(var e=bW.length;bU<e;bU++){bT.push(bW[bU])}}else{for(;bW[bU];bU++){bT.push(bW[bU])}}}return bT}}var bL,bI;if(au.documentElement.compareDocumentPosition){bL=function(bT,e){if(bT===e){bD=true;return 0}if(!bT.compareDocumentPosition||!e.compareDocumentPosition){return bT.compareDocumentPosition?-1:1}return bT.compareDocumentPosition(e)&4?-1:1}}else{bL=function(b0,bZ){if(b0===bZ){bD=true;return 0}else{if(b0.sourceIndex&&bZ.sourceIndex){return b0.sourceIndex-bZ.sourceIndex}}var bX,bT,bU=[],e=[],bW=b0.parentNode,bY=bZ.parentNode,b1=bW;if(bW===bY){return bI(b0,bZ)}else{if(!bW){return -1}else{if(!bY){return 1}}}while(b1){bU.unshift(b1);b1=b1.parentNode}b1=bY;while(b1){e.unshift(b1);b1=b1.parentNode}bX=bU.length;bT=e.length;for(var bV=0;bV<bX&&bV<bT;bV++){if(bU[bV]!==e[bV]){return bI(bU[bV],e[bV])}}return bV===bX?bI(b0,e[bV],-1):bI(bU[bV],bZ,1)};bI=function(bT,e,bU){if(bT===e){return bU}var bV=bT.nextSibling;while(bV){if(bV===e){return -1}bV=bV.nextSibling}return 1}}(function(){var bT=au.createElement("div"),bU="script"+(new Date()).getTime(),e=au.documentElement;bT.innerHTML="<a name='"+bU+"'/>";e.insertBefore(bT,e.firstChild);if(au.getElementById(bU)){bG.find.ID=function(bW,bX,bY){if(typeof bX.getElementById!=="undefined"&&!bY){var bV=bX.getElementById(bW[1]);return bV?bV.id===bW[1]||typeof bV.getAttributeNode!=="undefined"&&bV.getAttributeNode("id").nodeValue===bW[1]?[bV]:L:[]}};bG.filter.ID=function(bX,bV){var bW=typeof bX.getAttributeNode!=="undefined"&&bX.getAttributeNode("id");return bX.nodeType===1&&bW&&bW.nodeValue===bV}}e.removeChild(bT);e=bT=null})();(function(){var e=au.createElement("div");e.appendChild(au.createComment(""));if(e.getElementsByTagName("*").length>0){bG.find.TAG=function(bT,bX){var bW=bX.getElementsByTagName(bT[1]);if(bT[1]==="*"){var bV=[];for(var bU=0;bW[bU];bU++){if(bW[bU].nodeType===1){bV.push(bW[bU])}}bW=bV}return bW}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bG.attrHandle.href=function(bT){if(typeof bT.expires!=="undefined"){return bT.getAttribute("href")}else{return bT.getAttribute("href",2)}}}e=null})();if(au.querySelectorAll){(function(){var e=bA,bV=au.createElement("div"),bU="__sizzle__";bV.innerHTML="<p class='TEST'></p>";if(bV.querySelectorAll&&bV.querySelectorAll(".TEST").length===0){return}bA=function(b6,bX,b1,b5){bX=bX||au;if(!b5&&!bA.isXML(bX)){var b4=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b6);if(b4&&(bX.nodeType===1||bX.nodeType===9)){if(b4[1]){return bH(bX.getElementsByTagName(b6),b1)}else{if(b4[2]&&bG.find.CLASS&&bX.getElementsByClassName){return bH(bX.getElementsByClassName(b4[2]),b1)}}}if(bX.nodeType===9){if(b6==="body"&&bX.body){return bH([bX.body],b1)}else{if(b4&&b4[3]){var b0=bX.getElementById(b4[3]);if(b0&&b0.parentNode){if(b0.id===b4[3]){return bH([b0],b1)}}else{return bH([],b1)}}}try{return bH(bX.querySelectorAll(b6),b1)}catch(b2){}}else{if(bX.nodeType===1&&bX.nodeName.toLowerCase()!=="object"){var bY=bX,bZ=bX.getAttribute("id"),bW=bZ||bU,b8=bX.parentNode,b7=/^\s*[+~]/.test(b6);if(!bZ){bX.setAttribute("id",bW)}else{bW=bW.replace(/'/g,"\\$&")}if(b7&&b8){bX=bX.parentNode}try{if(!b7||b8){return bH(bX.querySelectorAll("[id='"+bW+"'] "+b6),b1)}}catch(b3){}finally{if(!bZ){bY.removeAttribute("id")}}}}}return e(b6,bX,b1,b5)};for(var bT in e){bA[bT]=e[bT]}bV=null})()}(function(){var e=au.documentElement,bU=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bU){var bW=!bU.call(au.createElement("div"),"div"),bT=false;try{bU.call(au.documentElement,"[test!='']:sizzle")}catch(bV){bT=true}bA.matchesSelector=function(bY,b0){b0=b0.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bA.isXML(bY)){try{if(bT||!bG.match.PSEUDO.test(b0)&&!/!=/.test(b0)){var bX=bU.call(bY,b0);if(bX||!bW||bY.document&&bY.document.nodeType!==11){return bX}}}catch(bZ){}}return bA(b0,null,null,[bY]).length>0}}})();(function(){var e=au.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bG.order.splice(1,0,"CLASS");bG.find.CLASS=function(bT,bU,bV){if(typeof bU.getElementsByClassName!=="undefined"&&!bV){return bU.getElementsByClassName(bT[1])}};e=null})();function bx(bT,bY,bX,b1,bZ,b0){for(var bV=0,bU=b1.length;bV<bU;bV++){var e=b1[bV];if(e){var bW=false;e=e[bT];while(e){if(e[bE]===bX){bW=b1[e.sizset];break}if(e.nodeType===1&&!b0){e[bE]=bX;e.sizset=bV}if(e.nodeName.toLowerCase()===bY){bW=e;break}e=e[bT]}b1[bV]=bW}}}function bP(bT,bY,bX,b1,bZ,b0){for(var bV=0,bU=b1.length;bV<bU;bV++){var e=b1[bV];if(e){var bW=false;e=e[bT];while(e){if(e[bE]===bX){bW=b1[e.sizset];break}if(e.nodeType===1){if(!b0){e[bE]=bX;e.sizset=bV}if(typeof bY!=="string"){if(e===bY){bW=true;break}}else{if(bA.filter(bY,[e]).length>0){bW=e;break}}}e=e[bT]}b1[bV]=bW}}}if(au.documentElement.contains){bA.contains=function(bT,e){return bT!==e&&(bT.contains?bT.contains(e):true)}}else{if(au.documentElement.compareDocumentPosition){bA.contains=function(bT,e){return !!(bT.compareDocumentPosition(e)&16)}}else{bA.contains=function(){return false}}}bA.isXML=function(e){var bT=(e?e.ownerDocument||e:0).documentElement;return bT?bT.nodeName!=="HTML":false};var bO=function(bU,e,bY){var bX,bZ=[],bW="",b0=e.nodeType?[e]:e;while((bX=bG.match.PSEUDO.exec(bU))){bW+=bX[0];bU=bU.replace(bG.match.PSEUDO,"")}bU=bG.relative[bU]?bU+"*":bU;for(var bV=0,bT=b0.length;bV<bT;bV++){bA(bU,b0[bV],bZ,bY)}return bA.filter(bW,bZ)};bA.attr=b.attr;bA.selectors.attrMap={};b.find=bA;b.expr=bA.selectors;b.expr[":"]=b.expr.filters;b.unique=bA.uniqueSort;b.text=bA.getText;b.isXMLDoc=bA.isXML;b.contains=bA.contains})();var ab=/Until$/,ap=/^(?:parents|prevUntil|prevAll)/,ba=/,/,br=/^.[^:#\[\.,]*$/,Q=Array.prototype.slice,H=b.expr.match.POS,ax={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var by=this,bA,bx;if(typeof e!=="string"){return b(e).filter(function(){for(bA=0,bx=by.length;bA<bx;bA++){if(b.contains(by[bA],this)){return true}}})}var bz=this.pushStack("","find",e),bC,bD,bB;for(bA=0,bx=this.length;bA<bx;bA++){bC=bz.length;b.find(e,this[bA],bz);if(bA>0){for(bD=bC;bD<bz.length;bD++){for(bB=0;bB<bC;bB++){if(bz[bB]===bz[bD]){bz.splice(bD--,1);break}}}}}return bz},has:function(bx){var e=b(bx);return this.filter(function(){for(var bz=0,by=e.length;bz<by;bz++){if(b.contains(this,e[bz])){return true}}})},not:function(e){return this.pushStack(aF(this,e,false),"not",e)},filter:function(e){return this.pushStack(aF(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?H.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bA,bz){var bx=[],by,e,bB=this[0];if(b.isArray(bA)){var bD=1;while(bB&&bB.ownerDocument&&bB!==bz){for(by=0;by<bA.length;by++){if(b(bB).is(bA[by])){bx.push({selector:bA[by],elem:bB,level:bD})}}bB=bB.parentNode;bD++}return bx}var bC=H.test(bA)||typeof bA!=="string"?b(bA,bz||this.context):0;for(by=0,e=this.length;by<e;by++){bB=this[by];while(bB){if(bC?bC.index(bB)>-1:b.find.matchesSelector(bB,bA)){bx.push(bB);break}else{bB=bB.parentNode;if(!bB||!bB.ownerDocument||bB===bz||bB.nodeType===11){break}}}}bx=bx.length>1?b.unique(bx):bx;return this.pushStack(bx,"closest",bA)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return b.inArray(this[0],b(e))}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,bx){var bz=typeof e==="string"?b(e,bx):b.makeArray(e&&e.nodeType?[e]:e),by=b.merge(this.get(),bz);return this.pushStack(C(bz[0])||C(by[0])?by:b.unique(by))},andSelf:function(){return this.add(this.prevObject)}});function C(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(bx){var e=bx.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(bx,e,by){return b.dir(bx,"parentNode",by)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(bx,e,by){return b.dir(bx,"nextSibling",by)},prevUntil:function(bx,e,by){return b.dir(bx,"previousSibling",by)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,bx){b.fn[e]=function(bB,by){var bA=b.map(this,bx,bB),bz=Q.call(arguments);if(!ab.test(e)){by=bB}if(by&&typeof by==="string"){bA=b.filter(by,bA)}bA=this.length>1&&!ax[e]?b.unique(bA):bA;if((this.length>1||ba.test(by))&&ap.test(e)){bA=bA.reverse()}return this.pushStack(bA,e,bz.join(","))}});b.extend({filter:function(by,e,bx){if(bx){by=":not("+by+")"}return e.length===1?b.find.matchesSelector(e[0],by)?[e[0]]:[]:b.find.matches(by,e)},dir:function(by,bx,bA){var e=[],bz=by[bx];while(bz&&bz.nodeType!==9&&(bA===L||bz.nodeType!==1||!b(bz).is(bA))){if(bz.nodeType===1){e.push(bz)}bz=bz[bx]}return e},nth:function(bA,e,by,bz){e=e||1;var bx=0;for(;bA;bA=bA[by]){if(bA.nodeType===1&&++bx===e){break}}return bA},sibling:function(by,bx){var e=[];for(;by;by=by.nextSibling){if(by.nodeType===1&&by!==bx){e.push(by)}}return e}});function aF(bz,by,e){by=by||0;if(b.isFunction(by)){return b.grep(bz,function(bB,bA){var bC=!!by.call(bB,bA,bB);return bC===e})}else{if(by.nodeType){return b.grep(bz,function(bB,bA){return(bB===by)===e})}else{if(typeof by==="string"){var bx=b.grep(bz,function(bA){return bA.nodeType===1});if(br.test(by)){return b.filter(by,bx,!e)}else{by=b.filter(by,bx)}}}}return b.grep(bz,function(bB,bA){return(b.inArray(bB,by)>=0)===e})}function a(e){var by=aR.split(" "),bx=e.createDocumentFragment();if(bx.createElement){while(by.length){bx.createElement(by.pop())}}return bx}var aR="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",ag=/ jQuery\d+="(?:\d+|null)"/g,aq=/^\s+/,S=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,w=/<tbody/i,W=/<|&#?\w+;/,ae=/<(?:script|style)/i,P=/<(?:script|object|embed|option|style)/i,ah=new RegExp("<(?:"+aR.replace(" ","|")+")","i"),o=/checked\s*(?:[^=]|=\s*.checked.)/i,bo=/\/(java|ecma)script/i,aN=/^\s*<!(?:\[CDATA\[|\-\-)/,aw={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ac=a(au);aw.optgroup=aw.option;aw.tbody=aw.tfoot=aw.colgroup=aw.caption=aw.thead;aw.th=aw.td;if(!b.support.htmlSerialize){aw._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(by){var bx=b(this);bx.text(e.call(this,by,bx.text()))})}if(typeof e!=="object"&&e!==L){return this.empty().append((this[0]&&this[0].ownerDocument||au).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(by){b(this).wrapAll(e.call(this,by))})}if(this[0]){var bx=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bx.insertBefore(this[0])}bx.map(function(){var by=this;while(by.firstChild&&by.firstChild.nodeType===1){by=by.firstChild}return by}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bx){b(this).wrapInner(e.call(this,bx))})}return this.each(function(){var bx=b(this),by=bx.contents();if(by.length){by.wrapAll(e)}else{bx.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bx){this.parentNode.insertBefore(bx,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bx){this.parentNode.insertBefore(bx,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bz){for(var bx=0,by;(by=this[bx])!=null;bx++){if(!e||b.filter(e,[by]).length){if(!bz&&by.nodeType===1){b.cleanData(by.getElementsByTagName("*"));b.cleanData([by])}if(by.parentNode){by.parentNode.removeChild(by)}}}return this},empty:function(){for(var e=0,bx;(bx=this[e])!=null;e++){if(bx.nodeType===1){b.cleanData(bx.getElementsByTagName("*"))}while(bx.firstChild){bx.removeChild(bx.firstChild)}}return this},clone:function(bx,e){bx=bx==null?false:bx;e=e==null?bx:e;return this.map(function(){return b.clone(this,bx,e)})},html:function(bz){if(bz===L){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ag,""):null}else{if(typeof bz==="string"&&!ae.test(bz)&&(b.support.leadingWhitespace||!aq.test(bz))&&!aw[(d.exec(bz)||["",""])[1].toLowerCase()]){bz=bz.replace(S,"<$1></$2>");try{for(var by=0,bx=this.length;by<bx;by++){if(this[by].nodeType===1){b.cleanData(this[by].getElementsByTagName("*"));this[by].innerHTML=bz}}}catch(bA){this.empty().append(bz)}}else{if(b.isFunction(bz)){this.each(function(bB){var e=b(this);e.html(bz.call(this,bB,e.html()))})}else{this.empty().append(bz)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bz){var by=b(this),bx=by.html();by.replaceWith(e.call(this,bz,bx))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var by=this.nextSibling,bx=this.parentNode;b(this).remove();if(by){b(by).before(e)}else{b(bx).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bD,bH,bG){var bz,bA,bC,bF,bE=bD[0],bx=[];if(!b.support.checkClone&&arguments.length===3&&typeof bE==="string"&&o.test(bE)){return this.each(function(){b(this).domManip(bD,bH,bG,true)})}if(b.isFunction(bE)){return this.each(function(bJ){var bI=b(this);bD[0]=bE.call(this,bJ,bH?bI.html():L);bI.domManip(bD,bH,bG)})}if(this[0]){bF=bE&&bE.parentNode;if(b.support.parentNode&&bF&&bF.nodeType===11&&bF.childNodes.length===this.length){bz={fragment:bF}}else{bz=b.buildFragment(bD,this,bx)}bC=bz.fragment;if(bC.childNodes.length===1){bA=bC=bC.firstChild}else{bA=bC.firstChild}if(bA){bH=bH&&b.nodeName(bA,"tr");for(var by=0,e=this.length,bB=e-1;by<e;by++){bG.call(bH?bb(this[by],bA):this[by],bz.cacheable||(e>1&&by<bB)?b.clone(bC,true,true):bC)}}if(bx.length){b.each(bx,bq)}}return this}});function bb(e,bx){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function t(bD,bx){if(bx.nodeType!==1||!b.hasData(bD)){return}var bA,bz,e,bC=b._data(bD),bB=b._data(bx,bC),by=bC.events;if(by){delete bB.handle;bB.events={};for(bA in by){for(bz=0,e=by[bA].length;bz<e;bz++){b.event.add(bx,bA+(by[bA][bz].namespace?".":"")+by[bA][bz].namespace,by[bA][bz],by[bA][bz].data)}}}if(bB.data){bB.data=b.extend({},bB.data)}}function ai(bx,e){var by;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bx)}by=e.nodeName.toLowerCase();if(by==="object"){e.outerHTML=bx.outerHTML}else{if(by==="input"&&(bx.type==="checkbox"||bx.type==="radio")){if(bx.checked){e.defaultChecked=e.checked=bx.checked}if(e.value!==bx.value){e.value=bx.value}}else{if(by==="option"){e.selected=bx.defaultSelected}else{if(by==="input"||by==="textarea"){e.defaultValue=bx.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(bB,bz,bx){var bA,e,by,bC,bD=bB[0];if(bz&&bz[0]){bC=bz[0].ownerDocument||bz[0]}if(!bC.createDocumentFragment){bC=au}if(bB.length===1&&typeof bD==="string"&&bD.length<512&&bC===au&&bD.charAt(0)==="<"&&!P.test(bD)&&(b.support.checkClone||!o.test(bD))&&(!b.support.unknownElems&&ah.test(bD))){e=true;by=b.fragments[bD];if(by&&by!==1){bA=by}}if(!bA){bA=bC.createDocumentFragment();b.clean(bB,bC,bA,bx)}if(e){b.fragments[bD]=by?bA:1}return{fragment:bA,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bx){b.fn[e]=function(by){var bB=[],bE=b(by),bD=this.length===1&&this[0].parentNode;if(bD&&bD.nodeType===11&&bD.childNodes.length===1&&bE.length===1){bE[bx](this[0]);return this}else{for(var bC=0,bz=bE.length;bC<bz;bC++){var bA=(bC>0?this.clone(true):this).get();b(bE[bC])[bx](bA);bB=bB.concat(bA)}return this.pushStack(bB,e,bE.selector)}}});function bh(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function ay(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function E(e){var bx=(e.nodeName||"").toLowerCase();if(bx==="input"){ay(e)}else{if(bx!=="script"&&typeof e.getElementsByTagName!=="undefined"){b.grep(e.getElementsByTagName("input"),ay)}}}b.extend({clone:function(bA,bC,by){var bB=bA.cloneNode(true),e,bx,bz;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bA.nodeType===1||bA.nodeType===11)&&!b.isXMLDoc(bA)){ai(bA,bB);e=bh(bA);bx=bh(bB);for(bz=0;e[bz];++bz){if(bx[bz]){ai(e[bz],bx[bz])}}}if(bC){t(bA,bB);if(by){e=bh(bA);bx=bh(bB);for(bz=0;e[bz];++bz){t(e[bz],bx[bz])}}}e=bx=null;return bB},clean:function(by,bA,bJ,bC){var bH;bA=bA||au;if(typeof bA.createElement==="undefined"){bA=bA.ownerDocument||bA[0]&&bA[0].ownerDocument||au}var bK=[],bD;for(var bG=0,bB;(bB=by[bG])!=null;bG++){if(typeof bB==="number"){bB+=""}if(!bB){continue}if(typeof bB==="string"){if(!W.test(bB)){bB=bA.createTextNode(bB)}else{bB=bB.replace(S,"<$1></$2>");var bM=(d.exec(bB)||["",""])[1].toLowerCase(),bz=aw[bM]||aw._default,bF=bz[0],bx=bA.createElement("div");if(bA===au){ac.appendChild(bx)}else{a(bA).appendChild(bx)}bx.innerHTML=bz[1]+bB+bz[2];while(bF--){bx=bx.lastChild}if(!b.support.tbody){var e=w.test(bB),bE=bM==="table"&&!e?bx.firstChild&&bx.firstChild.childNodes:bz[1]==="<table>"&&!e?bx.childNodes:[];for(bD=bE.length-1;bD>=0;--bD){if(b.nodeName(bE[bD],"tbody")&&!bE[bD].childNodes.length){bE[bD].parentNode.removeChild(bE[bD])}}}if(!b.support.leadingWhitespace&&aq.test(bB)){bx.insertBefore(bA.createTextNode(aq.exec(bB)[0]),bx.firstChild)}bB=bx.childNodes}}var bI;if(!b.support.appendChecked){if(bB[0]&&typeof(bI=bB.length)==="number"){for(bD=0;bD<bI;bD++){E(bB[bD])}}else{E(bB)}}if(bB.nodeType){bK.push(bB)}else{bK=b.merge(bK,bB)}}if(bJ){bH=function(bN){return !bN.type||bo.test(bN.type)};for(bG=0;bK[bG];bG++){if(bC&&b.nodeName(bK[bG],"script")&&(!bK[bG].type||bK[bG].type.toLowerCase()==="text/javascript")){bC.push(bK[bG].parentNode?bK[bG].parentNode.removeChild(bK[bG]):bK[bG])}else{if(bK[bG].nodeType===1){var bL=b.grep(bK[bG].getElementsByTagName("script"),bH);bK.splice.apply(bK,[bG+1,0].concat(bL))}bJ.appendChild(bK[bG])}}}return bK},cleanData:function(bx){var bA,by,e=b.cache,bD=b.event.special,bC=b.support.deleteExpando;for(var bB=0,bz;(bz=bx[bB])!=null;bB++){if(bz.nodeName&&b.noData[bz.nodeName.toLowerCase()]){continue}by=bz[b.expando];if(by){bA=e[by];if(bA&&bA.events){for(var bE in bA.events){if(bD[bE]){b.event.remove(bz,bE)}else{b.removeEvent(bz,bE,bA.handle.realHandle||bA.handle)}}if(bA.handle){bA.handle.elem=null}if(bA.handle&&bA.handle.realHandle){delete _jqEventCache[bA.handle.realHandle.cid]}}if(bC){delete bz[b.expando]}else{if(bz.removeAttribute){bz.removeAttribute(b.expando)}}delete e[by]}}}});function bq(e,bx){if(bx.src){b.ajax({url:bx.src,async:false,dataType:"script"})}else{b.globalEval((bx.text||bx.textContent||bx.innerHTML||"").replace(aN,"/*$0*/"))}if(bx.parentNode){bx.parentNode.removeChild(bx)}}var ak=/alpha\([^)]*\)/i,at=/opacity=([^)]*)/,z=/([A-Z]|^ms)/g,bd=/^-?\d+(?:px)?$/i,bp=/^-?\d+(?:.\d+)?[^\d]*$/,I=/^([\-+])=([\-+.\de]+)/,a8={position:"absolute",visibility:"hidden",display:"block"},am=["Left","Right"],a2=["Top","Bottom"],Z,aI,aX;b.fn.css=function(e,bx){if(arguments.length===2&&bx===L){return this}return b.access(this,e,bx,true,function(bz,by,bA){return bA!==L?b.style(bz,by,bA):b.css(bz,by)})};b.extend({cssHooks:{opacity:{get:function(by,bx){if(bx){var e=Z(by,"opacity","opacity");return e===""?"1":e}else{return by.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bz,by,bF,bA){if(!bz||bz.nodeType===3||bz.nodeType===8||!bz.style){return}var bD,bE,bB=b.camelCase(by),bx=bz.style,bG=b.cssHooks[bB];by=b.cssProps[bB]||bB;if(bF!==L){bE=typeof bF;if(bE==="string"&&(bD=I.exec(bF))){bF=(+(bD[1]+1)*+bD[2])+parseFloat(b.css(bz,by));bE="number"}if(bF==null||bE==="number"&&isNaN(bF)){return}if(bE==="number"&&!b.cssNumber[bB]){bF+="px"}if(!bG||!("set" in bG)||(bF=bG.set(bz,bF))!==L){try{bx[by]=bF}catch(bC){}}}else{if(bG&&"get" in bG&&(bD=bG.get(bz,false,bA))!==L){return bD}return bx[by]}},css:function(bA,bz,bx){var by,e;bz=b.camelCase(bz);e=b.cssHooks[bz];bz=b.cssProps[bz]||bz;if(bz==="cssFloat"){bz="float"}if(e&&"get" in e&&(by=e.get(bA,true,bx))!==L){return by}else{if(Z){return Z(bA,bz)}}},swap:function(bz,by,bA){var e={};for(var bx in by){e[bx]=bz.style[bx];bz.style[bx]=by[bx]}bA.call(bz);for(bx in by){bz.style[bx]=e[bx]}}});b.curCSS=b.css;b.each(["height","width"],function(bx,e){b.cssHooks[e]={get:function(bA,bz,by){var bB;if(bz){if(bA.offsetWidth!==0){return p(bA,e,by)}else{b.swap(bA,a8,function(){bB=p(bA,e,by)})}return bB}},set:function(by,bz){if(bd.test(bz)){bz=parseFloat(bz);if(bz>=0){return bz+"px"}}else{return bz}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bx,e){return at.test((e&&bx.currentStyle?bx.currentStyle.filter:bx.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bA,bB){var bz=bA.style,bx=bA.currentStyle,e=b.isNumeric(bB)?"alpha(opacity="+bB*100+")":"",by=bx&&bx.filter||bz.filter||"";bz.zoom=1;if(bB>=1&&b.trim(by.replace(ak,""))===""){bz.removeAttribute("filter");if(bx&&!bx.filter){return}}bz.filter=ak.test(by)?by.replace(ak,e):by+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(by,bx){var e;b.swap(by,{display:"inline-block"},function(){if(bx){e=Z(by,"margin-right","marginRight")}else{e=by.style.marginRight}});return e}}}});if(au.defaultView&&au.defaultView.getComputedStyle){aI=function(bA,by){var bx,bz,e;by=by.replace(z,"-$1").toLowerCase();if(!(bz=bA.ownerDocument.defaultView)){return L}if((e=bz.getComputedStyle(bA,null))){bx=e.getPropertyValue(by);if(bx===""&&!b.contains(bA.ownerDocument.documentElement,bA)){bx=b.style(bA,by)}}return bx}}if(au.documentElement.currentStyle){aX=function(bB,by){var bC,e,bA,bx=bB.currentStyle&&bB.currentStyle[by],bz=bB.style;if(bx===null&&bz&&(bA=bz[by])){bx=bA}if(!bd.test(bx)&&bp.test(bx)){bC=bz.left;e=bB.runtimeStyle&&bB.runtimeStyle.left;if(e){bB.runtimeStyle.left=bB.currentStyle.left}bz.left=by==="fontSize"?"1em":(bx||0);bx=bz.pixelLeft+"px";bz.left=bC;if(e){bB.runtimeStyle.left=e}}return bx===""?"auto":bx}}Z=aI||aX;function p(by,bx,e){var bA=bx==="width"?by.offsetWidth:by.offsetHeight,bz=bx==="width"?am:a2;if(bA>0){if(e!=="border"){b.each(bz,function(){if(!e){bA-=parseFloat(b.css(by,"padding"+this))||0}if(e==="margin"){bA+=parseFloat(b.css(by,e+this))||0}else{bA-=parseFloat(b.css(by,"border"+this+"Width"))||0}})}return bA+"px"}bA=Z(by,bx,bx);if(bA<0||bA==null){bA=by.style[bx]||0}bA=parseFloat(bA)||0;if(e){b.each(bz,function(){bA+=parseFloat(b.css(by,"padding"+this))||0;if(e!=="padding"){bA+=parseFloat(b.css(by,"border"+this+"Width"))||0}if(e==="margin"){bA+=parseFloat(b.css(by,e+this))||0}})}return bA+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(by){var bx=by.offsetWidth,e=by.offsetHeight;return(bx===0&&e===0)||(!b.support.reliableHiddenOffsets&&((by.style&&by.style.display)||b.css(by,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var k=/%20/g,ao=/\[\]$/,bu=/\r?\n/g,bs=/#.*$/,aC=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aZ=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aM=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,aQ=/^(?:GET|HEAD)$/,c=/^\/\//,M=/\?/,a7=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,q=/^(?:select|textarea)/i,h=/\s+/,bt=/([?&])_=[^&]*/,K=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,A=b.fn.load,aa={},r={},aD,s,aV=["*/"]+["*"];try{aD=bn.href}catch(av){aD=au.createElement("a");aD.href="";aD=aD.href}s=K.exec(aD.toLowerCase())||[];function f(e){return function(bA,bC){if(typeof bA!=="string"){bC=bA;bA="*"}if(b.isFunction(bC)){var bz=bA.toLowerCase().split(h),by=0,bB=bz.length,bx,bD,bE;for(;by<bB;by++){bx=bz[by];bE=/^\+/.test(bx);if(bE){bx=bx.substr(1)||"*"}bD=e[bx]=e[bx]||[];bD[bE?"unshift":"push"](bC)}}}}function aW(bx,bG,bB,bF,bD,bz){bD=bD||bG.dataTypes[0];bz=bz||{};bz[bD]=true;var bC=bx[bD],by=0,e=bC?bC.length:0,bA=(bx===aa),bE;for(;by<e&&(bA||!bE);by++){bE=bC[by](bG,bB,bF);if(typeof bE==="string"){if(!bA||bz[bE]){bE=L}else{bG.dataTypes.unshift(bE);bE=aW(bx,bG,bB,bF,bE,bz)}}}if((bA||!bE)&&!bz["*"]){bE=aW(bx,bG,bB,bF,"*",bz)}return bE}function al(by,bz){var bx,e,bA=b.ajaxSettings.flatOptions||{};for(bx in bz){if(bz[bx]!==L){(bA[bx]?by:(e||(e={})))[bx]=bz[bx]}}if(e){b.extend(true,by,e)}}b.fn.extend({load:function(by,bB,bC){if(typeof by!=="string"&&A){return A.apply(this,arguments)}else{if(!this.length){return this}}var bA=by.indexOf(" ");if(bA>=0){var e=by.slice(bA,by.length);by=by.slice(0,bA)}var bz="GET";if(bB){if(b.isFunction(bB)){bC=bB;bB=L}else{if(typeof bB==="object"){bB=b.param(bB,b.ajaxSettings.traditional);bz="POST"}}}var bx=this;b.ajax({url:by,type:bz,dataType:"html",data:bB,complete:function(bE,bD,bF){bF=bE.responseText;if(bE.isResolved()){bE.done(function(bG){bF=bG});bx.html(e?b("<div>").append(bF.replace(a7,"")).find(e):bF)}if(bC){bx.each(bC,[bF,bD,bE])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||q.test(this.nodeName)||aZ.test(this.type))}).map(function(e,bx){var by=b(this).val();return by==null?null:b.isArray(by)?b.map(by,function(bA,bz){return{name:bx.name,value:bA.replace(bu,"\r\n")}}):{name:bx.name,value:by.replace(bu,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bx){b.fn[bx]=function(by){return this.bind(bx,by)}});b.each(["get","post"],function(e,bx){b[bx]=function(by,bA,bB,bz){if(b.isFunction(bA)){bz=bz||bB;bB=bA;bA=L}return b.ajax({type:bx,url:by,data:bA,success:bB,dataType:bz})}});b.extend({getScript:function(e,bx){return b.get(e,L,bx,"script")},getJSON:function(e,bx,by){return b.get(e,bx,by,"json")},ajaxSetup:function(bx,e){if(e){al(bx,b.ajaxSettings)}else{e=bx;bx=b.ajaxSettings}al(bx,e);return bx},ajaxSettings:{url:aD,isLocal:aM.test(s[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aV},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bc.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:f(aa),ajaxTransport:f(r),ajax:function(bB,bz){if(typeof bB==="object"){bz=bB;bB=L}bz=bz||{};var bF=b.ajaxSetup({},bz),bU=bF.context||bF,bI=bU!==bF&&(bU.nodeType||bU instanceof b)?b(bU):b.event,bT=b.Deferred(),bP=b.Callbacks("once memory"),bD=bF.statusCode||{},bE,bJ={},bQ={},bS,bA,bN,bG,bK,bC=0,by,bM,bL={readyState:0,setRequestHeader:function(bV,bW){if(!bC){var e=bV.toLowerCase();bV=bQ[e]=bQ[e]||bV;bJ[bV]=bW}return this},getAllResponseHeaders:function(){return bC===2?bS:null},getResponseHeader:function(bV){var e;if(bC===2){if(!bA){bA={};while((e=aC.exec(bS))){bA[e[1].toLowerCase()]=e[2]}}e=bA[bV.toLowerCase()]}return e===L?null:e},overrideMimeType:function(e){if(!bC){bF.mimeType=e}return this},abort:function(e){e=e||"abort";if(bN){bN.abort(e)}bH(0,e);return this}};function bH(b1,bW,b2,bY){if(bC===2){return}bC=2;if(bG){clearTimeout(bG)}bN=L;bS=bY||"";bL.readyState=b1>0?4:0;var bV,b6,b5,bZ=bW,b0=b2?bl(bF,bL,b2):L,bX,b4;if(b1>=200&&b1<300||b1===304){if(bF.ifModified){if((bX=bL.getResponseHeader("Last-Modified"))){b.lastModified[bE]=bX}if((b4=bL.getResponseHeader("Etag"))){b.etag[bE]=b4}}if(b1===304){bZ="notmodified";bV=true}else{try{b6=G(bF,b0);bZ="success";bV=true}catch(b3){bZ="parsererror";b5=b3}}}else{b5=bZ;if(!bZ||b1){bZ="error";if(b1<0){b1=0}}}bL.status=b1;bL.statusText=""+(bW||bZ);if(bV){bT.resolveWith(bU,[b6,bZ,bL])}else{bT.rejectWith(bU,[bL,bZ,b5])}bL.statusCode(bD);bD=L;if(by){bI.trigger("ajax"+(bV?"Success":"Error"),[bL,bF,bV?b6:b5])}bP.fireWith(bU,[bL,bZ]);if(by){bI.trigger("ajaxComplete",[bL,bF]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bT.promise(bL);bL.success=bL.done;bL.error=bL.fail;bL.complete=bP.add;bL.statusCode=function(bV){if(bV){var e;if(bC<2){for(e in bV){bD[e]=[bD[e],bV[e]]}}else{e=bV[bL.status];bL.then(e,e)}}return this};bF.url=((bB||bF.url)+"").replace(bs,"").replace(c,s[1]+"//");bF.dataTypes=b.trim(bF.dataType||"*").toLowerCase().split(h);if(bF.crossDomain==null){bK=K.exec(bF.url.toLowerCase());bF.crossDomain=!!(bK&&(bK[1]!=s[1]||bK[2]!=s[2]||(bK[3]||(bK[1]==="http:"?80:443))!=(s[3]||(s[1]==="http:"?80:443))))}if(bF.data&&bF.processData&&typeof bF.data!=="string"){bF.data=b.param(bF.data,bF.traditional)}aW(aa,bF,bz,bL);if(bC===2){return false}by=bF.global;bF.type=bF.type.toUpperCase();bF.hasContent=!aQ.test(bF.type);if(by&&b.active++===0){b.event.trigger("ajaxStart")}if(!bF.hasContent){if(bF.data){bF.url+=(M.test(bF.url)?"&":"?")+bF.data;delete bF.data}bE=bF.url;if(bF.cache===false){var bx=b.now(),bR=bF.url.replace(bt,"$1_="+bx);bF.url=bR+((bR===bF.url)?(M.test(bF.url)?"&":"?")+"_="+bx:"")}}if(bF.data&&bF.hasContent&&bF.contentType!==false||bz.contentType){bL.setRequestHeader("Content-Type",bF.contentType)}if(bF.ifModified){bE=bE||bF.url;if(b.lastModified[bE]){bL.setRequestHeader("If-Modified-Since",b.lastModified[bE])}if(b.etag[bE]){bL.setRequestHeader("If-None-Match",b.etag[bE])}}bL.setRequestHeader("Accept",bF.dataTypes[0]&&bF.accepts[bF.dataTypes[0]]?bF.accepts[bF.dataTypes[0]]+(bF.dataTypes[0]!=="*"?", "+aV+"; q=0.01":""):bF.accepts["*"]);for(bM in bF.headers){bL.setRequestHeader(bM,bF.headers[bM])}if(bF.beforeSend&&(bF.beforeSend.call(bU,bL,bF)===false||bC===2)){bL.abort();return false}for(bM in {success:1,error:1,complete:1}){bL[bM](bF[bM])}bN=aW(r,bF,bz,bL);if(!bN){bH(-1,"No Transport")}else{bL.readyState=1;if(by){bI.trigger("ajaxSend",[bL,bF])}if(bF.async&&bF.timeout>0){bG=setTimeout(function(){bL.abort("timeout")},bF.timeout)}try{bC=1;bN.send(bJ,bH)}catch(bO){if(bC<2){bH(-1,bO)}else{b.error(bO)}}}return bL},param:function(e,by){var bx=[],bA=function(bB,bC){bC=b.isFunction(bC)?bC():bC;bx[bx.length]=encodeURIComponent(bB)+"="+encodeURIComponent(bC)};if(by===L){by=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bA(this.name,this.value)})}else{for(var bz in e){v(bz,e[bz],by,bA)}}return bx.join("&").replace(k,"+")}});function v(by,bA,bx,bz){if(b.isArray(bA)){b.each(bA,function(bC,bB){if(bx||ao.test(by)){bz(by,bB)}else{v(by+"["+(typeof bB==="object"||b.isArray(bB)?bC:"")+"]",bB,bx,bz)}})}else{if(!bx&&bA!=null&&typeof bA==="object"){for(var e in bA){v(by+"["+e+"]",bA[e],bx,bz)}}else{bz(by,bA)}}}b.extend({active:0,lastModified:{},etag:{}});function bl(bF,bE,bB){var bx=bF.contents,bD=bF.dataTypes,by=bF.responseFields,bA,bC,bz,e;for(bC in by){if(bC in bB){bE[by[bC]]=bB[bC]}}while(bD[0]==="*"){bD.shift();if(bA===L){bA=bF.mimeType||bE.getResponseHeader("content-type")}}if(bA){for(bC in bx){if(bx[bC]&&bx[bC].test(bA)){bD.unshift(bC);break}}}if(bD[0] in bB){bz=bD[0]}else{for(bC in bB){if(!bD[0]||bF.converters[bC+" "+bD[0]]){bz=bC;break}if(!e){e=bC}}bz=bz||e}if(bz){if(bz!==bD[0]){bD.unshift(bz)}return bB[bz]}}function G(bJ,bB){if(bJ.dataFilter){bB=bJ.dataFilter(bB,bJ.dataType)}var bF=bJ.dataTypes,bI={},bC,bG,by=bF.length,bD,bE=bF[0],bz,bA,bH,bx,e;for(bC=1;bC<by;bC++){if(bC===1){for(bG in bJ.converters){if(typeof bG==="string"){bI[bG.toLowerCase()]=bJ.converters[bG]}}}bz=bE;bE=bF[bC];if(bE==="*"){bE=bz}else{if(bz!=="*"&&bz!==bE){bA=bz+" "+bE;bH=bI[bA]||bI["* "+bE];if(!bH){e=L;for(bx in bI){bD=bx.split(" ");if(bD[0]===bz||bD[0]==="*"){e=bI[bD[1]+" "+bE];if(e){bx=bI[bx];if(bx===true){bH=e}else{if(e===true){bH=bx}}break}}}}if(!(bH||e)){b.error("No conversion from "+bA.replace(" "," to "))}if(bH!==true){bB=bH?bH(bB):e(bx(bB))}}}}return bB}var aB=b.now(),u=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aB++)}});b.ajaxPrefilter("json jsonp",function(bF,bC,bE){var bz=bF.contentType==="application/x-www-form-urlencoded"&&(typeof bF.data==="string");if(bF.dataTypes[0]==="jsonp"||bF.jsonp!==false&&(u.test(bF.url)||bz&&u.test(bF.data))){var bD,by=bF.jsonpCallback=b.isFunction(bF.jsonpCallback)?bF.jsonpCallback():bF.jsonpCallback,bB=bc[by],e=bF.url,bA=bF.data,bx="$1"+by+"$2";if(bF.jsonp!==false){e=e.replace(u,bx);if(bF.url===e){if(bz){bA=bA.replace(u,bx)}if(bF.data===bA){e+=(/\?/.test(e)?"&":"?")+bF.jsonp+"="+by}}}bF.url=e;bF.data=bA;bc[by]=function(bG){bD=[bG]};bE.always(function(){bc[by]=bB;if(bD&&b.isFunction(bB)){bc[by](bD[0])}});bF.converters["script json"]=function(){if(!bD){b.error(by+" was not called")}return bD[0]};bF.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===L){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(by){if(by.crossDomain){var e,bx=au.head||au.getElementsByTagName("head")[0]||au.documentElement;return{send:function(bz,bA){e=au.createElement("script");e.async="async";if(by.scriptCharset){e.charset=by.scriptCharset}e.src=by.url;e.onload=e.onreadystatechange=function(bC,bB){if(bB||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bx&&e.parentNode){bx.removeChild(e)}e=L;if(!bB){bA(200,"success")}}};bx.insertBefore(e,bx.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var B=bc.ActiveXObject?function(){for(var e in N){N[e](0,1)}}:false,y=0,N;function aL(){try{return new bc.XMLHttpRequest()}catch(bx){}}function aj(){try{return new bc.ActiveXObject("Microsoft.XMLHTTP")}catch(bx){}}b.ajaxSettings.xhr=bc.ActiveXObject?function(){return !this.isLocal&&aL()||aj()}:aL;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bx;return{send:function(bD,by){var bC=e.xhr(),bB,bA;if(e.username){bC.open(e.type,e.url,e.async,e.username,e.password)}else{bC.open(e.type,e.url,e.async)}if(e.xhrFields){for(bA in e.xhrFields){bC[bA]=e.xhrFields[bA]}}if(e.mimeType&&bC.overrideMimeType){bC.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bD["X-Requested-With"]){bD["X-Requested-With"]="XMLHttpRequest"}try{for(bA in bD){bC.setRequestHeader(bA,bD[bA])}}catch(bz){}bC.send((e.hasContent&&e.data)||null);bx=function(bM,bG){var bH,bF,bE,bK,bJ;try{if(bx&&(bG||bC.readyState===4)){bx=L;if(bB){bC.onreadystatechange=b.noop;if(B){delete N[bB]}}if(bG){if(bC.readyState!==4){bC.abort()}}else{bH=bC.status;bE=bC.getAllResponseHeaders();bK={};bJ=bC.responseXML;if(bJ&&bJ.documentElement){bK.xml=bJ}bK.text=bC.responseText;try{bF=bC.statusText}catch(bL){bF=""}if(!bH&&e.isLocal&&!e.crossDomain){bH=bK.text?200:404}else{if(bH===1223){bH=204}}}}}catch(bI){if(!bG){by(-1,bI)}}if(bK){by(bH,bF,bK,bE)}};if(!e.async||bC.readyState===4){bx()}else{bB=++y;if(B){if(!N){N={};b(bc).unload(B)}N[bB]=bx}bC.onreadystatechange=bx}},abort:function(){if(bx){bx(0,1)}}}}})}var R={},a9,m,aA=/^(?:toggle|show|hide)$/,aT=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a4,aH=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a5;b.fn.extend({show:function(bz,bC,bB){var by,bA;if(bz||bz===0){return this.animate(a1("show",3),bz,bC,bB)}else{for(var bx=0,e=this.length;bx<e;bx++){by=this[bx];if(by.style){bA=by.style.display;if(!b._data(by,"olddisplay")&&bA==="none"){bA=by.style.display=""}if(bA===""&&b.css(by,"display")==="none"){b._data(by,"olddisplay",x(by.nodeName))}}}for(bx=0;bx<e;bx++){by=this[bx];if(by.style){bA=by.style.display;if(bA===""||bA==="none"){by.style.display=b._data(by,"olddisplay")||""}}}return this}},hide:function(bz,bC,bB){if(bz||bz===0){return this.animate(a1("hide",3),bz,bC,bB)}else{var by,bA,bx=0,e=this.length;for(;bx<e;bx++){by=this[bx];if(by.style){bA=b.css(by,"display");if(bA!=="none"&&!b._data(by,"olddisplay")){b._data(by,"olddisplay",bA)}}}for(bx=0;bx<e;bx++){if(this[bx].style){this[bx].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(by,bx,bz){var e=typeof by==="boolean";if(b.isFunction(by)&&b.isFunction(bx)){this._toggle.apply(this,arguments)}else{if(by==null||e){this.each(function(){var bA=e?by:b(this).is(":hidden");b(this)[bA?"show":"hide"]()})}else{this.animate(a1("toggle",3),by,bx,bz)}}return this},fadeTo:function(e,bz,by,bx){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bz},e,by,bx)},animate:function(bB,by,bA,bz){var e=b.speed(by,bA,bz);if(b.isEmptyObject(bB)){return this.each(e.complete,[false])}bB=b.extend({},bB);function bx(){if(e.queue===false){b._mark(this)}var bG=b.extend({},e),bM=this.nodeType===1,bK=bM&&b(this).is(":hidden"),bD,bH,bF,bL,bJ,bE,bI,bN,bC;bG.animatedProperties={};for(bF in bB){bD=b.camelCase(bF);if(bF!==bD){bB[bD]=bB[bF];delete bB[bF]}bH=bB[bD];if(b.isArray(bH)){bG.animatedProperties[bD]=bH[1];bH=bB[bD]=bH[0]}else{bG.animatedProperties[bD]=bG.specialEasing&&bG.specialEasing[bD]||bG.easing||"swing"}if(bH==="hide"&&bK||bH==="show"&&!bK){return bG.complete.call(this)}if(bM&&(bD==="height"||bD==="width")){bG.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout||x(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.zoom=1}}}}if(bG.overflow!=null){this.style.overflow="hidden"}for(bF in bB){bL=new b.fx(this,bG,bF);bH=bB[bF];if(aA.test(bH)){bC=b._data(this,"toggle"+bF)||(bH==="toggle"?bK?"show":"hide":0);if(bC){b._data(this,"toggle"+bF,bC==="show"?"hide":"show");bL[bC]()}else{bL[bH]()}}else{bJ=aT.exec(bH);bE=bL.cur();if(bJ){bI=parseFloat(bJ[2]);bN=bJ[3]||(b.cssNumber[bF]?"":"px");if(bN!=="px"){b.style(this,bF,(bI||1)+bN);bE=((bI||1)/bL.cur())*bE;b.style(this,bF,bE+bN)}if(bJ[1]){bI=((bJ[1]==="-="?-1:1)*bI)+bE}bL.custom(bE,bI,bN)}else{bL.custom(bE,bH,"")}}}return true}return e.queue===false?this.each(bx):this.queue(e.queue,bx)},stop:function(by,bx,e){if(typeof by!=="string"){e=bx;bx=by;by=L}if(bx&&by!==false){this.queue(by||"fx",[])}return this.each(function(){var bA,bz=false,bC=b.timers,bB=b._data(this);if(!e){b._unmark(true,this)}function bD(bG,bH,bF){var bE=bH[bF];b.removeData(bG,bF,true);bE.stop(e)}if(by==null){for(bA in bB){if(bB[bA].stop&&bA.indexOf(".run")===bA.length-4){bD(this,bB,bA)}}}else{if(bB[bA=by+".run"]&&bB[bA].stop){bD(this,bB,bA)}}for(bA=bC.length;bA--;){if(bC[bA].elem===this&&(by==null||bC[bA].queue===by)){if(e){bC[bA](true)}else{bC[bA].saveState()}bz=true;bC.splice(bA,1)}}if(!(e&&bz)){b.dequeue(this,by)}})}});function bi(){setTimeout(ar,0);return(a5=b.now())}function ar(){a5=L}function a1(bx,e){var by={};b.each(aH.concat.apply([],aH.slice(0,e)),function(){by[this]=bx});return by}b.each({slideDown:a1("show",1),slideUp:a1("hide",1),slideToggle:a1("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bx){b.fn[e]=function(by,bA,bz){return this.animate(bx,by,bA,bz)}});b.extend({speed:function(by,bz,bx){var e=by&&typeof by==="object"?b.extend({},by):{complete:bx||!bx&&bz||b.isFunction(by)&&by,duration:by,easing:bx&&bz||bz&&!b.isFunction(bz)&&bz};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(bA){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue){b.dequeue(this,e.queue)}else{if(bA!==false){b._unmark(this)}}};return e},easing:{linear:function(by,bz,e,bx){return e+bx*by},swing:function(by,bz,e,bx){return((-Math.cos(by*Math.PI)/2)+0.5)*bx+e}},timers:[],fx:function(bx,e,by){this.options=e;this.elem=bx;this.prop=by;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,bx=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bx))?!bx||bx==="auto"?0:bx:e},custom:function(bB,bA,bz){var e=this,by=b.fx;this.startTime=a5||bi();this.end=bA;this.now=this.start=bB;this.pos=this.state=0;this.unit=bz||this.unit||(b.cssNumber[this.prop]?"":"px");function bx(bC){return e.step(bC)}bx.queue=this.options.queue;bx.elem=this.elem;bx.saveState=function(){if(e.options.hide&&b._data(e.elem,"fxshow"+e.prop)===L){b._data(e.elem,"fxshow"+e.prop,e.start)}};if(bx()&&b.timers.push(bx)&&!a4){a4=setInterval(by.tick,by.interval)}},show:function(){var e=b._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||b.style(this.elem,this.prop);this.options.show=true;if(e!==L){this.custom(this.cur(),e)}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur())}b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b._data(this.elem,"fxshow"+this.prop)||b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bA){var bC,bD,bx,bz=a5||bi(),e=true,bB=this.elem,by=this.options;if(bA||bz>=by.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();by.animatedProperties[this.prop]=true;for(bC in by.animatedProperties){if(by.animatedProperties[bC]!==true){e=false}}if(e){if(by.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bE,bF){bB.style["overflow"+bF]=by.overflow[bE]})}if(by.hide){b(bB).hide()}if(by.hide||by.show){for(bC in by.animatedProperties){b.style(bB,bC,by.orig[bC]);b.removeData(bB,"fxshow"+bC,true);b.removeData(bB,"toggle"+bC,true)}}bx=by.complete;if(bx){by.complete=false;bx.call(bB)}}return false}else{if(by.duration==Infinity){this.now=bz}else{bD=bz-this.startTime;this.state=bD/by.duration;this.pos=b.easing[by.animatedProperties[this.prop]](this.state,bD,0,1,by.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){var by,bx=b.timers,e=0;for(;e<bx.length;e++){by=bx[e];if(!by()&&bx[e]===by){bx.splice(e--,1)}}if(!bx.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a4);a4=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit}else{e.elem[e.prop]=e.now}}}});b.each(["width","height"],function(e,bx){b.fx.step[bx]=function(by){b.style(by.elem,bx,Math.max(0,by.now))}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bx){return e===bx.elem}).length}}function x(bz){if(!R[bz]){var e=au.body,bx=b("<"+bz+">").appendTo(e),by=bx.css("display");bx.remove();if(by==="none"||by===""){if(!a9){a9=au.createElement("iframe");a9.frameBorder=a9.width=a9.height=0}e.appendChild(a9);if(!m||!a9.createElement){m=(a9.contentWindow||a9.contentDocument).document;m.write((au.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");m.close()}bx=m.createElement(bz);m.body.appendChild(bx);by=b.css(bx,"display");e.removeChild(a9)}R[bz]=by}return R[bz]}var V=/^t(?:able|d|h)$/i,ad=/^(?:body|html)$/i;if("getBoundingClientRect" in au.documentElement){b.fn.offset=function(bK){var bA=this[0],bD;if(bK){return this.each(function(e){b.offset.setOffset(this,bK,e)})}if(!bA||!bA.ownerDocument){return null}if(bA===bA.ownerDocument.body){return b.offset.bodyOffset(bA)}try{bD=bA.getBoundingClientRect()}catch(bH){}var bJ=bA.ownerDocument,by=bJ.documentElement;if(!bD||!b.contains(by,bA)){return bD?{top:bD.top,left:bD.left}:{top:0,left:0}}var bE=bJ.body,bF=aK(bJ),bC=by.clientTop||bE.clientTop||0,bG=by.clientLeft||bE.clientLeft||0,bx=bF.pageYOffset||b.support.boxModel&&by.scrollTop||bE.scrollTop,bB=bF.pageXOffset||b.support.boxModel&&by.scrollLeft||bE.scrollLeft,bI=bD.top+bx-bC,bz=bD.left+bB-bG;return{top:bI,left:bz}}}else{b.fn.offset=function(bH){var bB=this[0];if(bH){return this.each(function(bI){b.offset.setOffset(this,bH,bI)})}if(!bB||!bB.ownerDocument){return null}if(bB===bB.ownerDocument.body){return b.offset.bodyOffset(bB)}var bE,by=bB.offsetParent,bx=bB,bG=bB.ownerDocument,bz=bG.documentElement,bC=bG.body,bD=bG.defaultView,e=bD?bD.getComputedStyle(bB,null):bB.currentStyle,bF=bB.offsetTop,bA=bB.offsetLeft;while((bB=bB.parentNode)&&bB!==bC&&bB!==bz){if(b.support.fixedPosition&&e.position==="fixed"){break}bE=bD?bD.getComputedStyle(bB,null):bB.currentStyle;bF-=bB.scrollTop;bA-=bB.scrollLeft;if(bB===by){bF+=bB.offsetTop;bA+=bB.offsetLeft;if(b.support.doesNotAddBorder&&!(b.support.doesAddBorderForTableAndCells&&V.test(bB.nodeName))){bF+=parseFloat(bE.borderTopWidth)||0;bA+=parseFloat(bE.borderLeftWidth)||0}bx=by;by=bB.offsetParent}if(b.support.subtractsBorderForOverflowNotVisible&&bE.overflow!=="visible"){bF+=parseFloat(bE.borderTopWidth)||0;bA+=parseFloat(bE.borderLeftWidth)||0}e=bE}if(e.position==="relative"||e.position==="static"){bF+=bC.offsetTop;bA+=bC.offsetLeft}if(b.support.fixedPosition&&e.position==="fixed"){bF+=Math.max(bz.scrollTop,bC.scrollTop);bA+=Math.max(bz.scrollLeft,bC.scrollLeft)}return{top:bF,left:bA}}}b.offset={bodyOffset:function(e){var by=e.offsetTop,bx=e.offsetLeft;if(b.support.doesNotIncludeMarginInBodyOffset){by+=parseFloat(b.css(e,"marginTop"))||0;bx+=parseFloat(b.css(e,"marginLeft"))||0}return{top:by,left:bx}},setOffset:function(bz,bI,bC){var bD=b.css(bz,"position");if(bD==="static"){bz.style.position="relative"}var bB=b(bz),bx=bB.offset(),e=b.css(bz,"top"),bG=b.css(bz,"left"),bH=(bD==="absolute"||bD==="fixed")&&b.inArray("auto",[e,bG])>-1,bF={},bE={},by,bA;if(bH){bE=bB.position();by=bE.top;bA=bE.left}else{by=parseFloat(e)||0;bA=parseFloat(bG)||0}if(b.isFunction(bI)){bI=bI.call(bz,bC,bx)}if(bI.top!=null){bF.top=(bI.top-bx.top)+by}if(bI.left!=null){bF.left=(bI.left-bx.left)+bA}if("using" in bI){bI.using.call(bz,bF)}else{bB.css(bF)}}};b.fn.extend({position:function(){if(!this[0]){return null}var by=this[0],bx=this.offsetParent(),bz=b.extend({},this.offset()),e=ad.test(bx[0].nodeName)?{top:0,left:0}:bx.offset();bz.top-=parseFloat(b.css(by,"marginTop"))||0;bz.left-=parseFloat(b.css(by,"marginLeft"))||0;e.top+=parseFloat(b.css(bx[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bx[0],"borderLeftWidth"))||0;return{top:bz.top-e.top,left:bz.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||au.body;while(e&&(!ad.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(bx,e){var by="scroll"+e;b.fn[by]=function(bB){var bz,bA;if(bB===L){bz=this[0];if(!bz){return null}bA=aK(bz);return bA?("pageXOffset" in bA)?bA[bx?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bA.document.documentElement[by]||bA.document.body[by]:bz[by]}return this.each(function(){bA=aK(this);if(bA){bA.scrollTo(!bx?bB:b(bA).scrollLeft(),bx?bB:b(bA).scrollTop())}else{this[by]=bB}})}});function aK(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(bx,e){var by=e.toLowerCase();b.fn["inner"+e]=function(){var bz=this[0];return bz?bz.style?parseFloat(b.css(bz,by,"padding")):this[by]():null};b.fn["outer"+e]=function(bA){var bz=this[0];return bz?bz.style?parseFloat(b.css(bz,by,bA?"margin":"border")):this[by]():null};b.fn[by]=function(bB){var bC=this[0];if(!bC){return bB==null?null:this}if(b.isFunction(bB)){return this.each(function(bG){var bF=b(this);bF[by](bB.call(this,bG,bF[by]()))})}if(b.isWindow(bC)){var bD=bC.document.documentElement["client"+e],bz=bC.document.body;return bC.document.compatMode==="CSS1Compat"&&bD||bz&&bz["client"+e]||bD}else{if(bC.nodeType===9){return Math.max(bC.documentElement["client"+e],bC.body["scroll"+e],bC.documentElement["scroll"+e],bC.body["offset"+e],bC.documentElement["offset"+e])}else{if(bB===L){var bE=b.css(bC,by),bA=parseFloat(bE);return b.isNumeric(bA)?bA:bE}else{return this.css(by,typeof bB==="string"?bB:bB+"px")}}}}});bc.jQuery=bc.$j=b})(window);
;
if(window.define){var _jQuery=jQuery;define("jquery",function(){return _jQuery})};
;
(function(b){var c,a;c=b.fn.pushStack;a=function(e,g,d){var f=new jQuery.fn.init();if(jQuery.isArray(e)){push.apply(f,e)}else{jQuery.merge(f,e)}f.prevObject=this;f.context=this.context;if(g==="find"){f.selector=this.selector+(this.selector?" ":"")+d}else{if(g){f.selector=this.selector+"."+g+"("+d+")"}}return f};b.fn.pushStack=function(f,h,d){var g;try{g=c.call(this,f,h,d);return g}catch(i){if(i instanceof TypeError){if(!(g instanceof jQuery.fn.init)){g=a.call(this,f,h,d);return g}}throw i}}}).call(this,jQuery);
;
(function(){var a=jQuery.fn.ready;jQuery.fn.asyncReady=function(){var b=this,c=arguments;if(jQuery.isReady){setTimeout(function(){a.apply(b,c)},1)}else{return a.apply(b,c)}}})();
;
(function(b){b.fn.purgeFrame=function(){var c;if(b.browser.msie&&parseFloat(b.browser.version,10)<9){c=a(this)}else{this.remove();c=b.Deferred();c.resolve()}return c};function a(e){var d=e.length,c=b.Deferred();e.load(function(){var f=this;f.contentWindow.document.innerHTML="";d-=1;if(d<=0){e.remove();c.resolve()}});e.attr("src","about:blank");if(e.length===0){c.resolve()}return c.promise()}})(jQuery);
;
/*
 * jQuery Form Plugin
 * version: 2.67 (12-MAR-2011)
 * @requires jQuery v1.3.2 or later
 * @depends path=/resources/scripts/jquery/jquery.purgeFrame.js
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(t){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof t=="function"){t={success:t}}var h=this.attr("action");var d=(typeof h==="string")?b.trim(h):"";if(d){d=(d.match(/^([^#]+)/)||[])[1]}d=d||window.location.href||"";t=b.extend(true,{url:d,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var u={};this.trigger("form-pre-serialize",[this,t,u]);if(u.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(t.beforeSerialize&&t.beforeSerialize(this,t)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var f,p,m=this.formToArray(t.semantic);if(t.data){t.extraData=t.data;for(f in t.data){if(t.data[f] instanceof Array){for(var i in t.data[f]){m.push({name:f,value:t.data[f][i]})}}else{p=t.data[f];p=b.isFunction(p)?p():p;m.push({name:f,value:p})}}}if(t.beforeSubmit&&t.beforeSubmit(m,this,t)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[m,this,t,u]);if(u.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var c=b.param(m);if(t.type.toUpperCase()=="GET"){t.url+=(t.url.indexOf("?")>=0?"&":"?")+c;t.data=null}else{t.data=c}var s=this,l=[];if(t.resetForm){l.push(function(){s.resetForm()})}if(t.clearForm){l.push(function(){s.clearForm()})}if(!t.dataType&&t.target){var r=t.success||function(){};l.push(function(n){var k=t.replaceTarget?"replaceWith":"html";b(t.target)[k](n).each(r,arguments)})}else{if(t.success){l.push(t.success)}}t.success=function(w,n,x){var v=t.context||t;for(var q=0,k=l.length;q<k;q++){l[q].apply(v,[w,n,x||s,s])}};var g=b("input:file",this).length>0;var e="multipart/form-data";var j=(s.attr("enctype")==e||s.attr("encoding")==e);if(t.iframe!==false&&(g||t.iframe||j)){if(t.closeKeepAlive){b.get(t.closeKeepAlive,o)}else{o()}}else{b.ajax(t)}this.trigger("form-submit-notify",[this,t]);return this;function o(){var v=s[0];if(b(":input[name=submit],:input[id=submit]",v).length){alert('Error: Form elements must not have name or id of "submit".');return}var B=b.extend(true,{},b.ajaxSettings,t);B.context=B.context||B;var E="jqFormIO"+(new Date().getTime()),z="_"+E;var w=b('<iframe id="'+E+'" name="'+E+'" src="'+B.iframeSrc+'" />');var A=w[0];w.css({position:"absolute",top:"-1000px",left:"-1000px"});var x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){a("aborting upload...");var n="aborted";this.aborted=1;w.attr("src",B.iframeSrc);x.error=n;B.error&&B.error.call(B.context,x,"error",n);I&&b.event.trigger("ajaxError",[x,B,n]);B.complete&&B.complete.call(B.context,x,"error")}};var I=B.global;if(I&&!b.active++){b.event.trigger("ajaxStart")}if(I){b.event.trigger("ajaxSend",[x,B])}if(B.beforeSend&&B.beforeSend.call(B.context,x,B)===false){if(B.global){b.active--}return}if(x.aborted){return}var H=0;var y=v.clk;if(y){var F=y.name;if(F&&!y.disabled){B.extraData=B.extraData||{};B.extraData[F]=y.value;if(y.type=="image"){B.extraData[F+".x"]=v.clk_x;B.extraData[F+".y"]=v.clk_y}}}function G(){var O=s.attr("target"),M=s.attr("action");v.setAttribute("target",E);if(v.getAttribute("method")!="POST"){v.setAttribute("method","POST")}if(v.getAttribute("action")!=B.url){v.setAttribute("action",B.url)}if(!B.skipEncodingOverride){s.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(B.timeout){setTimeout(function(){H=true;D()},B.timeout)}var N=[];try{if(B.extraData){for(var P in B.extraData){N.push(b('<input type="hidden" name="'+P+'" value="'+B.extraData[P]+'" />').appendTo(v)[0])}}w.appendTo("body");A.attachEvent?A.attachEvent("onload",D):A.addEventListener("load",D,false);v.submit()}finally{v.setAttribute("action",M);if(O){v.setAttribute("target",O)}else{s.removeAttr("target")}b(N).remove()}}if(B.forceSync){G()}else{setTimeout(G,10)}var K,L,J=50;function D(){if(x.aborted){return}var R=A.contentWindow?A.contentWindow.document:A.contentDocument?A.contentDocument:A.document;if(!R||R.location.href==B.iframeSrc){return}A.detachEvent?A.detachEvent("onload",D):A.removeEventListener("load",D,false);var N=true;try{if(H){throw"timeout"}var S=B.dataType=="xml"||R.XMLDocument||b.isXMLDoc(R);a("isXml="+S);if(!S&&window.opera&&(R.body==null||R.body.innerHTML=="")){if(--J){a("requeing onLoad callback, DOM not available");setTimeout(D,250);return}}x.responseText=R.body?R.body.innerHTML:R.documentElement?R.documentElement.innerHTML:null;x.responseXML=R.XMLDocument?R.XMLDocument:R;x.getResponseHeader=function(U){var T={"content-type":B.dataType};return T[U]};var Q=/(json|script)/.test(B.dataType);if(Q||B.textarea){var M=R.getElementsByTagName("textarea")[0];if(M){x.responseText=M.value}else{if(Q){var P=R.getElementsByTagName("pre")[0];var n=R.getElementsByTagName("body")[0];if(P){x.responseText=P.textContent}else{if(n){x.responseText=n.innerHTML}}}}}else{if(B.dataType=="xml"&&!x.responseXML&&x.responseText!=null){x.responseXML=C(x.responseText)}}K=k(x,B.dataType,B)}catch(O){a("error caught:",O);N=false;x.error=O;B.error&&B.error.call(B.context,x,"error",O);I&&b.event.trigger("ajaxError",[x,B,O])}if(x.aborted){a("upload aborted");N=false}if(N){B.success&&B.success.call(B.context,K,"success",x);I&&b.event.trigger("ajaxSuccess",[x,B])}I&&b.event.trigger("ajaxComplete",[x,B]);if(I&&!--b.active){b.event.trigger("ajaxStop")}B.complete&&B.complete.call(B.context,x,N?"success":"error");setTimeout(function(){w.removeData("form-plugin-onload");if(w.purgeFrame){w.purgeFrame()}else{w.remove()}x.responseXML=null},100)}var C=b.parseXML||function(n,M){if(window.ActiveXObject){M=new ActiveXObject("Microsoft.XMLDOM");M.async="false";M.loadXML(n)}else{M=(new DOMParser()).parseFromString(n,"text/xml")}return(M&&M.documentElement&&M.documentElement.nodeName!="parsererror")?M:null};var q=b.parseJSON||function(n){return window["eval"]("("+n+")")};var k=function(Q,O,N){var M=Q.getResponseHeader("content-type")||"",n=O==="xml"||!O&&M.indexOf("xml")>=0,P=n?Q.responseXML:Q.responseText;if(n&&P.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(N&&N.dataFilter){P=N.dataFilter(P,O)}if(typeof P==="string"){if(O==="json"||!O&&M.indexOf("json")>=0){P=q(P)}else{if(O==="script"||!O&&M.indexOf("javascript")>=0){b.globalEval(P)}}}return P}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p}var d=this[0];var g=q?d.getElementsByTagName("*"):d.elements;if(!g){return p}var k,h,f,r,e,m,c;for(k=0,m=g.length;k<m;k++){e=g[k];f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(h=0,c=r.length;h<c;h++){p.push({name:f,value:r[h]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(j===undefined){j=true}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null}if(q=="select"){var k=c.selectedIndex;if(k<0){return null}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value}if(g){return o}m.push(o)}}return m}return b(c).val()};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();if(d=="text"||d=="password"||c=="textarea"){this.value=""}else{if(d=="checkbox"||d=="radio"){this.checked=false}else{if(c=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};function a(){if(b.fn.ajaxSubmit.debug){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}}})(jQuery);
;
(function(a){a.fn.jiveFileButton=function(c){var d=this;c=a.extend({name:"file",title:"file",id:"file"+Math.floor((Math.random()*1000)+1)},c||{});function b(){var e=a(this).unbind("change",b).remove();d.trigger("choose",e);d.jiveFileButton(c)}a('<input type="file" />').attr({name:c.name,tabindex:-1,id:c.id,title:c.title}).appendTo(d).change(b);return d}})(jQuery);
;
(function(a){a.extend(a.fn,{delayedObserver:function(d,c,b){this.each(function(){var f=a(this);var e=e||{};f.data("oldval",f.val()).data("delay",c||0.5).data("condition",e.condition||function(){return(a(this).data("oldval")==a(this).val())}).data("callback",d)[(e.event||"keyup")](function(){if(f.data("condition").apply(f)){return}else{if(f.data("timer")){clearTimeout(f.data("timer"))}f.data("timer",setTimeout(function(){f.data("callback").apply(f)},f.data("delay")*1000));f.data("oldval",f.val())}})})}})})(jQuery);
;
jQuery.extend({historyCurrentHash:undefined,historyCallback:undefined,historyInit:function(d){jQuery.historyCallback=d;var c=location.hash;jQuery.historyCurrentHash=c;if(jQuery.browser.msie){if(jQuery.historyCurrentHash==""){jQuery.historyCurrentHash="#"}jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"></iframe>');var a=jQuery("#jQuery_history")[0];var b=a.contentWindow.document;b.open();b.close();b.location.hash=c}else{if(jQuery.browser.safari){jQuery.historyBackStack=[];jQuery.historyBackStack.length=history.length;jQuery.historyForwardStack=[];jQuery.isFirst=true}}jQuery.historyCallback(c.replace(/^#/,""));setInterval(jQuery.historyCheck,100)},historyAddHistory:function(a){jQuery.historyBackStack.push(a);jQuery.historyForwardStack.length=0;this.isFirst=true},historyCheck:function(){if(jQuery.browser.msie){var a=jQuery("#jQuery_history")[0];var d=a.contentDocument||a.contentWindow.document;var f=d.location.hash;if(f!=jQuery.historyCurrentHash){location.hash=f;jQuery.historyCurrentHash=f;jQuery.historyCallback(f.replace(/^#/,""))}}else{if(jQuery.browser.safari){if(!jQuery.dontCheck){var b=history.length-jQuery.historyBackStack.length;if(b){jQuery.isFirst=false;if(b<0){for(var c=0;c<Math.abs(b);c++){jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop())}}else{for(var c=0;c<b;c++){jQuery.historyBackStack.push(jQuery.historyForwardStack.shift())}}var e=jQuery.historyBackStack[jQuery.historyBackStack.length-1];if(e!=undefined){jQuery.historyCurrentHash=location.hash;jQuery.historyCallback(e)}}else{if(jQuery.historyBackStack[jQuery.historyBackStack.length-1]==undefined&&!jQuery.isFirst){if(document.URL.indexOf("#")>=0){jQuery.historyCallback(document.URL.split("#")[1])}else{var f=location.hash;jQuery.historyCallback("")}jQuery.isFirst=true}}}}else{var f=location.hash;if(f!=jQuery.historyCurrentHash){jQuery.historyCurrentHash=f;jQuery.historyCallback(f.replace(/^#/,""))}}}},historyLoad:function(d){var e;if(jQuery.browser.safari){e=d}else{e="#"+d;location.hash=e}jQuery.historyCurrentHash=e;if(jQuery.browser.msie){var a=jQuery("#jQuery_history")[0];var c=a.contentWindow.document;c.open();c.close();c.location.hash=e;jQuery.historyCallback(d)}else{if(jQuery.browser.safari){jQuery.dontCheck=true;this.historyAddHistory(d);var b=function(){jQuery.dontCheck=false};window.setTimeout(b,200);jQuery.historyCallback(d);location.hash=e}else{jQuery.historyCallback(d)}}}});
;
/*
 * jQuery UI 1.8.17
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a,d){a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(e,f){return typeof e==="number"?this.each(function(){var g=this;setTimeout(function(){a(g).focus();if(f){f.call(g)}},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){e=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{e=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!e.length?a(document):e},zIndex:function(h){if(h!==d){return this.css("zIndex",h)}if(this.length){var f=a(this[0]),e,g;while(f.length&&f[0]!==document){e=f.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){g=parseInt(f.css("zIndex"),10);if(!isNaN(g)&&g!==0){return g}}f=f.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(g,e){var f=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function j(m,l,i,n){a.each(f,function(){l-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(i){l-=parseFloat(a.curCSS(m,"border"+this+"Width",true))||0}if(n){l-=parseFloat(a.curCSS(m,"margin"+this,true))||0}});return l}a.fn["inner"+e]=function(i){if(i===d){return k["inner"+e].call(this)}return this.each(function(){a(this).css(h,j(this,i)+"px")})};a.fn["outer"+e]=function(i,l){if(typeof i!=="number"){return k["outer"+e].call(this,i)}return this.each(function(){a(this).css(h,j(this,i,true,l)+"px")})}});function c(g,e){var j=g.nodeName.toLowerCase();if("area"===j){var i=g.parentNode,h=i.name,f;if(!g.href||!h||i.nodeName.toLowerCase()!=="map"){return false}f=a("img[usemap=#"+h+"]")[0];return !!f&&b(f)}return(/input|select|textarea|button|object/.test(j)?!g.disabled:"a"==j?g.href||e:e)&&b(g)}function b(e){return !a(e).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(g,f,e){return !!a.data(g,e[3])},focusable:function(e){return c(e,!isNaN(a.attr(e,"tabindex")))},tabbable:function(g){var e=a.attr(g,"tabindex"),f=isNaN(e);return(f||e>=0)&&c(g,!f)}});a(function(){var e=document.body,f=e.appendChild(f=document.createElement("div"));a.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=f.offsetHeight===100;a.support.selectstart="onselectstart" in f;e.removeChild(f).style.display="none"});a.extend(a.ui,{plugin:{add:function(f,g,j){var h=a.ui[f].prototype;for(var e in j){h.plugins[e]=h.plugins[e]||[];h.plugins[e].push([g,j[e]])}},call:function(e,g,f){var j=e.plugins[g];if(!j||!e.element[0].parentNode){return}for(var h=0;h<j.length;h++){if(e.options[j[h][0]]){j[h][1].apply(e.element,f)}}}},contains:function(f,e){return document.compareDocumentPosition?f.compareDocumentPosition(e)&16:f!==e&&f.contains(e)},hasScroll:function(h,f){if(a(h).css("overflow")==="hidden"){return false}var e=(f&&f==="left")?"scrollLeft":"scrollTop",g=false;if(h[e]>0){return true}h[e]=1;g=(h[e]>0);h[e]=0;return g},isOverAxis:function(f,e,g){return(f>e)&&(f<(e+g))},isOver:function(j,f,i,h,e,g){return a.ui.isOverAxis(j,i,e)&&a.ui.isOverAxis(f,h,g)}})})(jQuery);
;
define("jive.Accessibility",["jquery"],function(e){jive.namespace("Accessibility");var c=e.ui.keyCode;jive.Accessibility=jive.oo.Class.extend(function(i){i.init=function k(m){var o=this;this.hotkeys={};this.options=m=e.extend({},{hoverSelection:false,focusableSelector:jive.Accessibility.DEFAULT_FOCUSABLE_SELECTOR,skipTargetCheck:false,focusOnHover:true},m);this.$scope=e(m.scope);if(m.hotkeys){e.each(m.hotkeys,function(){var p=this;o.addHotkey(p.ch,p.ctrl,p.alt,p.shift,p.action)})}if(m.otherActions){this.$scope.on("keydown.jiveAccess",function(r){if(o.isTextField(r.target)){return}for(var q=0;q<m.otherActions.length;++q){var p=m.otherActions[q](r);if(p===false){return false}}})}if(m.hoverSelection){this.$scope.on("mousemove.jiveAccess",function(q){var p=e(q.target).closest(m.focusableSelector);o.$scope.find("."+jive.Accessibility.SELECTED_CLASS).removeClass(jive.Accessibility.SELECTED_CLASS);p.addClass(jive.Accessibility.SELECTED_CLASS);if(m.focusOnHover){p.focus()}})}if(m.focusTarget){var n=e(m.focusTarget);this.$scope.not(n).on("click.jiveAccess",function(p){console.log("click handled",p);if(e(n[0].ownerDocument.activeElement).closest(n).length===0){jive.conc.nextTick(function(){n.focus()})}})}};this.teardown=function(){this.$scope.off(".jiveAccess");this.$scope.find(this.options.focusableSelector).off(".jiveAccess")};this.addHotkey=function h(p,r,s,n,q){if(typeof p!="string"||!/^[a-z]$/i.test(p)){throw new Error("hotkeys require an alphabet character")}if(!this._hotkeyHandler){this._hotkeyHandler=this.hotkeyHandler.bind(this);this.$scope.on("keydown.jiveAccess",this._hotkeyHandler)}var m={ctrl:!!r,alt:!!s,shift:!!n,charCode:p.charCodeAt(0),keyCode:p.toUpperCase().charCodeAt(0),action:q};var o=(m.shift?"shift+":"")+(m.ctrl?"ctrl+":"")+(m.alt?"alt+":"")+p.toUpperCase();this.hotkeys[o]=m};i.isTextField=function(m){return !this.options.skipTargetCheck&&e(m).filter('textarea, input, *[contentEditable="true"]').not("input[type=radio], input[type=checkbox], input[type=submit], input[type=file], input[type=image], input[type=reset], input[type=button]").length>0};var j=navigator.userAgent.indexOf("Mac")!=-1;i.hotkeyHandler=function l(n){if(!(n.metaKey||n.ctrlKey||n.altKey)&&this.isTextField(n.target)){return}var m="";if(n.shiftKey){m+="shift+"}if((j&&n.metaKey)||n.ctrlKey){m+="ctrl+"}if(n.altKey){m+="alt+"}m+=String.fromCharCode(n.keyCode);if(this.hotkeys[m]){this.hotkeys[m].action(n)}}});jive.Accessibility.filterFocusable=function d(h){return h.filter(":visible").not(":disabled").not("[tabindex='-1']")};jive.Accessibility.DEFAULT_FOCUSABLE_SELECTOR="a, input, select, textarea, button, *[tabindex][tabindex!='-1']";jive.Accessibility.SELECTED_CLASS="j-selected";jive.Accessibility.FOCUS_STACK=[];jive.Accessibility.focusAction=function(h){return function i(){e(h).focus()}};jive.Accessibility.clickAction=function(j,i){return function h(){if(!i){i=j}e(i).focus();e(j).click()}};jive.Accessibility.focusRingAction=function(h,j){if(!j){j=jive.Accessibility.DEFAULT_FOCUSABLE_SELECTOR}function k(){return jive.Accessibility.filterFocusable(e(h).find(j))}return function i(q){if(65<=q.keyCode&&q.keyCode<=90){var p=k(),o=String.fromCharCode(q.keyCode),n,m,l=p.index(e(h).get(0).ownerDocument.activeElement);if(l>=0){for(n=(l+1)%p.length;n!=l;n=(n+1)%p.length){m=p.eq(n);if(m.text().charAt(0).toUpperCase()==o){m.focus();return false}}}else{for(n=0;n<p.length;++n){m=p.eq(n);if(m.text().charAt(0).toUpperCase()==o){m.focus();return false}}}}}};jive.Accessibility.menuSelectAction=function(h){h=e.extend({},{focusableSelector:jive.Accessibility.DEFAULT_FOCUSABLE_SELECTOR,moveFocus:false,skipTargetCheck:false,selectEventTarget:null,selectedClass:true},h);function m(){return jive.Accessibility.filterFocusable(e(h.container).find(h.focusableSelector))}function j(q){var p=m(),o,r;if(h.selectedClass){r=p.filter("."+jive.Accessibility.SELECTED_CLASS)}if(!r||r.length==0){r=e(h.container).get(0).ownerDocument.activeElement}o=p.index(r);l(p);if(q){if(o<=0){o=p.length-1}else{o-=1}}else{if(o==p.length-1){o=0}else{o+=1}}var n=p.eq(o);k(n);if(h.moveFocus){n.focus()}return n}function l(n){if(!h.selectedClass){return}n.removeClass(jive.Accessibility.SELECTED_CLASS)}function k(n){if(!h.selectedClass){return}n.addClass(jive.Accessibility.SELECTED_CLASS)}return function i(p){if(!h.skipTargetCheck&&e(p.target).is("select, input:radio, input:text, textarea")){return}var n;if(p.keyCode==c.UP||p.keyCode==c.DOWN||p.keyCode==c.TAB){if(p.keyCode==c.UP||(p.keyCode==c.TAB&&p.shiftKey)){n=j(true)}else{n=j(false)}if(h.selectEventTarget){h.selectEventTarget.emit("selectionChanged",n,m())}return false}else{if(p.keyCode==c.ENTER||p.keyCode==c.SPACE){if(h.selectEventTarget){var o=m();n=o.filter("."+jive.Accessibility.SELECTED_CLASS);if(n.length>0){h.selectEventTarget.emit("selectionAction",n,m());return false}}}else{if(p.keyCode==c.ESCAPE){if(h.selectEventTarget){h.selectEventTarget.emit("selectionCanceled")}}}}}};jive.Accessibility.focusIn=function f(i){var h=e(i);this.filterFocusable(h.filter(this.DEFAULT_FOCUSABLE_SELECTOR).add(e(this.DEFAULT_FOCUSABLE_SELECTOR,h))).first().focus()};jive.Accessibility.modalize=function a(i){var h=e(i);var j=h.closest("body > *").andSelf();e("body").children().not(j).each(function(){var k=e(this);k.data("modalizeUnhide",k.attr("aria-hidden"))}).attr("aria-hidden","true")};jive.Accessibility.unmodalize=function g(){e("body").children().each(function(){var i=e(this);var h=i.data("modalizeUnhide")||"false";i.attr("aria-hidden",h);i.removeData("modalizeUnhide")})};jive.Accessibility.speak=function b(j){var i=h();i.text(j);function h(){var k=e("#j-speak-accessibility");if(!k.length){k=e("<span id='j-speak-accessibility' class='j-508-label' role='status' aria-live='polite' aria-relevant='all'></span>").appendTo("body")}return k}};jive.Accessibility.pushFocus=function(h){jive.Accessibility.FOCUS_STACK.push(h)};jive.Accessibility.popFocus=function(h){return jive.Accessibility.FOCUS_STACK.pop()||e()};jive.Accessibility.hasStackedFocus=function(){return jive.Accessibility.FOCUS_STACK.length>0};jive.Accessibility.main=new jive.Accessibility({scope:"body"});return jive.Accessibility});
;
(function(a){a.fn.lightbox_me=function(b){return this.each(function(){var d=a.extend({},a.fn.lightbox_me.defaults,b),m=a(),l=a(this),n=a('<iframe id="foo" style="z-index: '+(d.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>');if(d.showOverlay){var f=a(".js_lb_overlay:visible");if(f.length>0){m=a('<div class="lb_overlay_clear js_lb_overlay"/>')}else{m=a('<div class="'+d.classPrefix+'_overlay js_lb_overlay"/>')}}a("body").append(l.hide()).append(m);if(d.hijackScrolling){a("body").css("overflow","hidden")}if(d.showOverlay){h();m.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:(d.zIndex+2),display:"none"});if(!m.hasClass("lb_overlay_clear")){m.css(d.overlayCSS)}}if(d.showOverlay){m.fadeIn(d.overlaySpeed,function(){c();l[d.appearEffect](d.lightboxSpeed,function(){h();c();if(d.focusPopover){jive.conc.nextTick(g)}d.onLoad()});l.find("header:first").css({"margin-right":l.find(".j-modal-close-top").outerWidth()+"px"})})}else{c();l[d.appearEffect](d.lightboxSpeed,function(){if(d.focusPopover){jive.conc.nextTick(g)}d.onLoad()});l.find("header:first").css({"margin-right":l.find(".j-modal-close-top").outerWidth()+"px"})}if(d.parentLightbox){d.parentLightbox.fadeOut(200)}a(window).resize(h).resize(c);a(document).keydown(j);if(d.closeClick){m.click(function(o){i();o.preventDefault})}l.delegate(d.closeSelector,"click",function(o){i();o.preventDefault()});l.bind("close",i);l.bind("resize",c);var e=new jive.Accessibility({scope:l,otherActions:[jive.Accessibility.focusRingAction(l),jive.Accessibility.menuSelectAction({container:l,moveFocus:true,skipTargetCheck:true,selectedClass:false,focusableSelector:jive.Accessibility.DEFAULT_FOCUSABLE_SELECTOR+","+d.additionalFocusSelectors})]});jive.Accessibility.modalize(l);function i(){var o=l[0].style;l.stop();if(d.destroyOnClose){l.add(m).remove()}else{l.add(m).hide()}if(d.parentLightbox){d.parentLightbox.fadeIn(200)}n.remove();a("body").css("overflow","auto");l.undelegate(d.closeSelector,"click");a(window).unbind("resize",h);a(window).unbind("resize",c);a(document).unbind("keydown",j);e.teardown();if(d.closeFocusSelector){jive.Accessibility.filterFocusable($j(d.closeFocusSelector)).focus()}else{jive.Accessibility.filterFocusable(jive.Accessibility.popFocus()).focus()}jive.Accessibility.unmodalize();d.onClose()}function j(o){if((o.keyCode==27||(o.DOM_VK_ESCAPE==27&&o.which==0))&&d.closeEsc){i()}if(o.keyCode==13||(o.DOM_VK_ESCAPE==13&&o.which==0)){d.onDefault(o)}}function h(){if(a(window).height()<a(document).height()){m.css({height:a(document).height()+"px"});n.css({height:a(document).height()+"px"})}else{m.css({height:"100%"})}}function c(){l.css({left:"50%",marginLeft:(l.outerWidth()/2)*-1,zIndex:(d.zIndex+3)});if(l.height()+80>=a(window).height()){var o=a(document).scrollTop()+parseInt(d.modalCSS.top,10);l.css({position:"absolute",top:o+"px",marginTop:0})}else{if(d.centered){l.css({position:"fixed",top:"50%",marginTop:(l.outerHeight()/2)*-1})}else{l.css({position:"fixed"}).css(d.modalCSS)}}}function k(){var o=l.find(":focusable").not(d.closeSelector);if(o.length>0){return o}else{return l.find(":focusable")}}function g(){if(d.initialFocusSelector){l.find(d.initialFocusSelector).first().focus()}else{k().first().focus()}}})};a.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:true,closeEsc:true,closeFocusSelector:"",destroyOnClose:false,showOverlay:true,parentLightbox:false,hijackScrolling:false,focusPopover:true,initialFocusSelector:"",additionalFocusSelectors:"",onLoad:function(){},onClose:function(){},onDefault:function(){},classPrefix:"lb",zIndex:999,centered:false,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:0.3}}})(jQuery);$j.fn.lightbox_me.defaults.closeSelector=".close, .jive-modal-close, .j-modal-close-top";
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.displayutil=="undefined"){jive.shared.displayutil={}}jive.shared.displayutil.avatar=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.anonymous&&A.visible)?((!A.hideLink)?'<a href="'+((A.trackingID)?jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username))+"?"+encodeURIComponent("sr")+"="+encodeURIComponent(A.trackingID):jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username)))+'" title="'+soy.$$escapeHtml(A.displayName)+'" class="j-avatar'+((!A.hideTooltip)?" jiveTT-hover-user":"")+((!A.hidePartnerBadge&&!A.currentUserPartner&&A.partner&&A.size>=32)?" j-partner":"")+'" data-userId="'+((A.ID)?soy.$$escapeHtml(A.ID):soy.$$escapeHtml(A.id))+'" '+((A.prop&&A.prop.presence)?'data-online="'+soy.$$escapeHtml(A.prop.presence.online)+'" data-presence="'+soy.$$escapeHtml(A.prop.presence.jsObject)+'" data-externalId="'+((A.prop.presence.userExternalID)?soy.$$escapeHtml(A.prop.presence.userExternalID):"")+'" '+((A.avatarID)?'data-avatarId="'+soy.$$escapeHtml(A.avatarID)+'" ':"")+((A.username)?'data-username="'+soy.$$escapeHtml(encodeURIComponent(A.username))+'" ':""):"")+">":"")+((!A.enabled)?'<img class="jive-avatar" src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-avatar-disabled.png")+'" width="'+soy.$$escapeHtml(A.size)+'" height="'+soy.$$escapeHtml(A.size)+'"/>':'<img class="jive-avatar" '+((A.username)?((A.avatarID)?'src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username)+"/avatar/"+A.size+".png")+"?"+encodeURIComponent("a")+"="+encodeURIComponent(A.avatarID))+'" data-avatarId="'+soy.$$escapeHtml(A.avatarID)+'" ':'src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username)+"/avatar/"+A.size+".png"))+'" ')+'data-username="'+soy.$$escapeHtml(encodeURIComponent(A.username))+'" ':'src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-avatar-default.png")+'" ')+((!A.hideHeight)?'height="'+soy.$$escapeHtml(A.size)+'" data-height="'+soy.$$escapeHtml(A.size)+'" ':"")+'width="'+soy.$$escapeHtml(A.size)+'" '+((A.storeSizeData)?'data-size="'+soy.$$escapeHtml(A.size)+'" ':"")+'data-random="'+soy.$$escapeHtml(jive.soy.func.randomString())+'" alt="'+soy.$$escapeHtml(A.displayName)+'" title="'+soy.$$escapeHtml(A.displayName)+'"/>'+((!A.hidePartnerBadge&&!A.currentUserPartner&&A.partner&&A.size>=32)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':""))+((!A.hideLink)?"</a>":""):(!A.visible)?'<img class="jive-avatar" src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-avatar-disabled.png")+'" height="'+soy.$$escapeHtml(A.size)+'" width="'+soy.$$escapeHtml(A.size)+'" alt="'+soy.$$escapeHtml(A.displayName)+'" title="'+soy.$$escapeHtml(A.displayName)+'"/>':'<img class="jive-avatar" src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/people/guest/avatar/"+A.size+".png")+'" height="'+soy.$$escapeHtml(A.size)+'" width="'+soy.$$escapeHtml(A.size)+'" alt="'+soy.$$escapeHtml(A.displayName)+'" title="'+soy.$$escapeHtml(A.displayName)+'"/>');return C?"":B.toString()};jive.shared.displayutil.icon=function(A,C){var B=C||new soy.StringBuilder();if(A.type=="url"){B.append("<span title='",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.externalUrl"),[])),"' role='img' class=\"jive-icon-",soy.$$escapeHtml(A.size),' jive-icon-external-site"></span>')}else{if(A.type=="favorite"){B.append("<span title='",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.bookmark"),[])),"' role='img' class=\"jive-icon-",soy.$$escapeHtml(A.size),' jive-icon-bookmark"></span>')}else{if(A.type=="post"){B.append("<span title='",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.blogPost"),[])),"' role='img' class=\"jive-icon-",soy.$$escapeHtml(A.size),' jive-icon-blog"></span>')}else{if(A.type=="update"){B.append("<span title='",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.status"),[])),"' role='img' class=\"jive-icon-",soy.$$escapeHtml(A.size),' jive-icon-status"></span>')}else{if(A.type=="dm"){B.append("<span title='",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.message"),[])),"' role='img' class=\"jive-icon-",soy.$$escapeHtml(A.size),' jive-icon-direct-message"></span>')}else{if(A.type=="comment"){B.append((A.rootType)?(A.rootType=="post")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-blog-comment"></span>':(A.rootType=="update")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-status-comment"></span>':(A.rootType=="entry"||A.rootType=="file")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-comment"></span>':(A.rootType!="comment")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+" jive-icon-"+soy.$$escapeHtml(A.rootType)+'-comment"></span>':"":(A.parentContent&&A.parentContent.type)?(A.parentContent.type=="post")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-blog-comment"></span>':(A.parentContent.type=="update")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-status-comment"></span>':(A.parentContent.type=="entry")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-comment"></span>':(A.parentContent.type!="comment")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+" jive-icon-"+soy.$$escapeHtml(A.parentContent.type)+'-comment"></span>':"":"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comment"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-comment"></span>')}else{if(A.type=="discussion"||A.type=="message"){B.append((A.question)?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[]))+"' role='img' class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-discussion-question"></span>':(A.answer)?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[]))+"' role='img'class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-discussion-correct"></span>':(A.helpful)?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[]))+"' role='img'class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-discussion-helpful"></span>':"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.discussion"),[]))+"' role='img'class=\"jive-icon-"+soy.$$escapeHtml(A.size)+' jive-icon-discussion"></span>')}else{if(A.type=="file"){B.append('<span class="');jive.shared.file.fileTypeIconClass({extension:A.extension,size:A.size,defaultIcon:"jive-icon-document-upload"},B);B.append('"></span>')}else{if(A.type=="person"&&A.jive){if(A.size=="sml"){jive.shared.displayutil.avatar(soy.$$augmentData(A,{username:A.jive.username,size:12,enabled:true,visible:true}),B)}else{if(A.size=="med"){jive.shared.displayutil.avatar(soy.$$augmentData(A,{username:A.jive.username,size:16,enabled:true,visible:true}),B)}else{if(A.size=="big"){jive.shared.displayutil.avatar(soy.$$augmentData(A,{username:A.jive.username,size:25,enabled:true,visible:true}),B)}else{jive.shared.displayutil.avatar(soy.$$augmentData(A,{username:A.jive.username,size:A.size,enabled:true,visible:true}),B)}}}}else{if(A.type){B.append("<span title='",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.access.content.type."+A.type),[])),"' role='img'class=\"jive-icon-",soy.$$escapeHtml(A.size)," jive-icon-",soy.$$escapeHtml(A.type),'"></span>')}}}}}}}}}}return C?"":B.toString()};jive.shared.displayutil.cardError=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.general"),[])));return C?"":B.toString()};jive.shared.displayutil.cardLoading=function(A,C){var B=C||new soy.StringBuilder();B.append('<strong class="jive-tooltip2-loading">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.loading"),[])),"</strong>");return C?"":B.toString()};jive.shared.displayutil.userDisplayNameLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.displayName)?(!A.anonymous)?(A.visible)?'<a href="'+((A.trackingID)?jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username))+"?"+encodeURIComponent("sr")+"="+encodeURIComponent(A.trackingID):jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username)))+'" data-username="'+soy.$$escapeHtml(A.username)+'" data-avatarId="'+soy.$$escapeHtml(A.avatarID)+'" data-userId="'+soy.$$escapeHtml(A.id)+'" '+((A.prop&&A.prop.presence&&A.prop.presence.jsObject)?'data-online="'+soy.$$escapeHtml(A.prop.presence.online)+'" data-presence="'+soy.$$escapeHtml(A.prop.presence.jsObject)+'" data-externalId="'+((A.prop.presence.userExternalID)?soy.$$escapeHtml(A.prop.presence.userExternalID):"")+'" ':"")+'class="jive-username-link '+((!A.hideTooltip)?" jiveTT-hover-user":"")+" "+((!A.enabled)?" jive-user-disabled":"")+" "+((A.extraCss)?" "+soy.$$escapeHtml(A.extraCss):"")+'" '+((A.renderInvisible)?'style="display:none;"':"")+">"+((A.displayNameOverride)?soy.$$escapeHtml(A.displayNameOverride):soy.$$escapeHtml(A.displayName))+"</a>":'<span class="jive-username-span jive-username-link '+((!A.enabled)?" jive-user-disabled":"")+" "+((A.extraCss)?" "+soy.$$escapeHtml(A.extraCss):"")+'" '+((A.renderInvisible)?'style="display:none;"':"")+">"+((A.displayNameOverride)?soy.$$escapeHtml(A.displayNameOverride):soy.$$escapeHtml(A.displayName))+"</span>":'<em class="guest">'+soy.$$escapeHtml(A.displayName)+"</em>":"");return C?"":B.toString()};jive.shared.displayutil.remoteUserDisplayNameLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<span><img src="',soy.$$escapeHtml(A.avatarUrl),'" width="48" height="48" class="jive-avatar" /></span><h5>',soy.$$escapeHtml(A.userDisplayName),'</h5><span class="jive-note-user-status">',soy.$$escapeHtml(A.userStatus),'</span><ul class="jive-profile-tt-fields">',(A.userPhone)?"<li><strong>Phone Number:</strong> "+soy.$$escapeHtml(A.userPhone)+"</li>":"",(A.userEmail)?'<li><strong>Email:</strong> <a href="mailto:'+soy.$$escapeHtml(A.userEmail)+'">'+soy.$$escapeHtml(A.userEmail)+"</a></li>":"",'</ul><p><a href="',soy.$$escapeHtml(A.profileUrl),'">View ',soy.$$escapeHtml(A.userDisplayName),"'s profile</a></p>");return C?"":B.toString()};jive.shared.displayutil.userDisplayName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.displayName)?(!A.anonymous)?soy.$$escapeHtml(A.displayName):'<em class="guest">'+soy.$$escapeHtml(A.displayName)+"</em>":"");return C?"":B.toString()};jive.shared.displayutil.renderGuestDisplayName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.message.displayName)?soy.$$escapeHtml(A.message.displayName):(A.message.username)?soy.$$escapeHtml(A.message.username):(A.message.userEmail)?soy.$$escapeHtml(A.message.userEmail):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.guest"),[])));return C?"":B.toString()};jive.shared.displayutil.containerDisplayNameLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.container.jiveObjectURL)),'" class="font-color-meta j-container ',(!A.hideTooltip)?" jivecontainerTT-hover-container":"",'" data-objectId="',soy.$$escapeHtml(A.container.id),'" data-objectType="',soy.$$escapeHtml(A.container.type),'">',(A.container.typeSocialGroup)?A.container.name:(A.container.typeUserContainer&&A.container.typeWallEntry)?jive.i18n.i18nText(jive.i18n.getMsg("activity.in_user_container2.we"),[A.container.userDisplayName]):(A.container.typeUserContainer)?A.container.userDisplayName:A.container.name,"</a>");return C?"":B.toString()};jive.shared.displayutil.groupTypeIcon=function(A,C){var B=C||new soy.StringBuilder();B.append((A.size)?(A.size=="med")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.group."+A.typeName),[]))+"' role='img' class=\"jive-icon-med jive-icon-group-"+soy.$$escapeHtml(A.typeName)+'"></span>':(A.size=="big"||A.size=="large")?"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.group."+A.typeName),[]))+"' role='img' class=\"jive-icon-big jive-icon-group-"+soy.$$escapeHtml(A.typeName)+'"></span>':"<span title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.group."+A.typeName),[]))+"' role='img' class=\"jive-icon-sml jive-icon-group-"+soy.$$escapeHtml(A.typeName)+'"></span>':"");return C?"":B.toString()};jive.shared.displayutil.renderIconElement=function(A,C){var B=C||new soy.StringBuilder();switch(A.icon.tag){case"img":B.append("<img ");jive.shared.displayutil.renderIconElementAttrs(A.icon,B);B.append("/>");break;case"span":B.append("<span ");jive.shared.displayutil.renderIconElementAttrs({attributeNames:A.icon.attributeNames,attributes:A.icon.attributes,extraAttributes:A.extraAttributes},B);B.append("></span>");break;case"div":B.append("<div ");jive.shared.displayutil.renderIconElementAttrs(A.icon,B);B.append("></div>");break}return C?"":B.toString()};jive.shared.displayutil.renderIconElementAttrs=function(A,G){var D=G||new soy.StringBuilder();var C=A.attributeNames;var F=C.length;for(var B=0;B<F;B++){var E=C[B];D.append(soy.$$escapeHtml(E),'="',soy.$$escapeHtml(A.attributes[E]),(A.extraAttributes)?" "+soy.$$escapeHtml(A.extraAttributes):"",'" ')}return G?"":D.toString()};jive.shared.displayutil.renderAttachmentLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.object.meta&&A.object.meta.length>0&&A.object.meta[0].fullImageUrl)?'<a href="'+soy.$$escapeHtml(A.object.meta[0].fullImageUrl)+'" class="jive-icon-med jive-icon-photo"></a>':"");return C?"":B.toString()};jive.shared.displayutil.messagePopup=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-alert-container" role="alert" aria-live="polite" aria-atomic="true"><div class="j-alert j-rc5 j-alert-',soy.$$escapeHtml(A.style)," clearfix ",(A.showClose)?"j-alert-withbutton":"",'"><span class="j-js-alert-message"></span>');if(A.showClose){B.append('<button class="j-js-message-popup-close-button" ',(!A.showCloseAria)?'aria-hidden="true"':"",">");if(A.closeTitle){B.append(soy.$$escapeHtml(A.closeTitle))}else{jive.shared.displayutil.close(null,B)}B.append("</button>")}B.append("</div></div>");return C?"":B.toString()};jive.shared.displayutil.close=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])));return C?"":B.toString()};jive.shared.displayutil.a11yBoundary=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-508-label a11y-boundary">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("a11y.boundary."+A.type+(A.isEnd?".end":".start")),[])),"</span>");return C?"":B.toString()}
;
(function(b){function a(f){var h=b.extend({},a.defaults,f),i=this,e=h.decoration||i;i.bind("close",c);i.delegate(h.closeSelector,"click.pop",c);b(window).keyup(g);function c(j){b(".popover-iframe-interceptor").remove();i.unbind("close",c);i.undelegate(h.closeSelector,"click",c);b(h.closeOnClickSelector).unbind("click",d);b(window).unbind("keyup",g);if(!j||j.type!="close"){i.trigger("close")}if(j&&j.type=="close"){j.stopPropagation()}if(j&&j.type=="click"){j.preventDefault()}return h.onClose.call(this,j)}function d(j){var k=b(j.target).closest(e).length>0;var l=b(j.target).is(h.closeOnClickSelector)||b(j.target).parents(h.closeOnClickSelector).length>0;if(!k&&l){i.trigger("close")}}function g(j){if((j.keyCode==27||(j.DOM_VK_ESCAPE==27&&j.which===0))&&h.closeEsc){i.trigger("close")}}if(h.closeOnClick){b(h.closeOnClickSelector).unbind("click.pop");setTimeout(function(){if(h.clickOverlay){b("iframe:visible").each(function(){var l=b(this);var j=l.position();var k={position:"absolute",padding:"0",marign:"0","z-index":"990",top:j.top+"px",left:j.left+"px",width:l.outerWidth()+"px",height:l.outerHeight()+"px"};b("<div/>").addClass("popover-iframe-interceptor").css(k).insertAfter(l)})}b(h.closeOnClickSelector).click(d)},0)}}a.defaults={clickOverlay:true,closeEsc:true,closeOnClick:true,closeOnClickSelector:"html",closeSelector:".close",decoration:null,onClose:b.noop};b.fn.autoclose=a})(jQuery);
;
jQuery.effects||(function(h,e){h.effects={};h.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(n,m){h.fx.step[m]=function(o){if(!o.colorInit){o.start=l(o.elem,m);o.end=j(o.end);o.colorInit=true}o.elem.style[m]="rgb("+Math.max(Math.min(parseInt((o.pos*(o.end[0]-o.start[0]))+o.start[0],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.end[1]-o.start[1]))+o.start[1],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.end[2]-o.start[2]))+o.start[2],10),255),0)+")"}});function j(n){var m;if(n&&n.constructor==Array&&n.length==3){return n}if(m=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n)){return[parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10)]}if(m=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n)){return[parseFloat(m[1])*2.55,parseFloat(m[2])*2.55,parseFloat(m[3])*2.55]}if(m=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n)){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}if(m=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n)){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}if(m=/rgba\(0, 0, 0, 0\)/.exec(n)){return a.transparent}return a[h.trim(n).toLowerCase()]}function l(o,m){var n;do{n=h.curCSS(o,m);if(n!=""&&n!="transparent"||h.nodeName(o,"body")){break}m="backgroundColor"}while(o=o.parentNode);return j(n)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var f=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function g(){var p=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,q={},n,o;if(p&&p.length&&p[0]&&p[p[0]]){var m=p.length;while(m--){n=p[m];if(typeof p[n]=="string"){o=n.replace(/\-(\w)/g,function(r,s){return s.toUpperCase()});q[o]=p[n]}}}else{for(n in p){if(typeof p[n]==="string"){q[n]=p[n]}}}return q}function b(n){var m,o;for(m in n){o=n[m];if(o==null||h.isFunction(o)||m in c||(/scrollbar/).test(m)||(!(/color/i).test(m)&&isNaN(parseFloat(o)))){delete n[m]}}return n}function i(m,o){var p={_:0},n;for(n in o){if(m[n]!=o[n]){p[n]=o[n]}}return p}h.effects.animateClass=function(m,n,p,o){if(h.isFunction(p)){o=p;p=null}return this.queue(function(){var t=h(this),q=t.attr("style")||" ",u=b(g.call(this)),s,r=t.attr("class");h.each(f,function(v,w){if(m[w]){t[w+"Class"](m[w])}});s=b(g.call(this));t.attr("class",r);t.animate(i(u,s),{queue:false,duration:n,easing:p,complete:function(){h.each(f,function(v,w){if(m[w]){t[w+"Class"](m[w])}});if(typeof t.attr("style")=="object"){t.attr("style").cssText="";t.attr("style").cssText=q}else{t.attr("style",q)}if(o){o.apply(this,arguments)}h.dequeue(this)}})})};h.fn.extend({_addClass:h.fn.addClass,addClass:function(n,m,p,o){return m?h.effects.animateClass.apply(this,[{add:n},m,p,o]):this._addClass(n)},_removeClass:h.fn.removeClass,removeClass:function(n,m,p,o){return m?h.effects.animateClass.apply(this,[{remove:n},m,p,o]):this._removeClass(n)},_toggleClass:h.fn.toggleClass,toggleClass:function(o,n,m,q,p){if(typeof n=="boolean"||n===e){if(!m){return this._toggleClass(o,n)}else{return h.effects.animateClass.apply(this,[(n?{add:o}:{remove:o}),m,q,p])}}else{return h.effects.animateClass.apply(this,[{toggle:o},n,m,q])}},switchClass:function(m,o,n,q,p){return h.effects.animateClass.apply(this,[{add:o,remove:m},n,q,p])}});h.extend(h.effects,{version:"1.8.17",save:function(n,o){for(var m=0;m<o.length;m++){if(o[m]!==null){n.data("ec.storage."+o[m],n[0].style[o[m]])}}},restore:function(n,o){for(var m=0;m<o.length;m++){if(o[m]!==null){n.css(o[m],n.data("ec.storage."+o[m]))}}},setMode:function(m,n){if(n=="toggle"){n=m.is(":hidden")?"show":"hide"}return n},getBaseline:function(n,o){var p,m;switch(n[0]){case"top":p=0;break;case"middle":p=0.5;break;case"bottom":p=1;break;default:p=n[0]/o.height}switch(n[1]){case"left":m=0;break;case"center":m=0.5;break;case"right":m=1;break;default:m=n[1]/o.width}return{x:m,y:p}},createWrapper:function(m){if(m.parent().is(".ui-effects-wrapper")){return m.parent()}var n={width:m.outerWidth(true),height:m.outerHeight(true),"float":m.css("float")},p=h("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o=document.activeElement;m.wrap(p);if(m[0]===o||h.contains(m[0],o)){h(o).focus()}p=m.parent();if(m.css("position")=="static"){p.css({position:"relative"});m.css({position:"relative"})}else{h.extend(n,{position:m.css("position"),zIndex:m.css("z-index")});h.each(["top","left","bottom","right"],function(q,r){n[r]=m.css(r);if(isNaN(parseInt(n[r],10))){n[r]="auto"}});m.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return p.css(n).show()},removeWrapper:function(m){var n,o=document.activeElement;if(m.parent().is(".ui-effects-wrapper")){n=m.parent().replaceWith(m);if(m[0]===o||h.contains(m[0],o)){h(o).focus()}return n}return m},setTransition:function(n,p,m,o){o=o||{};h.each(p,function(r,q){unit=n.cssUnit(q);if(unit[0]>0){o[q]=unit[0]*m+unit[1]}});return o}});function d(n,m,o,p){if(typeof n=="object"){p=m;o=null;m=n;n=m.effect}if(h.isFunction(m)){p=m;o=null;m={}}if(typeof m=="number"||h.fx.speeds[m]){p=o;o=m;m={}}if(h.isFunction(o)){p=o;o=null}m=m||{};o=o||m.duration;o=h.fx.off?0:typeof o=="number"?o:o in h.fx.speeds?h.fx.speeds[o]:h.fx.speeds._default;p=p||m.complete;return[n,m,o,p]}function k(m){if(!m||typeof m==="number"||h.fx.speeds[m]){return true}if(typeof m==="string"&&!h.effects[m]){return true}return false}h.fn.extend({effect:function(p,o,r,t){var n=d.apply(this,arguments),q={options:n[1],duration:n[2],callback:n[3]},s=q.options.mode,m=h.effects[p];if(h.fx.off||!m){if(s){return this[s](q.duration,q.callback)}else{return this.each(function(){if(q.callback){q.callback.call(this)}})}}return m.call(this,q)},_show:h.fn.show,show:function(n){if(k(n)){return this._show.apply(this,arguments)}else{var m=d.apply(this,arguments);m[1].mode="show";return this.effect.apply(this,m)}},_hide:h.fn.hide,hide:function(n){if(k(n)){return this._hide.apply(this,arguments)}else{var m=d.apply(this,arguments);m[1].mode="hide";return this.effect.apply(this,m)}},__toggle:h.fn.toggle,toggle:function(n){if(k(n)||typeof n==="boolean"||h.isFunction(n)){return this.__toggle.apply(this,arguments)}else{var m=d.apply(this,arguments);m[1].mode="toggle";return this.effect.apply(this,m)}},cssUnit:function(m){var n=this.css(m),o=[];h.each(["em","px","%","pt"],function(p,q){if(n.indexOf(q)>0){o=[parseFloat(n),q]}});return o}});h.easing.jswing=h.easing.swing;h.extend(h.easing,{def:"easeOutQuad",swing:function(n,o,m,q,p){return h.easing[h.easing.def](n,o,m,q,p)},easeInQuad:function(n,o,m,q,p){return q*(o/=p)*o+m},easeOutQuad:function(n,o,m,q,p){return -q*(o/=p)*(o-2)+m},easeInOutQuad:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o+m}return -q/2*((--o)*(o-2)-1)+m},easeInCubic:function(n,o,m,q,p){return q*(o/=p)*o*o+m},easeOutCubic:function(n,o,m,q,p){return q*((o=o/p-1)*o*o+1)+m},easeInOutCubic:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o*o+m}return q/2*((o-=2)*o*o+2)+m},easeInQuart:function(n,o,m,q,p){return q*(o/=p)*o*o*o+m},easeOutQuart:function(n,o,m,q,p){return -q*((o=o/p-1)*o*o*o-1)+m},easeInOutQuart:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o*o*o+m}return -q/2*((o-=2)*o*o*o-2)+m},easeInQuint:function(n,o,m,q,p){return q*(o/=p)*o*o*o*o+m},easeOutQuint:function(n,o,m,q,p){return q*((o=o/p-1)*o*o*o*o+1)+m},easeInOutQuint:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o*o*o*o+m}return q/2*((o-=2)*o*o*o*o+2)+m},easeInSine:function(n,o,m,q,p){return -q*Math.cos(o/p*(Math.PI/2))+q+m},easeOutSine:function(n,o,m,q,p){return q*Math.sin(o/p*(Math.PI/2))+m},easeInOutSine:function(n,o,m,q,p){return -q/2*(Math.cos(Math.PI*o/p)-1)+m},easeInExpo:function(n,o,m,q,p){return(o==0)?m:q*Math.pow(2,10*(o/p-1))+m},easeOutExpo:function(n,o,m,q,p){return(o==p)?m+q:q*(-Math.pow(2,-10*o/p)+1)+m},easeInOutExpo:function(n,o,m,q,p){if(o==0){return m}if(o==p){return m+q}if((o/=p/2)<1){return q/2*Math.pow(2,10*(o-1))+m}return q/2*(-Math.pow(2,-10*--o)+2)+m},easeInCirc:function(n,o,m,q,p){return -q*(Math.sqrt(1-(o/=p)*o)-1)+m},easeOutCirc:function(n,o,m,q,p){return q*Math.sqrt(1-(o=o/p-1)*o)+m},easeInOutCirc:function(n,o,m,q,p){if((o/=p/2)<1){return -q/2*(Math.sqrt(1-o*o)-1)+m}return q/2*(Math.sqrt(1-(o-=2)*o)+1)+m},easeInElastic:function(n,q,m,w,v){var r=1.70158;var u=0;var o=w;if(q==0){return m}if((q/=v)==1){return m+w}if(!u){u=v*0.3}if(o<Math.abs(w)){o=w;var r=u/4}else{var r=u/(2*Math.PI)*Math.asin(w/o)}return -(o*Math.pow(2,10*(q-=1))*Math.sin((q*v-r)*(2*Math.PI)/u))+m},easeOutElastic:function(n,q,m,w,v){var r=1.70158;var u=0;var o=w;if(q==0){return m}if((q/=v)==1){return m+w}if(!u){u=v*0.3}if(o<Math.abs(w)){o=w;var r=u/4}else{var r=u/(2*Math.PI)*Math.asin(w/o)}return o*Math.pow(2,-10*q)*Math.sin((q*v-r)*(2*Math.PI)/u)+w+m},easeInOutElastic:function(n,q,m,w,v){var r=1.70158;var u=0;var o=w;if(q==0){return m}if((q/=v/2)==2){return m+w}if(!u){u=v*(0.3*1.5)}if(o<Math.abs(w)){o=w;var r=u/4}else{var r=u/(2*Math.PI)*Math.asin(w/o)}if(q<1){return -0.5*(o*Math.pow(2,10*(q-=1))*Math.sin((q*v-r)*(2*Math.PI)/u))+m}return o*Math.pow(2,-10*(q-=1))*Math.sin((q*v-r)*(2*Math.PI)/u)*0.5+w+m},easeInBack:function(n,o,m,r,q,p){if(p==e){p=1.70158}return r*(o/=q)*o*((p+1)*o-p)+m},easeOutBack:function(n,o,m,r,q,p){if(p==e){p=1.70158}return r*((o=o/q-1)*o*((p+1)*o+p)+1)+m},easeInOutBack:function(n,o,m,r,q,p){if(p==e){p=1.70158}if((o/=q/2)<1){return r/2*(o*o*(((p*=(1.525))+1)*o-p))+m}return r/2*((o-=2)*o*(((p*=(1.525))+1)*o+p)+2)+m},easeInBounce:function(n,o,m,q,p){return q-h.easing.easeOutBounce(n,p-o,0,q,p)+m},easeOutBounce:function(n,o,m,q,p){if((o/=p)<(1/2.75)){return q*(7.5625*o*o)+m}else{if(o<(2/2.75)){return q*(7.5625*(o-=(1.5/2.75))*o+0.75)+m}else{if(o<(2.5/2.75)){return q*(7.5625*(o-=(2.25/2.75))*o+0.9375)+m}else{return q*(7.5625*(o-=(2.625/2.75))*o+0.984375)+m}}}},easeInOutBounce:function(n,o,m,q,p){if(o<p/2){return h.easing.easeInBounce(n,o*2,0,q,p)*0.5+m}return h.easing.easeOutBounce(n,o*2-p,0,q,p)*0.5+q*0.5+m}})})(jQuery);
;
(function(a){a.fn.popover=function(d){var e=a.extend({},a.fn.popover.defaults,d);if(e.closeOtherPopovers===true){a(e.closeOtherPopoversSelector).trigger("close")}return this.each(function(){var r=e.context,x=a(this).addClass("j-pop-main"),y={left:a(window).scrollLeft()+10,right:a(window).scrollLeft()+a(window).width()-10,top:a(window).scrollTop()+10,bottom:a(window).scrollTop()+a(window).height()-10},j,i=a('<div class="j-pop js-pop" />').addClass(e.addClass),w,n,m=a(this).parent();if(e.setRole){i.attr("role",e.setRole)}if(x.data("closePopover")){(x.data("closePopover"))();x.removeData("closePopover");return}if(e.returnPopover){a.extend(d,{popOver:i,closeFunc:u,reposition:v})}if(!e.container||e.container.length===0){e.container=a("body")}if(e.container.is("body")){e.containerOffset={top:0,left:0}}else{e.containerOffset=e.container.offset()}i.append(x);x.show();i.appendTo(e.container).show().css("visibility","hidden");function l(I){var H=11,J=18,G=14,E=14,D;if(!I){I={width:i.outerWidth(),height:i.outerHeight()};if(e.position=="below"){I.height=I.height+H}else{if(e.position=="above"){}else{if(e.position=="left"){I.width=I.width+G}else{if(e.position=="right"){I.width=I.width+E}}}}}if(e.position=="below"){D={top:r.offset().top+r.outerHeight()+H,left:r.offset().left-((I.width-r.outerWidth())/2)}}else{if(e.position=="above"){D={top:r.offset().top-(I.height+J),left:r.offset().left-((I.width-r.outerWidth())/2)}}else{if(e.position=="left"){D={top:r.offset().top-((I.height-r.outerHeight())/2),left:r.offset().left-I.width}}else{if(e.position=="right"){D={top:r.offset().top-((I.height-r.outerHeight())/2),left:r.offset().left+r.outerWidth()+E}}else{D={top:r.offset().top+r.outerHeight(),left:r.offset().left-((I.width-r.outerWidth())/2)}}}}}if(e.nudge.top){D.top=D.top+e.nudge.top}if(e.nudge.left){var F=Math.min(((I.width-r.outerWidth())/2)-20,e.nudge.left);D.left=D.left+F}D.left-=e.containerOffset.left;D.top-=e.containerOffset.top;y.left-=e.containerOffset.left;y.right-=e.containerOffset.left;y.top-=e.containerOffset.top;y.bottom-=e.containerOffset.top;if(e.adjust){if(e.position=="above"||e.position=="below"){if(D.left<y.left){D.left=y.left}else{if(D.left+i.outerWidth()>y.right){D.left=y.right-i.outerWidth()-5}}}if(e.position=="left"||e.position=="right"){if(D.top<y.top){D.top=y.top}else{if(D.top+i.outerHeight()>y.bottom){D.top=y.bottom-i.outerHeight()}}}}j=e.position;if(e.flip){if(e.position=="above"){if(D.top<y.top&&r.offset().top+r.outerHeight()+i.outerHeight()<y.bottom){D.top=r.offset().top+r.outerHeight()+H-e.containerOffset.top;e.flipCallback();j="below"}}else{if(e.position=="below"){if(D.top+i.outerHeight()>y.bottom&&r.offset().top-i.outerHeight()>y.top){D.top=r.offset().top-(I.height+J)-e.containerOffset.top;e.flipCallback();j="above";if(e.nudge.bottom){D.top+=e.nudge.bottom}}}else{if(e.position=="left"){if(D.left<y.left&&r.offset().left+r.outerWidth()+i.outerWidth()+E<y.right){D.left=r.offset().left+r.outerWidth()+E-e.containerOffset.left;e.flipCallback();j="right"}}else{if(e.position=="right"){if(D.left+i.outerWidth()>y.right&&r.offset().left-i.outerWidth()-G>y.left){D.left=r.offset().left-i.outerWidth()-G-e.containerOffset.left;e.flipCallback();j="left"}}}}}}if(e.arrowAdjust&&j=="left"){D.left+=(e.arrowAdjust*2-1)}else{if(e.arrowAdjust&&j=="right"){D.left-=(e.arrowAdjust*2-1)}}return D}function s(E){var G={top:"",left:""};var F,D;if(j=="above"||j=="below"){F=r.offset().left-E.left+((r.outerWidth()-w.outerWidth())/2);D=e.containerOffset.left+e.arrowAdjust/2;G.left=Math.round(F-D)}else{F=r.offset().top-E.top+((r.outerHeight()-w.outerHeight())/2);D=e.containerOffset.top-e.arrowAdjust/2;G.top=Math.round(F-D)}if(e.arrowAdjust&&j=="left"){G.left=G.left-e.arrowAdjust;var H=n.split(" ");H[0]=parseFloat(H[0])-e.arrowAdjust+"px";G["background-position"]=H.join(" ")}else{if(e.arrowAdjust&&j=="right"){G.left=G.left+e.arrowAdjust}}return G}function v(){var D=l();i.find("span.pointer").remove();i.append(a('<span class="'+j+'Arrow pointer"></span>')).addClass("popover").css({position:"absolute",top:D.top,left:D.left}).appendTo(e.container).css("visibility","visible");i.children().show();w=i.find(".pointer");n=w.css("background-position");if(e.arrowAdjust){w.width(w.width()-e.arrowAdjust);w.height(w.height()-e.arrowAdjust)}f(w,s(D))}(function(){v();a(window).one("resize",u);if(e.focusPopover){jive.conc.nextTick(p)}e.onLoad()})();x.autoclose(a.extend({},e,{onClose:o,decoration:i}));var q=new jive.Accessibility({scope:x,hoverSelection:e.focusPopover,focusOnHover:true,otherActions:[function C(D){if(D.keyCode==27){o(D);return false}},jive.Accessibility.focusRingAction(x),jive.Accessibility.menuSelectAction({container:x,moveFocus:true})]});if(e.accessibleBoundaryType){if(!x.children(".a11y-boundary").length){var k=jive.shared.displayutil.a11yBoundary({type:e.accessibleBoundaryType});var h=jive.shared.displayutil.a11yBoundary({type:e.accessibleBoundaryType,isEnd:true});x.prepend(k).append(h)}}if(e.allowResize){x.bind("popover.html",g)}if(e.allowResize){x.bind("popover.resize",z)}x.bind("eject",B);function t(){return x.find("a, input, select, textarea, button").filter(":visible")}function p(){t().first().focus()}function B(){i.before(x).remove()}function u(){x.trigger("close")}function o(D){e.beforeClose();if(e.destroyOnClose){i.remove()}else{if(e.putBack){m.append(x.hide());i.remove()}i.hide()}x.unbind("popover.html",g);x.unbind("popover.resize",z);x.unbind("eject",B);x.removeData("closePopover");a(window).off("resize",u);q.teardown();if(e.focusPopover){jive.Accessibility.focusIn(r)}return e.onClose()}x.data("closePopover",u);function z(E,D,F){return g(E,null,D,F)}function g(D,H,M,L){var K=a(H),J=i.width(),I=i.height(),F,E,G;if(a.isFunction(M)){L=M;M=null}M=a.extend({},e,M);i.css({width:"auto",height:"auto"});c(x,K,function(){F=i.width()+1;E=i.height();G=l({width:i.outerWidth(),height:i.outerHeight()})});i.css({width:J,height:I});if(M.fade){if(!a.browser.msie||parseFloat(a.browser.version)>8){x.animate({opacity:0},M.duration/2,function(){if(H){x.html(K)}x.animate({opacity:1},M.duration/2)})}else{if(H){x.children().detach();setTimeout(function(){x.html(K)},M.duration)}}}else{if(H){x.html(K)}}i.css("overflow","visible");i.animate({left:G.left,top:G.top,width:F,height:E},M.duration,M.easing,function(){if(typeof L=="function"){L.apply(x)}});i.css("overflow","");A(G,M)}function A(D,G){var H=s(D),F=H["background-position"],E={};Object.keys(H).forEach(function(I){if(I!="background-position"&&!!H[I]){E[I]=H[I]}});w.animate(E,G.duration,G.easing);setTimeout(function(){w.removeClass().addClass(j+"Arrow pointer");try{w.css("background-position",F)}catch(I){console.error(I)}},G.duration/2)}});function f(j,i){var h=i["background-position"],g={};Object.keys(i).filter(function(l){return l!="background-position"&&!!i[l]}).forEach(function(l){g[l]=i[l]});j.css(g);try{j.css("background-position",h)}catch(k){console.error(k)}}function c(i,j,k){var h=i.children(),g;if(j&&j.length>0){h.detach();j.appendTo(i)}g=k();if(j&&j.length>0){j.detach();h.appendTo(i)}return g}};var b=navigator.userAgent.match(/iPad/i)!=null;a.fn.popover.defaults={context:a(),container:a("body"),position:"below",nudge:{},adjust:true,flip:true,arrowAdjust:0,flipCallback:a.noop,beforeClose:a.noop,onClose:a.noop,onLoad:a.noop,destroyOnClose:true,closeOtherPopovers:false,closeOtherPopoversSelector:"BODY > .j-pop > *",returnPopover:false,putBack:false,focusPopover:true,closeOnBlur:false,accessibleBoundaryType:"menu",darkPopover:false,addClass:"",setRole:null,fade:true,duration:b?0:400,easing:"easeInOutQuint",allowResize:true}})(jQuery);
;
(function(i,j,l){var g="object",d=true;function m(o,n){var e=(o[0]||0)-(n[0]||0);return e>0||(!e&&o.length>0&&m(o.slice(1),n.slice(1)))}function f(o){if(typeof o!=g){return o}var e=[],p="";for(var n in o){if(typeof o[n]==g){p=f(o[n])}else{p=[n,(d)?encodeURI(o[n]):o[n]].join("=")}e.push(p)}return e.join("&")}function h(o){var e=[];for(var n in o){if(o[n]){e.push([n,'="',o[n],'"'].join(""))}}return e.join(" ")}function c(o){var e=[];for(var n in o){e.push(['<param name="',n,'" value="',f(o[n]),'" />'].join(""))}return e.join("")}try{var b=l.description||(function(){return(new l("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}())}catch(k){b="Unavailable"}var a=b.match(/\d+/g)||[0];i[j]={available:a[0]>0,activeX:l&&!l.name,version:{original:b,array:a,string:a.join("."),major:parseInt(a[0],10)||0,minor:parseInt(a[1],10)||0,release:parseInt(a[2],10)||0},hasVersion:function(e){var n=(/string|number/.test(typeof e))?e.toString().split("."):(/object/.test(typeof e))?[e.major,e.minor]:e||[0,0];return m(a,n)},encodeParams:true,expressInstall:"expressInstall.swf",expressInstallIsActive:false,create:function(o){var e=this;if(!o.swf||e.expressInstallIsActive||(!e.available&&!o.hasVersionFail)){return false}if(!e.hasVersion(o.hasVersion||1)){e.expressInstallIsActive=true;if(typeof o.hasVersionFail=="function"){if(!o.hasVersionFail.apply(o)){return false}}o={swf:o.expressInstall||e.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:(e.activeX)?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:o.swf,type:"application/x-shockwave-flash",id:o.id||"flash_"+Math.floor(Math.random()*999999999),width:o.width||320,height:o.height||180,style:o.style||""};d=typeof o.useEncode!=="undefined"?o.useEncode:e.encodeParams;o.movie=o.swf;o.wmode=o.wmode||"opaque";delete o.fallback;delete o.hasVersion;delete o.hasVersionFail;delete o.height;delete o.id;delete o.swf;delete o.useEncode;delete o.width;var n=document.createElement("div");n.innerHTML=["<object ",h(attrs),">",c(o),"</object>"].join("");return n.firstChild}};i.fn[j]=function(e){var n=this.find(g).andSelf().filter(g);if(/string|object/.test(typeof e)){this.each(function(){var p=i(this),o;e=(typeof e==g)?e:{swf:e};e.fallback=this;o=i[j].create(e);if(o){p.children().remove();p.html(o)}})}if(typeof e=="function"){n.each(function(){var o=this,p="jsInteractionTimeoutMs";o[p]=o[p]||0;if(o[p]<660){if(o.clientWidth||o.clientHeight){e.call(o)}else{setTimeout(function(){i(o)[j](e)},o[p]+66)}}})}return n}}(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject));
;
(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}if(data.indexOf("{")<0){data="{"+data+"}"}data=eval("("+data+")");$.data(elem,settings.single,data);return data}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);
;
(function(c){var h=c.browser.msie&&c.browser.version<9;c.fn.media=function(m,l,n){if(m=="undo"){return this.each(function(){var p=c(this);var o=p.data("media.origHTML");if(o){p.replaceWith(o)}})}return this.each(function(){if(typeof m=="function"){n=l;l=m;m={}}var x=g(this,m);if(typeof l=="function"){l(this,x)}var v=j();var p=v.exec(x.src.toLowerCase())||[""];x.type?p[0]=x.type:p.shift();for(var u=0;u<p.length;u++){fn=p[u].toLowerCase();if(e(fn[0])){fn="fn"+fn}if(!c.fn.media[fn]){continue}var t=c.fn.media[fn+"_player"];if(!x.params){x.params={}}if(t){var s=t.autoplayAttr=="autostart";x.params[t.autoplayAttr||"autoplay"]=s?(x.autoplay?1:0):x.autoplay?true:false}var q=c.fn.media[fn](this,x);q.css("backgroundColor",x.bgColor).width(x.width);if(x.canUndo){var w=c("<div></div>").append(this);q.data("media.origHTML",w.html())}if(typeof n=="function"){n(this,q[0],x,t.name)}break}})};c.fn.media.mapFormat=function(m,l){if(!m||!l||!c.fn.media.defaults.players[l]){return}m=m.toLowerCase();if(e(m[0])){m="fn"+m}c.fn.media[m]=c.fn.media[l];c.fn.media[m+"_player"]=c.fn.media.defaults.players[l]};c.fn.media.defaults={standards:true,canUndo:true,width:400,height:400,autoplay:0,bgColor:"#ffffff",params:{wmode:"transparent"},attrs:{},flvKeyName:"file",flashvars:{},flashVersion:"7",expressInstaller:null,flvPlayer:"mediaplayer.swf",mp3Player:"mediaplayer.swf",silverlight:{inplaceInstallPrompt:"true",isWindowless:"true",framerate:"24",version:"0.9",onError:null,onLoad:null,initParams:null,userContext:null}};c.fn.media.defaults.players={flash:{name:"flash",title:"Flash",types:"flv,mp3,swf",mimetype:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",ieAttrs:{classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-oleobject",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+c.fn.media.defaults.flashVersion}},quicktime:{name:"quicktime",title:"QuickTime",mimetype:"video/quicktime",pluginspage:"http://www.apple.com/quicktime/download/",types:"aif,aiff,aac,au,bmp,gsm,mov,mid,midi,mpg,mpeg,mp4,m4a,psd,qt,qtif,qif,qti,snd,tif,tiff,wav,3g2,3gp",ieAttrs:{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab"}},realplayer:{name:"real",title:"RealPlayer",types:"ra,ram,rm,rpm,rv,smi,smil",mimetype:"audio/x-pn-realaudio-plugin",pluginspage:"http://www.real.com/player/",autoplayAttr:"autostart",ieAttrs:{classid:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"}},winmedia:{name:"winmedia",title:"Windows Media",types:"asx,asf,avi,wma,wmv",mimetype:c.browser.mozilla&&k()?"application/x-ms-wmp":"application/x-mplayer2",pluginspage:"http://www.microsoft.com/Windows/MediaPlayer/",autoplayAttr:"autostart",oUrl:"url",ieAttrs:{classid:"clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6",type:"application/x-oleobject"}},img:{name:"img",title:"Image",types:"gif,png,jpg"},iframe:{name:"iframe",types:"html,pdf"},silverlight:{name:"silverlight",types:"xaml"}};function k(){var l=navigator.plugins;for(var m=0;m<l.length;m++){var n=l[m];if(n.filename=="np-mswmp.dll"){return true}}return false}var a=1;for(var i in c.fn.media.defaults.players){var d=c.fn.media.defaults.players[i].types;c.each(d.split(","),function(l,m){if(e(m[0])){m="fn"+m}c.fn.media[m]=c.fn.media[i]=b(i);c.fn.media[m+"_player"]=c.fn.media.defaults.players[i]})}function j(){var m="";for(var l in c.fn.media.defaults.players){if(m.length){m+=","}m+=c.fn.media.defaults.players[l].types}return new RegExp("\\.("+m.replace(/,/ig,"|")+")\\b")}function b(l){return function(n,m){return f(n,m,l)}}function e(l){return"0123456789".indexOf(l)>-1}function g(o,D){D=D||{};var C=c(o);var B=o.className||"";var A=c.metadata?C.metadata():c.meta?C.data():{};A=A||{};var z=A.width||parseInt(((B.match(/\bw:(\d+)/)||[])[1]||0))||parseInt(((B.match(/\bwidth:(\d+)/)||[])[1]||0));var t=A.height||parseInt(((B.match(/\bh:(\d+)/)||[])[1]||0))||parseInt(((B.match(/\bheight:(\d+)/)||[])[1]||0));if(z){A.width=z}if(t){A.height=t}if(B){A.cls=B}var q="data-";for(var s=0;s<o.attributes.length;s++){var y=o.attributes[s],r=c.trim(y.name);var u=r.indexOf(q);if(u===0){r=r.substring(q.length);A[r]=y.value}}var y=c.fn.media.defaults;var x=D;var v=A;var m={params:{bgColor:D.bgColor||c.fn.media.defaults.bgColor}};var l=c.extend({},y,x,v);c.each(["attrs","params","flashvars","silverlight"],function(n,p){l[p]=c.extend({},m[p]||{},y[p]||{},x[p]||{},v[p]||{})});if(typeof l.caption=="undefined"){l.caption=C.text()}l.src=l.src||C.attr("href")||C.attr("src")||"unknown";return l}c.fn.media.swf=function(q,l){if(!window.SWFObject&&!c.fn.flash){if(l.flashvars){var t=[];for(var r in l.flashvars){t.push(r+"="+l.flashvars[r])}if(!l.params){l.params={}}l.params.flashvars=t.join("&")}return f(q,l,"flash")}var n=q.id?(' id="'+q.id+'"'):"";var u=l.cls?(' class="'+l.cls+'"'):"";var s=c("<div"+n+u+">");if(c.fn.flash){c(q).after(s).remove();if(!q.id){q.id="movie_player_"+a++}s.flash(c.extend({swf:l.src,id:q.id,width:l.width,height:l.height,hasVersion:l.flashVersion,expressInstall:l.expressInstaller,flashvars:l.flashvars},l.params));s.find("object").attr(l.attrs)}else{c(q).after(s).remove();var o=new SWFObject(l.src,"movie_player_"+a++,l.width,l.height,l.flashVersion,l.bgColor);if(l.expressInstaller){o.useExpressInstall(l.expressInstaller)}for(var m in l.params){if(m!="bgColor"){o.addParam(m,l.params[m])}}for(var r in l.flashvars){o.addVariable(r,l.flashvars[r])}o.write(s[0])}if(l.caption){c("<div>").appendTo(s).html(l.caption)}return s};c.fn.media.flv=c.fn.media.mp3=function(o,p){var q=p.src;var n=/\.mp3\b/i.test(q)?c.fn.media.defaults.mp3Player:c.fn.media.defaults.flvPlayer;var m=p.flvKeyName;q=encodeURIComponent(q);p.src=n;p.src=p.src+"?"+m+"="+(q);var l={};l[m]=q;p.flashvars=c.extend({},l,p.flashvars);return c.fn.media.swf(o,p)};c.fn.media.xaml=function(r,s){if(!window.Sys||!window.Sys.Silverlight){if(c.fn.media.xaml.warning){return}c.fn.media.xaml.warning=1;alert("You must include the Silverlight.js script.");return}var q={width:s.width,height:s.height,background:s.bgColor,inplaceInstallPrompt:s.silverlight.inplaceInstallPrompt,isWindowless:s.silverlight.isWindowless,framerate:s.silverlight.framerate,version:s.silverlight.version};var o={onError:s.silverlight.onError,onLoad:s.silverlight.onLoad};var p=r.id?(' id="'+r.id+'"'):"";var n=s.id||"AG"+a++;var m=s.cls?(' class="'+s.cls+'"'):"";var l=c("<div"+p+m+">");c(r).after(l).remove();Sys.Silverlight.createObjectEx({source:s.src,initParams:s.silverlight.initParams,userContext:s.silverlight.userContext,id:n,parentElement:l[0],properties:q,events:o});if(s.caption){c("<div>").appendTo(l).html(s.caption)}return l};function f(r,l,w){var A=c(r);var q=c.fn.media.defaults.players[w];if(w=="iframe"){q=c('<iframe width="'+l.width+'" height="'+l.height+'" >');q.attr("src",l.src);q.css("backgroundColor",q.bgColor)}else{if(w=="img"){q=c("<img>");q.attr("src",l.src);l.width&&q.attr("width",l.width);l.height&&q.attr("height",l.height);q.css("backgroundColor",q.bgColor)}else{if(h){var u=['<object width="'+l.width+'" height="'+l.height+'" '];for(var x in l.attrs){u.push(x+'="'+l.attrs[x]+'" ')}for(var x in q.ieAttrs||{}){var y=q.ieAttrs[x];if(x=="codebase"&&window.location.protocol=="https:"){y=y.replace("http","https")}u.push(x+'="'+y+'" ')}u.push("></object>");var n=['<param name="'+(q.oUrl||"src")+'" value="'+l.src+'">'];for(var x in l.params){n.push('<param name="'+x+'" value="'+l.params[x]+'">')}var q=document.createElement(u.join(""));for(var s=0;s<n.length;s++){q.appendChild(document.createElement(n[s]))}}else{if(l.standards){var u=['<object type="'+q.mimetype+'" width="'+l.width+'" height="'+l.height+'"'];if(l.src){u.push(' data="'+l.src+'" ')}if(c.browser.msie){for(var x in q.ieAttrs||{}){var y=q.ieAttrs[x];if(x=="codebase"&&window.location.protocol=="https:"){y=y.replace("http","https")}u.push(x+'="'+y+'" ')}}u.push(">");u.push('<param name="'+(q.oUrl||"src")+'" value="'+l.src+'">');for(var x in l.params){if(x=="wmode"&&w!="flash"){continue}u.push('<param name="'+x+'" value="'+l.params[x]+'">')}u.push("<div><p><strong>"+q.title+" Required</strong></p><p>"+q.title+' is required to view this media. <a href="'+q.pluginspage+'">Download Here</a>.</p></div>');u.push("</object>")}else{var u=['<embed width="'+l.width+'" height="'+l.height+'" style="display:block"'];if(l.src){u.push(' src="'+l.src+'" ')}for(var x in l.attrs){u.push(x+'="'+l.attrs[x]+'" ')}for(var x in q.eAttrs||{}){u.push(x+'="'+q.eAttrs[x]+'" ')}for(var x in l.params){if(x=="wmode"&&w!="flash"){continue}u.push(x+'="'+l.params[x]+'" ')}u.push("></embed>")}}}}var m=r.id?(' id="'+r.id+'"'):"";var z=l.cls?(' class="'+l.cls+'"'):"";var t=c("<div"+m+z+">");A.after(t).remove();(h||w=="iframe"||w=="img")?t.append(q):t.html(u.join(""));if(l.caption){c("<div>").appendTo(t).html(l.caption)}return t}})(jQuery);define("jquery.media",function(){return jQuery.fn.media});
;
(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.$Class=function(){};$Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,i){return function(){var k=this._super;this._super=f[h];var j=i.apply(this,arguments);this._super=k;return j}})(d,g[d]):g[d]}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.constructor=c;c.extend=arguments.callee;return c}})();
;
(function(a){a.extend(a.expr[":"],{icontains:function(c,d,b){return(c.textContent||c.innerText||jQuery(c).text()||"").toLowerCase().indexOf(b[3].toLowerCase())>=0}});a.iterators={getText:function(){return a(this).text()},parseInt:function(b){return parseInt(b,10)}};a.extend({range:function(){if(!arguments.length){return[]}var f,b,g;if(arguments.length==1){f=0;b=arguments[0]-1;g=1}else{f=arguments[0];b=arguments[1]-1;g=arguments[2]||1}if(g<0&&f>=b){g*=-1;var e=f;f=b;b=e;f+=((b-f)%g)}var c=[];for(var d=f;d<=b;d+=g){c.push(d)}return c},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38},keyIs:function(b,c){return parseInt(a.keyCode[b.toUpperCase()],10)==parseInt((typeof(c)=="number")?c:c.keyCode,10)},keys:function(b){var c=[];for(k in b){c.push(k)}return c},redirect:function(b){window.location.href=b;return b},stop:function(d,c,b){if(c){d.preventDefault()}if(b){d.stopPropagation()}return c&&false||true},basename:function(c){var b=c.split("/");return b[b.length]===""&&s||b.slice(0,b.length).join("/")},filename:function(b){return b.split("/").pop()},filesizeformat:function(d,e){var c=parseInt(d,10);var f=e||["byte","bytes","KB","MB","GB"];if(isNaN(c)||c===0){return"0 "+f[0]}if(c==1){return"1 "+f[0]}if(c<1024){return c.toFixed(2)+" "+f[1]}if(c<1048576){return(c/1024).toFixed(2)+" "+f[2]}if(c<1073741824){return(c/1048576).toFixed(2)+" "+f[3]}else{return(c/1073741824).toFixed(2)+" "+f[4]}},fileExtension:function(b){var c=b.split(".");return c[c.length-1]||false},isString:function(b){return typeof(b)=="string"&&true||false},isRegExp:function(b){return b&&b.constructor.toString().indexOf("RegExp()")!=-1||false},isArray:function(b){if(!b){return false}return b.constructor&&Object.prototype.toString.apply(b.constructor.prototype)==="[object Array]"},isObject:function(b){return(typeof(b)=="object")},toCurrency:function(b){b=parseFloat(b,10).toFixed(2);return(b=="NaN")?"0.00":b},pxToEm:function(c,d){d=jQuery.extend({scope:"body",reverse:false},d);var g=(c==="")?0:parseFloat(c);var f;var e=function(){var i=document.documentElement;return self.innerWidth||(i&&i.clientWidth)||document.body.clientWidth};if(d.scope=="body"&&a.browser.msie&&(parseFloat(a("body").css("font-size"))/e()).toFixed(1)>0){var h=function(){return(parseFloat(a("body").css("font-size"))/e()).toFixed(3)*16};f=h()}else{f=parseFloat(jQuery(d.scope).css("font-size"))}var b=(d.reverse===true)?(g*f).toFixed(2)+"px":(g/f).toFixed(2)+"em";return b}});a.extend(a.fn,{selectRange:function(d,b){if(a(this).get(0).createTextRange){var c=a(this).get(0).createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",d);c.select()}else{if(a(this).get(0).setSelectionRange){a(this).bind("focus",function(f){f.preventDefault()}).get(0).setSelectionRange(d,b)}}return a(this)},equalHeights:function(b){a(this).each(function(){var c=0;a(this).children().each(function(d){if(a(this).height()>c){c=a(this).height()}});if(!b||!a.pxToEm){c=a.pxToEm(c)}if(a.browser.msie&&a.browser.version==6){a(this).children().css({height:c})}a(this).children().css({"min-height":c})});return this},delay:function(b,c){jQuery.fx.step.delay=function(){};return this.animate({delay:1},b,c)}})})(jQuery);
;
(function($){$.template=function(html,options){return new $.template.instance(html,options)};$.template.instance=function(html,options){if(options&&options.regx){options.regx=this.regx[options.regx]}this.options=$.extend({compile:false,regx:this.regx.standard},options||{});this.html=html;if(this.options.compile){this.compile()}this.isTemplate=true};$.template.regx=$.template.instance.prototype.regx={jsp:/\$\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,ext:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,jtemplates:/\{\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}\}/g};$.template.regx.standard=$.template.regx.jsp;$.template.helpers=$.template.instance.prototype.helpers={substr:function(value,start,length){return String(value).substr(start,length)},"if":function(value,bool){console.log(arguments);return eval(bool)?value:""}};$.extend($.template.instance.prototype,{apply:function(values){if(this.options.compile){return this.compiled(values)}else{var tpl=this;var fm=this.helpers;var fn=function(m,name,format,args){if(format){if(format.substr(0,5)=="this."){return tpl.call(format.substr(5),values[name],values)}else{if(args){var re=/^\s*['"](.*)["']\s*$/;args=args.split(",");for(var i=0,len=args.length;i<len;i++){args[i]=args[i].replace(re,"$1")}args=[values[name]].concat(args)}else{args=[values[name]]}return fm[format].apply(fm,args)}}else{return values[name]!==undefined?values[name]:""}};return this.html.replace(this.options.regx,fn)}},compile:function(){var sep=$.browser.mozilla?"+":",";var fm=this.helpers;var fn=function(m,name,format,args){if(format){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"'"+sep+format+"values['"+name+"']"+args+")"+sep+"'"};var body;if($.browser.mozilla){body="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.options.regx,fn)+"';};"}else{body=["this.compiled = function(values){ return ['"];body.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.options.regx,fn));body.push("'].join('');};");body=body.join("")}eval(body);return this}})})(jQuery);
;
/*
 * jQuery Templates Plugin Library v1.1.0
 * http://www.ivorycity.com/blog/jquery-template-plugin/
 *
 * Copyright (c) 2009 Michael Collins
 * Dual licensed under the MIT and GPL licenses.
 * See MIT-LICENSE.txt and GPL-LICENSE.txt
 *
 */
jQuery.fn.extend({render:function(a,b){var e={};var c=null;var d=new RegExp("['\"](.+)['\"]","mg");b=b||[];a=jQuery.makeArray(a);this.each(function(f){var g=function(q,n,k){var m=$j("<div></div>").append($j(n).clone());jQuery.each(q,function(t,s){t=""+t;if(t.indexOf("$j(")==0||t.indexOf("@(")==0){var r=d.exec(t);if(r[1]){m.find(r[1]).render(s,{clone:t.indexOf("@")==0?true:false})}return}});var l="";var i=m.html().replace(/%7B/ig,"{").replace(/%7D/ig,"}");var p=function(s,r){replacement=l+s;if(!e[replacement]){if(r!=null&&typeof r=="object"||typeof r=="array"){var t=l;l=replacement+".";jQuery.each(r,p);l=t;return}e[replacement]=new RegExp("{"+replacement+"}","gm")}var u=e[replacement];i=i.replace(u,r)};jQuery.each(q,p);var o=$j(i);if(k.beforeUpdate){k.beforeUpdate(o)}if(k.clone){$j(n).after(o)}else{$j(n).replaceWith(o)}if(k.afterUpdate){k.afterUpdate(o)}return o};var h=$j(this);if(b.preserve_template){b.clone=true}if(b.clone){a=jQuery.makeArray(a);$j(a.reverse()).each(function(){var i=g(this,h,b);if(!c){c=$j(i)}else{c.push(i[0])}});if(!b.preserve_template){$j(this).remove()}}else{var j=(a[f]||a[a.length-1]);g(j,h,b)}});if(c){return this.pushStack(c,"render",this.selector)}else{return this}}});
;
/*
 * jQuery UI Widget 1.8.17
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(g){}})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions(),f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(e,f,g){var j,i,h=this.options[e];g=g||{};f=b.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();f.target=this.element[0];i=f.originalEvent;if(i){for(j in i){if(!(j in f)){f[j]=i[j]}}}this.element.trigger(f,g);return !(b.isFunction(h)&&h.call(this.element[0],f,g)===false||f.isDefaultPrevented())}}})(jQuery);
;
/*
 * jQuery UI Mouse 1.8.17
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 * @depends path=/resources/scripts/jquery/ui/ui.widget.js
 */
(function(b,c){var a=false;b(document).mouseup(function(d){a=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(e){return d._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(true===b.data(e.target,d.widgetName+".preventClickEvent")){b.removeData(e.target,d.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(f){if(a){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which==1),d=(typeof this.options.cancel=="string"&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===b.data(f.target,this.widgetName+".preventClickEvent")){b.removeData(f.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();a=true;return true},_mouseMove:function(d){if(b.browser.msie&&!(document.documentMode>=9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target==this._mouseDownEvent.target){b.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(d){return this.mouseDelayMet},_mouseStart:function(d){},_mouseDrag:function(d){},_mouseStop:function(d){},_mouseCapture:function(d){return true}})})(jQuery);
;
(function(b,c){var a=5;b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var e=this,k=this.options,j=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),h="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",d=(k.values&&k.values.length)||1,g=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(k.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);if(k.range){if(k.range===true){if(!k.values){k.values=[this._valueMin(),this._valueMin()]}if(k.values.length&&k.values.length!==2){k.values=[k.values[0],k.values[0]]}}this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((k.range==="min"||k.range==="max")?" ui-slider-range-"+k.range:""))}for(var f=j.length;f<d;f+=1){g.push(h)}this.handles=j.add(b(g.join("")).appendTo(e.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(i){i.preventDefault()}).hover(function(){if(!k.disabled){b(this).addClass("ui-state-hover")}},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(!k.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}else{b(this).blur()}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(l){b(this).data("index.ui-slider-handle",l)});this.handles.keydown(function(p){var m=true,l=b(this).data("index.ui-slider-handle"),q,n,i,o;if(e.options.disabled){return}switch(p.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:m=false;if(!e._keySliding){e._keySliding=true;b(this).addClass("ui-state-active");q=e._start(p,l);if(q===false){return}}break}o=e.options.step;if(e.options.values&&e.options.values.length){n=i=e.values(l)}else{n=i=e.value()}switch(p.keyCode){case b.ui.keyCode.HOME:i=e._valueMin();break;case b.ui.keyCode.END:i=e._valueMax();break;case b.ui.keyCode.PAGE_UP:i=e._trimAlignValue(n+((e._valueMax()-e._valueMin())/a));break;case b.ui.keyCode.PAGE_DOWN:i=e._trimAlignValue(n-((e._valueMax()-e._valueMin())/a));break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(n===e._valueMax()){return}i=e._trimAlignValue(n+o);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(n===e._valueMin()){return}i=e._trimAlignValue(n-o);break}e._slide(p,l,i);return m}).keyup(function(l){var i=b(this).data("index.ui-slider-handle");if(e._keySliding){e._keySliding=false;e._stop(l,i);e._change(l,i);b(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(f){var g=this.options,j,l,e,h,n,k,m,i,d;if(g.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();j={x:f.pageX,y:f.pageY};l=this._normValueFromMouse(j);e=this._valueMax()-this._valueMin()+1;n=this;this.handles.each(function(o){var p=Math.abs(l-n.values(o));if(e>p){e=p;h=b(this);k=o}});if(g.range===true&&this.values(1)===g.min){k+=1;h=b(this.handles[k])}m=this._start(f,k);if(m===false){return false}this._mouseSliding=true;n._handleIndex=k;h.addClass("ui-state-active").focus();i=h.offset();d=!b(f.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=d?{left:0,top:0}:{left:f.pageX-i.left-(h.width()/2),top:f.pageY-i.top-(h.height()/2)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0)+(parseInt(h.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(f,k,l)}this._animateOff=true;return true},_mouseStart:function(d){return true},_mouseDrag:function(f){var d={x:f.pageX,y:f.pageY},e=this._normValueFromMouse(d);this._slide(f,this._handleIndex,e);return false},_mouseStop:function(d){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(d,this._handleIndex);this._change(d,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(e){var d,h,g,f,i;if(this.orientation==="horizontal"){d=this.elementSize.width;h=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;h=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}g=(h/d);if(g>1){g=1}if(g<0){g=0}if(this.orientation==="vertical"){g=1-g}f=this._valueMax()-this._valueMin();i=this._valueMin()+g*f;return this._trimAlignValue(i)},_start:function(f,e){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}return this._trigger("start",f,d)},_slide:function(h,g,f){var d,e,i;if(this.options.values&&this.options.values.length){d=this.values(g?0:1);if((this.options.values.length===2&&this.options.range===true)&&((g===0&&f>d)||(g===1&&f<d))){f=d}if(f!==this.values(g)){e=this.values();e[g]=f;i=this._trigger("slide",h,{handle:this.handles[g],value:f,values:e});d=this.values(g?0:1);if(i!==false){this.values(g,f,true)}}}else{if(f!==this.value()){i=this._trigger("slide",h,{handle:this.handles[g],value:f});if(i!==false){this.value(f)}}}},_stop:function(f,e){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}this._trigger("stop",f,d)},_change:function(f,e){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}this._trigger("change",f,d)}},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,h){var g,d,f;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(h);this._refreshValue();this._change(null,e);return}if(arguments.length){if(b.isArray(arguments[0])){g=this.options.values;d=arguments[0];for(f=0;f<g.length;f+=1){g[f]=this._trimAlignValue(d[f]);this._change(null,f)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,f){var d,g=0;if(b.isArray(this.options.values)){g=this.options.values.length}b.Widget.prototype._setOption.apply(this,arguments);switch(e){case"disabled":if(f){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(d=0;d<g;d+=1){this._change(null,d)}this._animateOff=false;break}},_value:function(){var d=this.options.value;d=this._trimAlignValue(d);return d},_values:function(d){var g,f,e;if(arguments.length){g=this.options.values[d];g=this._trimAlignValue(g);return g}else{f=this.options.values.slice();for(e=0;e<f.length;e+=1){f[e]=this._trimAlignValue(f[e])}return f}},_trimAlignValue:function(g){if(g<=this._valueMin()){return this._valueMin()}if(g>=this._valueMax()){return this._valueMax()}var d=(this.options.step>0)?this.options.step:1,f=(g-this._valueMin())%d,e=g-f;if(Math.abs(f)*2>=d){e+=(f>0)?d:(-d)}return parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var g=this.options.range,f=this.options,m=this,e=(!this._animateOff)?f.animate:false,h,d={},i,k,j,l;if(this.options.values&&this.options.values.length){this.handles.each(function(o,n){h=(m.values(o)-m._valueMin())/(m._valueMax()-m._valueMin())*100;d[m.orientation==="horizontal"?"left":"bottom"]=h+"%";b(this).stop(1,1)[e?"animate":"css"](d,f.animate);if(m.options.range===true){if(m.orientation==="horizontal"){if(o===0){m.range.stop(1,1)[e?"animate":"css"]({left:h+"%"},f.animate)}if(o===1){m.range[e?"animate":"css"]({width:(h-i)+"%"},{queue:false,duration:f.animate})}}else{if(o===0){m.range.stop(1,1)[e?"animate":"css"]({bottom:(h)+"%"},f.animate)}if(o===1){m.range[e?"animate":"css"]({height:(h-i)+"%"},{queue:false,duration:f.animate})}}}i=h})}else{k=this.value();j=this._valueMin();l=this._valueMax();h=(l!==j)?(k-j)/(l-j)*100:0;d[m.orientation==="horizontal"?"left":"bottom"]=h+"%";this.handle.stop(1,1)[e?"animate":"css"](d,f.animate);if(g==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[e?"animate":"css"]({width:h+"%"},f.animate)}if(g==="max"&&this.orientation==="horizontal"){this.range[e?"animate":"css"]({width:(100-h)+"%"},{queue:false,duration:f.animate})}if(g==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[e?"animate":"css"]({height:h+"%"},f.animate)}if(g==="max"&&this.orientation==="vertical"){this.range[e?"animate":"css"]({height:(100-h)+"%"},{queue:false,duration:f.animate})}}}});b.extend(b.ui.slider,{version:"1.8.17"})}(jQuery));
;
(function(a,b){a.effects.bounce=function(c){return this.queue(function(){var f=a(this),m=["position","top","bottom","left","right"];var l=a.effects.setMode(f,c.options.mode||"effect");var o=c.options.direction||"up";var d=c.options.distance||20;var e=c.options.times||5;var h=c.duration||250;if(/show|hide/.test(l)){m.push("opacity")}a.effects.save(f,m);f.show();a.effects.createWrapper(f);var g=(o=="up"||o=="down")?"top":"left";var q=(o=="up"||o=="left")?"pos":"neg";var d=c.options.distance||(g=="top"?f.outerHeight({margin:true})/3:f.outerWidth({margin:true})/3);if(l=="show"){f.css("opacity",0).css(g,q=="pos"?-d:d)}if(l=="hide"){d=d/(e*2)}if(l!="hide"){e--}if(l=="show"){var j={opacity:1};j[g]=(q=="pos"?"+=":"-=")+d;f.animate(j,h/2,c.options.easing);d=d/2;e--}for(var k=0;k<e;k++){var p={},n={};p[g]=(q=="pos"?"-=":"+=")+d;n[g]=(q=="pos"?"+=":"-=")+d;f.animate(p,h/2,c.options.easing).animate(n,h/2,c.options.easing);d=(l=="hide")?d*2:d/2}if(l=="hide"){var j={opacity:0};j[g]=(q=="pos"?"-=":"+=")+d;f.animate(j,h/2,c.options.easing,function(){f.hide();a.effects.restore(f,m);a.effects.removeWrapper(f);if(c.callback){c.callback.apply(this,arguments)}})}else{var p={},n={};p[g]=(q=="pos"?"-=":"+=")+d;n[g]=(q=="pos"?"+=":"-=")+d;f.animate(p,h/2,c.options.easing).animate(n,h/2,c.options.easing,function(){a.effects.restore(f,m);a.effects.removeWrapper(f);if(c.callback){c.callback.apply(this,arguments)}})}f.queue("fx",function(){f.dequeue()});f.dequeue()})}})(jQuery);
;
(function(a,b){a.effects.highlight=function(c){return this.queue(function(){var e=a(this),d=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(e,c.options.mode||"show"),f={backgroundColor:e.css("backgroundColor")};if(g=="hide"){f.opacity=0}a.effects.save(e,d);e.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){(g=="hide"&&e.hide());a.effects.restore(e,d);(g=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"));(c.callback&&c.callback.apply(this,arguments));e.dequeue()}})})}})(jQuery);
;
(function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var c=this,d=c.options;c.running=0;c.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");c.headers=c.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(d.disabled){return}a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(d.disabled){return}a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(d.disabled){return}a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(d.disabled){return}a(this).removeClass("ui-state-focus")});c.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(d.navigation){var e=c.element.find("a").filter(d.navigationFilter).eq(0);if(e.length){var f=e.closest(".ui-accordion-header");if(f.length){c.active=f}else{c.active=e.closest(".ui-accordion-content").prev()}}}c.active=c._findActive(c.active||d.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");c.active.next().addClass("ui-accordion-content-active");c._createIcons();c.resize();c.element.attr("role","tablist");c.headers.attr("role","tab").bind("keydown.accordion",function(g){return c._keydown(g)}).next().attr("role","tabpanel");c.headers.not(c.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();if(!c.active.length){c.headers.eq(0).attr("tabIndex",0)}else{c.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0})}if(!a.browser.safari){c.headers.find("a").attr("tabIndex",-1)}if(d.event){c.headers.bind(d.event.split(" ").join(".accordion ")+".accordion",function(g){c._clickHandler.call(c,g,this);g.preventDefault()})}},_createIcons:function(){var c=this.options;if(c.icons){a("<span></span>").addClass("ui-icon "+c.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(c.icons.header).toggleClass(c.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var c=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var d=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(c.autoHeight||c.fillHeight){d.css("height","")}return a.Widget.prototype.destroy.call(this)},_setOption:function(c,d){a.Widget.prototype._setOption.apply(this,arguments);if(c=="active"){this.activate(d)}if(c=="icons"){this._destroyIcons();if(d){this._createIcons()}}if(c=="disabled"){this.headers.add(this.headers.next())[d?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")}},_keydown:function(f){if(this.options.disabled||f.altKey||f.ctrlKey){return}var g=a.ui.keyCode,e=this.headers.length,c=this.headers.index(f.target),d=false;switch(f.keyCode){case g.RIGHT:case g.DOWN:d=this.headers[(c+1)%e];break;case g.LEFT:case g.UP:d=this.headers[(c-1+e)%e];break;case g.SPACE:case g.ENTER:this._clickHandler({target:f.target},f.target);f.preventDefault()}if(d){a(f.target).attr("tabIndex",-1);a(d).attr("tabIndex",0);d.focus();return false}return true},resize:function(){var c=this.options,e;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height();if(a.browser.msie){this.element.parent().css("overflow",d)}this.headers.each(function(){e-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,e-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(c.autoHeight){e=0;this.headers.next().each(function(){e=Math.max(e,a(this).height("").height())}).height(e)}}return this},activate:function(c){this.options.active=c;var d=this._findActive(c)[0];this._clickHandler({target:d},d);return this},_findActive:function(c){return c?typeof c==="number"?this.headers.filter(":eq("+c+")"):this.headers.not(this.headers.not(c)):c===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(c,g){var l=this.options;if(l.disabled){return}if(!c.target){if(!l.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(l.icons.headerSelected).addClass(l.icons.header);this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),f={options:l,newHeader:a([]),oldHeader:l.active,newContent:a([]),oldContent:i},d=(this.active=a([]));this._toggle(d,i,f);return}var h=a(c.currentTarget||g),j=h[0]===this.active[0];l.active=l.collapsible&&j?false:this.headers.index(h);if(this.running||(!l.collapsible&&j)){return}var e=this.active,d=h.next(),i=this.active.next(),f={options:l,newHeader:j&&l.collapsible?a([]):h,oldHeader:this.active,newContent:j&&l.collapsible?a([]):d,oldContent:i},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=j?a([]):h;this._toggle(d,i,f,j,k);e.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(l.icons.headerSelected).addClass(l.icons.header);if(!j){h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(l.icons.header).addClass(l.icons.headerSelected);h.next().addClass("ui-accordion-content-active")}return},_toggle:function(c,i,g,j,k){var m=this,n=m.options;m.toShow=c;m.toHide=i;m.data=g;var d=function(){if(!m){return}return m._completed.apply(m,arguments)};m._trigger("changestart",null,m.data);m.running=i.size()===0?c.size():i.size();if(n.animated){var f={};if(n.collapsible&&j){f={toShow:a([]),toHide:i,complete:d,down:k,autoHeight:n.autoHeight||n.fillSpace}}else{f={toShow:c,toHide:i,complete:d,down:k,autoHeight:n.autoHeight||n.fillSpace}}if(!n.proxied){n.proxied=n.animated}if(!n.proxiedDuration){n.proxiedDuration=n.duration}n.animated=a.isFunction(n.proxied)?n.proxied(f):n.proxied;n.duration=a.isFunction(n.proxiedDuration)?n.proxiedDuration(f):n.proxiedDuration;var l=a.ui.accordion.animations,e=n.duration,h=n.animated;if(h&&!l[h]&&!a.easing[h]){h="slide"}if(!l[h]){l[h]=function(o){this.slide(o,{easing:h,duration:e||700})}}l[h](f)}else{if(n.collapsible&&j){c.toggle()}else{i.hide();c.show()}d(true)}i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur();c.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(c){this.running=c?0:--this.running;if(this.running){return}if(this.options.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length){this.toHide.parent()[0].className=this.toHide.parent()[0].className}this._trigger("change",null,this.data)}});a.extend(a.ui.accordion,{version:"1.8.17",animations:{slide:function(k,i){k=a.extend({easing:"swing",duration:300},k,i);if(!k.toHide.size()){k.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},k);return}if(!k.toShow.size()){k.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},k);return}var d=k.toShow.css("overflow"),h=0,e={},g={},f=["height","paddingTop","paddingBottom"],c;var j=k.toShow;c=j[0].style.width;j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0));a.each(f,function(l,n){g[n]="hide";var m=(""+a.css(k.toShow[0],n)).match(/^([\d+-.]+)(.*)$/);e[n]={value:m[1],unit:m[2]||"px"}});k.toShow.css({height:0,overflow:"hidden"}).show();k.toHide.filter(":hidden").each(k.complete).end().filter(":visible").animate(g,{step:function(l,m){if(m.prop=="height"){h=(m.end-m.start===0)?0:(m.now-m.start)/(m.end-m.start)}k.toShow[0].style[m.prop]=(h*e[m.prop].value)+e[m.prop].unit},duration:k.duration,easing:k.easing,complete:function(){if(!k.autoHeight){k.toShow.css("height","")}k.toShow.css({width:c,overflow:d});k.complete()}})},bounceslide:function(c){this.slide(c,{easing:c.down?"easeOutBounce":"swing",duration:c.down?1000:200})}}})})(jQuery);
;
jive.namespace("util");(function(c){function b(d){return typeof d=="object"&&"nodeType" in d&&d.nodeType===1&&d.cloneNode}function a(){var d=new jive.conc.Promise();d.emitSuccess.apply(d,arguments);return d}jive.util={escapeHTML:function(d){if(d instanceof c||b(d)){return c("<div/>").html(d).html()}else{return c("<div/>").text(String(d)).html()}},unescapeHTML:function(d){return c("<div/>").html(String(d)).text()},convertElementsToValues:function(e){var d=[];c.each(c(e),function(){d.push(c(this).val())});return d},createDynamicForm:function(e){var d=$j("<form />");if(e.method.toLowerCase()!="get"){d.attr("method",e.method)}var f=e.url.split(/[&?]/);d.attr("action",f[0]);f.shift();f.forEach(function(g){var h=g.split(/[=]/);d.append($j('<input name="'+h[0]+'" type="hidden"/>').val(decodeURIComponent(h[1])))});return d},createAndSubmitDynamicForm:function(d){jive.util.createDynamicForm(d).appendTo($j(document.body)).submit()},securedPost:function(d){var e=new jive.conc.Promise();$j.ajax({url:jive.rest.url("/legacy_token/"+d),type:"POST",dataType:"json",success:function(g){var f={"jive.token.name":d};f[d]=g[0];e.emitSuccess(f)},error:function(g,h,f){e.emitError(g,h,f)}});return e},securedForm:function(f){var d=$j(f),e=f.find('input[name="jive.token.name"]').val();var g=e?jive.util.securedPost(e):a({});return g.map(function(h){d.find('input[name="'+e+'"]').val(h[e]);return d})},truncateStr:function(f,e,d){e=e||49;d=d||"...";return f.length>e?f.substring(0,e)+d:f},lazyLoadJSBySels:function(g,f,d,e){$j(document).ready(function(){var h=false;$j(g.join(", ")).one(f,function(j){var i=$j(this);if(!h){define([d],function(){if(e){e()}i.trigger(j.type)});h=true}if(j.type=="click"||j.type=="submit"){j.preventDefault()}})})},lazyLoadJSByFns:function(e,d,f){$j(document).ready(function(){e.forEach(function(l){var h=false;var g=l.split(".");var j=g.pop();jive.namespace.apply(window,[g.join(".")]);function i(m){return m.reduce(function(o,n){return o[n]},window)}var k=i(g);k[j]=function(){define([d],function(){if(!h){if(f){f()}i(g)[j](arguments);h=true}})}})})},extractDataAttributes:(function(d,g,f){function e(h){if(g.test(h)){return h==="true"?true:false}else{if(f.test(h)){return JSON.parse(h)}else{return h}}}return function(i,j){var h={};$j.each($j(i)[0].attributes,function(){if(d.test(this.name)){var k=this.name.replace(d,"");!j&&(k=k.camelize());h[k]=e(this.value)}});return h}})(/^data-/,/^(true|false)$/i,/^\{/i),separateScripts:(function(){var f=/(<script[^>]*>)([\s\S]*?)<\/script>/ig,d=/\s+src=["']([^'">]+)['"]/i,g=/\s+type=["']([^'">]+)['"]/i,e=/^text\/javascript/i;return function(i,k){var h=0;function j(){h+=1;return"separateScripts-dep-"+(new Date()).getTime()+"-"+h}var l=j(),n=[l];var m=i.replace(f,function(q,p,o){var r=(p.match(g)||[])[1],t=(p.match(d)||[])[1],s;if(!r||r.match(e)){if(t&&!k){kjs.load(t,n.slice(-1).concat(l));n.push(t.split("?")[0])}else{if(o&&!k){s=j();kjs.run(c.globalEval.bind(c,o),n.slice(-1).concat(l),[s]);n.push(s)}}return""}else{return q}});return[m,function(o){if(o){kjs.run(o,n.slice(-1).concat(l))}kjs.sat(l)}]}})(),withoutScripts:function(d){var e=jive.util.separateScripts(d,true);return e[0]},fitTextWithinNode:function(k,g,i){var f=0,h=k.length,j=h,d=j*0.2,e;do{if(j<k.length){g.text(k.slice(0,j)+"\u2026")}else{g.text(k.slice(0,j))}if((g.outerHeight()>i.outerHeight())||g.outerWidth()>i.outerWidth()){h=j}else{f=j}e=j;j=Math.floor((f+h)/2)}while(f<h-d||e!=f)},setFavicon:function(d){$j("link[rel~=shortcut]").remove();$j('<link rel="shortcut icon" type="image/x-icon" />').attr("href",d).appendTo("head")},equalsIgnoreCaseAndPadding:function(e,d){return e&&d&&e.toLowerCase().trim()==d.toLowerCase().trim()},loadCSS:function(h,m,f){var e;if(c('link[rel="stylesheet"][href="'+h+'"]').length>0){}else{if(document.createStyleSheet){if(f){var g=-1;for(var j=0,k=document.styleSheets.length;j<k;j++){if(document.styleSheets[j].href&&document.styleSheets[j].href.indexOf(f)!=-1){g=j;break}}if(g!=-1){document.createStyleSheet(h,g)}else{document.createStyleSheet(h)}}else{document.createStyleSheet(h)}}else{e=document.createElement("link");e.href=h;e.rel="stylesheet";e.type="text/css";if(f){var d=c('link[rel="stylesheet"][href="'+f+'"]');if(d.length){d.after(e)}else{c("head").append(e)}}else{c("head").append(e)}}}if(m){m()}}}})(jQuery);
;
(function(a){a.fn.safelyLoad=function(d,f,g){var c=Array.prototype.slice.call(arguments,1),b="";if(d.indexOf(" ")>-1){b=d.split(/\s+/);d=b.shift();b=b.join(" ")}f={url:d};g=a.noop;if(c.length===1){if(typeof c[0]==="function"){g=c.shift()}else{f=a.extend({url:d},c.shift())}}else{if(c.length>0){f=a.extend({url:d},c.shift());g=c.shift()}}f.type=!f.type&&"data" in f?"POST":f.type;var e=this;e.xhrObj=a.ajax(a.extend({},a.fn.safelyLoad.defaults,f,{complete:function(k,i){if(i==="success"||i==="notmodified"){var l=jive.util.separateScripts(k.responseText),j=l[0],h=l[1];e.html(b?jQuery("<div>").append(j).find(b):j);h(function(){e.each(g,[k.responseText,i,k])})}else{e.each(g,[k.responseText,i,k])}}}));return e.xhrObj};a.fn.safelyLoad.defaults={data:{},dataType:"html",type:"GET"}})(jQuery);
;
(function(a){a.suggest=function(u,i){var d=a(u).attr("autocomplete","off");var h;var t=false;var g=0;var y=[];var w=0;if(a.isArray(i.source)){d.data("results",i.source);i.clientSearch=true}if(!i.attachObject){i.attachObject=a(document.createElement("ul")).appendTo("body")}h=a(i.attachObject);h.addClass(i.resultsClass);l();a(window).load(l).resize(l);d.focus(function(){var e=d.closest(".j-js-picker-container")[0];a(document.body).off("click.suggestPlugin").on("click.suggestPlugin",function(I){if(e&&!a.contains(e,I.target)){a(document.body).off("click.suggestPlugin");h.hide()}})});try{h.bgiframe()}catch(E){}if(a.browser.mozilla){d.keypress(q)}else{d.keydown(q)}function c(e){return e.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}function l(){if(a.isFunction(i.position)){i.position(d,h)}else{var e=d.offset();h.css({top:(e.top+u.offsetHeight)+"px",left:e.left+"px"})}}function q(J){if((/27$|38$|40$/.test(J.keyCode)&&h.is(":visible"))||(/^13$|^9$/.test(J.keyCode)&&G())){if(J.preventDefault){J.preventDefault()}if(J.stopPropagation){J.stopPropagation()}J.cancelBubble=true;J.returnValue=false;switch(J.keyCode){case 38:o();break;case 40:F();break;case 9:case 13:var I=G();if(I){C.apply(I)}break;case 27:h.hide();break}}else{if(d.val().length!=g){if(t){clearTimeout(t)}t=setTimeout(function(){n(i.limit)},i.delay);g=d.val().length}}}function A(J){var e=J.val(),I;if(i.multiple){I=e.split(i.multipleSeparator).last()}else{I=e}return a.trim(I)}function v(e){var I=a.extend({},i.extraParams);I[i.paramName]=e;if(i.transformParams){i.transformParams(I)}return I}function p(){n(Number.MAX_VALUE)}function n(e){var K=A(d);var I=d.data("results");if(K.length>=i.minchars){var J=H(K);if(J&&i.useCache===true){m(J.items,e)}else{if(i.clientSearch&&I&&i.useCache===true){D(I,K,e)}else{a.ajax({url:i.source,type:i.requestMethod,data:v(K),success:function(L){d.data("results",L);D(L,K,e)}})}}}else{h.hide()}}function x(e,I){D(e,I,Number.MAX_VALUE)}function D(e,K,I){h.hide();var J=z(e,K);m(J,I);j(K,J,e.length)}function H(I){for(var e=0;e<y.length;e++){if(y[e]["q"]==I){y.unshift(y.splice(e,1)[0]);return y[0]}}return false}function j(K,e,I){while(y.length&&(w+I>i.maxCacheSize)){var J=y.pop();w-=J.size}y.push({q:K,size:I,items:e});w+=I}function m(N,J){if(!N){return}if(!N.length){h.hide();return}if(N.length<J){J=N.length}if(a.isFunction(i.sort)){N.sort(function(U,T){return i.sort(U.originalValue[0],T.originalValue[0])})}l();h.html("");for(var L=0;L<J;L++){var P=i.template;var O=N[L]["value"];var e=N[L]["originalValue"];var Q=N[L]["selectedByDeafult"];for(var I=0;I<e.length;I++){var S="%\\{"+I+"\\}";P=P.replace(new RegExp(S,"g"),e[I])}for(var K=0;K<O.length;K++){var R="\\{"+K+"\\}";P=P.replace(new RegExp(R,"g"),O[K])}var M=a("<li>"+P+"</li>");if(i.liClass!=""){M.addClass(i.liClass)}if(Q||N.length<=1){M.addClass(i.selectClass)}M.data("key",N[L]["key"]);M.data("value",e[0]);h.append(M)}h.show();h.children("li").mouseover(function(){h.children("li").removeClass(i.selectClass);a(this).addClass(i.selectClass)}).click(function(T){T.preventDefault();T.stopPropagation();C.apply(this)});F()}function k(e){m(e,Number.MAX_VALUE)}function z(J,I){var e=i.transformData?i.transformData(J):J;if(a.isArray(e)){return s(e,I)}else{return b(e,I)}}function s(J,I){var e=new RegExp(c(I),"ig");return J.map(r.partial(_,e)).filter(function(L){var K=L.value.some(function(M){return M.match(e)||!i.clientSearch});return K&&L.value.length>0})}function b(e,I){var J=e.split(i.delimiter);return s(J,I)}function r(K,I){var M=a.isArray(K)?K:a.trim(K).split(i.dataDelimiter),e=M.slice(0,Math.max(M.length-1,1)),J=M.length>1?M.last():"",L=e.some(function(N){var O=N.match(I);return O&&O[0].length==N});return{value:e.map(B.partial(_,I)).filter(function(N){return a.trim(N)}),key:J,originalValue:M,selectedByDefault:L}}function B(K,I){function e(L){return L.contents().map(function(){var M;if(this.nodeType==3){return this.data.replace(I,'<span class="'+i.matchClass+'">$&</span>')}else{$j(this).html(e($j(this),I));M=$j("<div/>",{html:this});return M.html()}}).toArray().join("")}var J=$j("<div/>",{html:K});return e(J)}function G(){if(!h.is(":visible")){return false}var e=h.children("li."+i.selectClass);if(!e.length){e=false}return e}function C(){var e=a(this);f(d,e.data("value"));h.hide();d.focus();a(document.body).off("click.suggestPlugin");if(a(i.dataContainer)){a(i.dataContainer).val(e.data("key"))}if(i.onSelect){i.onSelect.call(d[0],e.data("key"),e.data("value"))}}function f(L,J){var I=i.multipleSeparator,K,e;if(i.multiple){K=L.val().split(I).slice(0,-1);e=K.concat([J,""]).join(I)}else{e=J}L.val(e)}function F(){var e=G();if(e){e.removeClass(i.selectClass).next().addClass(i.selectClass)}else{h.children("li:first-child").addClass(i.selectClass)}}function o(){var e=G();if(e){e.removeClass(i.selectClass).prev().addClass(i.selectClass)}else{h.children("li:last-child").addClass(i.selectClass)}}};a.fn.suggest=function(c,b){if(!c){return}b=b||{};b.source=c;b.delay=b.delay||150;b.resultsClass=b.resultsClass||"ac_results";b.selectClass=b.selectClass||"ac_over";b.matchClass=b.matchClass||"ac_match";b.liClass=b.liClass||"";b.minchars=b.minchars||2;b.delimiter=b.delimiter||"\n";b.onSelect=b.onSelect||false;b.maxCacheSize=b.maxCacheSize||65536;b.dataDelimiter=b.dataDelimiter||"\t";b.dataContainer=b.dataContainer||"#SuggestResult";b.attachObject=b.attachObject||null;b.clientSearch=b.clientSearch||false;b.template=b.template||"{0}";b.limit=b.limit&&b.limit>0?b.limit:Number.MAX_VALUE;b.multiple=b.multiple||false;b.multipleSeparator=b.multipleSeparator||", ";b.sort=b.sort||null;b.paramName=b.paramName||"q";b.extraParams=b.extraParams||{};b.requestMethod=b.requestMethod||"GET";b.transformData=b.transformData;b.useCache=b.useCache||true;b.position=b.position;b.transformParams=b.transformParams||null;this.each(function(){a.suggest(this,b)});return this}})(jQuery);
;
// jquery.jsonp 1.0.4 (c) 2009 Julian Aubourg | MIT License
// http://code.google.com/p/jquery-jsonp/
(function($){var x=function(o){return o!==undefined&&o!==null;},H=$("head"),Z={},K={callback:"C",url:location.href};$.jsonp=function(d){d=$.extend({},K,d);if(x(d.beforeSend)){var t=0;d.abort=function(){t=1;};if(d.beforeSend(d,d)===false||t)return d;}
var _="",y="success",n="error",u=x(d.url)?d.url:_,p=x(d.data)?d.data:_,s=(typeof p)=="string",k=function(f){setTimeout(f,1);},S,P,i,j,U;p=s?p:$.param(p);x(d.callbackParameter)&&(p+=(p==_?_:"&")+escape(d.callbackParameter)+"=?");!d.cache&&!d.pageCache&&(p+=[(p==_?_:"&"),"_xx",(new Date()).getTime(),"=",1].join(_));S=u.split("?");if(p!=_){P=p.split("?");j=S.length-1;j&&(S[j]+="&"+P.shift());S=S.concat(P);}
i=S.length-2;i&&(S[i]+=d.callback+S.pop());U=S.join("?");if(d.pageCache&&x(Z[U])){k(function(){if(x(Z[U].e)){x(d.error)&&d.error(d,n);x(d.complete)&&d.complete(d,n);}else{var v=Z[U].s;x(d.dataFilter)&&(v=d.dataFilter(v));x(d.success)&&d.success(v,y);x(d.complete)&&d.complete(d,y);}});return d;}
var f=$("<iframe />");H.append(f);var F=f[0],W=F.contentWindow||F.contentDocument,D=W.document;if(!x(D)){D=W;W=D.getParentNode();}
var w,e=function(_,m){d.pageCache&&!x(m)&&(Z[U]={e:1});w();m=x(m)?m:n;x(d.error)&&d.error(d,m);x(d.complete)&&d.complete(d,m);},t=0,C=d.callback,E=C=="E"?"X":"E";D.open();W[C]=function(v){t=1;d.pageCache&&(Z[U]={s:v});k(function(){w();x(d.dataFilter)&&(v=d.dataFilter(v));x(d.success)&&d.success(v,y);x(d.complete)&&d.complete(d,y);});};W[E]=function(s){(!s||s=="complete")&&!t++&&k(e);};w=function(){W[E]=undefined;W[C]=undefined;try{delete W[E];}catch(_){}
try{delete W[C];}catch(_){}
D.open()
D.write(_);D.close();f.remove();}
k(function(){D.write(['<html><head><script src="',U,'" onload="',E,'()" onreadystatechange="',E,'(this.readyState)"></script></head><body onload="',E,'()"></body></html>'].join(_));D.close();});d.timeout>0&&setTimeout(function(){!t&&e(_,"timeout");},d.timeout);d.abort=w;return d;}
$.jsonp.setup=function(o){$.extend(K,o);};})(jQuery);
;
(function(c){var a=c.scrollTo=function(f,e,d){c(window).scrollTo(f,e,d)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window).scrollable()};c.fn.scrollable=function(){return this.map(function(){var e=this,d=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d){return e}var f=(e.contentWindow||e).document||e.ownerDocument||e;return c.browser.safari||f.compatMode=="BackCompat"?f.body:f.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this.scrollable().each(function(){var m=this,k=c(m),l=f,j,h={},n=k.is("html,body");switch(typeof l){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px)?$/.test(l)){l=b(l);break}l=c(l,this);case"object":if(l.is||l.style){j=(l=c(l)).offset()}}c.each(d.axis.split(""),function(r,s){var t=s=="x"?"Left":"Top",u=t.toLowerCase(),q="scroll"+t,o=m[q],p=s=="x"?"Width":"Height";if(j){h[q]=j[u]+(n?0:o-k.offset()[u]);if(d.margin){h[q]-=parseInt(l.css("margin"+t))||0;h[q]-=parseInt(l.css("border"+t+"Width"))||0}h[q]+=d.offset[u]||0;if(d.over[u]){h[q]+=l[p.toLowerCase()]()*d.over[u]}}else{h[q]=l[u]}if(/^\d+$/.test(h[q])){h[q]=h[q]<=0?0:Math.min(h[q],g(p))}if(!r&&d.queue){if(o!=h[q]){i(d.onAfterFirst)}delete h[q]}});i(d.onAfter);function i(o){k.animate(h,e,d.easing,o&&function(){o.call(this,f,d)})}function g(s){var p="scroll"+s;if(!n){return m[p]}var r="client"+s,q=m.ownerDocument.documentElement,o=m.ownerDocument.body;return Math.max(q[p],o[p])-Math.min(q[r],o[r])}}).end()};function b(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);
;
(function(a){a.fn.label=function(b){var d=a(),c=a("label").filter("[for]");this.filter(":input").not("button").each(function(){var f=a(this),e=f.closest("label");if(e.length>0){d=d.add(e)}else{if(f.is("[id]")){c.filter("[for="+f.attr("id")).each(function(){d=d.add(this);return false})}}});return b?d.filter(b):d}})(jQuery);
;
if(!($j.browser.msie&&$j.browser.version<8)){$j(document).ready(function(){$j("a.localScroll").live("click",function(){var b=$j(this).attr("href").split("#").last();var a=$j("a[name='"+b+"'], [id='"+b+"']");$j.scrollTo(a,200,{offset:{top:-20,left:-200}});return false});$j("a.localScrollSlow").live("click",function(){var b=$j(this).attr("href").split("#").last();var a=$j("a[name='"+b+"'], [id='"+b+"']");$j.scrollTo(a,800,{offset:{top:-20,left:-200}});return false})})};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.loading=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-loading-container"><div id="j-loading-content" class="j-loading-content" tabindex="-1" aria-live="assertive" aria-atomic="true" role="alertdialog"><span class="font-color-meta j-loading-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),'</span><div class="j-running-loader"></div></div></div>');return C?"":B.toString()}
;
(function(b){var a="a:visible, input:visible, select:visible, textarea:visible, button:visible, [tabindex]:visible";b.fn.safeRemove=function(d){var e=this;if(d){e=e.filter(d)}if(e.length){var f=e.get(0).ownerDocument.activeElement;var g=e.has(f);var c=b();while(g.length&&!c.length){c=g.nextAll().not(e).has(a).first();if(!c.length){c=g.prevAll().not(e).has(a).first()}if(!c.length){g=g.parent()}}c.find(a).first().focus();e.remove()}return this};b.fn.safeReplaceWith=function(e){var f=this;var g=f.get(0).ownerDocument.activeElement;var h=f.has(g);var d=typeof(e)=="function"?b(e()):b(e);f.replaceWith(d);if(h.length){var c=b();h=d;while(h.length&&!c.length){c=h.find(a).first();if(!c.length){h=h.parent()}}jive.conc.nextTick(function(){c.focus()})}return this}})(jQuery);
;
jive.AbstractView=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.init=function(c){if(c&&c.selector){this.selector=c.selector}};this.getContent=function(){return this.content||b(this.selector)};a.getSoyTemplate="abstract";this.render=function(c){this.getContent().html(this.getSoyTemplate(c));this.postRender()};this.postRender=function(){};this.find=function(c){return this.getContent().find(c)};this.html=function(c){this.getContent().html(c)};this.appendTo=function(c){b(c).append(this.getContent())};this.append=function(c){this.getContent().append(c)};this.prependTo=function(c){b(c).prepend(this.getContent())};this.prepend=function(c){this.getContent().prepend(c)};this.replaceWith=function(d){var c=d.getContent?d.getContent():d;this.getContent().safeReplaceWith(c)};this.addClass=function(){var c=this.getContent();c.addClass.apply(c,arguments)};this.removeClass=function(){var c=this.getContent();c.removeClass.apply(c,arguments)};this.show=function(){this.getContent().show();return this};this.hide=function(){this.getContent().hide();return this};this.detach=function(){this.getContent().detach();return this};this.remove=function(){this.getContent().remove();return this};this.showSpinner=function(e){var d=arguments,c=this;if(!this.getSpinnerTimeout(e)){this.setSpinnerTimeout(e,setTimeout(function(){c.createSpinner.apply(c,d)},100))}};this.hideSpinner=function(c){var d=this.getSpinnerTimeout(c);if(d){clearTimeout(d);this.removeSpinnerTimeout(c)}this.destroySpinner.apply(this,arguments)};a.createSpinner=function(c){var d=this.getContent();this.spinner=new jive.loader.LoaderView(c);if(c&&c.context){this.spinner.appendTo(c.context)}else{if(d){this.spinner.appendTo(d.filter(":last"))}else{this.spinner.appendTo("body")}}};a.destroySpinner=function(){var c=this.spinner;if(c){c.getContent().fadeOut(200,function(){c.getContent().remove();c.destroy()})}delete this.spinner};a.getSpinnerTimeout=function(c){if(c&&c.data){return c.data("loadingSpinnerTimeout")}else{return this.loadingSpinnerTimeout}};a.setSpinnerTimeout=function(c,d){if(c&&c.data){c.data("loadingSpinnerTimeout",d)}else{this.loadingSpinnerTimeout=d}};a.removeSpinnerTimeout=function(c){if(c&&c.data){c.removeData("loadingSpinnerTimeout")}else{delete this.loadingSpinnerTimeout}};a.shiv=function(c){if(typeof innerShiv!="undefined"){return innerShiv(c)}else{return c}};a.separateScripts=jive.util.separateScripts});define("jive.AbstractView",function(){return jive.AbstractView});
;
jive.namespace("loader");jive.loader.LoaderView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(m){this.content=b(jive.shared.soy.loading());m=$j.extend({showLabel:true,inline:false,size:null},m||{});var f=this.content.find(".j-running-loader");var l=0,j=23,h=10,i="0",e=40;this.loadingTimer=setTimeout(d,e);if(m.size=="small"){j=17;h=8;i="-176px";f.addClass("j-running-loader-small")}else{if(m.size=="big"){this.content.addClass("cover")}}if(m.showLabel===false){this.content.find("span").remove()}if(m.inline){this.content.addClass("j-running-loader-inline")}var k=this,c=0,g=e*20;function d(){f.css("background-position",i+" "+(l*-j+"px"));l=(l+1)%h;var n=++c*e>=g;if(n){if(!f.is(":visible")){return}else{c=0}}k.loadingTimer=window.setTimeout(d,e)}};this.destroy=function(){clearTimeout(this.loadingTimer)}});
;
(function(b){var d,c=1,a=new Image;b.fn.lightbox_media=function(e){return this.each(function(){var g=b.extend({},b.fn.lightbox_media.defaults,e),i=b(this),h,f;if(i.get(0).lightboxBound){return}else{i.get(0).lightboxBound=true}i.click(function(){h=b('<div class="modal-loading j-rc5"></div>');var p=new jive.loader.LoaderView();p.appendTo(h);h.lightbox_me({showOverlay:true,centered:true,destroyOnClose:true});var j=b('<div class="jive-modal" id="lb_image_wrapper"/>');j.append(b('<a class="j-icon-close jive-close" href="#"/>'));if(g.type=="image"){a=new Image;a.onload=function(){a.onload=null;a.onerror=null;f=b("<img/>").attr({id:"lb_image",src:i.attr("href")});if(b.browser.msie){f.css("width","100%");f.css("height","100%")}else{f.css("max-width","100%");f.css("max-height","100%")}j.append(f);h.trigger("close");p.destroy();b("body").append(j);b("body").append(j.css({position:"absolute",left:"-1000px",visibility:"hidden",display:"block"}));if(f.outerWidth()+parseInt(j.css("padding-left"))*2>b(window).width()){var r=b(window).width()-(parseInt(j.css("padding-left"))*4);if(b.browser.msie&&b.browser.version<8){var q=r/f.outerWidth();f.height(f.height()*q)}f.width(r)}j.css({position:"static",left:"auto",display:"none",visibility:"visible"});j.lightbox_me({closeSelector:".jive-close",destroyOnClose:true,centered:true})};a.onerror=function(){a.onload=null;a.onerror=null;setTimeout(function(){h.trigger("close");p.destroy()},1000)}}else{if(g.type=="video"){var o=i.attr("href"),l=/[&?]v=([^&?]+)/i,n=o.match(l);if(n==null||n.length<2){throw"Error lightboxing video with url "+href}o=o.replace(l,"").replace(/watch[?]?/,"v/"+n[1]+"?");var m="",k="";m+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="480" height="385"><param name="movie" value="'+o+'"></param>';m+='<param name="wmode" value="transparent"></param>';m+='<param name="allowfullscreen" value="true"></param>';k+=' wmode="transparent"';k+=' allowfullscreen="true"';m+='<embed src="'+o+'" type="application/x-shockwave-flash" width="480" height="385"'+k+"></embed></object>";h.trigger("close");p.destroy();j.html(m).append(b('<a class="j-icon-close jive-close" href="#"/>'));j.lightbox_me({closeSelector:".jive-close",destroyOnClose:true,centered:true});b("body").append(j)}}a.src=i.attr("href");return false})})};b.fn.lightbox_media.defaults={type:"image"}})(jQuery);(function(){var d=/\.(?:jpg|jpeg|jpe|png|gif)$/i;var c=/\/JiveServlet\/downloadBody\//;function b(e){$j("a[href]",e||document).filter(function(){return d.test(this.href)&&!c.test(this.href)}).lightbox_media()}function a(e){$j("a.j-js-youtube, a[rel=fb]",e||document).each(function(){$j(this).lightbox_media({type:"video"})})}jive.bindLightboxMedia=function(g,h){var f=h||new soy.StringBuilder();var e=null;if(g&&g.context){e=g.context}window.setTimeout(function(){b(e);a(e)},1);if(!h){return f.toString()}}})();
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.file=="undefined"){jive.shared.file={}}jive.shared.file.dropTarget=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-draganddrop js-file-input j-draganddrop-target" tabindex="-1">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.click_to_browse"),[])),'<p class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.drop_file_here"),[])),"</p></a>");return C?"":B.toString()};jive.shared.file.filledDropTarget=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-file-input j-draganddrop-target"><span class="');jive.shared.file.fileTypeIconClass__Cce8({extension:A.extension,size:"big",defaultIcon:"jive-icon-document-upload"},B);B.append('"></span><a href="#" class="j-draganddrop">',soy.$$escapeHtml(A.fileName),"</a>");if(typeof (A.size)!="undefined"){B.append(' <span class="font-color-meta-light">(');jive.shared.file.prettySize(A,B);B.append(")</span>")}B.append('<p><a href="#" class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.click_to_change"),[])),"</a></p>",(A.uploadDate)?'<small class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.upload.creation_date.radio"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[]))+" <p>"+soy.$$escapeHtml((A.uploadDate?dateFormat(parseFloat(A.uploadDate),"mmmm d, yyyy h:MM TT"):""))+"</p></small>":"","</div>");return C?"":B.toString()};jive.shared.file.fileTypeIconClass=function(A,C){var B=C||new soy.StringBuilder();B.append("jive-icon-",soy.$$escapeHtml(A.size?A.size:"big")," ");switch(A.extension){case"doc":case"docx":case"odt":case"fodt":case"ott":case"sxw":case"stw":case"sdw":case"sgl":case"rtf":case"wpd":case"wps":B.append(" jive-icon-doctype-document");break;case"pdf":B.append(" jive-icon-doctype-acrobat");break;case"zip":case"tar":case"tgz":case"gz":case"bz2":case"rar":case"dmg":case"7z":case"ace":B.append(" jive-icon-doctype-compressed");break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"svg":case"exif":case"ico":case"psd":case"pdd":case"psb":case"tiff":case"tif":case"raw":case"xcf":B.append(" jive-icon-doctype-image");break;case"pps":case"ppt":case"pptx":case"pptm":case"potx":case"potm":case"pot":case"ppsx":case"ppsm":case"ppam":case"ppa":case"pptx":case"odp":case"key":B.append(" jive-icon-doctype-presentation");break;case"xls":case"xlk":case"xlsb":case"xlsm":case"xlsx":case"xlt":case"xltm":case"xlw":case"ods":case"ots":case"sdc":case"stc":case"sxc":case"csv":B.append(" jive-icon-doctype-spreadsheet");break;case"txt":B.append(" jive-icon-doctype-text");break;case"avi":case"mov":case"3gp":case"asf":case"flv":case"mpg":case"mpeg":case"mpe":case"mp4":case"m1v":case"m2v":case"fla":case"m4v":case"mkv":case"swf":case"wmv":case"ogv":case"ogx":B.append(" jive-icon-doctype-video");break;default:B.append(" ",(A.defaultIcon)?soy.$$escapeHtml(A.defaultIcon):"jive-icon-doctype-generic")}return C?"":B.toString()};jive.shared.file.prettySize=function(A,C){var B=C||new soy.StringBuilder();B.append((typeof (A.size)=="string")?soy.$$escapeHtml(A.size):(A.size<1024)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.bytes"),[A.size])):(A.size<1048576)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.kilobytes"),[Math.round(A.size/1024*10)/10])):(A.size<1073741824)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.megabytes"),[Math.round(A.size/1048576*10)/10])):(A.size<0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.gigabytes"),[Math.round(A.size/1073741824*10)/10])):(A.size<0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.terabytes"),[Math.round(A.size/0*10)/10])):(A.size<0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.petabytes"),[Math.round(A.size/0*10)/10])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("file_input.bytes"),[A.size])));return C?"":B.toString()};jive.shared.file.fileTypeIconClass__Cce8=function(A,C){var B=C||new soy.StringBuilder();B.append("jive-icon-",soy.$$escapeHtmlAttribute(A.size?A.size:"big")," ");switch(A.extension){case"doc":case"docx":case"odt":case"fodt":case"ott":case"sxw":case"stw":case"sdw":case"sgl":case"rtf":case"wpd":case"wps":B.append(" jive-icon-doctype-document");break;case"pdf":B.append(" jive-icon-doctype-acrobat");break;case"zip":case"tar":case"tgz":case"gz":case"bz2":case"rar":case"dmg":case"7z":case"ace":B.append(" jive-icon-doctype-compressed");break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"svg":case"exif":case"ico":case"psd":case"pdd":case"psb":case"tiff":case"tif":case"raw":case"xcf":B.append(" jive-icon-doctype-image");break;case"pps":case"ppt":case"pptx":case"pptm":case"potx":case"potm":case"pot":case"ppsx":case"ppsm":case"ppam":case"ppa":case"pptx":case"odp":case"key":B.append(" jive-icon-doctype-presentation");break;case"xls":case"xlk":case"xlsb":case"xlsm":case"xlsx":case"xlt":case"xltm":case"xlw":case"ods":case"ots":case"sdc":case"stc":case"sxc":case"csv":B.append(" jive-icon-doctype-spreadsheet");break;case"txt":B.append(" jive-icon-doctype-text");break;case"avi":case"mov":case"3gp":case"asf":case"flv":case"mpg":case"mpeg":case"mpe":case"mp4":case"m1v":case"m2v":case"fla":case"m4v":case"mkv":case"swf":case"wmv":case"ogv":case"ogx":B.append(" jive-icon-doctype-video");break;default:B.append(" ",(A.defaultIcon)?soy.$$escapeHtmlAttribute(A.defaultIcon):"jive-icon-doctype-generic")}return C?"":B.toString()}
;
(function(a){a.fn.message=function(b){return this.each(function(){var e=a.extend({},a.fn.message.defaults,b||{}),h=a(jive.shared.displayutil.messagePopup(e)),d=h.find(".j-alert:eq(0)"),g=a(".j-alert-container");g.attr("aria-busy","true");d.css({bottom:"-40px",display:"block",opacity:0});d.find(".j-js-alert-message").replaceWith(this);if(e.dismissIn<=0){h.attr("role","alertdialog")}if(!g.length){g=h.appendTo("body")}if(e.style==="error"){g.attr("aria-live","assertive")}g.html(h.html());var f=g.find(".j-js-message-popup-close-button").click(c);d=g.find(".j-alert:eq(0)");d.animate({bottom:0,opacity:1},400,function(){g.attr("aria-busy","false")});if(e.dismissIn>0){setTimeout(c,e.dismissIn)}else{f.focus()}function c(){g.attr("aria-busy","true");d.animate({opacity:"0",bottom:"-20px"},100,function(){d.remove();e.dismissCallback();g.attr("aria-busy","false")})}})};a.fn.message.defaults={dismissCallback:a.noop,dismissIn:5000,showClose:true,style:"info"}})(jQuery);
;
(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms")}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s)}else{alert(s)}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug=""}if(table.tBodies.length==0){return}var rows=table.tBodies[0].rows;if(rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter)}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter)}}if(!p){p=detectParserForColumn(table,rows,-1,i)}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n"}list.push(p)}}if(table.config.debug){log(parsersDebug)}return list}function detectParserForColumn(table,rows,rowIndex,cellIndex){var l=parsers.length,node=false,nodeValue=false,keepLooking=true;while(nodeValue==""&&keepLooking){rowIndex++;if(rows[rowIndex]){node=getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex);nodeValue=trimAndGetNodeText(table.config,node);if(table.config.debug){log("Checking if value was empty on row:"+rowIndex)}}else{keepLooking=false}}for(var i=1;i<l;i++){if(parsers[i].is(nodeValue,table,node)){return parsers[i]}}return parsers[0]}function getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex){return rows[rowIndex].cells[cellIndex]}function trimAndGetNodeText(config,node){return $.trim(getElementText(config,node))}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i]}}return false}function buildCache(table){if(table.config.debug){var cacheTime=new Date()}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=$(table.tBodies[0].rows[i]),cols=[];if(c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue}cache.row.push(c);for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]))}cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime)}return cache}function getElementText(config,node){var text="";if(!node){return""}if(!config.supportsTextContent){config.supportsTextContent=node.textContent||false}if(config.textExtraction=="simple"){if(config.supportsTextContent){text=node.textContent}else{if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){text=node.childNodes[0].innerHTML}else{text=node.innerHTML}}}else{if(typeof(config.textExtraction)=="function"){text=config.textExtraction(node)}else{text=$(node).text()}}return text}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){var pos=n[i][checkCell];rows.push(r[pos]);if(!table.config.appender){var l=r[pos].length;for(var j=0;j<l;j++){tableBody[0].appendChild(r[pos][j])}}}if(table.config.appender){table.config.appender(table,rows)}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime)}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},0)}function buildHeaders(table){if(table.config.debug){var time=new Date()}var meta=($.metadata)?true:false;var header_index=computeTableHeaderCellIndexes(table);$tableHeaders=$(table.config.selectorHeaders,table).each(function(index){this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(table.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true}if(checkHeaderOptionsSortingLocked(table,index)){this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(table,index)}if(!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);if(table.config.onRenderHeader){table.config.onRenderHeader.apply($th)}}table.config.headerList[index]=this});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders)}return $tableHeaders}function computeTableHeaderCellIndexes(t){var matrix=[];var lookup={};var thead=t.getElementsByTagName("THEAD")[0];var trs=thead.getElementsByTagName("TR");for(var i=0;i<trs.length;i++){var cells=trs[i].cells;for(var j=0;j<cells.length;j++){var c=cells[j];var rowIndex=c.parentNode.rowIndex;var cellId=rowIndex+"-"+c.cellIndex;var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1;var firstAvailCol;if(typeof(matrix[rowIndex])=="undefined"){matrix[rowIndex]=[]}for(var k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])=="undefined"){firstAvailCol=k;break}}lookup[cellId]=firstAvailCol;for(var k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])=="undefined"){matrix[k]=[]}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x"}}}}return lookup}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++))}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell)}}}return arr}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true}return false}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true}return false}function checkHeaderOptionsSortingLocked(table,i){if((table.config.headers[i])&&(table.config.headers[i].lockedOrder)){return table.config.headers[i].lockedOrder}return false}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table)}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i]}}}function formatSortingOrder(v){if(typeof(v)!="Number"){return(v.toLowerCase()=="desc")?1:0}else{return(v==1)?1:0}}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true}}return false}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this)}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]])}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))});$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date()}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(table.config.parsers[c].type=="text")?((order==0)?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c)):((order==0)?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c));var e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; "}dynamicExp+="return 0; ";dynamicExp+="}; ";if(table.config.debug){benchmark("Evaling expression:"+dynamicExp,new Date())}eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime)}return cache}function makeSortFunction(type,direction,index){var a="a["+index+"]",b="b["+index+"]";if(type=="text"&&direction=="asc"){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+b+") ? -1 : 1 )));"}else{if(type=="text"&&direction=="desc"){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+a+") ? -1 : 1 )));"}else{if(type=="numeric"&&direction=="asc"){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+b+"));"}else{if(type=="numeric"&&direction=="desc"){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+b+" - "+a+"));"}}}}}function makeSortText(i){return"((a["+i+"] < b["+i+"]) ? -1 : ((a["+i+"] > b["+i+"]) ? 1 : 0));"}function makeSortTextDesc(i){return"((b["+i+"] < a["+i+"]) ? -1 : ((b["+i+"] > a["+i+"]) ? 1 : 0));"}function makeSortNumeric(i){return"a["+i+"]-b["+i+"];"}function makeSortNumericDesc(i){return"b["+i+"]-a["+i+"];"}function sortText(a,b){if(table.config.sortLocaleCompare){return a.localeCompare(b)}return((a<b)?-1:((a>b)?1:0))}function sortTextDesc(a,b){if(table.config.sortLocaleCompare){return b.localeCompare(a)}return((b<a)?-1:((b>a)?1:0))}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$.data(this,"tablesorter",config);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){$this.trigger("sortStart");var $cell=$(this);var i=this.column;this.order=this.count++%2;if(this.lockedOrder){this.order=this.lockedOrder}if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j])}}}config.sortList.push([i,this.order])}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2}}}else{config.sortList.push([i,this.order])}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache))},1);return false}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false}});$this.bind("update",function(){var me=this;setTimeout(function(){me.config.parsers=buildParserCache(me,$headers);cache=buildCache(me)},1)}).bind("updateCell",function(e,cell){var config=this.config;var pos=[(cell.parentNode.rowIndex-1),cell.cellIndex];cache.normalized[pos[0]][pos[1]]=config.parsers[pos[1]].format(getElementText(config,cell),cell)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList])}applyWidget(this)})};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false}}if(a){parsers.push(parser)}};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i};this.isDigit=function(s,config){return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g,"")))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild)}}empty.apply(table.tBodies[0])}else{table.tBodies[0].innerHTML=""}}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true},format:function(s){return $.trim(s.toLocaleLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[$]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item}else{r+=item}}return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1")}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")}}}return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;return $(cell).metadata()[p]},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date()}var $tr,row=-1,odd;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);if(!$tr.hasClass(table.config.cssChildRow)){row++}odd=(row%2==0);$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time)}}})})(jQuery);
;
(function(a){a.placeHeld=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("placeHeld",d);d.placeholderText=d.$el.attr("placeholder");d.init=function(){d.options=a.extend({},a.placeHeld.defaultOptions,b);d.$el.bind("blur",d.holdPlace);d.$el.bind("focus",d.releasePlace);d.holdPlace();d.$el.parents("form").bind("submit",d.clearPlace)};d.holdPlace=function(){var e=d.$el.val();if(!e){d.$el.val(d.placeholderText).addClass(d.options.className)}};d.releasePlace=function(){var e=d.$el.val();if(e==d.placeholderText){d.$el.val("").removeClass(d.options.className)}};d.clearPlace=function(){var e=d.$el.val();if(e==d.placeholderText&&d.$el.hasClass(d.options.className)){d.$el.val("")}};d.getValue=function(){var e=d.$el.val();if(e==d.placeholderText&&d.$el.hasClass(d.options.className)){return""}return e};d.init()};a.placeHeld.defaultOptions={className:"placeheld"};a.fn.placeHeld=function(b){if(!!("placeholder" in a("<input>")[0])){return}return this.each(function(){(new a.placeHeld(this,b))})};a.fn.placeHeldVal=function(){var b=a(this).data("placeHeld");if(b){return b.getValue()}return a(this).val()};a(function(){a("input[placeholder]").placeHeld()})})(jQuery);
;
jQuery.ajaxSetup({dataFilter:function(b,a){return(a==="json"&&b)?jQuery.trim(b.replace(/^throw [^;]*;/,"")):b},beforeSend:function(a){if(typeof _jive_auth_token!="undefined"){a.setRequestHeader("X-J-Token",_jive_auth_token)}}});
;
if(!this.JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();
;
if(!jive.dispatcher){jive.dispatcher=(function(c,b,a){a.listen=function(e,d){(c.isArray(e)?e:[e]).forEach(function(f){b.hasOwnProperty(f)||(b[f]=[]);b[f].push(d)});return a};a.dispatch=function(g,h,e){var d=0,f=(b[g]||[]).length;e=arguments.length>2?e:window;while(d<f){b[g][d++].call(e,h,g,e)}};c(document).on("click","[data-command]",function(g){var d=$j(this),f=d.data();g.preventDefault();a.dispatch(f.command,f,d)});return a})(jQuery,{},{})};
;
jive.Event={KEY_RETURN:13,KEY_LEFT:37,KEY_RIGHT:39,KEY_TAB:9,KEY_ESC:27,KEY_UP:38,KEY_DOWN:40,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34};
;
var goog=goog||{};goog.provide=goog.provide||function(){return jive.namespace.apply(window,arguments)};
;
goog.provide("soydata");goog.provide("soydata.SanitizedHtml");goog.provide("soydata.SanitizedHtmlAttribute");goog.provide("soydata.SanitizedJsStrChars");goog.provide("soydata.SanitizedUri");soydata.SanitizedContentKind={HTML:0,JS_STR_CHARS:1,URI:2,HTML_ATTRIBUTE:3};soydata.SanitizedContent=function(){};soydata.SanitizedContent.prototype.content;soydata.SanitizedContent.prototype.contentKind;soydata.SanitizedContent.prototype.toString=function(){return this.content};soydata.SanitizedHtml=function(a){this.content=a};soydata.SanitizedHtml.prototype=new soydata.SanitizedContent();soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedJsStrChars=function(a){this.content=a};soydata.SanitizedJsStrChars.prototype=new soydata.SanitizedContent();soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(a){this.content=a};soydata.SanitizedUri.prototype=new soydata.SanitizedContent();soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedHtmlAttribute=function(a){this.content=a};soydata.SanitizedHtmlAttribute.prototype=new soydata.SanitizedContent();soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.HTML_ATTRIBUTE;
;
jive.namespace("i18n");if(!jive.i18n.keyMaps){jive.i18n={soy:function(e,b){var a={zero:0,one:1,two:2,three:3,four:4,five:5,six:6};var c=e.string,d=[];Object.keys(e).forEach(function(f){if(typeof a[f]!="undefined"&&typeof d[a[f]]=="undefined"){d[a[f]]=e[f]}});b.append(jive.i18n.i18nText(c,d))},getMsg:function(d){var c=jive.i18n.keyMaps,b;for(var a=0;a<c.length;a+=1){b=c[a][d];if(b){if(a>0){c[0][d]=b}return b}}return soy.$$escapeHtml(d)},addMsg:function(b,a){jive.i18n.keyMaps[0][b]=a},addMsgs:function(a){jive.i18n.keyMaps.unshift(a)},i18nText:function(d,c){var b;for(var a=0;a<c.length;a++){b=c[a];if(typeof b!="undefined"){d=String(d).replace("{"+a+"}",soy.$$escapeHtml(b))}}return new soydata.SanitizedHtml(d)},keyMaps:[{}]}};
;
jive.ext.x.xMac=(navigator.appVersion.indexOf("Mac")!=-1);jive.ext.x.xWindows=!jive.ext.x.xMac;jive.ext.x.xVersion="3.15.1";jive.ext.x.xNN4=false;jive.ext.x.xOp7=false;jive.ext.x.xOp5or6=false;jive.ext.x.xIE4Up=false;jive.ext.x.xIE4=false;jive.ext.x.xIE5=false;jive.ext.x.xUA=navigator.userAgent.toLowerCase();jive.ext.x.xIE=false;jive.ext.x.xSafari=false;if(window.opera){jive.ext.x.xOp7=(jive.ext.x.xUA.indexOf("opera 7")!=-1||jive.ext.x.xUA.indexOf("opera/7")!=-1);if(!jive.ext.x.xOp7){jive.ext.x.xOp5or6=(jive.ext.x.xUA.indexOf("opera 5")!=-1||jive.ext.x.xUA.indexOf("opera/5")!=-1||jive.ext.x.xUA.indexOf("opera 6")!=-1||jive.ext.x.xUA.indexOf("opera/6")!=-1)}}else{if(document.all){jive.ext.x.xIE4Up=jive.ext.x.xUA.indexOf("msie")!=-1&&parseInt(navigator.appVersion)>=4;jive.ext.x.xIE4=jive.ext.x.xUA.indexOf("msie 4")!=-1;jive.ext.x.xIE5=jive.ext.x.xUA.indexOf("msie 5")!=-1;jive.ext.x.xIE6=jive.ext.x.xUA.indexOf("msie 6")!=-1;jive.ext.x.xIE7=jive.ext.x.xUA.indexOf("msie 7")!=-1;jive.ext.x.xIE4Up=jive.ext.x.xIE4||jive.ext.x.xIE5||jive.ext.x.xIE6;jive.ext.x.xIE=true}}if(jive.ext.x.xUA.indexOf("safari")!=-1||jive.ext.x.xUA.indexOf("Safari")!=-1){jive.ext.x.xSafari=true}jive.ext.x.xGetElementById=function(b,a){if(!$obj(a)){a=b.ownerDocument}if(b==null){return b}if(typeof(b)!="string"){return b}if(a.getElementById){b=a.getElementById(b)}else{if(a.all){b=a.all[b]}else{b=null}}return b};jive.ext.x.xParent=function(c,b){if(!(c=jive.ext.x.xGetElementById(c))){return null}var a=null;if(!b&&$def(c.offsetParent)){a=c.offsetParent}else{if($def(c.parentNode)){a=c.parentNode}else{if($def(c.parentElement)){a=c.parentElement}}}return a};var $def=function(a){return(typeof(a)!="undefined")};var $obj=function(a){return(typeof(a)=="object")};var $arr=function(a){return a!=null&&$obj(a)&&$def(a.splice)};$str=function(a){return typeof(a)=="string"};var $num=function(a){return typeof(a)=="number"};jive.ext.x.xShow=function(a){if(!(a=jive.ext.x.xGetElementById(a))){return}if(a.style&&$def(a.style.visibility)){a.style.visibility="visible"}};jive.ext.x.xHide=function(a){if(!(a=jive.ext.x.xGetElementById(a))){return}if(a.style&&$def(a.style.visibility)){a.style.visibility="hidden"}};jive.ext.x.xDisplay=function(b,a){if(!(b=jive.ext.x.xGetElementById(b))){return null}if(b.style&&$def(b.style.display)){if($str(a)){b.style.display=a}return b.style.display}return null};jive.ext.x.xDisplayNone=function(a){if(!(a=jive.ext.x.xGetElementById(a))){return}if(a.style&&$def(a.style.display)){a.style.display="none"}};jive.ext.x.xDisplayBlock=function(a){if(!(a=jive.ext.x.xGetElementById(a))){return}if(a.style&&$def(a.style.display)){a.style.display="block"}};jive.ext.x.xDisplayInline=function(a){if(!(a=jive.ext.x.xGetElementById(a))){return}if(a.style&&$def(a.style.display)){a.style.display="inline"}};jive.ext.x.xZIndex=function(b,a){if(!(b=jive.ext.x.xGetElementById(b))){return 0}if(b.style&&$def(b.style.zIndex)){if($num(a)){b.style.zIndex=a}a=parseInt(b.style.zIndex)}return a};jive.ext.x.xMoveTo=function(b,a,c){jive.ext.x.xLeft(b,a);jive.ext.x.xTop(b,c)};jive.ext.x.xLeft=function(c,a){if(!(c=jive.ext.x.xGetElementById(c))){return 0}var b=$def(c.style);if(b&&$str(c.style.left)){if($num(a)){c.style.left=a+"px"}else{a=parseInt(c.style.left);if(isNaN(a)){a=0}}}else{if(b&&$def(c.style.pixelLeft)){if($num(a)){c.style.pixelLeft=a}else{a=c.style.pixelLeft}}}return a};jive.ext.x.xTop=function(b,c){if(!(b=jive.ext.x.xGetElementById(b))){return 0}var a=$def(b.style);if(a&&$str(b.style.top)){if($num(c)){b.style.top=c+"px"}else{c=parseInt(b.style.top);if(isNaN(c)){c=0}}}else{if(a&&$def(b.style.pixelTop)){if($num(c)){b.style.pixelTop=c}else{c=b.style.pixelTop}}}return c};jive.ext.x.xPageX=function(a){var b=0;if(a.offsetParent){while(1){b+=a.offsetLeft;if(!a.offsetParent){break}a=a.offsetParent}}else{if(a.x){b+=a.x}}return b};jive.ext.x.xPageY=function(b){var a=0;if(b.offsetParent){while(1){a+=b.offsetTop;if(!b.offsetParent){break}b=b.offsetParent}}else{if(b.y){a+=b.y}}return a};jive.ext.x.xScrollLeft=function(b){var c=0,a=b.ownerDocument;if(!(b=jive.ext.x.xGetElementById(b))){if(a.documentElement&&a.documentElement.scrollLeft){c=a.documentElement.scrollLeft}else{if(a.body&&$def(a.body.scrollLeft)){c=a.body.scrollLeft}}}else{if($num(b.scrollLeft)){c=b.scrollLeft}}return c};jive.ext.x.xScrollTop=function(b){var c=0,a=b.ownerDocument;if(!(b=jive.ext.x.xGetElementById(b))){if(a.documentElement&&a.documentElement.scrollTop){c=a.documentElement.scrollTop}else{if(a.body&&$def(a.body.scrollTop)){c=a.body.scrollTop}}}else{if($num(b.scrollTop)){c=b.scrollTop}}return c};jive.ext.x.xWidth=function(g,b){if(!(g=jive.ext.x.xGetElementById(g))){return 0}if($num(b)){if(b<0){b=0}else{b=Math.round(b)}}else{b=-1}var d=$def(g.style);if(g==document||g.tagName.toLowerCase()=="html"||g.tagName.toLowerCase()=="body"){b=jive.ext.x.xClientWidth()}else{if(d&&$def(g.offsetWidth)&&$str(g.style.width)){if(b>=0){var f=0,i=0,h=0,c=0;if(document.compatMode=="CSS1Compat"){var a=jive.ext.x.xGetCS;f=a(g,"padding-left",1);if(f!==null){i=a(g,"padding-right",1);h=a(g,"border-left-width",1);c=a(g,"border-right-width",1)}else{if($def(g.offsetWidth,g.style.width)){g.style.width=b+"px";f=g.offsetWidth-b}}}b-=(f+i+h+c);if(isNaN(b)||b<0){return}else{g.style.width=b+"px"}}b=g.offsetWidth}else{if(d&&$def(g.style.pixelWidth)){if(b>=0){g.style.pixelWidth=b}b=g.style.pixelWidth}}}return b};jive.ext.x.xCamelize=function(d){var e,g,b=d.split("-");var f=b[0];for(e=1;e<b.length;++e){g=b[e].charAt(0);f+=b[e].replace(g,g.toUpperCase())}return f};jive.ext.x.xGetCS=function(f,d){try{if(!(f=jive.ext.x.xGetElementById(f))){return null}var c,a="undefined",b=f.ownerDocument.defaultView;if(b&&b.getComputedStyle){c=b.getComputedStyle(f,"");if(c){a=c.getPropertyValue(d)}}else{if(f.currentStyle){a=f.currentStyle[jive.ext.x.xCamelize(d)]}else{return null}}if($str(a)&&a.indexOf("px")>0){a=a.substr(0,a.indexOf("px"));a=parseInt(a)}return a}catch(f){return""}};jive.ext.x.xGetCSFunc=function(f,d){try{if(!(f=jive.ext.x.xGetElementById(f))){return null}var c,a="undefined",b=f.ownerDocument.defaultView;if(b&&b.getComputedStyle){c=b.getComputedStyle(f,"");if(c){return function(e){return function(h){var g=e.getPropertyValue(h);if($str(g)&&g.indexOf("px")>0){g=g.substr(0,g.indexOf("px"));g=parseInt(g)}return g}}(c)}}else{if(f.currentStyle){return function(e){return function(h){var g=e[jive.ext.x.xCamelize(h)];if($str(g)&&g.indexOf("px")>0){g=g.substr(0,g.indexOf("px"));g=parseInt(g)}return g}}(f.currentStyle)}else{return function(){return"undefined"}}}}catch(f){return function(){return"undefined"}}};jive.ext.x.xSetCH=function(e,d){var g=0,b=0,a=0,h=0,f=e.ownerDocument;if($def(f.defaultView)&&$def(f.defaultView.getComputedStyle)){g=jive.ext.x.xGetCS(e,"padding-top");b=jive.ext.x.xGetCS(e,"padding-bottom");a=jive.ext.x.xGetCS(e,"border-top-width");h=jive.ext.x.xGetCS(e,"border-bottom-width")}else{if($def(e.currentStyle,f.compatMode)){if(f.compatMode=="CSS1Compat"){g=parseInt(e.currentStyle.paddingTop);b=parseInt(e.currentStyle.paddingBottom);a=parseInt(e.currentStyle.borderTopWidth);h=parseInt(e.currentStyle.borderBottomWidth)}}else{if($def(e.offsetHeight,e.style.height)){e.style.height=d+"px";g=e.offsetHeight-d}}}if(isNaN(g)){g=0}if(isNaN(b)){b=0}if(isNaN(a)){a=0}if(isNaN(h)){h=0}var c=d-(g+b+a+h);if(isNaN(c)||c<0){return}else{e.style.height=c+"px"}};jive.ext.x.xHeight=function(c,b){if(!(c=jive.ext.x.xGetElementById(c))){return 0}if($num(b)){if(b<0){b=0}else{b=Math.round(b)}}else{b=0}var a=$def(c.style);if(a&&$def(c.offsetHeight)&&$str(c.style.height)){if(b){jive.ext.x.xSetCH(c,b)}b=c.offsetHeight}else{if(a&&$def(c.style.pixelHeight)){if(b){c.style.pixelHeight=b}b=c.style.pixelHeight}}return b};jive.ext.x.xHasPoint=function(i,e,d,b,c,a,f){if(!$num(b)){b=c=a=f=0}else{if(!$num(c)){c=a=f=b}else{if(!$num(a)){f=c;a=b}}}var h=jive.ext.x.xPageX(i),g=jive.ext.x.xPageY(i);return(e>=h+f&&e<=h+jive.ext.x.xWidth(i)-c&&d>=g+b&&d<=g+jive.ext.x.xHeight(i)-a)};jive.ext.x.xClientWidth=function(){var a=0;if(jive.ext.x.xOp5or6){a=window.innerWidth}else{if(!window.opera&&document.documentElement&&document.documentElement.clientWidth){a=document.documentElement.clientWidth}else{if(document.body&&document.body.clientWidth){a=document.body.clientWidth}else{if($def(window.innerWidth,window.innerHeight,document.height)){a=window.innerWidth;if(document.height>window.innerHeight){a-=16}}}}}return a};jive.ext.x.xClientHeight=function(){var a=0;if(jive.ext.x.xOp5or6){a=window.innerHeight}else{if(!window.opera&&document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientHeight}else{if(document.body&&document.body.clientHeight){a=document.body.clientHeight}else{if($def(window.innerWidth,window.innerHeight,document.width)){a=window.innerHeight;if(document.width>window.innerWidth){a-=16}}}}}return a};jive.ext.x.xDocHeight=function(h){if(h){var c=h.body,g=h.documentElement}else{var c=document.body,g=document.documentElement}var d=0,i=0,f=0,a=0;if(g){d=g.scrollHeight;i=g.offsetHeight}if(c){f=c.scrollHeight;a=c.offsetHeight}return Math.max(d,i,f,a)};
;
jive.ext.x.xAddEventListener=function(e,eventType,eventListener,useCapture){if(!(e=jive.ext.x.xGetElementById(e))){return}eventType=eventType.toLowerCase();if((!jive.ext.x.xIE4Up&&!jive.ext.x.xOp7)&&e==window){if(eventType=="resize"){jive.ext.x.xPCW=jive.ext.x.xClientWidth();jive.ext.x.xPCH=jive.ext.x.xClientHeight();jive.ext.x.xREL=eventListener;jive.ext.x.xResizeEvent();return}if(eventType=="scroll"){jive.ext.x.xPSL=jive.ext.x.xScrollLeft();jive.ext.x.xPST=jive.ext.x.xScrollTop();jive.ext.x.xSEL=eventListener;jive.ext.x.xScrollEvent();return}}if(e.addEventListener){e.addEventListener(eventType,eventListener,useCapture)}else{if(e.attachEvent){e.attachEvent("on"+eventType,eventListener)}else{if(e.captureEvents){if(useCapture||(eventType.indexOf("mousemove")!=-1)){e.captureEvents(eval("Event."+eventType.toUpperCase()))}var eh="e.on"+eventType+"=eventListener";eval(eh)}else{var eh="e.on"+eventType+"=eventListener";eval(eh)}}}};jive.ext.x.xRemoveEventListener=function(e,eventType,eventListener,useCapture){if(!(e=jive.ext.x.xGetElementById(e))){return}eventType=eventType.toLowerCase();if((!jive.ext.x.xIE4Up&&!jive.ext.x.xOp7)&&e==window){if(eventType=="resize"){jive.ext.x.xREL=null;return}if(eventType=="scroll"){jive.ext.x.xSEL=null;return}}var eh="e.on"+eventType+"=null";if(e.removeEventListener){e.removeEventListener(eventType,eventListener,useCapture)}else{if(e.detachEvent){e.detachEvent("on"+eventType,eventListener)}else{if(e.releaseEvents){if(useCapture||(eventType.indexOf("mousemove")!=-1)){e.releaseEvents(eval("Event."+eventType.toUpperCase()))}eval(eh)}else{eval(eh)}}}};jive.ext.x.xStopPropagation=function(a){if(a&&a.stopPropagation){a.stopPropagation()}else{if(window.event){window.event.cancelBubble=true}}};jive.ext.x.xEvent=function(b){this.type="";this.target=null;this.keyCode=0;var f=b?b:window.event;if(!f){return}if(f.type){this.type=f.type}if(f.target){this.target=f.target}else{if(f.srcElement){this.target=f.srcElement}}var d=null;var c=null;this.pageX=function(){if(d==null){if(jive.ext.x.xOp5or6){d=f.clientX;c=f.clientY}else{if(jive.ext.x.xDef(f.clientX,f.clientY)){d=f.clientX+jive.ext.x.xScrollLeft();c=f.clientY+jive.ext.x.xScrollTop()}}}return d};this.pageY=function(){if(c==null){if(jive.ext.x.xOp5or6){d=f.clientX;c=f.clientY}else{if(jive.ext.x.xDef(f.clientX,f.clientY)){d=f.clientX+jive.ext.x.xScrollLeft();c=f.clientY+jive.ext.x.xScrollTop()}}}return c};var a=null;var g=null;this.offsetX=function(){if(a==null){if(jive.ext.x.xDef(f.layerX,f.layerY)){a=f.layerX;g=f.layerY}else{if(jive.ext.x.xDef(f.offsetX,f.offsetY)){a=f.offsetX;g=f.offsetY}else{a=this.pageX-jive.ext.x.xPageX(this.target);g=this.pageY-jive.ext.x.xPageY(this.target)}}}return a};this.offsetY=function(){if(g==null){if(jive.ext.x.xDef(f.layerX,f.layerY)){a=f.layerX;g=f.layerY}else{if(jive.ext.x.xDef(f.offsetX,f.offsetY)){a=f.offsetX;g=f.offsetY}else{a=this.pageX-jive.ext.x.xPageX(this.target);g=this.pageY-jive.ext.x.xPageY(this.target)}}}return g};if(f.keyCode){this.keyCode=f.keyCode}else{if(jive.ext.x.xDef(f.which)){this.keyCode=f.which}}};jive.ext.x.xResizeEvent=function(){if(jive.ext.x.xREL){setTimeout("jive.ext.x.xResizeEvent()",250)}var a=jive.ext.x.xClientWidth(),b=jive.ext.x.xClientHeight();if(jive.ext.x.xPCW!=a||jive.ext.x.xPCH!=b){jive.ext.x.xPCW=a;jive.ext.x.xPCH=b;if(jive.ext.x.xREL){jive.ext.x.xREL()}}};jive.ext.x.xScrollEvent=function(){if(jive.ext.x.xSEL){setTimeout("jive.ext.x.xScrollEvent()",250)}var a=jive.ext.x.xScrollLeft(),b=jive.ext.x.xScrollTop();if(jive.ext.x.xPSL!=a||jive.ext.x.xPST!=b){jive.ext.x.xPSL=a;jive.ext.x.xPST=b;if(jive.ext.x.xSEL){jive.ext.x.xSEL()}}};
;
jive.ext.x.xTimerMgr=function(){this.set=function(d,f,c,b,e){return(this.timers[this.timers.length]=new a(d,f,c,b,e))};this.timers=new Array();this.running=false;this.run=function(){if(this.running){return}this.running=true;var e,c,f=new Date(),b=f.getTime();for(e=0;e<this.timers.length;++e){c=this.timers[e];if(c&&c.running){c.elapsed=b-c.time0;if(c.elapsed>=c.preset){c.obj[c.mthd](c);if(c.type.charAt(0)=="i"){c.time0=b}else{c.stop()}}}}this.running=false};function a(b,e,f,c,d){this.stop=function(){this.running=false};this.start=function(){this.running=true};this.reset=function(){var g=new Date();this.time0=g.getTime();this.elapsed=0;this.running=true};this.data=d;this.type=b;this.obj=e;this.mthd=f;this.preset=c;this.reset()}};jive.ext.x.xTimer=new jive.ext.x.xTimerMgr();jive.ext.x.xAddEventListener(window,"load",function(){setInterval("jive.ext.x.xTimer.run()",250)});
;
jive.ext.y.HashTable=function(){var b=this;var a=0;this.getCount=function(){return a};this.undefined=new Object();this.cache=new Array();this.put=function(c,d){b.clear(c);b.cache[c]=d;a=a+1};this.get=function(c){if(typeof(b.cache[c])!="undefined"&&b.cache[c]!=b.undefined){return b.cache[c]}else{return false}};this.clear=function(c){if(b.cache[c]!=b.undefined&&b.cache[c]!=null){a=a-1}b.cache[c]=b.undefined};this.toArray=function(c){if(typeof c!="function"){c=function(){return true}}return Object.values(b.cache).filter(function(d){return c(d)&&d!=b.undefined&&d!==null})};this.toKeysArray=function(c){return Object.keys(b.cache)}};jive.ext.y.yBottom=function(b,c){if(!(b=jive.ext.x.xGetElementById(b))){return 0}var a=$def(b.style);if(a&&$str(b.style.bottom)){if($num(c)){b.style.bottom=c+"px"}else{c=parseInt(b.style.bottom);if(isNaN(c)){c=0}}}else{if(a&&$def(b.style.pixelBottom)){if($num(c)){b.style.pixelBottom=c}else{c=b.style.pixelBottom}}}return c};jive.ext.y.yOpacity=function(a,b){if(!(a=jive.ext.x.xGetElementById(a))){return}if(jotlet.external.x.xNum(b)){if(b<0){b=0}else{if(b>100){b=100}else{b=Math.round(b)}}if(jotlet.external.x.xDef(a.style.MozOpacity)){a.style.MozOpacity=(b/100);return a.style.MozOpacity*100}if(jotlet.external.x.xDef(a.style.opacity)){a.style.opacity=(b/100);return a.style.opacity*100}if(jotlet.external.x.xStr(a.style.filter)){a.style.filter="alpha(opacity="+(b)+")";a.yOpacity=b;return a.yOpacity}}if(jotlet.external.x.xDef(a.style.MozOpacity)){return a.style.MozOpacity*100}if(jotlet.external.x.xDef(a.style.opacity)){return a.style.opacity*100}if(jotlet.external.x.xDef(a.filters)&&jotlet.external.x.xDef(a.filters.alpha)&&jotlet.external.x.xDef(a.filters.alpha.opacity)){return a.filters.alpha.opacity}};
;
jive.ext.y.yAjax=function(a,d){var f=false;if(window.XMLHttpRequest){f=new XMLHttpRequest();if(f.overrideMimeType){f.overrideMimeType("text/xml")}}else{if(window.ActiveXObject){try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}}if(!f){return false}f.onreadystatechange=b;function b(){try{if(f.readyState==4){if(f.status==200){a(f.responseText)}else{d()}}}catch(g){}}this.POST=function(e,g){f.open("POST",e,true);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.setRequestHeader("Content-length",g.length);f.setRequestHeader("Connection","close");f.send(g)}};
;
jive.xml.XMLParser=function(){this.parse=function(a){return $j.parseXML(a)}};
;
jive.model.Ajax=function(c,a,d){var b=this;this.POST=function(f,g){var e=function(j){try{var k=null;if(!$obj(k)||k==null||!$obj(k.documentElement)||k.documentElement==null){var m=new jive.xml.XMLParser();try{k=m.parse(j)}catch(l){d("XML Parse exception");return}}if($obj(k)&&k!=null&&$obj(k.documentElement)&&k.documentElement!=null){k=k.documentElement}else{d("XML Parse exception");return}if(k.tagName=="br"){d("Server Exception")}else{if(k.tagName=="NotLoggedInException"){c.handleLogIn(function(){b.POST(f,g)})}else{c.poke();a(k)}}}catch(l){alert("ajax error:"+l)}};var i=function(){d("500 Status")};var h=new jive.ext.y.yAjax(e,i);h.POST(f,g)}};
;
jive.model.LoginManager=function(h){var f=this;var e=new Array();var b=new Array();function a(i){try{var l=new jive.xml.XMLParser();var j=l.parse(i);if($obj(j.documentElement)&&j.documentElement!=null){j=j.documentElement}else{j=new Object();j.childNodes=new Array();j.tagName="failed"}if(j.tagName=="success"){f.notifyLoginOk()}else{f.notifyLoginFail()}}catch(k){alert(k)}}function d(){f.notifyLoginFail()}this.login=function(j){var i=new jotlet.external.y.yAjax(a,d);alert("logging in via ajax")};var c=false;function g(){while(b.length>0){b[0]();b.splice(0,1)}}this.addListener=function(i){if(!c){e.push(i)}else{b.push(function(){f.addListener(i)})}};this.removeListener=function(k){if(!c){for(var j=0;j<e.length;j++){if(e[j]==k){e.splice(j,1)}}}else{b.push(function(){f.removeListener(k)})}};this.notifyLoginOk=function(){c=true;for(var j=0;j<e.length;j++){e[j].loginOk()}c=false;g()};this.notifyLoginFail=function(){c=true;for(var j=0;j<e.length;j++){e[j].loginFail()}c=false;g()}};
;
jive.model.SettingsManager=function(e){var d="rawhtml";var a=null;var c=(new Date()).getTime();var b=0;this.getGMT=function(){var g=new Date();if(a!=null&&g.getTime()<c+500){return a}var g=new Date();var f=new Date();f.setTime(Date.parse(g.toUTCString().substring(0,g.toUTCString().length-3)));a=f;return f};this.getNOW=function(){return new Date()};this.getStartWeekOn=function(){return 1};this.getSmartShading=function(){return true};this.getWeatherImage=function(f){return""};this.getDateFormat=function(){return"4/30"};this.getWeekDayToStartOn=function(){return b};this.setWeekDayToStartOn=function(f){b=(parseInt(f)==NaN?0:parseInt(f))}};
;
jive.model.RefreshManager=function(h){var i=this;var l=new Array();var a=h.getSettingsManager().getGMT();var d=h.getSettingsManager().getGMT();var b=true;this.poke=function(){try{if(b){a=h.getSettingsManager().getGMT()}}catch(n){alert("refresh error:"+n)}};this.loggedOut=function(){b=false};function f(s,q){try{i.notifyRefreshing();s.setTime(s.getTime()-5);var t=new jive.model.DateHelper(h);var r=t.formatToDateTime(s);var o=h.newAjax(e,g);var p=t.formatToDateTime(h.getEventCache().getMinTime());var n=t.formatToDateTime(h.getEventCache().getMaxTime());o.POST(HOSTURL+AJAXPATH+"?refresh","dt="+encodeURIComponent(r)+"&mindt="+p+"&maxdt="+n+(q?"&all":""))}catch(u){alert("refreshing: "+u)}}this.refresh=function(){if(b){f(d,false)}};this.reload=function(o){var n=d;i.notifyRefreshing();e(o);d=n};var k=new jive.ext.y.HashTable();this.getCustomCache=function(n){var o=k.get(n);if(!$obj(o)){o=new jive.ext.y.HashTable();k.put(n,o)}return o};function c(n){var o=new jive.ext.y.HashTable();k.put(n,o);return o}function m(p){for(var o=0;o<p.childNodes.length;o++){var r=c(p.childNodes[o].tagName);for(var n=0;n<p.childNodes[o].childNodes.length;n++){var q=parseInt(p.childNodes[o].childNodes[n].childNodes[0].nodeValue);r.put(q,true)}}}function e(u){try{b=true;for(var r=0;r<u.childNodes.length;r++){if(u.childNodes[r].tagName=="projects"){if(u.childNodes[r].childNodes.length>0){h.getProjectCache().loadExternalProjects(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="events"){if(u.childNodes[r].childNodes.length>0){h.getEventCache().reloadEvents(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="del_cals"){try{if(u.childNodes[r].childNodes.length>0){h.getCalendarCache().unloadCalendars(u.childNodes[r])}}catch(t){alert("error unloading calendars: "+t)}}else{if(u.childNodes[r].tagName=="del_events"){try{if(u.childNodes[r].childNodes.length>0){h.getEventCache().unloadEvents(u.childNodes[r])}}catch(t){alert("error unloading calendars: "+t)}}else{if(u.childNodes[r].tagName=="event_cache"){try{if(u.childNodes[r].childNodes.length>0){m(u.childNodes[r])}}catch(t){alert("error unloading calendars: "+t)}}else{if(u.childNodes[r].tagName=="reminders"){if(u.childNodes[r].childNodes.length>0){h.getReminderCache().reloadReminders(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="comments"){if(u.childNodes[r].childNodes.length>0){h.getCommentCache().reloadComments(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="forms"){if(u.childNodes[r].childNodes.length>0){h.getFormManager().reloadForms(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="sync"){if($def(h.getSyncManager)){h.getSyncManager().reloadSync(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="calendars"){if(u.childNodes[r].childNodes.length>0){h.getCalendarCache().reloadCalendars(u.childNodes[r])}}else{if(u.childNodes[r].tagName=="settings"){h.getSettingsManager().reloadSettings(u.childNodes[r])}else{if(u.childNodes[r].tagName=="deleted"){try{var w=u.childNodes[r];for(var q=0;q<w.childNodes.length;q++){if(w.childNodes[r].tagName=="event"){var x=parseInt(w.childNodes[q].nodeValue);var o=h.getEventCache().getTaskSilent(v);h.getEventCache().notifyDeletingEvent(o);h.getEventCache().notifyDoneDeletingEvent(o)}else{if(w.childNodes[r].tagName=="task"){var v=parseInt(w.childNodes[q].nodeValue);var p=h.getEventCache().getTaskSilent(v);h.getEventCache().notifyDeletingTask(p);h.getEventCache().notifyDoneDeletingTask(p)}else{if(w.childNodes[r].tagName=="calendar"){var s=parseInt(w.childNodes[q].nodeValue);var n=h.getCalendarCache().getCalendar(s);if($obj(n)&&n!=null){h.getCalendarCache().notifyDeletingCalendar(n);h.getCalendarCache().notifyDoneDeletingCalendar(n)}}}}}}catch(t){alert("exception refreshing deleted items: "+t)}}}}}}}}}}}}}}d=h.getSettingsManager().getGMT();i.notifyDoneRefreshing()}catch(t){alert("refresh.js:loadXML: "+t)}}function g(){i.notifyRefreshingFailed()}this.loadRemoteXML=function(n){i.notifyRefreshing();e(n)};this.addListener=function(n){l.push(n)};this.removeListener=function(o){for(var n=0;n<l.length;n++){if(l[n]==o){l.splice(n,1)}}};this.notifyRefreshing=function(){for(var n=0;n<l.length;n++){l[n].refreshing()}};this.notifyDoneRefreshing=function(){for(var n=0;n<l.length;n++){l[n].doneRefreshing()}};this.notifyRefreshingFailed=function(){for(var n=0;n<l.length;n++){l[n].refreshingFailed()}};var j=new Object();j.loginOk=function(){if(a.getTime()<d.getTime()){var n=a}else{var n=d}f(n,true)};j.loginFail=function(){};h.getLoginManager().addListener(j)};
;
jive.model.isLanguage=function(a){return $def(a)&&$obj(a)&&a!=null&&$def(a.translate)&&$def(a.getId)};jive.model.Language=function(e,b,d){var c=this;this.getId=function(){return e};this.getName=function(){return b};this.translate=function(f){var g=d.get(f);if(g==false){alert('Language Exception: key "'+f+'" not found')}else{if(g=="_"){return" "}else{g=g.replace(/#xD#xA/g,"\r\n");return g}}};var a=new Array();a.push("red"),a.push("blue"),a.push("green"),a.push("pink"),a.push("purple"),a.push("orange"),a.push("yellow"),a.push("grey");this.color=function(f){return c.translate("color_"+a[f])};this.longMonth=function(f){var g=new Array();g.push("january");g.push("february");g.push("march");g.push("april");g.push("may");g.push("june");g.push("july");g.push("august");g.push("september");g.push("october");g.push("november");g.push("december");return c.translate(g[f])};this.shortMonth=function(f){var g=new Array();g.push("sh_january");g.push("sh_february");g.push("sh_march");g.push("sh_april");g.push("sh_may");g.push("sh_june");g.push("sh_july");g.push("sh_august");g.push("sh_september");g.push("sh_october");g.push("sh_november");g.push("sh_december");return c.translate(g[f])};this.longDay=function(f){var g=new Array();g.push("sunday");g.push("monday");g.push("tuesday");g.push("wednesday");g.push("thursday");g.push("friday");g.push("saturday");return c.translate(g[f])};this.shortDay=function(f){var g=new Array();g.push("sh_sunday");g.push("sh_monday");g.push("sh_tuesday");g.push("sh_wednesday");g.push("sh_thursday");g.push("sh_friday");g.push("sh_saturday");return c.translate(g[f])};this.weekNumber=function(f){var g=new Array();g.push("recur_first");g.push("recur_second");g.push("recur_third");g.push("recur_fourth");g.push("recur_fifth");g.push("recur_last");return c.translate(g[f])}};jive.model.LanguageManager=function(d,k){var h=this;var f=null;var g=new Array();var a=new jive.ext.y.HashTable();var j=new Array();this.getActiveLanguage=function(){return f};this.setActiveLanguage=function(e){if(jive.model.isLanguage(e)){f=e;h.notifyLanguageChanged(f)}else{return false}};this.getLanguageList=function(){return a.toArray()};this.getSilentLanguages=function(){return g};this.loadLanguage=function(l){h.notifyLoadBegin();var e=d.newAjax(h.loadOk,h.loadFail);e.POST(HOSTURL+AJAXPATH+"?load_language","lang_id="+l)};this.saveLanguage=function(l){h.notifyLoadBegin();var m=function(o){return function(p){h.loadOk(p);var q=a.get(o);if($obj(q)&&q!=null){h.setActiveLanguage(q)}}}(l);var n=a.get(l);if($obj(n)&&n!=null){m=function(o){return function(p){h.setActiveLanguage(a.get(o))}}(l)}var e=d.newAjax(m,h.loadFail);e.POST(HOSTURL+AJAXPATH+"?save_language","lang_id="+l)};function c(p){var e;if(p.childNodes.length>0){if(p.childNodes[0].tagName=="language"){if(p.childNodes[0].childNodes.length>0){b=p.childNodes[0];var n="";var r=0;var q=new jive.ext.y.HashTable();for(var m=0;m<b.childNodes.length;m++){if(b.childNodes[m].tagName=="name"){n=b.childNodes[m].childNodes[0].nodeValue}else{if(b.childNodes[m].tagName=="lang_id"){r=b.childNodes[m].childNodes[0].nodeValue}else{if(b.childNodes[m].tagName=="lang_table"){var o=b.childNodes[m];for(var l=0;l<o.childNodes.length;l++){q.put(o.childNodes[l].tagName,o.childNodes[l].childNodes[0].nodeValue)}}}}}b=new jive.model.Language(r,n,q);a.put(b.getId(),b)}else{return false}}else{return false}}else{return false}return b}this.loadOk=function(e){if(!c(e)){h.notifyLoadFail()}else{h.notifyLoadFinish()}};this.loadFail=function(){h.notifyLoadFail()};this.addListener=function(e){j.push(e)};this.removeListener=function(l){for(var e=0;e<j.length;e++){if(j[e]==l){j.splice(e,1)}}};this.notifyLoadBegin=function(){for(var e=0;e<j.length;e++){j[e].beginLoadingLanguages()}};this.notifyLoad=function(l){for(var e=0;e<j.length;e++){j[e].loadLanguage(l)}};this.notifyLoadFinish=function(){for(var e=0;e<j.length;e++){j[e].doneLoadingLanguages()}};this.notifyLoadFail=function(){for(var e=0;e<j.length;e++){j[e].loadingLanguagesFailed()}};this.notifyLanguageChanged=function(l){for(var e=0;e<j.length;e++){j[e].languageChanged(l)}};try{if($def(k)){var b=c(k);if($obj(b)&&b!=null){h.setActiveLanguage(b)}else{alert("error parsing")}}else{alert("no default langauge")}}catch(i){alert("language: "+i)}};
;
jive.model.isCheckPoint=function(a){return $def(a)&&$obj(a)&&a!=null&&$def(a.isCheckPoint)};jive.model.CheckPoint=function(c){var i=this;var e=new Array();function k(l,m){return function(){l(m)}}this.clearRevertActions=function(){e=new Array()};this.revert=function(){while(e.length>0){e[0]();e.splice(0,1)}};var f=c;this.getProject=function(){return f};var b;var g=null;var d=null;var a="";var h="";var j=null;this.isCheckPoint=function(){return true};this.getID=function(){return b};this.getCreatedOn=function(){return g};this.getLastModifiedOn=function(){return d};this.getName=function(){return a};this.getDescription=function(){return h};this.getDueDate=function(){return j};this.setID=function(l){b=l};this.setCreatedOn=function(l){g=l};this.setLastModifiedOn=function(l){d=l};this.setName=function(l){e.push(k(function(m){a=m},a));a=l};this.setDescription=function(l){e.push(k(function(m){h=m},h));h=l};this.setDueDate=function(l){e.push(k(function(m){j=m},j));j=l};this.cleanAfterInit=function(){i.clearRevertActions();i.setID=null;i.setCreatedOn=null;i.setLastModifiedOn=null}};jive.model.Project=function(){var j=this;var f=new Array();function l(m,n){return function(){m(n)}}this.clearRevertActions=function(){f=new Array()};this.revert=function(){while(f.length>0){f[0]();f.splice(0,1)}};var c;var a="";var i="";var e;var k;var b;var g;var d=false;var h=new Array();this.getID=function(){return c};this.getCreator=function(){return e};this.getLastModifiedOn=function(){return b};this.getName=function(){return a};this.getDescription=function(){return i};this.getDueDate=function(){return k};this.getTasks=function(){return g};this.isEditable=function(){return d};this.getCheckPoints=function(){return h};this.setID=function(m){c=m};this.setCreator=function(m){e=m};this.setEditable=function(m){d=m};this.setLastModifiedOn=function(m){b=m};this.setName=function(m){f.push(l(function(n){a=n},a));a=m};this.setDescription=function(m){f.push(l(function(n){i=n},i));i=m};this.setDueDate=function(m){f.push(l(function(n){k=n},k));k=m};this.setTasks=function(m){g=m};this.setCheckPoints=function(m){h=m};this.cleanAfterInit=function(){j.clearRevertActions();j.setID=null;j.setCreator=null;j.setEditable=null;j.setLastModifiedOn=null;j.setCheckPoints=null}};jive.model.ProjectCache=function(g){var f=this;var c=new jive.ext.y.HashTable();this.getProject=function(i){return c.get(i)};this.getProjects=function(){return c.toArray()};function b(i){var j=c.get(i.getID());if($obj(j)){j.setCreator(i.getCreator());j.setDescription(i.getDescription());j.setDueDate(i.getDueDate());j.clearRevertActions()}else{c.put(i.getID(),i)}f.notifyLoadProject(i)}function h(t){var v=new Array();for(var r=0;r<t.childNodes.length;r++){var p=new jive.model.Project();var y=t.childNodes[r];var s=new Array();for(var q=0;q<y.childNodes.length;q++){if(y.childNodes[q].tagName=="id"){if(y.childNodes[q].childNodes.length>0){p.setID(y.childNodes[q].childNodes[0].nodeValue)}}else{if(y.childNodes[q].tagName=="name"){if(y.childNodes[q].childNodes.length>0){p.setName(y.childNodes[q].childNodes[0].nodeValue)}}else{if(y.childNodes[q].tagName=="desc"){if(y.childNodes[q].childNodes.length>0){p.setDescription(y.childNodes[q].childNodes[0].nodeValue)}}else{if(y.childNodes[q].tagName=="creator"){var w=y.childNodes[q];var A=g.getUserCache().loadExternalUser(w.childNodes[0]);p.setCreator(A)}else{if(y.childNodes[q].tagName=="d_on"){var m=y.childNodes[q].childNodes[0].nodeValue;if(m!=null){p.setDueDate(new Date(m.replace(/-/g,"/")))}else{p.setDueDate(null)}}else{if(y.childNodes[q].tagName=="m_on"){var m=y.childNodes[q].childNodes[0].nodeValue;if(m!=null){p.setLastModifiedOn(new Date(m.replace(/-/g,"/")))}else{p.setLastModifiedOn(null)}}else{if(y.childNodes[q].tagName=="editable"){p.setEditable(true)}else{if(y.childNodes[q].tagName=="tasks"){var w=y.childNodes[q];var A=g.getTaskCache().loadExternalTasks(w);p.setTasks(A)}else{if(y.childNodes[q].tagName=="cps"){var w=y.childNodes[q];for(var o=0;o<w.childNodes.length;o++){var z=w.childNodes[o];var x=new jive.model.CheckPoint(p);for(var n=0;n<z.childNodes.length;n++){if(z.childNodes[n].tagName=="id"){if(z.childNodes[n].childNodes.length>0){x.setID(z.childNodes[n].childNodes[0].nodeValue)}}else{if(z.childNodes[n].tagName=="c_on"){var m=z.childNodes[n].childNodes[0].nodeValue;if(m!=null){x.setCreatedOn(new Date(m.replace(/-/g,"/")))}else{x.setCreatedOn(null)}}else{if(z.childNodes[n].tagName=="m_on"){var m=z.childNodes[n].childNodes[0].nodeValue;if(m!=null){x.setLastModifiedOn(new Date(m.replace(/-/g,"/")))}else{x.setLastModifiedOn(null)}}else{if(z.childNodes[n].tagName=="nm"){if(z.childNodes[n].childNodes.length>0){x.setName(z.childNodes[n].childNodes[0].nodeValue)}}else{if(z.childNodes[n].tagName=="desc"){if(z.childNodes[n].childNodes.length>0){x.setDescription(z.childNodes[n].childNodes[0].nodeValue)}}else{if(z.childNodes[n].tagName=="due"){if(z.childNodes[n].childNodes.length>0){var m=z.childNodes[n].childNodes[0].nodeValue;if(m!=null){x.setDueDate(new Date(m.replace(/-/g,"/")))}else{x.setDueDate(null)}}}}}}}}}s.push(x);p.setCheckPoints(s)}}}}}}}}}}}b(p);v.push(p)}return v}this.loadExternalProjects=function(j){f.notifyLoadBegin();try{var i=h(j);f.notifyLoadFinish();return i}catch(k){f.notifyLoadFail()}return null};this.canEditProjectHuh=function(i){if(i==0){return true}};this.addListener=function(i){e.push(i)};var e=new Array();var a=0;var d=new Array();this.addListenerAction=function(i){d.push(i)};this.executeListenerActions=function(){while(d.length>0){d[0]();d.splice(0,1)}};this.removeListener=function(k){if(a==0){for(var j=0;j<e.length;j++){if(e[j]==k){e.splice(j,1)}}}else{f.addListenerAction(function(i){return function(){f.removeListener(i)}}(k))}};this.notifyLoadProject=function(k){a++;for(var j=0;j<e.length;j++){e[j].loadProject(k)}a--;f.executeListenerActions()};this.notifyLoadBegin=function(){a++;for(var j=0;j<e.length;j++){e[j].beginLoadingProjects()}a--;f.executeListenerActions()};this.notifyLoadFinish=function(){a++;for(var j=0;j<e.length;j++){e[j].doneLoadingProjects()}a--;f.executeListenerActions()};this.notifyLoadFail=function(){a++;for(var j=0;j<e.length;j++){e[j].loadingProjectsFailed()}a--;f.executeListenerActions()}};
;
jive.model.User=function(){var e=this;var d=new Array();function b(h,i){return function(){h(i)}}this.clearRevertActions=function(){d=new Array()};this.revert=function(){while(d.length>0){d[0]();d.splice(0,1)}};var g;var f;var a;var c;this.getID=function(){return g};this.getUsername=function(){return f};this.getFullName=function(){return a};this.getURL=function(){return c};this.setID=function(h){g=h};this.setUsername=function(h){f=h};this.setFullName=function(h){d.push(b(function(i){a=i},a));a=h};this.setURL=function(h){c=h};this.cleanAfterInit=function(){e.clearRevertActions();e.setID=null;e.setUsername=null;this.setURL=null}};jive.model.UserCache=function(f){var e=this;var b=new jive.ext.y.HashTable();function g(h){var i=b.get(h.getID());if($obj(i)){i.setFullName(h.getFullName());i.clearRevertActions()}else{b.put(h.getID(),h)}e.notifyLoadUser(h)}function a(k){var h=new jive.model.User();for(var i=0;i<k.childNodes.length;i++){if(k.childNodes[i].tagName=="i"){if(k.childNodes[i].childNodes.length>0){h.setID(parseInt(k.childNodes[i].childNodes[0].nodeValue))}}else{if(k.childNodes[i].tagName=="u"){h.setUsername(k.childNodes[i].childNodes[0].nodeValue)}else{if(k.childNodes[i].tagName=="n"){h.setFullName(k.childNodes[i].childNodes[0].nodeValue)}else{if(k.childNodes[i].tagName=="url"){h.setURL(k.childNodes[i].childNodes[0].nodeValue)}}}}}h.cleanAfterInit();g(h);return h}this.loadExternalUser=function(i){e.notifyLoadBegin();try{var h=a(i);e.notifyLoadFinish();return h}catch(j){e.notifyLoadFail()}return null};this.addListener=function(h){d.push(h)};var d=new Array();var c=new Array();this.addListenerAction=function(h){c.push(h)};this.executeListenerActions=function(){while(c.length>0){c[0]();c.splice(0,1)}};this.removeListener=function(j){for(var h=0;h<d.length;h++){if(d[h]==j){d.splice(h,1)}}};this.notifyLoadUser=function(j){for(var h=0;h<d.length;h++){d[h].loadUser(j)}e.executeListenerActions()};this.notifyLoadBegin=function(){for(var h=0;h<d.length;h++){d[h].beginLoadingUsers()}e.executeListenerActions()};this.notifyLoadFinish=function(){for(var h=0;h<d.length;h++){d[h].doneLoadingUsers()}e.executeListenerActions()};this.notifyLoadFail=function(){for(var h=0;h<d.length;h++){d[h].loadingUsersFailed()}e.executeListenerActions()}};
;
jive.model.dateLTEQ=function(b,a){return(b.getFullYear()<a.getFullYear()||b.getFullYear()==a.getFullYear()&&(b.getMonth()<a.getMonth()||b.getMonth()==a.getMonth()&&(b.getDate()<=a.getDate())))};jive.model.dateLT=function(b,a){return(b.getFullYear()<a.getFullYear()||b.getFullYear()==a.getFullYear()&&(b.getMonth()<a.getMonth()||b.getMonth()==a.getMonth()&&(b.getDate()<a.getDate())))};jive.model.dateGT=function(b,a){return jive.model.dateLT(a,b)};jive.model.dateGTEQ=function(b,a){return jive.model.dateLTEQ(a,b)};jive.model.monthYearEQ=function(b,a){return b.getMonth()==a.getMonth()&&b.getFullYear()==a.getFullYear()};jive.model.dateEQ=function(b,a){return(b.getDate()==a.getDate()&&b.getMonth()==a.getMonth()&&b.getFullYear()==a.getFullYear())};jive.model.dateMinusMonth=function(b){var a=b.getMonth();if(b.getMonth()==0){b.setFullYear(b.getFullYear()-1);b.setMonth(11)}else{b.setMonth(b.getMonth()-1)}while(b.getMonth()==a){b.setDate(b.getDate()-1)}};jive.model.dateMinusDay=function(a){if(a.getDate()==0&&a.getDate()==1){a.setFullYear(a.getFullYear()-1);a.setMonth(11);a.setDate(31)}else{a.setDate(a.getDate()-1)}};jive.model.DateUtil=(function(){var a=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(?:[\.,](\d+))?([Z\+\-])(\d\d)?:?(\d\d)?/;return{parseISODateTime:function c(g){if(Date.prototype.toISOString){try{var d=Date.parse(g);if(typeof d=="number"&&!isNaN(d)){return d}}catch(q){}}var k=a.exec(g);function o(u,v){var t=NaN;if(u!=null&&u.length>0){t=parseInt(u,10)}if(isNaN(t)){t=v}return t}function l(w){function v(y){var x=String(y);while(x.length<2){x="0"+x}return x}function u(x){if(x>=0){return Math.floor(x)}return Math.ceil(x)}var t=-w.getTimezoneOffset();return t*60000}if(k){var j=o(k[4],0),h=o(k[5],0),e=o(k[6],0),s=parseFloat("0."+k[7]),n=k[8],p=o(k[9],0),m=o(k[10],0);if(n=="Z"){n=0}else{if(n=="+"){n=1}else{n=-1}}var i=n*(m+60*p)*60*1000,r=((j*60+h)*60+e+s)*1000;var f=new Date(o(k[1]),o(k[2])-1,o(k[3]));return f.getTime()+l(f)+r-i}else{return NaN}},_testParsing:function(){var k=1970;var j=0;var l=1;var g=0;var f=0;var d=0;var e;for(var h=0;h<500;++h){e=new Date(k+h,(j+h)%12,(l+h)%29+1,(g+h)%24,(f+h)%60,(d+h)%60,(2*h)%1000);var n=this.formatToISODateTime(e);var m=this.parseISODateTime(n);if(m!==e.getTime()){console.log("fail: ",e)}else{console.log("Success: "+m,n)}}},formatToISODateTime:function b(l){if(l.toISOString()){return l.toISOString().replace(/Z$/,"+0000")}var i=l.getUTCFullYear();var j=l.getUTCMonth()+1;if(j<10){j="0"+j}var f=l.getUTCDate();if(f<10){f="0"+f}var e=l.getUTCHours();if(e<10){e="0"+e}var k=l.getUTCMinutes();if(k<10){k="0"+k}var g=l.getUTCSeconds();if(g<10){g="0"+g}var h=l.getUTCMilliseconds();if(h<10){h="00"+h}else{if(h<100){h="0"+h}}return i+"-"+j+"-"+f+"T"+e+":"+k+":"+g+"."+h+"+0000"}}})();jive.model.DateHelper=function(c){var a=c.getSettingsManager();var b=this;this.formatToDateTime=function(k){var h=k.getFullYear();var i=k.getMonth()+1;if(i<10){i="0"+i}var f=k.getDate();if(f<10){f="0"+f}var e=k.getHours();if(e<10){e="0"+e}var j=k.getMinutes();if(j<10){j="0"+j}var g=k.getSeconds();if(g<10){g="0"+g}return h+"-"+i+"-"+f+" "+e+":"+j+":"+g};this.formatTo12HourTime=function(i){var g=a.getTimeFormat();if(g=="3:00p"){var e=i.getHours();var h=i.getMinutes();if(h<10){h="0"+h}var f="a";if(e>=12){f="p";e-=12}if(e==0){e=12}return e+":"+h+f}else{var e=i.getHours();var h=i.getMinutes();if(h<10){h="0"+h}return e+":"+h}};this.formatToShortDate=function(h){var g=h.getMonth()+1;var e=h.getDate();var f=a.getDateFormat();if(f=="4/30"){return g+"/"+e}else{return e+"/"+g}}};
;
jive.model.TaskCacheListener=function(){this.loadingTasksFailed=function(){};this.doneLoadingTasks=function(){};this.beginLoadingTasks=function(){};this.loadTask=function(){};this.taskChanged=function(){}};
;
jive.model.isEvent=function(a){return $obj(a)&&a!=null&&$def(a.getStart)&&$def(a.getEnd)};jive.model.isTask=function(a){return $obj(a)&&a!=null&&$def(a.getDueDate)&&$def(a.getProjectID)};jive.model.Task=function(){var h=this;var j=0;var b=new Array();function a(s,t){return function(){s(t)}}this.clearRevertActions=function(){b=new Array()};this.revert=function(){while(b.length>0){b[0]();b.splice(0,1)}};this.confirm=function(){h.notifyTaskChanged()};var l;var k=j;var r=null;var e;var n;var f;var q;var d;var p;var i;var c;var g=-1;var o=false;this.getID=function(){return l};this.getProjectID=function(){return k};this.getDueDate=function(){return r};this.hasDueDate=function(){return r!=null};this.getSubject=function(){return e};this.getDescription=function(){return n};this.getCreatedBy=function(){return f};this.getCreatedOn=function(){return q};this.getAssignedBy=function(){return p};this.getAssignedTo=function(){return d};this.getURL=function(){return c};this.isComplete=function(){return i};this.getParentTaskID=function(){return g};this.isParent=function(){return o};this.setIsParent=function(s){o=s};this.setParentTaskID=function(s){g=s};this.setID=function(s){l=s};this.setProjectID=function(s){k=s};this.setCreatedBy=function(s){f=s};this.setCreatedOn=function(s){q=s};this.setComplete=function(s){i=s};this.setURL=function(s){c=s};this.setDueDate=function(s){b.push(a(function(t){r=t},r));r=s};this.setSubject=function(s){b.push(a(function(t){e=t},e));e=s};this.setDescription=function(s){b.push(a(function(t){n=t},n));n=s};this.setAssignedBy=function(s){b.push(a(function(t){p=t},p));p=s};this.setAssignedTo=function(s){b.push(a(function(t){d=t},d));d=s};this.cleanAfterInit=function(){h.clearRevertActions();h.setID=null;h.setCreatedBy=null;h.setCreatedOn=null;h.setURL=null};var m=new Array();this.addListener=function(s){m.push(s)};this.removeListener=function(t){for(var s=0;s<m.length;s++){if(m[s]==t){m.splice(s,1)}}};this.notifyTaskChanged=function(){for(var s=0;s<m.length;s++){m[s].taskChanged(h)}}};jive.model.TaskCache=function(d){var f=this;var a=new jive.ext.y.HashTable();function c(){this.taskChanged=function(j){f.notifyTaskChanged(j)}}function e(k){var j=a.get(k.getID());if($obj(j)){j.setDueDate(k.getDueDate());j.setSubject(k.getSubject());j.setDescription(k.getDescription());j.setAssignedTo(k.getAssignedTo());j.setAssignedBy(k.getAssignedBy());j.setParentTaskID(k.getParentTaskID());j.setIsParent(k.isParent());j.clearRevertActions()}else{k.addListener(new c());a.put(k.getID(),k)}f.notifyLoadTask(k)}this.saveTask=function(j){f.notifySavingTask(j);try{var l=d.getSettingsManager();var q=new jive.model.DateHelper(d);var s=d.newAjax(function(u){try{if(u.tagName=="success"){f.notifyDoneSavingTask(j)}else{f.notifySavingTaskFailed(j)}}catch(v){alert(v)}},function(){try{f.notifySavingTaskFailed(j)}catch(u){alert("saving failed: "+u)}});var p=j.getDueDate();p=(p!=null)?q.formatToDateTime(p):"";var m=!j.hasDueDate();var n=j.getStatus();var r=j.getSubject();var t=j.getDescription();var k=j.getProjectID();s.POST(HOSTURL+AJAXPATH+"?save_task","task_id="+encodeURIComponent(j.getID())+"&due="+encodeURIComponent(p)+"&status="+encodeURIComponent(n)+"&title="+encodeURIComponent(r)+"&description="+encodeURIComponent(t)+"&never_due="+encodeURIComponent(m?"1":"0")+"&project_id="+k)}catch(o){f.notifySavingTaskFailed(j)}};function b(p){var m=new Array();for(var n=0;n<p.childNodes.length;n++){var k=new jive.model.Task();var q=p.childNodes[n];for(var l=0;l<q.childNodes.length;l++){if(q.childNodes[l].tagName=="id"){if(q.childNodes[l].childNodes.length>0){k.setID(q.childNodes[l].childNodes[0].nodeValue)}}else{if(q.childNodes[l].tagName=="pid"){if(q.childNodes[l].childNodes.length>0){k.setProjectID(q.childNodes[l].childNodes[0].nodeValue)}}else{if(q.childNodes[l].tagName=="due"){var o=q.childNodes[l].childNodes[0].nodeValue;if(o!=null){k.setDueDate(new Date(o.replace(/-/g,"/")))}else{k.setDueDate(null)}}else{if(q.childNodes[l].tagName=="subj"){k.setSubject(q.childNodes[l].childNodes[0].nodeValue)}else{if(q.childNodes[l].tagName=="desc"){if(q.childNodes[l].childNodes.length>0){k.setDescription(q.childNodes[l].childNodes[0].nodeValue)}}else{if(q.childNodes[l].tagName=="c_on"){var o=q.childNodes[l].childNodes[0].nodeValue;if(o!=null){k.setCreatedOn(new Date(o.replace(/-/g,"/")))}else{k.setCreatedOn(null)}}else{if(q.childNodes[l].tagName=="c_by"){k.setCreatedBy(d.getUserCache().loadExternalUser(q.childNodes[l].childNodes[0]))}else{if(q.childNodes[l].tagName=="a_by"){k.setAssignedBy(d.getUserCache().loadExternalUser(q.childNodes[l].childNodes[0]))}else{if(q.childNodes[l].tagName=="a_to"){k.setAssignedTo(d.getUserCache().loadExternalUser(q.childNodes[l].childNodes[0]))}else{if(q.childNodes[l].tagName=="url"){k.setURL(q.childNodes[l].childNodes[0].nodeValue)}else{if(q.childNodes[l].tagName=="status"){k.setComplete(q.childNodes[l].nodeValue=="c")}else{if(q.childNodes[l].tagName=="parent_task_id"){k.setParentTaskID(q.childNodes[l].childNodes[0].nodeValue)}else{if(q.childNodes[l].tagName=="is_parent"){k.setIsParent(q.childNodes[l].childNodes[0].nodeValue=="true")}}}}}}}}}}}}}}m.push(k);k.cleanAfterInit();e(k)}return m}this.loadExternalTasks=function(k){f.notifyLoadBegin();try{var j=b(k);f.notifyLoadFinish();return j}catch(l){f.notifyLoadFail()}return null};this.addListener=function(j){h.push(j)};var h=new Array();var i=new Array();this.addListenerAction=function(j){i.push(j)};this.executeListenerActions=function(){while(i.length>0){i[0]();i.splice(0,1)}};this.removeListener=function(k){for(var j=0;j<h.length;j++){if(h[j]==k){h.splice(j,1)}}};this.notifyTaskChanged=function(k){for(var j=0;j<h.length;j++){h[j].taskChanged(k)}f.executeListenerActions()};this.notifyLoadTask=function(k){for(var j=0;j<h.length;j++){h[j].loadTask(k)}f.executeListenerActions()};this.notifyLoadBegin=function(){for(var j=0;j<h.length;j++){h[j].beginLoadingTasks()}f.executeListenerActions()};this.notifyLoadFinish=function(){for(var j=0;j<h.length;j++){h[j].doneLoadingTasks()}f.executeListenerActions()};this.notifyLoadFail=function(){for(var j=0;j<h.length;j++){h[j].loadingTasksFailed()}f.executeListenerActions()};var g=new jive.model.TaskCacheListener();g.taskChanged=function(j){f.saveTask(j)};f.addListener(g)};
;
jive.model.PlacesCache=function(e){var g=this;var f=jive.rest.url("/places/types/ordered");var c=jive.rest.url("/places/types/followed");var d=jive.rest.url("/places/followed");var l=jive.rest.url("/places/");var h;var a;this.initCacheData=function(n){a=new jive.ext.y.HashTable();for(var m=0;m<n.length;m++){a.put(n[m].name,new Array())}};this.loadPlacesCache=function(q,o){var p=a.get(o.name).length;for(var n=0;n<q.length;n++){var m=q[n];var r=a.get(m.type.name);r.push(m);a.put(m.type.name,r)}return p};this.doLoadExternalPlaces=function(o){try{var m=o.placesCollection;for(var n=0;n<m.length;n++){var r=m[n].placeType;var p=m[n].places;if(p&&p.length){g.loadPlaces(p,r)}g.notifyLoadPlaces(r)}}catch(q){g.notifyLoadFail()}return null};this.getPlaces=function(m){return a.get(m.name)};var b=false;this.isInitialized=function(){return b};this.loadPlaces=function(n,m){return g.loadPlacesCache(n,m)};this.morePlaces=function(m){g.notifyLoadBegin();if(m.type.name.startsWith("FOLLOWED")){$j.getJSON(d,{page:m.page},function(o){var n=g.loadPlaces(o.place,m.type);if(m.refreshAllFollowedTypes){$j.getJSON(c,function(q){for(var p=0;p<q.placetype.length;p++){g.notifyLoadFinish({type:q.placetype[p],startIndex:0})}})}else{g.notifyLoadFinish(m,n)}})}else{if("COMMUNITY"==m.type.name){$j.getJSON(l+"COMMUNITY",{communityID:m.communityID,page:m.page},function(o){var n=g.loadPlaces(o.place,m.type);g.notifyLoadFinish(m,n)})}else{$j.getJSON(l+m.type.name,{page:m.page},function(o){var n=g.loadPlaces(o.place,m.type);g.notifyLoadFinish(m,n)})}}};this.loadExternalPlaces=function(m){b=true;if(!h){$j.getJSON(f,function(o){h=o.placetype;g.initCacheData(h);return n()})}else{return n()}function n(){if(m){$j.getJSON(l+m.type.name,m,function(o){g.loadPlaces(o.place,m.type);return g.notifyLoadPlaces(m.type)})}else{$j.getJSON(l,function(o){return g.doLoadExternalPlaces(o)})}}};this.doReloadPlaces=function(){$j.getJSON(c,function(n){g.notifyResetPlaces({name:"FOLLOWED_ALL"});for(var m=0;m<n.placetype.length;m++){a.put(n.placetype[m].name,new Array())}g.morePlaces({type:{name:"FOLLOWED_ALL"},page:-1,refreshAllFollowedTypes:true})})};this.reloadPlaces=function(m){if(m.name.startsWith("FOLLOWED")){g.doReloadPlaces()}};this.addListener=function(m){i.push(m)};var i=new Array();var j=0;var k=new Array();this.addListenerAction=function(m){k.push(m)};this.executeListenerActions=function(){while(k.length>0){k[0]();k.splice(0,1)}};this.removeListener=function(n){if(j==0){for(var m=0;m<i.length;m++){if(i[m]==n){i.splice(m,1)}}}else{g.addListenerAction(function(o){return function(){g.removeListener(o)}}(n))}};this.notifyLoadPlaces=function(n){j++;for(var m=0;m<i.length;m++){i[m].loadPlaces(n)}j--;g.executeListenerActions()};this.notifyLoadBegin=function(){j++;for(var m=0;m<i.length;m++){i[m].beginLoadingPlaces()}j--;g.executeListenerActions()};this.notifyLoadFinish=function(n,o){j++;for(var m=0;m<i.length;m++){i[m].doneLoadingPlaces(n,o)}j--;g.executeListenerActions()};this.notifyLoadFail=function(){j++;for(var m=0;m<i.length;m++){i[m].loadingPlacesFailed()}j--;g.executeListenerActions()};this.notifyResetPlaces=function(n){j++;for(var m=0;m<i.length;m++){i[m].resetPlaces(n)}j--;g.executeListenerActions()}};define("jive.model.PlacesCache",function(){return jive.model.PlacesCache});
;
jive.model.Controller=function(){var h=this;var b=new Object();b.childNodes=new Array();this.newAjax=function(p,q){return new jive.model.Ajax(h,p,q)};var e=new jive.model.LoginManager(h);this.getLoginManager=function(){return e};var f=new jive.model.SettingsManager(h);this.getSettingsManager=function(){return f};var k=new jive.model.RefreshManager(h);this.getRefreshManager=function(){return k};var g=new jive.model.LanguageManager(h,default_lang);this.getLanguageManager=function(){return g};var o=new jive.model.ProjectCache(h);this.getProjectCache=function(){return o};var i=new jive.model.UserCache(h);this.getUserCache=function(){return i};var d=new jive.model.TaskCache(h);this.getTaskCache=function(){return d};var l=new jive.model.PlacesCache(h);this.getPlacesCache=function(){return l};var a=null;this.getTaskManager=function(){return a};this.setTaskManager=function(p){a=p};var c=null;this.getCheckPointManager=function(){return c};this.setCheckPointManager=function(p){c=p};var n=null;this.getUserID=function(){return n};this.setUserID=function(p){n=p};this.handleLogIn=function(p){h.getRefreshManager().loggedOut()};this.poke=function(){h.getRefreshManager().poke()};this.isCalendarVisibleHuh=function(p){return true};this.isReadOnly=function(){return false};this.addListener=function(p){j.push(p)};var j=new Array();var m=new Array();this.addListenerAction=function(p){m.push(p)};this.executeListenerActions=function(){while(m.length>0){m[0]();m.splice(0,1)}};this.removeListener=function(q){for(var p=0;p<j.length;p++){if(j[p]==q){j.splice(p,1)}}};this.notifyTinyMCELoaded=function(){for(var p=0;p<j.length;p++){j[p].tinyMCELoaded()}h.executeListenerActions()}};define("jive.model.Controller",function(){return jive.model.Controller});
;
var default_lang = {
"childNodes": [
	{
	"childNodes": [
		{
		"tagName": "lang_id",
		"childNodes": [{ "nodeValue": "1"
}]
		},
		{
		"tagName": "name",
		"childNodes": [{ "nodeValue": "English"
}]
		},
		{
		"childNodes": [
			{
			"tagName": "eng_name",
			"childNodes": [{ "nodeValue": "English"
}]
			},
			{
			"tagName": "name",
			"childNodes": [{ "nodeValue": "English"
}]
			},
			{
			"tagName": "january",
			"childNodes": [{ "nodeValue": "January"
}]
			},
			{
			"tagName": "february",
			"childNodes": [{ "nodeValue": "February"
}]
			},
			{
			"tagName": "march",
			"childNodes": [{ "nodeValue": "March"
}]
			},
			{
			"tagName": "april",
			"childNodes": [{ "nodeValue": "April"
}]
			},
			{
			"tagName": "may",
			"childNodes": [{ "nodeValue": "May"
}]
			},
			{
			"tagName": "june",
			"childNodes": [{ "nodeValue": "June"
}]
			},
			{
			"tagName": "july",
			"childNodes": [{ "nodeValue": "July"
}]
			},
			{
			"tagName": "august",
			"childNodes": [{ "nodeValue": "August"
}]
			},
			{
			"tagName": "september",
			"childNodes": [{ "nodeValue": "September"
}]
			},
			{
			"tagName": "october",
			"childNodes": [{ "nodeValue": "October"
}]
			},
			{
			"tagName": "november",
			"childNodes": [{ "nodeValue": "November"
}]
			},
			{
			"tagName": "december",
			"childNodes": [{ "nodeValue": "December"
}]
			},
			{
			"tagName": "sunday",
			"childNodes": [{ "nodeValue": "Sunday"
}]
			},
			{
			"tagName": "monday",
			"childNodes": [{ "nodeValue": "Monday"
}]
			},
			{
			"tagName": "tuesday",
			"childNodes": [{ "nodeValue": "Tuesday"
}]
			},
			{
			"tagName": "wednesday",
			"childNodes": [{ "nodeValue": "Wednesday"
}]
			},
			{
			"tagName": "thursday",
			"childNodes": [{ "nodeValue": "Thursday"
}]
			},
			{
			"tagName": "friday",
			"childNodes": [{ "nodeValue": "Friday"
}]
			},
			{
			"tagName": "saturday",
			"childNodes": [{ "nodeValue": "Saturday"
}]
			},
			{
			"tagName": "sh_january",
			"childNodes": [{ "nodeValue": "Jan"
}]
			},
			{
			"tagName": "sh_february",
			"childNodes": [{ "nodeValue": "Feb"
}]
			},
			{
			"tagName": "sh_march",
			"childNodes": [{ "nodeValue": "Mar"
}]
			},
			{
			"tagName": "sh_april",
			"childNodes": [{ "nodeValue": "Apr"
}]
			},
			{
			"tagName": "sh_may",
			"childNodes": [{ "nodeValue": "May"
}]
			},
			{
			"tagName": "sh_june",
			"childNodes": [{ "nodeValue": "Jun"
}]
			},
			{
			"tagName": "sh_july",
			"childNodes": [{ "nodeValue": "Jul"
}]
			},
			{
			"tagName": "sh_august",
			"childNodes": [{ "nodeValue": "Aug"
}]
			},
			{
			"tagName": "sh_september",
			"childNodes": [{ "nodeValue": "Sep"
}]
			},
			{
			"tagName": "sh_october",
			"childNodes": [{ "nodeValue": "Oct"
}]
			},
			{
			"tagName": "sh_november",
			"childNodes": [{ "nodeValue": "Nov"
}]
			},
			{
			"tagName": "sh_december",
			"childNodes": [{ "nodeValue": "Dec"
}]
			},
			{
			"tagName": "sh_sunday",
			"childNodes": [{ "nodeValue": "Sun"
}]
			},
			{
			"tagName": "sh_monday",
			"childNodes": [{ "nodeValue": "Mon"
}]
			},
			{
			"tagName": "sh_tuesday",
			"childNodes": [{ "nodeValue": "Tue"
}]
			},
			{
			"tagName": "sh_wednesday",
			"childNodes": [{ "nodeValue": "Wed"
}]
			},
			{
			"tagName": "sh_thursday",
			"childNodes": [{ "nodeValue": "Thu"
}]
			},
			{
			"tagName": "sh_friday",
			"childNodes": [{ "nodeValue": "Fri"
}]
			},
			{
			"tagName": "sh_saturday",
			"childNodes": [{ "nodeValue": "Sat"
}]
			},
			{
			"tagName": "loading",
			"childNodes": [{ "nodeValue": "Loading..."
}]
			},
			{
			"tagName": "sb_actions",
			"childNodes": [{ "nodeValue": "Actions"
}]
			},
			{
			"tagName": "sb_my_calendars",
			"childNodes": [{ "nodeValue": "My Calendars"
}]
			},
			{
			"tagName": "sb_other_calendars",
			"childNodes": [{ "nodeValue": "Other Calendars"
}]
			},
			{
			"tagName": "sb_alerts",
			"childNodes": [{ "nodeValue": "Alerts"
}]
			},
			{
			"tagName": "sb_general_tasks",
			"childNodes": [{ "nodeValue": "General Tasks"
}]
			},
			{
			"tagName": "sb_no_tasks",
			"childNodes": [{ "nodeValue": "no tasks"
}]
			},
			{
			"tagName": "sb_reminder",
			"childNodes": [{ "nodeValue": "Reminder"
}]
			},
			{
			"tagName": "sb_reminders",
			"childNodes": [{ "nodeValue": "Reminders"
}]
			},
			{
			"tagName": "sb_alert",
			"childNodes": [{ "nodeValue": "Alert"
}]
			},
			{
			"tagName": "motto",
			"childNodes": [{ "nodeValue": "Simply Spectacular Time Management"
}]
			},
			{
			"tagName": "nav_month",
			"childNodes": [{ "nodeValue": "month"
}]
			},
			{
			"tagName": "nav_week",
			"childNodes": [{ "nodeValue": "week"
}]
			},
			{
			"tagName": "nav_day",
			"childNodes": [{ "nodeValue": "day"
}]
			},
			{
			"tagName": "nav_today",
			"childNodes": [{ "nodeValue": "today"
}]
			},
			{
			"tagName": "nav_tomorrow",
			"childNodes": [{ "nodeValue": "tomorrow"
}]
			},
			{
			"tagName": "nav_refresh",
			"childNodes": [{ "nodeValue": "refresh"
}]
			},
			{
			"tagName": "nav_list",
			"childNodes": [{ "nodeValue": "list"
}]
			},
			{
			"tagName": "nav_overview",
			"childNodes": [{ "nodeValue": "overview"
}]
			},
			{
			"tagName": "nav_feedback",
			"childNodes": [{ "nodeValue": "feedback"
}]
			},
			{
			"tagName": "nav_send",
			"childNodes": [{ "nodeValue": "Send"
}]
			},
			{
			"tagName": "nav_settings",
			"childNodes": [{ "nodeValue": "settings"
}]
			},
			{
			"tagName": "nav_advanced",
			"childNodes": [{ "nodeValue": "advanced"
}]
			},
			{
			"tagName": "nav_logout",
			"childNodes": [{ "nodeValue": "logout"
}]
			},
			{
			"tagName": "nav_prelogout",
			"childNodes": [{ "nodeValue": "Any unsaved changes will be lost!"
}]
			},
			{
			"tagName": "nav_back",
			"childNodes": [{ "nodeValue": "Back to:"
}]
			},
			{
			"tagName": "nav_event",
			"childNodes": [{ "nodeValue": "event"
}]
			},
			{
			"tagName": "nav_task",
			"childNodes": [{ "nodeValue": "task"
}]
			},
			{
			"tagName": "nav_invite",
			"childNodes": [{ "nodeValue": "Invite!"
}]
			},
			{
			"tagName": "nav_save",
			"childNodes": [{ "nodeValue": "Save"
}]
			},
			{
			"tagName": "nav_filter",
			"childNodes": [{ "nodeValue": "filter"
}]
			},
			{
			"tagName": "feedback_title",
			"childNodes": [{ "nodeValue": "What do you think about Jotlet?"
}]
			},
			{
			"tagName": "feedback_name",
			"childNodes": [{ "nodeValue": "your name:"
}]
			},
			{
			"tagName": "feedback_body",
			"childNodes": [{ "nodeValue": "we welcome brutal honesty:"
}]
			},
			{
			"tagName": "feedback_error",
			"childNodes": [{ "nodeValue": "There was an error sending your feedback. Please try again in a few minutes."
}]
			},
			{
			"tagName": "feedback_thanks",
			"childNodes": [{ "nodeValue": "Thanks for your feedback!"
}]
			},
			{
			"tagName": "cal_create",
			"childNodes": [{ "nodeValue": "create a calendar"
}]
			},
			{
			"tagName": "cal_add",
			"childNodes": [{ "nodeValue": "Add Calendar"
}]
			},
			{
			"tagName": "cal_edit",
			"childNodes": [{ "nodeValue": "Edit Calendar"
}]
			},
			{
			"tagName": "cal_delete",
			"childNodes": [{ "nodeValue": "Delete Calendar"
}]
			},
			{
			"tagName": "cal_remove",
			"childNodes": [{ "nodeValue": "Remove Calendar"
}]
			},
			{
			"tagName": "cal_name",
			"childNodes": [{ "nodeValue": "calendar name"
}]
			},
			{
			"tagName": "cal_color",
			"childNodes": [{ "nodeValue": "select a color for this calendar:"
}]
			},
			{
			"tagName": "color_red",
			"childNodes": [{ "nodeValue": "red"
}]
			},
			{
			"tagName": "color_blue",
			"childNodes": [{ "nodeValue": "blue"
}]
			},
			{
			"tagName": "color_green",
			"childNodes": [{ "nodeValue": "green"
}]
			},
			{
			"tagName": "color_pink",
			"childNodes": [{ "nodeValue": "pink"
}]
			},
			{
			"tagName": "color_purple",
			"childNodes": [{ "nodeValue": "purple"
}]
			},
			{
			"tagName": "color_orange",
			"childNodes": [{ "nodeValue": "orange"
}]
			},
			{
			"tagName": "color_yellow",
			"childNodes": [{ "nodeValue": "yellow"
}]
			},
			{
			"tagName": "color_grey",
			"childNodes": [{ "nodeValue": "grey"
}]
			},
			{
			"tagName": "nav_close",
			"childNodes": [{ "nodeValue": "Close"
}]
			},
			{
			"tagName": "nav_cancel",
			"childNodes": [{ "nodeValue": "Cancel"
}]
			},
			{
			"tagName": "event_menu",
			"childNodes": [{ "nodeValue": "Add Event to..."
}]
			},
			{
			"tagName": "event_edit",
			"childNodes": [{ "nodeValue": "edit event"
}]
			},
			{
			"tagName": "event_edit_cap",
			"childNodes": [{ "nodeValue": "Edit Event"
}]
			},
			{
			"tagName": "event_loading",
			"childNodes": [{ "nodeValue": "Loading Add Event Page..."
}]
			},
			{
			"tagName": "event_add",
			"childNodes": [{ "nodeValue": "add event"
}]
			},
			{
			"tagName": "event_title",
			"childNodes": [{ "nodeValue": "event title"
}]
			},
			{
			"tagName": "event_dt",
			"childNodes": [{ "nodeValue": "date &amp; time"
}]
			},
			{
			"tagName": "event_begins",
			"childNodes": [{ "nodeValue": "begins"
}]
			},
			{
			"tagName": "event_ends",
			"childNodes": [{ "nodeValue": "ends"
}]
			},
			{
			"tagName": "event_at",
			"childNodes": [{ "nodeValue": "at"
}]
			},
			{
			"tagName": "event_allday",
			"childNodes": [{ "nodeValue": "This event is an all day event"
}]
			},
			{
			"tagName": "event_repeats",
			"childNodes": [{ "nodeValue": "This event repeats"
}]
			},
			{
			"tagName": "event_desc",
			"childNodes": [{ "nodeValue": "description"
}]
			},
			{
			"tagName": "event_add_cap",
			"childNodes": [{ "nodeValue": "Add Event"
}]
			},
			{
			"tagName": "event_update",
			"childNodes": [{ "nodeValue": "Update Event"
}]
			},
			{
			"tagName": "event_remind",
			"childNodes": [{ "nodeValue": "Add Reminder"
}]
			},
			{
			"tagName": "event_sb_delete",
			"childNodes": [{ "nodeValue": "Delete this event"
}]
			},
			{
			"tagName": "event_sb_delete_series",
			"childNodes": [{ "nodeValue": "Delete this series"
}]
			},
			{
			"tagName": "event_sb_edit",
			"childNodes": [{ "nodeValue": "Edit this event"
}]
			},
			{
			"tagName": "event_sb_export",
			"childNodes": [{ "nodeValue": "Download this event"
}]
			},
			{
			"tagName": "event_sb_perm",
			"childNodes": [{ "nodeValue": "This is a shared calendar. You do not have permission to edit or delete information."
}]
			},
			{
			"tagName": "task_menu",
			"childNodes": [{ "nodeValue": "Add Task to..."
}]
			},
			{
			"tagName": "task_edit",
			"childNodes": [{ "nodeValue": "edit task"
}]
			},
			{
			"tagName": "task_loading",
			"childNodes": [{ "nodeValue": "Loading Add Task Page..."
}]
			},
			{
			"tagName": "task_title",
			"childNodes": [{ "nodeValue": "task title"
}]
			},
			{
			"tagName": "task_due_date",
			"childNodes": [{ "nodeValue": "due date"
}]
			},
			{
			"tagName": "task_due",
			"childNodes": [{ "nodeValue": "due"
}]
			},
			{
			"tagName": "task_no_due",
			"childNodes": [{ "nodeValue": "This task does not have a due date"
}]
			},
			{
			"tagName": "task_repeats",
			"childNodes": [{ "nodeValue": "This task repeats"
}]
			},
			{
			"tagName": "task_add_cap",
			"childNodes": [{ "nodeValue": "Add Task"
}]
			},
			{
			"tagName": "task_update",
			"childNodes": [{ "nodeValue": "Update Task"
}]
			},
			{
			"tagName": "task_add",
			"childNodes": [{ "nodeValue": "add task"
}]
			},
			{
			"tagName": "task_sb_delete",
			"childNodes": [{ "nodeValue": "Delete this task"
}]
			},
			{
			"tagName": "task_sb_delete_series",
			"childNodes": [{ "nodeValue": "Delete this series"
}]
			},
			{
			"tagName": "task_sb_edit",
			"childNodes": [{ "nodeValue": "Edit this task"
}]
			},
			{
			"tagName": "task_sb_export",
			"childNodes": [{ "nodeValue": "Download this task"
}]
			},
			{
			"tagName": "task_sb_perm",
			"childNodes": [{ "nodeValue": "This is a shared calendar. You do not have permission to edit   or delete information."
}]
			},
			{
			"tagName": "info_in_cal",
			"childNodes": [{ "nodeValue": "in the %sub% calendar"
}]
			},
			{
			"tagName": "info_no_desc",
			"childNodes": [{ "nodeValue": "no description"
}]
			},
			{
			"tagName": "info_on",
			"childNodes": [{ "nodeValue": "on"
}]
			},
			{
			"tagName": "info_never",
			"childNodes": [{ "nodeValue": "never"
}]
			},
			{
			"tagName": "info_no_title",
			"childNodes": [{ "nodeValue": "no title"
}]
			},
			{
			"tagName": "info_more",
			"childNodes": [{ "nodeValue": "More Info"
}]
			},
			{
			"tagName": "info_allday",
			"childNodes": [{ "nodeValue": "All Day"
}]
			},
			{
			"tagName": "info_minutes",
			"childNodes": [{ "nodeValue": "minutes"
}]
			},
			{
			"tagName": "info_hours",
			"childNodes": [{ "nodeValue": "hours"
}]
			},
			{
			"tagName": "info_duration",
			"childNodes": [{ "nodeValue": "duration"
}]
			},
			{
			"tagName": "day_notes",
			"childNodes": [{ "nodeValue": "click to add daily notes"
}]
			},
			{
			"tagName": "day_tasks",
			"childNodes": [{ "nodeValue": "Tasks for the Day"
}]
			},
			{
			"tagName": "day_add_task",
			"childNodes": [{ "nodeValue": "add new task"
}]
			},
			{
			"tagName": "day_all_day",
			"childNodes": [{ "nodeValue": "All Day Events"
}]
			},
			{
			"tagName": "day_click",
			"childNodes": [{ "nodeValue": "click here to add some notes"
}]
			},
			{
			"tagName": "day_saving",
			"childNodes": [{ "nodeValue": "saving..."
}]
			},
			{
			"tagName": "day_loading",
			"childNodes": [{ "nodeValue": "loading..."
}]
			},
			{
			"tagName": "manage_cal",
			"childNodes": [{ "nodeValue": "Calendar Management"
}]
			},
			{
			"tagName": "manage_prop",
			"childNodes": [{ "nodeValue": "calendar properties"
}]
			},
			{
			"tagName": "manage_share",
			"childNodes": [{ "nodeValue": "share calendar"
}]
			},
			{
			"tagName": "manage_export",
			"childNodes": [{ "nodeValue": "export calendar"
}]
			},
			{
			"tagName": "manage_delete",
			"childNodes": [{ "nodeValue": "delete calendar:"
}]
			},
			{
			"tagName": "manage_remove",
			"childNodes": [{ "nodeValue": "remove calendar:"
}]
			},
			{
			"tagName": "manage_edit",
			"childNodes": [{ "nodeValue": "edit a calendar"
}]
			},
			{
			"tagName": "manage_select_buddies",
			"childNodes": [{ "nodeValue": "Select which buddies to share with from the list on the right"
}]
			},
			{
			"tagName": "manage_add_buddy",
			"childNodes": [{ "nodeValue": "Add Buddy"
}]
			},
			{
			"tagName": "manage_add_buddy_link",
			"childNodes": [{ "nodeValue": "Add a Buddy!"
}]
			},
			{
			"tagName": "manage_no_buddies",
			"childNodes": [{ "nodeValue": "No Buddies Here :("
}]
			},
			{
			"tagName": "manage_buddy_email",
			"childNodes": [{ "nodeValue": "enter buddys email address"
}]
			},
			{
			"tagName": "manage_buddy_name",
			"childNodes": [{ "nodeValue": "Buddy Name:"
}]
			},
			{
			"tagName": "manage_invite_buddy",
			"childNodes": [{ "nodeValue": "Invite Your Buddy!"
}]
			},
			{
			"tagName": "manage_invite_buddy_to",
			"childNodes": [{ "nodeValue": "Invite %sub% to Jotlet!"
}]
			},
			{
			"tagName": "manage_go_back",
			"childNodes": [{ "nodeValue": "Go Back"
}]
			},
			{
			"tagName": "manage_share_bang",
			"childNodes": [{ "nodeValue": "Share!"
}]
			},
			{
			"tagName": "manage_share_self",
			"childNodes": [{ "nodeValue": "You cant share with yourself! :)"
}]
			},
			{
			"tagName": "manage_buddy_in_list",
			"childNodes": [{ "nodeValue": "%sub% is already in your buddy list"
}]
			},
			{
			"tagName": "manage_valid_email",
			"childNodes": [{ "nodeValue": "Please enter a valid email address"
}]
			},
			{
			"tagName": "manage_searching",
			"childNodes": [{ "nodeValue": "Searching..."
}]
			},
			{
			"tagName": "manage_adding_buddy",
			"childNodes": [{ "nodeValue": "Adding Buddy..."
}]
			},
			{
			"tagName": "manage_done_sharing",
			"childNodes": [{ "nodeValue": "Done Sharing!"
}]
			},
			{
			"tagName": "manage_error",
			"childNodes": [{ "nodeValue": "There was an error trying to share"
}]
			},
			{
			"tagName": "manage_sharing",
			"childNodes": [{ "nodeValue": "Sharing with Buddy..."
}]
			},
			{
			"tagName": "manage_add_fail",
			"childNodes": [{ "nodeValue": "could not add buddy :("
}]
			},
			{
			"tagName": "manage_inviting",
			"childNodes": [{ "nodeValue": "Inviting Buddy..."
}]
			},
			{
			"tagName": "manage_done_inviting",
			"childNodes": [{ "nodeValue": "Done Inviting!"
}]
			},
			{
			"tagName": "manage_fail_inviting",
			"childNodes": [{ "nodeValue": "Error Inviting"
}]
			},
			{
			"tagName": "manage_done_invite_msg",
			"childNodes": [{ "nodeValue": "Well let you know when your buddy has accepted the invitation to Jotlet."
}]
			},
			{
			"tagName": "manage_fail_invite_msg",
			"childNodes": [{ "nodeValue": "There was an error inviting your buddy. Please try again in a few minutes."
}]
			},
			{
			"tagName": "manage_subscribe",
			"childNodes": [{ "nodeValue": "Subscribe"
}]
			},
			{
			"tagName": "manage_export_bang",
			"childNodes": [{ "nodeValue": "Export"
}]
			},
			{
			"tagName": "confirm_del_cal",
			"childNodes": [{ "nodeValue": "Delete calendar \"%sub%\"?\nThis cannot be undone!"
}]
			},
			{
			"tagName": "confirm_rem_cal",
			"childNodes": [{ "nodeValue": "Remove calendar \"%sub%\"?\nThis cannot be undone!"
}]
			},
			{
			"tagName": "confirm_del_event",
			"childNodes": [{ "nodeValue": "Delete event \"%sub%\"?\nThis cannot be undone!"
}]
			},
			{
			"tagName": "confirm_del_event_s",
			"childNodes": [{ "nodeValue": "Delete event series containing \"%sub%\"?\nThis cannot be undone!"
}]
			},
			{
			"tagName": "confirm_del_task",
			"childNodes": [{ "nodeValue": "Delete task \"%sub%\"?\nThis cannot be undone!"
}]
			},
			{
			"tagName": "confirm_del_task_s",
			"childNodes": [{ "nodeValue": "Delete task series containing \"%sub%\"?\nThis cannot be undone!"
}]
			},
			{
			"tagName": "setting_title",
			"childNodes": [{ "nodeValue": "Personal Settings"
}]
			},
			{
			"tagName": "setting_first",
			"childNodes": [{ "nodeValue": "First Name"
}]
			},
			{
			"tagName": "setting_last",
			"childNodes": [{ "nodeValue": "Last Name"
}]
			},
			{
			"tagName": "setting_email",
			"childNodes": [{ "nodeValue": "Email"
}]
			},
			{
			"tagName": "setting_sms",
			"childNodes": [{ "nodeValue": "SMS"
}]
			},
			{
			"tagName": "setting_zip",
			"childNodes": [{ "nodeValue": "Postal Code"
}]
			},
			{
			"tagName": "setting_language",
			"childNodes": [{ "nodeValue": "Language"
}]
			},
			{
			"tagName": "setting_save",
			"childNodes": [{ "nodeValue": "Save Profile"
}]
			},
			{
			"tagName": "setting_old_pass",
			"childNodes": [{ "nodeValue": "Old Password"
}]
			},
			{
			"tagName": "setting_new_pass",
			"childNodes": [{ "nodeValue": "New Password"
}]
			},
			{
			"tagName": "setting_confirm",
			"childNodes": [{ "nodeValue": "Confirm"
}]
			},
			{
			"tagName": "setting_save_pass",
			"childNodes": [{ "nodeValue": "Update Password"
}]
			},
			{
			"tagName": "setting_zone",
			"childNodes": [{ "nodeValue": "Time zone"
}]
			},
			{
			"tagName": "setting_zone_desc",
			"childNodes": [{ "nodeValue": "Time zones are listed with an * if they respect Daylight Savings Time"
}]
			},
			{
			"tagName": "setting_save_zone",
			"childNodes": [{ "nodeValue": "Save Local Settings"
}]
			},
			{
			"tagName": "setting_zoom",
			"childNodes": [{ "nodeValue": "Zoom Level"
}]
			},
			{
			"tagName": "setting_zoom_desc",
			"childNodes": [{ "nodeValue": "The zoom level affects how much time each row in day view represents. The 1 hour zoom will show a compact view, while the 15 minute zoom will show more detail."
}]
			},
			{
			"tagName": "setting_zoom_15_min",
			"childNodes": [{ "nodeValue": "15 minutes"
}]
			},
			{
			"tagName": "setting_zoom_30_min",
			"childNodes": [{ "nodeValue": "30 minutes"
}]
			},
			{
			"tagName": "setting_zoom_1_hour",
			"childNodes": [{ "nodeValue": "1 hour"
}]
			},
			{
			"tagName": "setting_save_zoom",
			"childNodes": [{ "nodeValue": "Save Zoom"
}]
			},
			{
			"tagName": "setting_shade",
			"childNodes": [{ "nodeValue": "Smart-Shading day cells"
}]
			},
			{
			"tagName": "setting_shade_desc",
			"childNodes": [{ "nodeValue": "Smart-Shading will automatically darken the background of busier days in month view. The busier the day, the darker the cell."
}]
			},
			{
			"tagName": "setting_save_shade",
			"childNodes": [{ "nodeValue": "Save Month Settings"
}]
			},
			{
			"tagName": "setting_profile",
			"childNodes": [{ "nodeValue": "user profile"
}]
			},
			{
			"tagName": "setting_change_pass",
			"childNodes": [{ "nodeValue": "change password"
}]
			},
			{
			"tagName": "setting_time_zones",
			"childNodes": [{ "nodeValue": "time zones"
}]
			},
			{
			"tagName": "setting_day_view",
			"childNodes": [{ "nodeValue": "day view"
}]
			},
			{
			"tagName": "setting_month_view",
			"childNodes": [{ "nodeValue": "month view"
}]
			},
			{
			"tagName": "setting_start_week",
			"childNodes": [{ "nodeValue": "Start of Week:"
}]
			},
			{
			"tagName": "err_cal_name",
			"childNodes": [{ "nodeValue": "Please enter a name for the calendar"
}]
			},
			{
			"tagName": "email_invite",
			"childNodes": [{ "nodeValue": "Hey!\n\nCheck out Jotlet Calendar at www.jotlet.net! Its a great looking and easy to use online calendar.\n\nSign up so I can share my schedule with you!"
}]
			},
			{
			"tagName": "err_task_title",
			"childNodes": [{ "nodeValue": "Please enter a title for your task."
}]
			},
			{
			"tagName": "err_event_title",
			"childNodes": [{ "nodeValue": "Please enter a title for your event."
}]
			},
			{
			"tagName": "remind_adding",
			"childNodes": [{ "nodeValue": "Adding Reminder..."
}]
			},
			{
			"tagName": "remind_loading",
			"childNodes": [{ "nodeValue": "Loading Reminder..."
}]
			},
			{
			"tagName": "remind_email",
			"childNodes": [{ "nodeValue": "Email"
}]
			},
			{
			"tagName": "remind_sms",
			"childNodes": [{ "nodeValue": "Text Message"
}]
			},
			{
			"tagName": "remind_both",
			"childNodes": [{ "nodeValue": "Both"
}]
			},
			{
			"tagName": "remind_5_min",
			"childNodes": [{ "nodeValue": "5 minutes"
}]
			},
			{
			"tagName": "remind_4_hour",
			"childNodes": [{ "nodeValue": "4 hours"
}]
			},
			{
			"tagName": "remind_0_day",
			"childNodes": [{ "nodeValue": "the same day"
}]
			},
			{
			"tagName": "remind_1_day",
			"childNodes": [{ "nodeValue": "the day before"
}]
			},
			{
			"tagName": "remind_2_day",
			"childNodes": [{ "nodeValue": "2 days before"
}]
			},
			{
			"tagName": "remind_3_day",
			"childNodes": [{ "nodeValue": "3 days before"
}]
			},
			{
			"tagName": "remind_4_day",
			"childNodes": [{ "nodeValue": "4 days before"
}]
			},
			{
			"tagName": "remind_5_day",
			"childNodes": [{ "nodeValue": "5 days before"
}]
			},
			{
			"tagName": "remind_1_week",
			"childNodes": [{ "nodeValue": "1 week before"
}]
			},
			{
			"tagName": "remind_2_week",
			"childNodes": [{ "nodeValue": "2 weeks before"
}]
			},
			{
			"tagName": "remind_event",
			"childNodes": [{ "nodeValue": "%email% me %time% before this event"
}]
			},
			{
			"tagName": "remind_task_due",
			"childNodes": [{ "nodeValue": "%email% me at %time%%date% its due"
}]
			},
			{
			"tagName": "remind_task_no",
			"childNodes": [{ "nodeValue": "%email% me at %time% on %date%"
}]
			},
			{
			"tagName": "recur_daily",
			"childNodes": [{ "nodeValue": "daily"
}]
			},
			{
			"tagName": "recur_daily_num",
			"childNodes": [{ "nodeValue": "every %num% days"
}]
			},
			{
			"tagName": "recur_daily_weekday",
			"childNodes": [{ "nodeValue": "every weekday"
}]
			},
			{
			"tagName": "recur_weekly",
			"childNodes": [{ "nodeValue": "weekly"
}]
			},
			{
			"tagName": "recur_weekly_num",
			"childNodes": [{ "nodeValue": "every %num% weeks on:"
}]
			},
			{
			"tagName": "recur_monthly",
			"childNodes": [{ "nodeValue": "monthly"
}]
			},
			{
			"tagName": "recur_monthly_num",
			"childNodes": [{ "nodeValue": "day %num% of every %num2% months"
}]
			},
			{
			"tagName": "recur_monthly_date",
			"childNodes": [{ "nodeValue": "the %first% %weekday% of every %num% months"
}]
			},
			{
			"tagName": "recur_yearly",
			"childNodes": [{ "nodeValue": "yearly"
}]
			},
			{
			"tagName": "recur_yearly_exact",
			"childNodes": [{ "nodeValue": "every %month% %day%"
}]
			},
			{
			"tagName": "recur_yearly_rel",
			"childNodes": [{ "nodeValue": "the %first% %weekday% of %month%"
}]
			},
			{
			"tagName": "recur_custom",
			"childNodes": [{ "nodeValue": "custom"
}]
			},
			{
			"tagName": "recur_custom_desc",
			"childNodes": [{ "nodeValue": "Select your custom series of dates from the small calendar on the left."
}]
			},
			{
			"tagName": "recur_custom_dates",
			"childNodes": [{ "nodeValue": "Selected Dates:"
}]
			},
			{
			"tagName": "recur_end",
			"childNodes": [{ "nodeValue": "End Series:"
}]
			},
			{
			"tagName": "recur_end_after_e",
			"childNodes": [{ "nodeValue": "End after %num% events"
}]
			},
			{
			"tagName": "recur_end_after_t",
			"childNodes": [{ "nodeValue": "End after %num% tasks"
}]
			},
			{
			"tagName": "recur_end_by",
			"childNodes": [{ "nodeValue": "by %date%"
}]
			},
			{
			"tagName": "recur_event",
			"childNodes": [{ "nodeValue": "Repeat this event:"
}]
			},
			{
			"tagName": "recur_task",
			"childNodes": [{ "nodeValue": "Repeat this task:"
}]
			},
			{
			"tagName": "recur_first",
			"childNodes": [{ "nodeValue": "first"
}]
			},
			{
			"tagName": "recur_second",
			"childNodes": [{ "nodeValue": "second"
}]
			},
			{
			"tagName": "recur_third",
			"childNodes": [{ "nodeValue": "third"
}]
			},
			{
			"tagName": "recur_fourth",
			"childNodes": [{ "nodeValue": "fourth"
}]
			},
			{
			"tagName": "recur_fifth",
			"childNodes": [{ "nodeValue": "fifth"
}]
			},
			{
			"tagName": "recur_last",
			"childNodes": [{ "nodeValue": "last"
}]
			}
		],
		"tagName": "lang_table"
		}
	],
	"tagName": "language"
	}
],
"tagName": "languages"
};
;
jive.model.ProjectCacheListener=function(){this.loadProject=function(a){};this.beginLoadingProjects=function(){};this.doneLoadingProjects=function(){};this.loadingProjectsFailed=function(){}};
;
jive.model.isDocument=function(a){return $obj(a)&&a!=null&&$def(a.getBody)&&$def(a.getSubject)};jive.model.Document=function(){var e=this;var d=new Array();function a(g,h){return function(){g(h)}}this.clearRevertActions=function(){d=new Array()};this.revert=function(){while(d.length>0){d[0]();d.splice(0,1)}};this.confirm=function(){e.notifyTaskChanged()};var f;var b;this.getID=function(){return f};this.getHTML=function(){return b};this.setID=function(g){f=g};this.setHTML=function(g){d.push(a(function(h){b=h},b));b=g};this.cleanAfterInit=function(){e.clearRevertActions();e.setID=null};this.convertToWiki=function(){objectLookupSessionKey};var c=new Array();this.addListener=function(g){c.push(g)};this.removeListener=function(h){for(var g=0;g<c.length;g++){if(c[g]==h){c.splice(g,1)}}};this.notifyDocumentChanged=function(){for(var g=0;g<c.length;g++){c[g].documentChanged(e)}}};jive.model.DocumentCache=function(d){var f=this;var a=new jive.ext.y.HashTable();function j(){this.documentChanged=function(k){f.notifyDocumentChanged(k)}}function e(l){var k=a.get(l.getID());if($obj(k)){k.clearRevertActions()}else{l.addListener(new j());a.put(l.getID(),l)}f.notifyLoadDocument(l)}this.saveDocument=function(m){f.notifySavingDocument(m);try{var l=d.getSettingsManager();var k=d.newAjax(function(o){try{if(o.tagName=="success"){f.notifyDoneSavingDocument(m)}else{f.notifySavingDocumentFailed(m)}}catch(q){alert(q)}},function(){try{f.notifySavingDocumentFailed(m)}catch(o){alert("saving failed: "+o)}})}catch(n){f.notifySavingDocumentFailed(m)}};function c(k){f.notifyNewDocumentFromWiki(new jive.model.Document("",k))}this.newDocumentFromWiki=function(k){if(!$def(window.objectLookupSessionKey)){throw"window.objectLookupSessionKey must be defined to use newDocumentFromWiki()"}if(!$def(WikiTextConverter)){throw"WikiTextConverter must be defined to use newDocumentFromWiki()"}WikiTextConverter.convertFromWiki(k,window.objectLookupSessionKey,{callback:c,timeout:DWRTimeout,errorHandler:f.notifyNewDocumentFromWikiFailed})};function b(o){var m=new Array();for(var n=0;n<o.childNodes.length;n++){var k=new jive.model.Document();var q=o.childNodes[n];for(var l=0;l<q.childNodes.length;l++){if(q.childNodes[l].tagName=="id"){if(q.childNodes[l].childNodes.length>0){k.setID(q.childNodes[l].childNodes[0].nodeValue)}}}m.push(k);k.cleanAfterInit();e(k)}return m}this.loadExternalDocuments=function(l){f.notifyLoadBegin();try{var k=loadDocumentsXML(l);f.notifyLoadFinish();return k}catch(m){f.notifyLoadFail()}return null};this.addListener=function(k){h.push(k)};var h=new Array();var i=new Array();this.addListenerAction=function(k){i.push(k)};this.executeListenerActions=function(){while(i.length>0){i[0]();i.splice(0,1)}};this.removeListener=function(l){for(var k=0;k<h.length;k++){if(h[k]==l){h.splice(k,1)}}};this.notifyDocumentChanged=function(l){for(var k=0;k<h.length;k++){h[k].documentChanged(l)}f.executeListenerActions()};this.notifyLoadDocument=function(l){for(var k=0;k<h.length;k++){h[k].loadDocument(l)}f.executeListenerActions()};this.notifyLoadBegin=function(){for(var k=0;k<h.length;k++){h[k].beginLoadingDocuments()}f.executeListenerActions()};this.notifyLoadFinish=function(){for(var k=0;k<h.length;k++){h[k].doneLoadingDocuments()}f.executeListenerActions()};this.notifyLoadFail=function(){for(var k=0;k<h.length;k++){h[k].loadingDocumentsFailed()}f.executeListenerActions()};this.notifySavingDocument=function(l){for(var k=0;k<h.length;k++){h[k].savingDocument(l)}f.executeListenerActions()};this.notifyDoneSavingDocument=function(l){for(var k=0;k<h.length;k++){h[k].doneSavingDocument(l)}f.executeListenerActions()};this.notifySavingDocumentFailed=function(l){for(var k=0;k<h.length;k++){h[k].savingDocumentFailed(l)}f.executeListenerActions()};this.notifyNewDocumentFromWiki=function(l){for(var k=0;k<h.length;k++){h[k].newDocumentFromWiki(l)}f.executeListenerActions()};this.notifyNewDocumentFromWikiFailed=function(){for(var k=0;k<h.length;k++){h[k].newDocumentFromWikiFailed(p)}f.executeListenerActions()};var g=new jive.model.DocumentCacheListener();g.documentChanged=function(k){f.saveDocument(k)};f.addListener(g)};
;
jive.model.DocumentCacheListener=function(){this.loadingDocumentsFailed=function(){};this.doneLoadingDocuments=function(){};this.beginLoadingDocuments=function(){};this.loadDocument=function(){};this.documentChanged=function(){};this.savingDocument=function(){};this.doneSavingDocument=function(){};this.savingDocumentFailed=function(){};this.newDocumentFromWikiFailed=function(){}};
;
jive.rte.settings=function(e){if(typeof(e)=="object"){return e}function c(f){return computeRTEPluginStyle(f)}if(e=="mini-w-quote"){var b=false;var d=false;var a=jive.rte.settings(0);a.theme_advanced_buttons1="bold,italic,underline,strikethrough,separator,bullist,numlist,separator,jiveimage,jivevideo,separator,jivelink,jiveemoticons,jivequote,spellchecker,html";delete a.theme_advanced_buttons2;delete a.theme_advanced_buttons3;a.default_height=29;return a}else{if(e=="mini"){var b=false;var d=d;var a=jive.rte.settings(0);a.theme_advanced_buttons1="bold,italic,underline,strikethrough,separator,bullist,numlist,separator,jiveimage,jivevideo,separator,jivelink,jiveemoticons,spellchecker,html";delete a.theme_advanced_buttons2;delete a.theme_advanced_buttons3;a.default_height=29;return a}else{if(e=="terms-and-conditions"){var b=false;var d=false;var a=jive.rte.settings(0);a.theme_advanced_buttons1="bold,italic,underline,strikethrough,bullist,numlist,html";delete a.theme_advanced_buttons2;delete a.theme_advanced_buttons3;a.default_height=29;a.plugins=a.plugins.replace(",jivemention","");a.plugins=a.plugins.replace(",jiveapps","");return a}else{if(e=="stream-narrow"){var b=false;var d=false;var a=jive.rte.settings(0);a.theme_advanced_buttons1="bold,italic,underline,strikethrough,bullist,numlist,jiveimage,jivevideo,jivelink,jiveemoticons,jivequote,spellchecker";delete a.theme_advanced_buttons2;delete a.theme_advanced_buttons3;a.default_height=29;return a}else{if(e=="widget"){var b=false;var a=jive.rte.settings(0);a.rte_image_modal_url=CS_BASE_URL+"/rte-image-modal.jspa?fromWidget=true";a.theme_advanced_statusbar_location="none";return a}else{if(e=="wiki"){var a=jive.rte.settings(0);return a}else{if(e=="blog"){var a=jive.rte.settings(0);return a}else{if(e=="thread"){var a=jive.rte.settings(0);return a}else{if(e=="poll"||e=="task"){var a=jive.rte.settings("mini");a.rte_image_webonly=true;a.rte_image_modal_url=CS_BASE_URL+"/rte-image-modal.jspa?webOnly=true";return a}else{if(e==0){return{rte_image_modal_url:CS_BASE_URL+"/rte-image-modal.jspa",gecko_spellcheck:true,theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Calibri=calibri, verdana, arial, sans-serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",ie7_css:"a{\nborder: 1px solid transparent;\n}\nspan.jive_macro.active_link, a.jive_macro.active_link, a.active_link{\nborder: 1px solid blue;\n}\nspan.jive_macro, a.jive_macro{\nborder: 1px solid transparent;\n}",keep_values:true,convert_urls:true,relative_urls:false,popup_css:false,default_height:58,bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_child_elements:0,theme_advanced_buttons1:"fontselect, fontsizeselect, removeformat, separator,bullist, numlist, outdent, indent, separator,jivevideo,separator,jivelink,jivetablebutton,extra,spellchecker,html",theme_advanced_buttons2:"bold,italic,underline,strikethrough,forecolor,jivestyle, separator, justifyleft,justifycenter,justifyright,justifyfull, separator,jiveimage,separator,jiveemoticons, jivemacros ",fix_list_elements:false,save_callback:"RawHTMLSaveFunction",convert_fonts_to_spans:true,font_size_style_values:"8pt,10pt,12pt,14pt,18pt,24pt,36pt",max_header_count:6,strict_loading_mode:true,body_class:"tiny_mce_content jive-widget-formattedtext",theme:"advanced",plugins:"jiveutil,jivescroll,jiveresize,jiveblackout,jivecontextmenu,jivebuttons,jiveemoticons,jivestyle,jivelink,jivekeyboard,jivequote,jivevideo,jiveimage,spellchecker,html,style,jivelists,table,jivetablecontrols,save,advimage,advlink,inlinepopups,jivemacros,paste,jivemention,jiveapps,jiveselection,jivetable,jivetablebutton,jivemouse,jiveattachment",paste_auto_cleanup_on_paste:true,paste_conheadvert_middot_lists:true,paste_retain_style_properties:"color,background,background-color,font-family,font-weight,text-decoration,text-indent,font-size,margin,margin-left,margin-top,margin-bottom,margin-right,border,border-top,border-bottom,border-left,border-right,border-width,border-style,border-color,padding,padding-left,padding-top,padding-right,padding-bottom,border-top-width,border-bottom-width,border-left-width,border-right-width,border-top-style,border-bottom-style,border-left-style,border-right-style,border-top-color,border-bottom-color,border-left-color,border-right-color",paste_strip_class_attributes:"mso",paste_remove_spans:false,paste_remove_styles:false,paste_block_drop:false,doctype:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",tab_focus_toolbar:true,content_css:c(CS_RESOURCE_BASE_URL+"/styles/tiny_mce3/themes/advanced/skins/default/content.css,"+CS_RESOURCE_BASE_URL+"/styles/jive-icons.css"),theme_advanced_resize_horizontal:false,theme_advanced_resizing:true,apply_source_formatting:true,spellchecker_languages:SPELL_LANGS,spellchecker_rpc_url:CS_BASE_URL+"/spellcheck.jspa",jive_image_picker_url:b,jive_video_picker_url:d,language_load:false,language:_jive_translation_language,add_form_submit_trigger:false,valid_elements:"a[accesskey|charset|class|coords|dir<ltr?rtl|href|hreflang|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rel|rev|shape<circle?default?poly?rect|style|tabindex|title|target|type|jivemacro|_.*],abbr[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],acronym[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],address[class|align|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],applet[align<bottom?left?middle?right?top|alt|archive|class|code|codebase|height|hspace|name|object|style|title|vspace|width],area[accesskey|alt|class|coords|dir<ltr?rtl|href|lang|nohref<nohref|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|shape<circle?default?poly?rect|style|tabindex|title|target],base[href|target],basefont[color|face|size],bdo[class|dir<ltr?rtl|lang|style|title],big[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],blockquote[cite|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],body[alink|background|bgcolor|class|dir<ltr?rtl|lang|link|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onload|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onunload|style|title|text|vlink],br[class|clear<all?left?none?right|style|title],button[accesskey|class|dir<ltr?rtl|disabled<disabled|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|tabindex|title|type|value],caption[align<bottom?left?right?top|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],center[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],cite[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],code[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],col[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title|valign<baseline?bottom?middle?top|width],colgroup[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title|valign<baseline?bottom?middle?top|width],dd[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],del[cite|class|datetime|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dfn[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dir[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],div[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dl[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dt[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],em/i[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],embed[width|height|src|pluginspage|name|swliveconnect|play<true?false|loop<true?false|menu<true?false|quality<low?autolow?autohigh?high?medium?high?best|scale<default?exact?noorder|salign<l?t?r?b?tl?tr?bl?br|wmode<window?opaque?transparent|bgcolor|base|flashvars|type|allowfullscreen],fieldset[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],font[class|color|dir<ltr?rtl|face|lang|size|style|title],form[accept|accept-charset|action|class|dir<ltr?rtl|enctype|lang|method<get?post|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onreset|onsubmit|style|title|target],frame[class|frameborder|longdesc|marginheight|marginwidth|name|noresize<noresize|scrolling<auto?no?yes|src|style|title],frameset[class|cols|onload|onunload|rows|style|title],h1[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h2[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h3[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h4[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h5[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h6[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],head[dir<ltr?rtl|lang|profile],hr[align<center?left?right|class|dir<ltr?rtl|lang|noshade<noshade|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style|title|width],html[dir<ltr?rtl|lang|version],iframe[align<bottom?left?middle?right?top|class|frameborder|height|id|longdesc|marginheight|marginwidth|name|scrolling<auto?no?yes|src|style|title|width],img[align<bottom?left?middle?right?top|alt|border|class|dir<ltr?rtl|height|hspace|ismap<ismap|lang|longdesc|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|src|style|title|usemap|vspace|width|jivemacro|_.*|param_.*],input[accept|accesskey|align<bottom?left?middle?right?top|alt|checked<checked|class|dir<ltr?rtl|disabled<disabled|ismap<ismap|lang|maxlength|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect|readonly<readonly|size|src|style|tabindex|title|type<button?checkbox?file?hidden?image?password?radio?reset?submit?text|usemap|value],ins[cite|class|datetime|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],isindex[class|dir<ltr?rtl|lang|prompt|style|title],kbd[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],label[accesskey|class|dir<ltr?rtl|for|lang|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],legend[align<bottom?left?right?top|accesskey|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],li[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type],link[charset|class|dir<ltr?rtl|href|hreflang|lang|media|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rel|rev|style|title|target|type],map[class|dir<ltr?rtl|lang|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],menu[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],meta[content|dir<ltr?rtl|http-equiv|lang|name|scheme],noframes[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],noscript[class|dir<ltr?rtl|lang|style|title],object[align<bottom?left?middle?right?top|archive|border|class|classid|codebase|codetype|data|declare|dir<ltr?rtl|height|hspace|lang|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|standby|style|tabindex|title|type|usemap|vspace|width],ol[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|start|style|title|type],optgroup[class|dir<ltr?rtl|disabled<disabled|label|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],option[class|dir<ltr?rtl|disabled<disabled|label|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|selected<selected|style|title|value],p[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],param[id|name|type|value|valuetype<DATA?OBJECT?REF],pre/listing/plaintext/xmp[align|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|width|jivemacro|_.*],q[cite|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],s[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],samp[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],script[charset|defer|language|src|type],select[class|dir<ltr?rtl|disabled<disabled|lang|multiple<multiple|name|onblur|onchange|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style|tabindex|title],small[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],span[align<center?justify?left?right|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|jivemacro|_.*],strike[class|class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],strong/b[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],style[dir<ltr?rtl|lang|media|title|type],sub[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],sup[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],table[align<center?left?right|bgcolor|border|cellpadding|cellspacing|class|dir<ltr?rtl|frame|height|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rules|style|summary|title|width|jive.*],tbody[align<center?char?justify?left?right|char|class|charoff|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],td[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|lang|nowrap<nowrap|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],textarea[accesskey|class|cols|dir<ltr?rtl|disabled<disabled|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect|readonly<readonly|rows|style|tabindex|title],tfoot[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],th[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|lang|nowrap<nowrap|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],thead[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],title[dir<ltr?rtl|lang],tr[abbr|align<center?char?justify?left?right|bgcolor|char|charoff|class|rowspan|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],tt[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],u[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],ul[class|compact<compact|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type],var[class|dir<ltr?rtl|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title]",valid_children:"+pre[p|pre|ol|ul|blockquote|table|#text],+blockquote[p|pre|ol|ul|blockquote|table|#text]"}}else{return e}}}}}}}}}}};function computeRTEPluginStyle(b){for(var a=0;a<jive.rte.defaultStyles.length;a++){b+=","+jive.rte.defaultStyles[a]}return b};
;
jive.rte.ParamSet=function(){var a=this;this.name="";this.deleteAll=false;this.params=new Array();this.addParam=function(c,b){a.params.push({name:c,value:b})}};
;
window.BOOKMARKTYPE=2;jive.rte.RTE=function(j,a,p,q){var y=this;this.options=q=q||{};var f=null;if(typeof(a)=="object"){f=a;a=f.id}var v=false;var k=false;var F=false;var o=$j("#"+a);if(o.val()==""){o.val("<p></p>")}if(!q.rteLayout){q.rteLayout=new jive.rte.RTELayout({domExists:true,$editorPanel:o.parent(),rte:y})}q.theme_advanced_toolbar_container=q.rteLayout.getEditorPanel().get(0);var x=q.rteLayout.getUserTextarea().hide();var C=$j('<div class="rte_wrap tiny_mce_content"><div class="popOverContent"></div></div>').css({position:"absolute",top:0,left:0,width:"100%"});var i=$j("<div class='gutter'></div>");var w=$j("<div class='belowEditor'></div>");var J=$j('<div class="rte_wrap tiny_mce_content"><div class="superRichContent"></div></div>').css({position:"absolute",overflow:"hidden",top:0,left:0,width:"100%"});if(!$def(p)){p=0}var b=0;var D=0;var G=true;var H=null;var c=new $j.Deferred();function r(){if(!f){H=$j.extend({},jive.rte.settings(p),{mode:"exact",elements:a,oninit:function M(){t()},oninitFail:function L(){c.reject("rte initialization failed")}},y.options);try{if(typeof(window._editor_lang)!="undefined"){H.language=_editor_lang}if(!H.jive_image_picker_url&&typeof(window._jive_image_picker_url)!="undefined"){H.jive_image_picker_url=_jive_image_picker_url}}catch(N){console.log("error during rte construction",N)}if(typeof(tinyMCE)=="undefined"){c.reject("tinymce is undefined")}else{try{tinyMCE.init(H)}catch(K){c.reject(K)}}c.fail(function(O){console.log("tinyMCE.init failed: ",O);F=true;x.hide();o.show();o.height("200px")})}else{t()}}this.getSettings=function(){return H};this.isTextOnly=function(){return F};this.isMobileOnly=function(){return k};this.setMobileOnly=function(K){k=K};this.isDisabled=function(){return v};this.setDisabled=function(K){v=K};function s(K){if(j&&j[K]){return j[K]}return null}function u(){var K=[];$j.each(j||{},function(){if(this.teardown){var L=this.teardown();if(L){K.push(L)}}});return jive.conc.synchronize(K)}this.getImageService=function(){return s("imageService")};this.getLinkService=function(){return s("linkService")};this.getFormService=function(){return s("formService")};this.getEntitlementService=function(){return s("entitlementService")};this.getAttachmentService=function(){return s("attachmentService")};var I=true;var h=false;function B(){var K=t();if(K){var M=$j("iframe",K.getContentAreaContainer());b=M.outerHeight();D=M.outerWidth();J.css({height:y.getHeight()-y.getToolbarHeight()});var L=K.plugins.jivescroll;y.scrollRichContent(0,L.lastScrollY)}}this.scrollRichContent=function(L,K){this.getHiddenContainer().css("top",(-1*K)).css("left",(-1*L));this.getPopOverContainer().css("top",(-1*K)).css("left",(-1*L))};var g=false;function m(){if(!g){g=true;setTimeout(function(){B();g=false},0)}}q.rteLayout.addListener("resized",m);var A=true;function t(){if(!y.isTextOnly()&&G){if(!f){f=tinymce.get(a)}if(!$def(f)||!f){return null}G=false;$j("#"+a+"_tbl td.mceIframeContainer").prepend(J).append(C).append(i).closest("span.mceEditor").append(w);b=$j("iframe",t().getContentAreaContainer()).outerHeight();D=$j("iframe",t().getContentAreaContainer()).outerWidth();$j.each(f.plugins,function(){try{if(this.setRTE){this.setRTE(y)}}catch(K){console.log("Error calling setRTE in plugin",this.getInfo(),K)}});x.keyup(function(K){y.notifyOnKeyUp(K.keyCode)});x.change(function(K){y.notifyOnChange(K.keyCode)});f.onKeyUp.add(function(K,L){y.notifyOnKeyUp(L.keyCode)});f.onChange.add(function(K,L){y.notifyOnChange(L.keyCode)});f.onNodeChange.add(function(){y.notifyOnNodeChange()});(function(L){if(L.id==a){y.notifyInitFinished(y)}L.getContainer().childNodes[0].style.width="";var K=L.getBody();if(K.childNodes.length===0){K.appendChild(L.plugins.jivemacros.createEmptyPara())}if(tinymce.isIE){$j(window.document.body).find(".tiny_mce_content").addClass("ie");$j(L.getBody()).addClass("ie")}})(f);f.onBeginSpelling.add(function(){h=true});f.onEndSpelling.add(function(){h=false});f.theme.onResize.add(function(){if(A){A=false;y.resizeTo(y.getHeight());f.theme.onResize.dispatch()}else{A=true;y.notifyResized()}m()});f.plugins.html.registerToggleFunction(y.toggleEditorMode);c.resolve(y)}return f}this.isSpellChecking=function(){return h};this.toggleSpellChecker=function(){t().execCommand("mceSpellCheck")};this.closeAllDialogs=function(){var K=t();if(K){var N=K.windowManager.windows;var M=Object.keys(N);for(var L=0;L<M.length;L++){K.windowManager.close(null,N[M[L]].id)}K.plugins.jivemacros.removeDuplicateMacros(K,false);K.plugins.jivemacros.fixBodyParagraphs();return N}};this.getMacroForName=function(K){return window.jive.rte.macros.filter(function(L){return L.getName()==K}).first()||null};this.addMacro=function(O,L,P){var M=t();if(!M){return null}M.undoManager.add();if(M.selection.getNode().nodeName.toLowerCase()=="html"){var K=M.getBody();if(K.childNodes.length){K=K.childNodes[0]}M.selection.select(K);M.selection.collapse(true)}var Q=M.plugins.jivemacros.insertMacro(M,O,null,P);M.plugins.jivemacros.applyParameterSet(Q,O,L);M.plugins.jivemacros.validateMacroElements(Q);var N=y.getUIDForElement($j(Q));var R=y.getHiddenElementFor(N);O.refreshPosition(y,Q,R);O.refresh(y,Q);M.nodeChanged();return Q};this.applyParamSet=function(N,M,K){var L=t();if(!L){return null}L.plugins.jivemacros.applyParameterSet(N,M,K)};this.addTable=function(R,P){var K=t();if(!K){return null}var N="",M,L,O;N+="<table";for(M=0;M<R.length;M++){N+=" "+R[M].name+"='"+R[M].value+"'"}N+=">";N+="<tbody>";for(M=0;M<P.length;M++){var Q=P[M];N+="<tr>";if(M===0){for(L=0;L<Q.length;L++){O=Q[L];N+='<th align="center" valign="middle" style="background-color:#6690BC;"><font color="#ffffff"><strong>'+O+"</strong></font></th>"}}else{for(L=0;L<Q.length;L++){O=Q[L];N+="<td><p>"+O+(tinymce.isIE?"":'<br mce_bogus="1"/>')+"</p></td>"}}N+="</tr>"}N+="</tbody>";N+="</table>";K.execCommand("mceBeginUndoLevel");K.execCommand("mceInsertContent",false,N);K.addVisual();K.execCommand("mceEndUndoLevel");return true};this.getCurrentNode=function(){var K=t();if(!K){return null}return $j(K.selection.getNode())};this.destroy=function(){this.killYourself();this.teardownServices();$j(window).focus();if(f){tinyMCE.remove(f)}C.remove();J.remove();$j(this.getDOM()).parent().html("");$j(this.getTextArea()).remove();q.rteLayout.teardown()};this.teardownServices=function(){u()};this.getLang=function(M,L){var K=t();if(!K){return null}return K.getLang(M,L)};this.isReady=function(){if(y.isTextOnly()){return true}var K=t();return !!K};this.getReadyPromise=function(){return c.promise()};this.getDOM=function(){var K=t();if(!K){return null}return K.getContainer()};this.getID=function(){return a};this.setHTML=function(N){N=this.replaceWhiteSpace(N);if(y.isMobileOnly()){return x.val(N)}if(y.isTextOnly()){return o.val(N)}x.val(N);var L=t();var K=null;if(tinymce.isIE){K=document.activeElement;L.focus()}var M=L.setContent(N.replace(/>\n/g,">"));if(K){K.focus()}return M};this.getOriginalTextBox=function(){return o};this.getHTML=function(){if(y.isMobileOnly()){return x.val()}if(y.isTextOnly()){return o.val()}if(y.isDisabled()){return o.val()}var L=t();if(this.isHidden()){L.setContent(x.val().replace(/>\n/g,">"))}var K=L.getContent();if(($j.trim(K).length>0)&&K.indexOf("<body")!==0){K="<body>"+K+"</body>"}return K};this.replaceWhiteSpace=function(M){var L=[];var N=0;var K=-1;while((K=M.indexOf("  ",N))>=0){if(K<N){break}L.push(M.substring(N,K));L.push("&nbsp;");N=K+1}if(N<M.length){L.push(M.substring(N))}return L.join("")};this.show=function(){var K=t();if(!K){return null}K.show();y.notifyShowing()};this.getWindow=function(){var K=t();if(!K){return null}return K.getWin()};this.getDoc=function(){var K=t();if(!K){return null}return K.getDoc()};var e=null;this.getHiddenContainer=function(){if(e){return e}e=J.find("div.superRichContent");return e};var n=null;this.getPopOverContainer=function(){if(n){return n}n=C.find("div.popOverContent");return n};this.getGutter=function(){return i.get(0)};this.getBelowEditorArea=function(){return w.get(0)};this.getHiddenElementFor=function(K){var L=y.getHiddenContainer();var M=L.find("#"+K);if(M.length){return M}return null};var d=/\b_jivemacro_uid(\w+)\b/;this.getUIDForElement=function(L){var K=d.exec(L.attr("class"));if(K){return K[1]}return null};var z=new jive.ext.y.HashTable();this.getRTEElementFor=function(K){if(K){var L=z.get(K);if(L){if(L.length==1&&L.get(0).parentNode){return L}z.clear(K)}L=$j("._jivemacro_uid"+K,y.getBody());if(L.length==1){z.put(K,L)}if(L.length>0){return L}}return null};this.removeMacroWithUID=function(K){var M=z.get(K);if(M){M.remove()}z.clear(K);var L=y.getHiddenContainer();L.children("#"+K).remove()};this.setAttributeForMacroWithUID=function(K,L,M){var N=z.get(K);if(N){N.attr(L,M)}};this.generateUID=function(){return"_"+(new Date()).getTime()+Math.round(Math.random()*10000)};this.getBody=function(){var K=t();if(!K){return null}return K.getBody()};this.getTextArea=function(){return o};this.appendHTML=function(K){$j(this.getBody()).append(K)};this.insertHTMLAtCursor=function(K){if(K.indexOf("<body>")>=0){K=K.replace(/<body>/g,"")}if(K.indexOf("</body>")>=0){K=K.replace(/<\/body>/g,"")}if(!t().selection.getNode()||t().selection.getNode().nodeName.toLowerCase()=="body"){y.appendHTML(K)}else{$j(t().selection.getNode()).after(K)}};this.selection=function(){return t().selection.getRng(true)};this.focus=function(){try{var M=t();if(!M||M.destroyed){return}var O=$j("label[for='"+this.getID()+"'] .jive-error-message");var L=[];O.each(function(){L.push($j(this).text())});if(L.length){jive.Accessibility.speak(L.join("\n"))}if(this.isHidden()){x.focus()}else{var K=y.getBody();M.focus();if(K.childNodes.length===0){K.appendChild(M.plugins.jivemacros.createEmptyPara());M.selection.select(K.childNodes[0].childNodes[0]);M.selection.collapse(true);return}else{if(K.childNodes.length==1){var R=K.childNodes[0];var N;if(R.childNodes.length==1&&(N=R.childNodes[0])&&N.nodeName.toLowerCase()=="br"){M.selection.select(N);M.selection.collapse(true);return}}}if(y.getCurrentNode()[0].nodeName.toLowerCase()=="body"){var P=y.getBody();while(P.nodeType==1&&P.childNodes.length>0){P=P.childNodes[0]}M.selection.select(P);M.selection.collapse(true)}}}catch(Q){console.log(Q)}};this.tinymceFocus=function(){t().focus()};this.collapseSelection=function(){var K=t(),L=K.selection.getNode();if(L&&!K.selection.isCollapsed()){y.focus();K.selection.collapse()}};this.select=function(L){var K=t();K.selection.select(L)};this.hide=function(){var K=t();if(K&&!K.destroyed){K.hide()}};this.isHidden=function(){return x.is(":visible")};this.resizeTo=function(K){q.rteLayout.resizeTo(K)};this.autoReposition=function(){q.rteLayout.reposition()};this.getHeight=function(){var L=$j(t().getContainer());var K=L.find("table:first").get(0);if(K){return $j(K).height()}else{return 100}};this.getToolbarHeight=function(){var L=$j(t().getContainer()).find("table:eq(0) > tbody > tr"),K=L.eq(0).find("td:first, th:first").height();if(L.length>2){K+=L.last().find("td:first, th:first").height()}return K};this.getContentAreaHeight=function(){return b};this.getContentAreaWidth=function(){if(!tinymce.isIE){return $j("iframe",t().getContentAreaContainer()).outerWidth()}return D};this.killYourself=function(){var K=t();if(!K){return}$j.each(K.plugins,function(){if(this.killYourself){this.killYourself()}})};this.toggleEditorMode=function(L){var M,K;if(L==a){if(y.isHidden()){M=x.height();x.hide();y.show();y.setHTML(x.val());y.focus();y.resizeTo(M);t().plugins.jivemacros.removeDuplicateMacros(t(),false);t().plugins.jivemacros.fixBodyParagraphs()}else{K=$j("#"+a+"_tbl");M=K.height();x.val(y.getHTML(true));y.hide();x.show();x.width("100%");o.hide();x.height(M);y.focus()}m();y.notifyDoneTogglingMode()}};this.i18n=function(L,M){if(typeof(M)=="undefined"){M=L}var K=t();return K.getLang(L,M)};var E=[];var l=[];this.addListener=function(K){if($def(K.onShow)){K.onShow()}E.push(K);if(y.initted&&K.initFinished){K.initFinished(y)}};this.addListenerAction=function(K){l.push(K)};this.executeListenerActions=function(){while(l.length>0){l[0]();l.splice(0,1)}};this.removeListener=function(L){for(var K=0;K<E.length;K++){if(E[K]==L){E.splice(K,1)}}};this.initted=false;this.notifyInitFinished=function(L){if(!y.initted){y.initted=true;for(var K=0;K<E.length;K++){E[K].initFinished(L)}y.executeListenerActions()}};this.notifyOnKeyUp=function(L){for(var K=0;K<E.length;K++){E[K].onKeyUp(L)}y.executeListenerActions()};this.notifyOnChange=function(){if(I){I=false;return}for(var K=0;K<E.length;K++){E[K].onChange()}y.executeListenerActions()};this.notifyResized=function(){for(var K=0;K<E.length;K++){E[K].onResize()}y.executeListenerActions()};this.notifyShowing=function(){for(var K=0;K<E.length;K++){E[K].onShow()}y.executeListenerActions()};this.notifyOnNodeChange=function(){for(var K=0;K<E.length;K++){E[K].onNodeChange()}y.executeListenerActions()};this.notifyDoneTogglingMode=function(){for(var K=0;K<E.length;K++){E[K].doneTogglingMode()}y.executeListenerActions()};jive.conc.nextTick(r)};
;
jive.rte.RTELayout=function(e){var m=this;var n;var o=null;var s,p,j,h,q;function u(K){if(s.length){var C=null;if(!K){if(q.is(":visible")){K=q.offset();var J=q.width();var G=n.find("table:first").outerWidth(true);var D=$j(window).width();if(!(K.left+G<D)&&(K.left+J-G>0)){K.left-=G-J}K.width=Math.max(J,G)}else{K={};K.width=q.width()}C=q.height();var E=n.find("table:first").height();var I=s.height();var H=I-E;if(C<=I){q.height(s.height())}else{K.height=C-H}}if(K.top!=null&&K.left!=null){var F={top:K.top,left:K.left};s.offset(F)}if(K.width){s.width(K.width)}if(K.height){r(K.height)}}}function x(C){t();o=C}function f(){if(jive&&jive.loader&&jive.loader.LoaderView){h=new jive.loader.LoaderView({size:"big"});h.prependTo(n)}else{h=null}}function t(){n.removeClass("loading");if(h){h.destroy();h.getContent().remove()}}function l(){j.hide()}function A(){j.show()}function B(){p.hide()}function b(){p.show()}var i="<textarea class='usertext'></textarea>";function y(C){s=$j("<div class='j-rte-wrap-box'><div class='wysiwygtext_html_link'><a href='javascript:void(0);' class='toggle_html' style='display:none;'>"+C.toggleText+"</a>&nbsp;<a href='javascript:void(0);' class='rte_preferred' style='display:none;'>"+C.alwaysUseTabText+"</a>&nbsp;&nbsp;</div><div class='jive-panel-wrapper'><div id='wysiwyg-panel' class='current loading toolbar-container'><div class='readOnlyMessage' style='display: none;'><h4></h4><p></p><br /><p></p></div>"+i+"</div></div></div>");n=s.find(".jive-panel-wrapper .toolbar-container");p=s.find("a.toggle_html").click(function(D){m.emit("toggleHtml",D)});j=s.find(".wysiwygtext_html_link a.rte_preferred").click(function(D){m.emit("setPreferred",D)});if(C.readOnlyMessage){n.find(".readOnlyMessage").find("h4").text(C.editDisabledText).end().find("p:last").text(C.editDisabledSummary.replace("{0}",C.communityName));n.find(".readOnlyMessage").show();n.addClass("disabled")}if(C.shouldFloat){s.css({position:"absolute","z-index":C.zIndex||100});q=$j("<div style='width: 100%;'></div>").height(C.$element.outerHeight(true));C.$element.before(q);$j("body").append(s);s.offset(q.offset()).width(q.width())}else{q=$j();C.$element.before(s)}f()}var c=500;function k(){if(c>0){c=$j(window).height()-100}}function z(){if(o){var C=$j(o.getBody()).outerHeight(true);var D=$j(o.getWindow()).height();if(C>D&&C<c&&c>0){r(Math.min(C+100,c))}}}function r(D){var G=n.find("table:first");var F=n.find("iframe");var H=G.height()-F.height();if(tinymce.isGecko){var C=G.find(".gutter");var E=0;C.children().each(function(){if($j(this).height()>E){E=$j(this).height()}});if(C.height()>E){H=H-C.height()}}G.height(D);F.height(D-H);g().height(D);q.height(s.height());m.emit("resized",D,s.height())}function g(){return n.find("textarea.usertext")}function a(){s.remove();q.remove();g().remove();$j(window).unbind("resize.rteLayout",d);$j("body").undelegate("div.mceSplitButtonMenu, div.mceDropDown","mouseover.rteLayout",w)}function d(){k();u()}var v=7;function w(C){var F=$j(window);var E=F.width();var D=F.scrollLeft();if(E+D-v<=C.pageX){F.scrollLeft(D+v*2)}}if(!e.domExists){y(e)}else{n=e.$editorPanel;n.prepend(i);s=$j();q=$j();p=$j();j=$j();o=e.rte}k();$j(window).bind("resize.rteLayout",d);$j("body").delegate("div.mceSplitButtonMenu, div.mceDropDown","mouseover.rteLayout",w);$j.extend(this,{reposition:u,expandToFitContent:z,resizeTo:r,getEditorPanel:function(){return n},getUserTextarea:g,hidePreferredButton:l,showPreferredButton:A,hideToggleHtmlButton:B,showToggleHtmlButton:b,teardown:a,doneLoading:x})};jive.conc.observable(jive.rte.RTELayout.prototype);
;
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(a){dwr.engine._errorHandler=a};dwr.engine.setWarningHandler=function(a){dwr.engine._warningHandler=a};dwr.engine.setTextHtmlHandler=function(a){dwr.engine._textHtmlHandler=a};dwr.engine.setTimeout=function(a){dwr.engine._timeout=a};dwr.engine.setPreHook=function(a){dwr.engine._preHook=a};dwr.engine.setPostHook=function(a){dwr.engine._postHook=a};dwr.engine.setHeaders=function(a){dwr.engine._headers=a};dwr.engine.setParameters=function(a){dwr.engine._parameters=a};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(a){if(a!=dwr.engine.XMLHttpRequest&&a!=dwr.engine.IFrame&&a!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return}dwr.engine._rpcType=a};dwr.engine.setHttpMethod=function(a){if(a!="GET"&&a!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return}dwr.engine._httpMethod=a};dwr.engine.setOrdered=function(a){dwr.engine._ordered=a};dwr.engine.setAsync=function(a){dwr.engine._async=a};dwr.engine.setActiveReverseAjax=function(a){if(a){if(dwr.engine._activeReverseAjax){return}dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(b,a){dwr.engine._debug("Error: "+a.name+", "+a.message,true);if(b==null||b==""){alert("A server error has occurred.")}else{if(b.indexOf("0x80040111")!=-1){dwr.engine._debug(b)}else{alert(b)}}};dwr.engine.defaultWarningHandler=function(b,a){dwr.engine._debug(b)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return}dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(b){var a=dwr.engine._batch;if(a==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return}dwr.engine._batch=null;if(a.map.callCount==0){return}if(b){dwr.engine._mergeBatch(a,b)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=a}else{dwr.engine._sendData(a)}};dwr.engine.setPollMethod=function(a){dwr.engine.setPollType(a)};dwr.engine.setMethod=function(a){dwr.engine.setRpcType(a)};dwr.engine.setVerb=function(a){dwr.engine.setHttpMethod(a)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers={"X-J-Token":_jive_auth_token};dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(a){return a};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(l,b,j,h){var e=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();e=true}var d=dwr.engine._batch;var g=[];for(var c=0;c<arguments.length-3;c++){g[c]=arguments[c+3]}if(d.path==null){d.path=l}else{if(d.path!=l){dwr.engine._handleError(d,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return}}var a;var k=g[g.length-1];if(typeof k=="function"||k==null){a={callback:g.pop()}}else{a=g.pop()}dwr.engine._mergeBatch(d,a);d.handlers[d.map.callCount]={exceptionHandler:a.exceptionHandler,callback:a.callback};var f="c"+d.map.callCount+"-";d.map[f+"scriptName"]=b;d.map[f+"methodName"]=j;d.map[f+"id"]=d.map.callCount;for(c=0;c<g.length;c++){dwr.engine._serializeAll(d,[],g[c],f+"param"+c)}d.map.callCount++;if(e){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return}var a=dwr.engine._createBatch();a.map.id=0;a.map.callCount=1;a.isPoll=true;if(dwr.engine._pollWithXhr=="true"){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseYes}else{a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}}a.httpMethod="POST";a.async=true;a.timeout=0;a.path=dwr.engine._defaultPath;a.preHooks=[];a.postHooks=[];a.errorHandler=dwr.engine._pollErrorHandler;a.warningHandler=dwr.engine._pollErrorHandler;a.handlers[0]={callback:function(b){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,b)}};dwr.engine._sendData(a);if(a.rpcType==dwr.engine.XMLHttpRequest&&a.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(b,a){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+a.name+" : "+a.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var a={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){a.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){a.postHooks.push(dwr.engine._postHook)}var c,b;if(dwr.engine._headers){for(c in dwr.engine._headers){b=dwr.engine._headers[c];if(typeof b!="function"){a.headers[c]=b}}}if(dwr.engine._parameters){for(c in dwr.engine._parameters){b=dwr.engine._parameters[c];if(typeof b!="function"){a.parameters[c]=b}}}return a};dwr.engine._mergeBatch=function(a,d){var e,c;for(var b=0;b<dwr.engine._propnames.length;b++){e=dwr.engine._propnames[b];if(d[e]!=null){a[e]=d[e]}}if(d.preHook!=null){a.preHooks.unshift(d.preHook)}if(d.postHook!=null){a.postHooks.push(d.postHook)}if(d.headers){for(e in d.headers){c=d.headers[e];if(typeof c!="function"){a.headers[e]=c}}}if(d.parameters){for(e in d.parameters){c=d.parameters[e];if(typeof c!="function"){a.map["p-"+e]=""+c}}}};dwr.engine._getJSessionId=function(){var c=document.cookie.split(";");for(var b=0;b<c.length;b++){var a=c[b];while(a.charAt(0)==" "){a=a.substring(1,a.length)}if(a.indexOf(dwr.engine._sessionCookieName+"=")==0){return a.substring(dwr.engine._sessionCookieName.length+1,a.length)}}return""};dwr.engine._checkCometPoll=function(){for(var b=0;b<dwr.engine._outstandingIFrames.length;b++){var e="";var c=dwr.engine._outstandingIFrames[b];try{e=dwr.engine._getTextFromCometIFrame(c)}catch(a){dwr.engine._handleWarning(c.batch,a)}if(e!=""){dwr.engine._processCometResponse(e,c.batch)}}if(dwr.engine._pollReq){var d=dwr.engine._pollReq;var e=d.responseText;if(e!=null){dwr.engine._processCometResponse(e,d.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(b){var a=b.contentWindow.document.body;if(a==null){return""}var c=a.innerHTML;if(c.indexOf("<PRE>")==0||c.indexOf("<pre>")==0){c=c.substring(5,c.length-7)}return c};dwr.engine._processCometResponse=function(d,e){if(e.charsProcessed==d.length){return}if(d.length==0){e.charsProcessed=0;return}var b=d.indexOf("//#DWR-START#",e.charsProcessed);if(b==-1){e.charsProcessed=d.length;return}var a=d.lastIndexOf("//#DWR-END#");if(a==-1){return}if(d.charCodeAt(a+11)==13&&d.charCodeAt(a+12)==10){e.charsProcessed=a+13}else{e.charsProcessed=a+11}var c=d.substring(b+13,a);dwr.engine._receivedBatch=e;dwr.engine._eval(c);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(e){e.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[e.map.batchId]=e;dwr.engine._batchesLength++;e.completed=false;for(var d=0;d<e.preHooks.length;d++){e.preHooks[d]()}e.preHooks=null;if(e.timeout&&e.timeout!=0){e.timeoutId=setTimeout(function(){dwr.engine._abortRequest(e)},e.timeout)}if(e.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){e.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){e.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var a,c;if(e.req){if(e.async){e.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(e)}}}if(e.isPoll){dwr.engine._pollReq=e.req;if(!(document.all&&!window.opera)){e.req.batch=e}}var b=navigator.userAgent.indexOf("Safari/");if(b>=0){var g=navigator.userAgent.substring(b+7);if(parseInt(g,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){e.httpMethod="GET"}else{dwr.engine._handleWarning(e,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);try{e.req.open(e.httpMethod,c.url,e.async);try{for(a in e.headers){var j=e.headers[a];if(typeof j=="string"){e.req.setRequestHeader(a,j)}}if(!e.headers["Content-Type"]){e.req.setRequestHeader("Content-Type","text/plain")}}catch(h){dwr.engine._handleWarning(e,h)}e.req.send(c.body);if(!e.async){dwr.engine._stateChange(e)}}catch(h){dwr.engine._handleError(e,h)}}else{if(e.rpcType!=dwr.engine.ScriptTag){var f=e.isPoll?"dwr-if-poll-"+e.map.batchId:"dwr-if-"+e.map.batchId;e.div=document.createElement("div");document.body.appendChild(e.div);e.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+f+"' name='"+f+"' onload='dwr.engine._iframeLoadingComplete ("+e.map.batchId+");'></iframe>";e.document=document;e.iframe=e.document.getElementById(f);e.iframe.batch=e;e.mode=e.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(e.isPoll){dwr.engine._outstandingIFrames.push(e.iframe)}c=dwr.engine._constructRequest(e);if(e.httpMethod=="GET"){e.iframe.setAttribute("src",c.url)}else{e.form=e.document.createElement("form");e.form.setAttribute("id","dwr-form");e.form.setAttribute("action",c.url);e.form.setAttribute("style","display:none;");e.form.setAttribute("target",f);e.form.target=f;e.form.setAttribute("method",e.httpMethod);for(a in e.map){var j=e.map[a];if(typeof j!="function"){var k=e.document.createElement("input");k.setAttribute("type","hidden");k.setAttribute("name",a);k.setAttribute("value",j);e.form.appendChild(k)}}e.document.body.appendChild(e.form);e.form.submit()}}else{e.httpMethod="GET";e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);e.script=document.createElement("script");e.script.id="dwr-st-"+e.map["c0-id"];e.script.src=c.url;document.body.appendChild(e.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(b){var c={url:b.path+b.mode,body:null};if(b.isPoll==true){c.url+="ReverseAjax.dwr"}else{if(b.map.callCount==1){c.url+=b.map["c0-scriptName"]+"."+b.map["c0-methodName"]+".dwr"}else{c.url+="Multiple."+b.map.callCount+".dwr"}}var e=location.href.match(/jsessionid=([^?]+)/);if(e!=null){c.url+=";jsessionid="+e[1]}var d;if(b.httpMethod=="GET"){b.map.callCount=""+b.map.callCount;c.url+="?";for(d in b.map){if(typeof b.map[d]!="function"){c.url+=encodeURIComponent(d)+"="+encodeURIComponent(b.map[d])+"&"}}c.url=c.url.substring(0,c.url.length-1)}else{c.body="";if(document.all&&!window.opera){var a=[];for(d in b.map){if(typeof b.map[d]!="function"){a.push(d+"="+b.map[d]+dwr.engine._postSeperator)}}c.body=a.join("")}else{for(d in b.map){if(typeof b.map[d]!="function"){c.body+=d+"="+b.map[d]+dwr.engine._postSeperator}}}c.body=dwr.engine._contentRewriteHandler(c.body)}c.url=dwr.engine._urlRewriteHandler(c.url);return c};dwr.engine._stateChange=function(c){var b;if(c.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return}var f=c.req;try{if(f.readyState!=4){return}}catch(d){dwr.engine._handleWarning(c,d);dwr.engine._clearUp(c);return}if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return}try{var e=f.responseText;e=dwr.engine._replyRewriteHandler(e);var a=f.status;if(e==null||e==""){dwr.engine._handleWarning(c,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(a!=200){dwr.engine._handleError(c,{name:"dwr.engine.http."+a,message:f.statusText})}else{var g=f.getResponseHeader("Content-Type");if(!g.match(/^text\/plain/)&&!g.match(/^text\/javascript/)){if(g.match(/^text\/html/)&&typeof c.textHtmlHandler=="function"){c.textHtmlHandler({status:a,responseText:e,contentType:g})}else{dwr.engine._handleWarning(c,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+g+"'"})}}else{if(c.isPoll&&c.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(e,c)}else{if(e.search("//#DWR")==-1){dwr.engine._handleWarning(c,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{b=e}}}}}}catch(d){dwr.engine._handleWarning(c,d)}dwr.engine._callPostHooks(c);dwr.engine._receivedBatch=c;if(b!=null){b=b.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(b);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(c);if(!c.completed){dwr.engine._clearUp(c)}};dwr.engine._validateBatch=function(a){if(!a.completed){for(var b=0;b<a.map.callCount;b++){if(a.handlers[b]!=null){dwr.engine._handleWarning(a,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(a){var b=dwr.engine._batches[a];if(b){dwr.engine._validateBatch(b)}};dwr.engine._remoteHandleCallback=function(a,f,e){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+a,true);return}try{var b=c.handlers[f];c.handlers[f]=null;if(!b){dwr.engine._debug("Warning: Missing handlers. callId="+f,true)}else{if(typeof b.callback=="function"){b.callback(e)}}}catch(d){dwr.engine._handleError(c,d)}};dwr.engine._remoteHandleException=function(a,e,d){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return}var b=c.handlers[e];c.handlers[e]=null;if(b==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return}if(d.message==undefined){d.message=""}if(typeof b.exceptionHandler=="function"){b.exceptionHandler(d.message,d)}else{if(typeof c.errorHandler=="function"){c.errorHandler(d.message,d)}}};dwr.engine._remoteHandleBatchException=function(c,a){var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remotePollCometDisabled=function(c,a){dwr.engine.setActiveReverseAjax(false);var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remoteBeginIFrameResponse=function(b,a){if(b!=null){dwr.engine._receivedBatch=b.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(a){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(a){if(a&&!a.completed){dwr.engine._clearUp(a);if(a.req){a.req.abort()}dwr.engine._handleError(a,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(a){if(a.postHooks){for(var b=0;b<a.postHooks.length;b++){a.postHooks[b]()}a.postHooks=null}};dwr.engine._clearUp=function(b){if(!b){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return}if(b.completed){dwr.engine._debug("Warning: Double complete",true);return}if(b.div){b.div.parentNode.removeChild(b.div)}if(b.iframe){for(var c=0;c<dwr.engine._outstandingIFrames.length;c++){if(dwr.engine._outstandingIFrames[c]==b.iframe){dwr.engine._outstandingIFrames.splice(c,1)}}b.iframe.parentNode.removeChild(b.iframe)}if(b.form){b.form.parentNode.removeChild(b.form)}if(b.req){if(b.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete b.req}if(b.timeoutId){clearTimeout(b.timeoutId);delete b.timeoutId}if(b.map&&(b.map.batchId||b.map.batchId==0)){delete dwr.engine._batches[b.map.batchId];dwr.engine._batchesLength--}b.completed=true;if(dwr.engine._batchQueue.length!=0){var a=dwr.engine._batchQueue.shift();dwr.engine._sendData(a)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var a in dwr.engine._batches){var b=dwr.engine._batches[a];if(b&&b.map){if(b.req){b.req.abort()}dwr.engine._clearUp(b)}}};if(window.addEventListener){window.addEventListener("unload",dwr.engine._unloader,false)}else{if(window.attachEvent){window.attachEvent("onunload",dwr.engine._unloader)}}dwr.engine._handleError=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.errorHandler=="function"){a.errorHandler(b.message,b)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._handleWarning=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.warningHandler=="function"){a.warningHandler(b.message,b)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._serializeAll=function(b,d,c,a){if(c==null){b.map[a]="null:null";return}switch(typeof c){case"boolean":b.map[a]="boolean:"+c;break;case"number":b.map[a]="number:"+c;break;case"string":b.map[a]="string:"+encodeURIComponent(c);break;case"object":if(c instanceof String){b.map[a]="String:"+encodeURIComponent(c)}else{if(c instanceof Boolean){b.map[a]="Boolean:"+c}else{if(c instanceof Number){b.map[a]="Number:"+c}else{if(c instanceof Date){b.map[a]="Date:"+c.getTime()}else{if(c&&c.join){b.map[a]=dwr.engine._serializeArray(b,d,c,a)}else{b.map[a]=dwr.engine._serializeObject(b,d,c,a)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof c+", attempting default converter."});b.map[a]="default:"+c;break}};dwr.engine._lookup=function(e,c,a){var d;for(var b=0;b<e.length;b++){if(e[b].data==c){d=e[b];break}}if(d){return"reference:"+d.name}e.push({data:c,name:a});return null};dwr.engine._serializeObject=function(c,h,g,b){var f=dwr.engine._lookup(h,g,b);if(f){return f}if(g.nodeName&&g.nodeType){return dwr.engine._serializeXml(c,h,g,b)}var e="Object_"+dwr.engine._getObjectClassName(g)+":{";var d;for(d in g){if(typeof g[d]!="function"){c.paramCount++;var a="c"+dwr.engine._batch.map.callCount+"-e"+c.paramCount;dwr.engine._serializeAll(c,h,g[d],a);e+=encodeURIComponent(d)+":reference:"+a+", "}}if(e.substring(e.length-2)==", "){e=e.substring(0,e.length-2)}e+="}";return e};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(c){if(c&&c.constructor&&c.constructor.toString){var d=c.constructor.toString();var a=d.match(/function\s+(\w+)/);if(a&&a.length==2){return a[1]}}if(c&&c.constructor){for(var b in dwr.engine._errorClasses){if(c.constructor==dwr.engine._errorClasses[b]){return b}}}if(c){var d=Object.prototype.toString.call(c);var a=d.match(/\[object\s+(\w+)/);if(a&&a.length==2){return a[1]}}return"Object"};dwr.engine._serializeXml=function(c,f,e,b){var d=dwr.engine._lookup(f,e,b);if(d){return d}var a;if(window.XMLSerializer){a=new XMLSerializer().serializeToString(e)}else{if(e.toXml){a=e.toXml}else{a=e.innerHTML}}return"XML:"+encodeURIComponent(a)};dwr.engine._serializeArray=function(h,c,f,a){var d=dwr.engine._lookup(c,f,a);if(d){return d}if(document.all&&!window.opera){var b=["Array:["];for(var g=0;g<f.length;g++){if(g!=0){b.push(",")}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);b.push("reference:");b.push(j)}b.push("]");e=b.join("")}else{var e="Array:[";for(var g=0;g<f.length;g++){if(g!=0){e+=","}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);e+="reference:";e+=j}e+="]"}return e};dwr.engine._unserializeDocument=function(a){var c;if(window.DOMParser){var e=new DOMParser();c=e.parseFromString(a,"text/xml");if(!c.documentElement||c.documentElement.tagName=="parsererror"){var b=c.documentElement.firstChild.data;b+="\n"+c.documentElement.firstChild.nextSibling.firstChild.data;throw b}return c}else{if(window.ActiveXObject){c=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);c.loadXML(a);return c}else{var d=document.createElement("div");d.innerHTML=a;return d}}};dwr.engine._newActiveXObject=function(a){var d;for(var c=0;c<a.length;c++){try{d=new ActiveXObject(a[c]);break}catch(b){}}return d};dwr.engine._debug=function(f,d){var a=false;try{if(window.console){if(d&&window.console.trace){window.console.trace()}window.console.log(f);a=true}else{if(window.opera&&window.opera.postError){window.opera.postError(f);a=true}}}catch(c){}if(!a){var b=document.getElementById("dwr-debug");if(b){var e=f+"<br/>"+b.innerHTML;if(e.length>2048){e=e.substring(0,2048)}b.innerHTML=e}}};
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (WikiTextConverter == null) var WikiTextConverter = {};
WikiTextConverter._path = '/dwr';
WikiTextConverter.getPreferredEditorMode = function(callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'getPreferredEditorMode', false, callback);
}
WikiTextConverter.convertFromWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertFromWiki', p0, p1, false, callback);
}
WikiTextConverter.cleanUpHtml = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'cleanUpHtml', p0, p1, false, callback);
}
WikiTextConverter.convertToWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToWiki', p0, p1, false, callback);
}
WikiTextConverter.convertToPreviewFromXhtml = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToPreviewFromXhtml', p0, p1, false, callback);
}
WikiTextConverter.convertToPreviewFromWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToPreviewFromWiki', p0, p1, false, callback);
}
WikiTextConverter.setPreferredEditorMode = function(p0, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'setPreferredEditorMode', p0, false, false, callback);
}

;
jive.rte.RTEWrap=function(l){var i=window.jive;var c={$element:null,id:l.$element.attr("id")?l.$element.attr("id"):"wysiwygtext",controller:null,preset:"wiki",preferredMode:"advanced",startMode:"advanced",mobileUI:false,toggleText:"",alwaysUseTabText:"",editDisabledText:"",editDisabledSummary:"",isEditing:false,height:0,onReady:function(){}};l=$j.extend({},c,l);l.images_enabled=l.images_enabled||l._imagesEnabled||false;var e="advanced";var b=l.preferredMode?l.preferredMode:"advanced";var a,k;var d=this;if(l.mobileUI){e="rawhtml";b="rawhtml"}if(!l.$element||!l.$element.length){return}this.destroy=function(){a.destroy();k.teardown();l.$element.remove();window.editor.clear(l.id);if(window.getSelection&&document.createRange){var m=window.getSelection();m.addRange(document.createRange());m.removeAllRanges()}};this.teardownServices=function(){a.teardownServices()};function h(m){if(l.mobileUI){f();return}WikiTextConverter.setPreferredEditorMode(m,{callback:function(){b=m;f()},timeout:DWRTimeout,errorHandler:editorErrorHandler})}function f(){if(l.mobileUI){k.hideToggleHtmlButton();k.hidePreferredButton();return}if(e=="rawhtml"){k.showToggleHtmlButton()}else{k.hideToggleHtmlButton()}if(b==e){k.hidePreferredButton()}else{k.showPreferredButton()}}function g(){console.log("failed to initialize rte with options:  ",l);l.$element.trigger("rteFail").data("rteStatus",false)}function j(o,n){var p=new i.rte.RTEListener();if(l.height==0){p.onResize=function(q){return function(){var r=new Date();r.setTime(r.getTime()+3600000*24*365);var t=window.editor.get(q).getHeight();var s=window._jive_base_url==""?"/":window._jive_base_url;setCookie("jive_wysiwygtext_height",""+t,r,s)}}(l.id)}p.onKeyUp=function(){n.expandToFitContent()};p.doneTogglingMode=function(){if(e=="advanced"){e="rawhtml"}else{e="advanced"}f()};p.initFinished=function m(){var r=new $j.Deferred();if(b=="rawhtml"){i.conc.nextTick(function u(){o.toggleEditorMode(o.getID());r.resolve()})}else{r.resolve()}var s=new $j.Deferred();i.conc.nextTick(function q(){var v=l.height;if(!v){try{v=parseInt(getCookie("jive_wysiwygtext_height"))}catch(w){v=500}if(!v){v=500}}n.resizeTo(v);n.expandToFitContent();n.reposition();s.resolve();if(tinymce.isIE){tinymce.activeEditor.getBody().className+=" "}});n.doneLoading(o);$j.when(s,r).done(i.conc.nextTick(function t(){l.onReady(o,n);l.$element.trigger("rteSuccess",[o,n]).data("rteStatus",true)})).fail(g)};if(l.autoSave&&l.autoSave.messageChangeHandler){p.onKeyUp=function(){l.autoSave.messageChangeHandler()};p.onChange=function(){l.autoSave.messageChangeHandler()}}o.addListener(p)}l.$element.css("color","white");require(["jive.rte"],function(){i.conc.nextTick(function m(){var n={images_enabled:l.images_enabled||false,rteLayout:k};a=new i.rte.RTE(l.services,l.id,l.preset,n);a.getReadyPromise().fail(function(){k.doneLoading(a)}).fail(g).always(function(){l.$element.css("color","")});if(l.mobileUI){if(l.isEditing){a.setDisabled(true);a.getReadyPromise().fail(i.conc.nextTick(function(){l.$element.hide()}))}else{a.getReadyPromise().fail(i.conc.nextTick(function(){l.$element.hide();k.getUserTextarea().show();k.reposition()}))}l.$element.before("<input name='mobileEditor' value='true' type='hidden' />");a.setMobileOnly(true)}for(var o in a){if(typeof(d[o])=="undefined"){d[o]=a[o]}}i.rte.multiRTE.push(l.id);window.editor.put(l.id,d);j(a,k)})});if(i.rte.LinkService){l.services=$j.extend({linkService:new i.rte.LinkService()},l.services)}k=new i.rte.RTELayout({$element:l.$element,toggleText:l.toggleText,alwaysUseTabText:l.alwaysUseTabText,destinationPosition:l.destinationPosition,readOnlyMessage:l.mobileUI&&l.isEditing,editDisabledText:l.editDisabledText,editDisabledSummary:l.editDisabledSummary,communityName:l.communityName,shouldFloat:l.shouldFloat});k.addListener("setPreferred",function(){h(e)});k.addListener("toggleHtml",function(){a.toggleEditorMode(l.id)});this._getLayout=function(){return k};f()};
;
jive.rte.Macro=function(e,b,f,j,c,k,d,i,g){var h=this;var a=null;if(typeof(jive.rte.plugin[e])!="undefined"){a=new jive.rte.plugin[e](e,b,f,j,c,k,d,i,g)}this.getName=function(){if(a!=null){return a.getName()}return e};this.getUrl=function(){if(a!=null){return a.getUrl()}return b};this.isButton=function(){if(a!=null){return a.isButton()}return g};this.isEnabled=function(){if(a!=null){return a.isEnabled()}return i};this.isShowSettings=function(){if(a!=null){return a.isShowSettings()}return j};this.isShowInMacroList=function(){if(a!=null){return a.isShowInMacroList()}return c};this.getMacroType=function(){if(a!=null){return a.getMacroType()}return f};this.getParameterSets=function(){if(a!=null){return a.getParameterSets()}return k};this.getAllowedParameters=function(){if(a!=null){return a.getAllowedParameters()}return d};this.refreshPosition=function(l,m,o,n){if(a!=null){return a.refreshPosition(l,m,o,n)}};this.usesCustomBackground=function(){if(a!=null){return a.usesCustomBackground()}return false};this.caresAboutChangeTo=function(l,n,m){if(a!=null&&a.caresAboutChangeTo){return a.caresAboutChangeTo(l,n,m)}return false};this.refresh=function(l,n){if(a!=null){return a.refresh(l,n)}if(n.getAttribute("jivemacro")==this.getName()){if(this.getMacroType().toLowerCase()=="inline"){var q=n.getAttribute("_title");if($def(q)&&q!=null&&q.length>0){if(!q.match(/<[^<]+=/)){n.innerHTML=q}n.attributes.removeNamedItem("_title")}else{if(!tinyMCE.activeEditor.dom.getAttrib(n,"_modifiedtitle")){var m=n.getAttribute("jivemacro");var r=n.getAttribute("___default_attr");var p=tinyMCE.activeEditor.plugins.jivemacros.getTitleFor(m,r);if(p&&n.innerHTML!=p[0]){n.innerHTML="";n.appendChild(l.getDoc().createTextNode(p[0]))}if(n.innerHTML==""){n.innerHTML="unknown"}}}}else{if(this.getMacroType().toLowerCase()=="image"){if(n.src==""){var o=window.CS_RESOURCE_BASE_URL+"/images/tiny_mce3/plugins/jiveemoticons/images/spacer.gif";n.setAttribute("src",o);n.setAttribute("data-mce-src",o)}}}}}};
;
jive.rte.EmoticonMacro=function(){var c=new Array();var d=new Array();c.push({name:"__jive_emoticon_name",value:["happy","laugh","silly","wink","plain","angry","blush","confused","cool","cry","devil","grin","love","mischief","sad","shocked","info","plus","minus","alert","check","x"]});for(var a=0;a<c[0].value.length;a++){d.push({name:c[0].value[a],deleteAll:true,params:[{name:c[0].name,value:c[0].value[a]}]})}var b=new jive.rte.Macro("emoticon","","img",false,true,d,c,true,false);this.getName=b.getName;this.getUrl=b.getUrl;this.isShowInMacroList=b.isShowInMacroList;this.isShowSettings=b.isShowSettings;this.getMacroType=b.getMacroType;this.getParameterSets=b.getParameterSets;this.getAllowedParameters=b.getAllowedParameters;this.usesCustomBackground=function(){return false};this.refresh=function(f,h){b.refresh(f,h);var g=h.getAttribute("_"+c[0].name);var e=window.CS_RESOURCE_BASE_URL+"/images/emoticons/"+g+".png";$j(h).addClass("jive_macro").addClass("jive_emote").removeClass("jive_emoticon").attr("src",e).attr("data-mce-src",e)}};jive.rte.macros.push(new jive.rte.EmoticonMacro());
;
jive.rte.RTEListener=function(){this.onKeyUp=function(a){};this.onChange=function(){};this.onResize=function(){};this.onShow=function(){};this.doneTogglingMode=function(){};this.initFinished=function(){};this.onNodeChange=function(){};this.onWidthChange=function(){}};
;
var dp={sh:{Toolbar:{},Utils:{},RegexLib:{},Brushes:{},Strings:{AboutDialog:'<html><head><title>About...</title></head><body class="dp-about"><table cellspacing="0"><tr><td class="copy"><p class="title">dp.SyntaxHighlighter</div><div class="para">Version: {V}</p><p><a href="http://www.dreamprojections.com/syntaxhighlighter/?ref=about" target="_blank">http://www.dreamprojections.com/syntaxhighlighter</a></p>&copy;2004-2007 Alex Gorbatchev.</td></tr><tr><td class="footer"><input type="button" class="close" value="OK" onClick="window.close()"/></td></tr></table></body></html>'},InjectedStyles:{},ClipboardSwf:null,Version:"1.5.1"}};dp.SyntaxHighlighter=dp.sh;dp.sh.Toolbar.Commands={ExpandSource:{label:"+ expand source",check:function(a){return a.collapse},func:function(b,a){b.parentNode.removeChild(b);a.div.className=a.div.className.replace("collapsed","")}},ViewSource:{label:"view plain",func:function(b,a){var d=dp.sh.Utils.FixForBlogger(a.originalCode).replace(/</g,"&lt;");var c=window.open("","_blank","width=750, height=400, location=0, resizable=1, menubar=0, scrollbars=0");c.document.write('<textarea style="width:99%;height:99%">'+d+"</textarea>");c.document.close()}},CopyToClipboard:{label:"copy to clipboard",check:function(){return window.clipboardData!=null||dp.sh.ClipboardSwf!=null},func:function(b,a){var d=dp.sh.Utils.FixForBlogger(a.originalCode).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");if(window.clipboardData){window.clipboardData.setData("text",d)}else{if(dp.sh.ClipboardSwf!=null){var c=a.flashCopier;if(c==null){c=document.createElement("div");a.flashCopier=c;a.div.appendChild(c)}c.innerHTML='<embed src="'+dp.sh.ClipboardSwf+'" FlashVars="clipboard='+encodeURIComponent(d)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>'}}alert("The code is in your clipboard now")}},PrintSource:{label:"print",func:function(b,a){var c=document.createElement("IFRAME");var d=null;c.style.cssText="position:absolute;width:0px;height:0px;left:-500px;top:-500px;";document.body.appendChild(c);d=c.contentWindow.document;dp.sh.Utils.CopyStyles(d,window.document);d.write('<div class="'+a.div.className.replace("collapsed","")+' printing">'+a.div.innerHTML+"</div>");d.close();c.contentWindow.focus();c.contentWindow.print();alert("Printing...");document.body.removeChild(c)}},About:{label:"?",func:function(a){var b=window.open("","_blank","dialog,width=300,height=150,scrollbars=0");var c=b.document;dp.sh.Utils.CopyStyles(c,window.document);c.write(dp.sh.Strings.AboutDialog.replace("{V}",dp.sh.Version));c.close();b.focus()}}};dp.sh.Toolbar.Create=function(a){var b=document.createElement("DIV");return b};dp.sh.Toolbar.Command=function(a,b){var c=b;while(c!=null&&c.className.indexOf("dp-highlighter")==-1){c=c.parentNode}if(c!=null){dp.sh.Toolbar.Commands[a].func(b,c.highlighter)}};dp.sh.Utils.CopyStyles=function(a,d){var b=d.getElementsByTagName("link");for(var c=0;c<b.length;c++){if(b[c].rel.toLowerCase()=="stylesheet"){a.write('<link type="text/css" rel="stylesheet" href="'+b[c].href+'"></link>')}}};dp.sh.Utils.FixForBlogger=function(a){return(dp.sh.isBloggerMode==true)?a.replace(/<br\s*\/?>|&lt;br\s*\/?&gt;/gi,"\n"):a};dp.sh.RegexLib={MultiLineCComments:new RegExp("/\\*[\\s\\S]*?\\*/","gm"),SingleLineCComments:new RegExp("//.*$","gm"),SingleLinePerlComments:new RegExp("#.*$","gm"),DoubleQuotedString:new RegExp('"(?:\\.|(\\\\\\")|[^\\""\\n])*"',"g"),SingleQuotedString:new RegExp("'(?:\\.|(\\\\\\')|[^\\''\\n])*'","g")};dp.sh.Match=function(c,a,b){this.value=c;this.index=a;this.length=c.length;this.css=b};dp.sh.Highlighter=function(){this.noGutter=false;this.addControls=true;this.collapse=false;this.tabsToSpaces=true;this.wrapColumn=80;this.showColumns=true};dp.sh.Highlighter.SortCallback=function(b,a){if(b.index<a.index){return -1}else{if(b.index>a.index){return 1}else{if(b.length<a.length){return -1}else{if(b.length>a.length){return 1}}}}return 0};dp.sh.Highlighter.prototype.CreateElement=function(b){var a=document.createElement(b);a.highlighter=this;return a};dp.sh.Highlighter.prototype.GetMatches=function(d,c){var b=0;var a=null;while((a=d.exec(this.code))!=null){this.matches[this.matches.length]=new dp.sh.Match(a[0],a.index,c)}};dp.sh.Highlighter.prototype.AddBit=function(e,c){if(e==null||e.length==0){return}var d=this.CreateElement("SPAN");e=e.replace(/ /g,"&nbsp;");e=e.replace(/</g,"&lt;");e=e.replace(/\n/gm,"&nbsp;<br>");if(c!=null){if((/br/gi).test(e)){var a=e.split("&nbsp;<br>");for(var b=0;b<a.length;b++){d=this.CreateElement("SPAN");d.className=c;d.innerHTML=a[b];this.div.appendChild(d);if(b+1<a.length){this.div.appendChild(this.CreateElement("BR"))}}}else{d.className=c;d.innerHTML=e;this.div.appendChild(d)}}else{d.innerHTML=e;this.div.appendChild(d)}};dp.sh.Highlighter.prototype.IsInside=function(a){if(a==null||a.length==0){return false}for(var b=0;b<this.matches.length;b++){var d=this.matches[b];if(d==null){continue}if((a.index>d.index)&&(a.index<d.index+d.length)){return true}}return false};dp.sh.Highlighter.prototype.ProcessRegexList=function(){for(var a=0;a<this.regexList.length;a++){this.GetMatches(this.regexList[a].regex,this.regexList[a].css)}};dp.sh.Highlighter.prototype.ProcessSmartTabs=function(f){var b=f.split("\n");var a="";var g=4;var d="\t";function h(j,p,n){var o=j.substr(0,p);var m=j.substr(p+1,j.length);var k="";for(var l=0;l<n;l++){k+=" "}return o+k+m}function e(i,k){if(i.indexOf(d)==-1){return i}var l=0;while((l=i.indexOf(d))!=-1){var j=k-l%k;i=h(i,l,j)}return i}for(var c=0;c<b.length;c++){a+=e(b[c],g)+"\n"}return a};dp.sh.Highlighter.prototype.SwitchToList=function(){var e=this.div.innerHTML.replace(/<(br)\/?>/gi,"\n");var j=e.split("\n");if(this.addControls==true){this.bar.appendChild(dp.sh.Toolbar.Create(this))}if(this.showColumns){var a=this.CreateElement("div");var c=this.CreateElement("div");var b=10;var d=1;while(d<=150){if(d%b==0){a.innerHTML+=d;d+=(d+"").length}else{a.innerHTML+="&middot;";d++}}c.className="columns";c.appendChild(a);this.bar.appendChild(c)}for(var d=0,h=this.firstLine;d<j.length-1;d++,h++){var g=this.CreateElement("LI");var f=this.CreateElement("SPAN");g.className=(d%2==0)?"alt":"";f.innerHTML=j[d]+"&nbsp;";g.appendChild(f);this.ol.appendChild(g)}this.div.innerHTML=""};dp.sh.Highlighter.prototype.Highlight=function(d){function f(i){return i.replace(/^\s*(.*?)[\s\n]*$/g,"$1")}function g(i){return i.replace(/\n*$/,"").replace(/^\n*/,"")}function b(p){var j=dp.sh.Utils.FixForBlogger(p).split("\n");var o=new Array();var m=new RegExp("^\\s*","g");var l=1000;for(var k=0;k<j.length&&l>0;k++){if(f(j[k]).length==0){continue}var n=m.exec(j[k]);if(n!=null&&n.length>0){l=Math.min(n[0].length,l)}}if(l>0){for(var k=0;k<j.length;k++){j[k]=j[k].substr(l)}}return j.join("\n")}function e(i,k,j){return i.substr(k,j-k)}var h=0;if(d==null){d=""}this.originalCode=d;this.code=g(d);this.div=this.CreateElement("DIV");this.bar=this.CreateElement("DIV");this.ol=this.CreateElement("OL");this.matches=new Array();this.div.className="dp-highlighter";this.div.highlighter=this;this.bar.className="bar";this.ol.start=this.firstLine;if(this.CssClass!=null){this.ol.className=this.CssClass}if(this.collapse){this.div.className+=" collapsed"}if(this.noGutter){this.div.className+=" nogutter"}if(this.tabsToSpaces==true){this.code=this.ProcessSmartTabs(this.code)}this.ProcessRegexList();if(this.matches.length==0){this.AddBit(this.code,null);this.SwitchToList();this.div.appendChild(this.bar);this.div.appendChild(this.ol);return}this.matches=this.matches.sort(dp.sh.Highlighter.SortCallback);for(var c=0;c<this.matches.length;c++){if(this.IsInside(this.matches[c])){this.matches[c]=null}}for(var c=0;c<this.matches.length;c++){var a=this.matches[c];if(a==null||a.length==0){continue}this.AddBit(e(this.code,h,a.index),null);this.AddBit(a.value,a.css);h=a.index+a.length}this.AddBit(this.code.substr(h),null);this.SwitchToList();this.div.appendChild(this.bar);this.div.appendChild(this.ol)};dp.sh.Highlighter.prototype.GetKeywords=function(a){return"\\b"+a.replace(/ /g,"\\b|\\b")+"\\b"};dp.sh.BloggerMode=function(){dp.sh.isBloggerMode=true};dp.sh.HighlightAll=function(b,e,d,h,j,c){function g(p,m,o){var l=document.getElementsByTagName(o);for(var n=0;n<l.length;n++){if(l[n].getAttribute("name")==m){p.push(l[n])}}}var a=[];var k=Array.prototype.slice.call(arguments,1);g(a,b,"pre");g(a,b,"textarea");for(var f=0;f<a.length;f++){dp.sh.Highlight.apply(dp.sh,[a[f]].concat(k))}};dp.sh.Highlight=function(g,e,d,k,m,b){function i(){var t={};var q;var s;for(var r in dp.sh.Brushes){q=dp.sh.Brushes[r].Aliases;if(!q){continue}for(s=0;s<q.length;s++){t[q[s]]=r}}return t}function h(){var q=arguments;for(var r=0;r<q.length;r++){if(!q[r]){continue}if(typeof(q[r])=="string"){return q[r]+""}if(typeof(q[r])=="object"&&q[r].value){return q[r].value+""}}return null}function o(s,r){for(var q=0;q<r.length;q++){if(r[q]==s){return true}}return false}function n(r,v,q){var t=new RegExp("^"+r+"\\[(\\w+)\\]$","gi");var u;for(var s=0;s<v.length;s++){u=t.exec(v[s]);if(u){return u[1]}}return q}function a(q){var r=document.getElementsByTagName("head")[0];if(q.Style&&r){var s=document.createElement("style");s.setAttribute("type","text/css");if(s.styleSheet){s.styleSheet.cssText=q.Style}else{var t=document.createTextNode(q.Style);s.appendChild(t)}r.appendChild(s)}}var l;var c=i();var j="innerHTML";var p=h(g.attributes["class"],g.className,g.attributes.language,g.language);var f="";if(!p){return}p=p.split(":");f=p[0].toLowerCase();if(!c[f]){return}l=new dp.sh.Brushes[c[f]]();g.style.display="none";l.noGutter=typeof e=="undefined"?o("nogutter",p):!e;l.addControls=typeof d=="undefined"?!o("nocontrols",p):d;l.collapse=typeof k=="undefined"?o("collapse",p):k;l.showColumns=typeof b=="undefined"?o("showcolumns",p):b;if(!dp.sh.InjectedStyles[f]){a(l);dp.sh.InjectedStyles[f]=true}l.firstLine=typeof m=="undefined"?parseInt(n("firstline",p,1),10):m;l.Highlight(g[j]);l.source=g;g.parentNode.insertBefore(l.div,g)};
;
dp.sh.Brushes.Cpp=function(){var b="ATOM BOOL BOOLEAN BYTE CHAR COLORREF DWORD DWORDLONG DWORD_PTR DWORD32 DWORD64 FLOAT HACCEL HALF_PTR HANDLE HBITMAP HBRUSH HCOLORSPACE HCONV HCONVLIST HCURSOR HDC HDDEDATA HDESK HDROP HDWP HENHMETAFILE HFILE HFONT HGDIOBJ HGLOBAL HHOOK HICON HINSTANCE HKEY HKL HLOCAL HMENU HMETAFILE HMODULE HMONITOR HPALETTE HPEN HRESULT HRGN HRSRC HSZ HWINSTA HWND INT INT_PTR INT32 INT64 LANGID LCID LCTYPE LGRPID LONG LONGLONG LONG_PTR LONG32 LONG64 LPARAM LPBOOL LPBYTE LPCOLORREF LPCSTR LPCTSTR LPCVOID LPCWSTR LPDWORD LPHANDLE LPINT LPLONG LPSTR LPTSTR LPVOID LPWORD LPWSTR LRESULT PBOOL PBOOLEAN PBYTE PCHAR PCSTR PCTSTR PCWSTR PDWORDLONG PDWORD_PTR PDWORD32 PDWORD64 PFLOAT PHALF_PTR PHANDLE PHKEY PINT PINT_PTR PINT32 PINT64 PLCID PLONG PLONGLONG PLONG_PTR PLONG32 PLONG64 POINTER_32 POINTER_64 PSHORT PSIZE_T PSSIZE_T PSTR PTBYTE PTCHAR PTSTR PUCHAR PUHALF_PTR PUINT PUINT_PTR PUINT32 PUINT64 PULONG PULONGLONG PULONG_PTR PULONG32 PULONG64 PUSHORT PVOID PWCHAR PWORD PWSTR SC_HANDLE SC_LOCK SERVICE_STATUS_HANDLE SHORT SIZE_T SSIZE_T TBYTE TCHAR UCHAR UHALF_PTR UINT UINT_PTR UINT32 UINT64 ULONG ULONGLONG ULONG_PTR ULONG32 ULONG64 USHORT USN VOID WCHAR WORD WPARAM WPARAM WPARAM char bool short int __int32 __int64 __int8 __int16 long float double __wchar_t clock_t _complex _dev_t _diskfree_t div_t ldiv_t _exception _EXCEPTION_POINTERS FILE _finddata_t _finddatai64_t _wfinddata_t _wfinddatai64_t __finddata64_t __wfinddata64_t _FPIEEE_RECORD fpos_t _HEAPINFO _HFILE lconv intptr_t jmp_buf mbstate_t _off_t _onexit_t _PNH ptrdiff_t _purecall_handler sig_atomic_t size_t _stat __stat64 _stati64 terminate_function time_t __time64_t _timeb __timeb64 tm uintptr_t _utimbuf va_list wchar_t wctrans_t wctype_t wint_t signed";var a="break case catch class const __finally __exception __try const_cast continue private public protected __declspec default delete deprecated dllexport dllimport do dynamic_cast else enum explicit extern if for friend goto inline mutable naked namespace new noinline noreturn nothrow register reinterpret_cast return selectany sizeof static static_cast struct switch template this thread throw true false try typedef typeid typename union using uuid virtual void volatile whcar_t while";this.regexList=[{regex:dp.sh.RegexLib.SingleLineCComments,css:"comment"},{regex:dp.sh.RegexLib.MultiLineCComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\b([\\d]+(\\.[\\d]+)?|0x[a-f0-9]+)\\b","gi"),css:"number"},{regex:new RegExp("^ *#.*","gm"),css:"preprocessor"},{regex:new RegExp(this.GetKeywords(b),"gm"),css:"datatypes"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"}];this.CssClass="dp-cpp";this.Style=".dp-cpp .datatypes { color: #2E8B57; font-weight: bold; }"};dp.sh.Brushes.Cpp.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Cpp.Aliases=["cpp","c","c++"];
;
dp.sh.Brushes.CSharp=function(){var a="abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach get goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed set short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual void while";this.regexList=[{regex:dp.sh.RegexLib.SingleLineCComments,css:"comment"},{regex:dp.sh.RegexLib.MultiLineCComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\b([\\d]+(\\.[\\d]+)?|0x[a-f0-9]+)\\b","gi"),css:"number"},{regex:new RegExp("^\\s*#.*","gm"),css:"preprocessor"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"}];this.CssClass="dp-c";this.Style=".dp-c .vars { color: #d00; }"};dp.sh.Brushes.CSharp.prototype=new dp.sh.Highlighter();dp.sh.Brushes.CSharp.Aliases=["c#","c-sharp","csharp"];
;
dp.sh.Brushes.CSS=function(){var b="ascent azimuth background-attachment background-color background-image background-position background-repeat background baseline bbox border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border cap-height caption-side centerline clear clip color content counter-increment counter-reset cue-after cue-before cue cursor definition-src descent direction display elevation empty-cells float font-size-adjust font-family font-size font-stretch font-style font-variant font-weight font height letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-top margin-right margin-bottom margin-left margin marker-offset marks mathline max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page page-break-after page-break-before page-break-inside pause pause-after pause-before pitch pitch-range play-during position quotes richness size slope src speak-header speak-numeral speak-punctuation speak speech-rate stemh stemv stress table-layout text-align text-decoration text-indent text-shadow text-transform unicode-bidi unicode-range units-per-em vertical-align visibility voice-family volume white-space widows width widths word-spacing x-height z-index";var a="above absolute all always aqua armenian attr aural auto avoid baseline behind below bidi-override black blink block blue bold bolder both bottom braille capitalize caption center center-left center-right circle close-quote code collapse compact condensed continuous counter counters crop cross crosshair cursive dashed decimal decimal-leading-zero default digits disc dotted double embed embossed e-resize expanded extra-condensed extra-expanded fantasy far-left far-right fast faster fixed format fuchsia gray green groove handheld hebrew help hidden hide high higher icon inline-table inline inset inside invert italic justify landscape large larger left-side left leftwards level lighter lime line-through list-item local loud lower-alpha lowercase lower-greek lower-latin lower-roman lower low ltr marker maroon medium message-box middle mix move narrower navy ne-resize no-close-quote none no-open-quote no-repeat normal nowrap n-resize nw-resize oblique olive once open-quote outset outside overline pointer portrait pre print projection purple red relative repeat repeat-x repeat-y rgb ridge right right-side rightwards rtl run-in screen scroll semi-condensed semi-expanded separate se-resize show silent silver slower slow small small-caps small-caption smaller soft solid speech spell-out square s-resize static status-bar sub super sw-resize table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group teal text-bottom text-top thick thin top transparent tty tv ultra-condensed ultra-expanded underline upper-alpha uppercase upper-latin upper-roman url visible wait white wider w-resize x-fast x-high x-large x-loud x-low x-slow x-small x-soft xx-large xx-small yellow";var c="[mM]onospace [tT]ahoma [vV]erdana [aA]rial [hH]elvetica [sS]ans-serif [sS]erif";this.regexList=[{regex:dp.sh.RegexLib.MultiLineCComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\#[a-zA-Z0-9]{3,6}","g"),css:"value"},{regex:new RegExp("(-?\\d+)(.\\d+)?(px|em|pt|:|%|)","g"),css:"value"},{regex:new RegExp("!important","g"),css:"important"},{regex:new RegExp(this.GetKeywordsCSS(b),"gm"),css:"keyword"},{regex:new RegExp(this.GetValuesCSS(a),"g"),css:"value"},{regex:new RegExp(this.GetValuesCSS(c),"g"),css:"value"}];this.CssClass="dp-css";this.Style=".dp-css .value { color: black; }.dp-css .important { color: red; }"};dp.sh.Highlighter.prototype.GetKeywordsCSS=function(a){return"\\b([a-z_]|)"+a.replace(/ /g,"(?=:)\\b|\\b([a-z_\\*]|\\*|)")+"(?=:)\\b"};dp.sh.Highlighter.prototype.GetValuesCSS=function(a){return"\\b"+a.replace(/ /g,"(?!-)(?!:)\\b|\\b()")+":\\b"};dp.sh.Brushes.CSS.prototype=new dp.sh.Highlighter();dp.sh.Brushes.CSS.Aliases=["css"];
;
dp.sh.Brushes.Delphi=function(){var a="abs addr and ansichar ansistring array as asm begin boolean byte cardinal case char class comp const constructor currency destructor div do double downto else end except exports extended false file finalization finally for function goto if implementation in inherited int64 initialization integer interface is label library longint longword mod nil not object of on or packed pansichar pansistring pchar pcurrency pdatetime pextended pint64 pointer private procedure program property pshortstring pstring pvariant pwidechar pwidestring protected public published raise real real48 record repeat set shl shortint shortstring shr single smallint string then threadvar to true try type unit until uses val var varirnt while widechar widestring with word write writeln xor";this.regexList=[{regex:new RegExp("\\(\\*[\\s\\S]*?\\*\\)","gm"),css:"comment"},{regex:new RegExp("{(?!\\$)[\\s\\S]*?}","gm"),css:"comment"},{regex:dp.sh.RegexLib.SingleLineCComments,css:"comment"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\{\\$[a-zA-Z]+ .+\\}","g"),css:"directive"},{regex:new RegExp("\\b[\\d\\.]+\\b","g"),css:"number"},{regex:new RegExp("\\$[a-zA-Z0-9]+\\b","g"),css:"number"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"}];this.CssClass="dp-delphi";this.Style=".dp-delphi .number { color: blue; }.dp-delphi .directive { color: #008284; }.dp-delphi .vars { color: #000; }"};dp.sh.Brushes.Delphi.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Delphi.Aliases=["delphi","pascal"];
;
dp.sh.Brushes.Java=function(){var a="abstract assert boolean break byte case catch char class const continue default do double else enum extends false final finally float for goto if implements import instanceof int interface long native new null package private protected public return short static strictfp super switch synchronized this throw throws true transient try void volatile while";this.regexList=[{regex:dp.sh.RegexLib.SingleLineCComments,css:"comment"},{regex:dp.sh.RegexLib.MultiLineCComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\b([\\d]+(\\.[\\d]+)?|0x[a-f0-9]+)\\b","gi"),css:"number"},{regex:new RegExp("(?!\\@interface\\b)\\@[\\$\\w]+\\b","g"),css:"annotation"},{regex:new RegExp("\\@interface\\b","g"),css:"keyword"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"}];this.CssClass="dp-j";this.Style=".dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }"};dp.sh.Brushes.Java.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Java.Aliases=["java"];
;
dp.sh.Brushes.JScript=function(){var a="abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends false final finally float for function goto if implements import in instanceof int interface long native new null package private protected public return short static super switch synchronized this throw throws transient true try typeof var void volatile while with";this.regexList=[{regex:dp.sh.RegexLib.SingleLineCComments,css:"comment"},{regex:dp.sh.RegexLib.MultiLineCComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\b([\\d]+(\\.[\\d]+)?|0x[a-f0-9]+)\\b","gi"),css:"number"},{regex:new RegExp("^\\s*#.*","gm"),css:"preprocessor"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"}];this.CssClass="dp-c"};dp.sh.Brushes.JScript.prototype=new dp.sh.Highlighter();dp.sh.Brushes.JScript.Aliases=["js","jscript","javascript"];
;
dp.sh.Brushes.Php=function(){var a="abs acos acosh addcslashes addslashes array_change_key_case array_chunk array_combine array_count_values array_diff array_diff_assoc array_diff_key array_diff_uassoc array_diff_ukey array_fill array_filter array_flip array_intersect array_intersect_assoc array_intersect_key array_intersect_uassoc array_intersect_ukey array_key_exists array_keys array_map array_merge array_merge_recursive array_multisort array_pad array_pop array_product array_push array_rand array_reduce array_reverse array_search array_shift array_slice array_splice array_sum array_udiff array_udiff_assoc array_udiff_uassoc array_uintersect array_uintersect_assoc array_uintersect_uassoc array_unique array_unshift array_values array_walk array_walk_recursive atan atan2 atanh base64_decode base64_encode base_convert basename bcadd bccomp bcdiv bcmod bcmul bindec bindtextdomain bzclose bzcompress bzdecompress bzerrno bzerror bzerrstr bzflush bzopen bzread bzwrite ceil chdir checkdate checkdnsrr chgrp chmod chop chown chr chroot chunk_split class_exists closedir closelog copy cos cosh count count_chars date decbin dechex decoct deg2rad delete ebcdic2ascii echo empty end ereg ereg_replace eregi eregi_replace error_log error_reporting escapeshellarg escapeshellcmd eval exec exit exp explode extension_loaded feof fflush fgetc fgetcsv fgets fgetss file_exists file_get_contents file_put_contents fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype floatval flock floor flush fmod fnmatch fopen fpassthru fprintf fputcsv fputs fread fscanf fseek fsockopen fstat ftell ftok getallheaders getcwd getdate getenv gethostbyaddr gethostbyname gethostbynamel getimagesize getlastmod getmxrr getmygid getmyinode getmypid getmyuid getopt getprotobyname getprotobynumber getrandmax getrusage getservbyname getservbyport gettext gettimeofday gettype glob gmdate gmmktime ini_alter ini_get ini_get_all ini_restore ini_set interface_exists intval ip2long is_a is_array is_bool is_callable is_dir is_double is_executable is_file is_finite is_float is_infinite is_int is_integer is_link is_long is_nan is_null is_numeric is_object is_readable is_real is_resource is_scalar is_soap_fault is_string is_subclass_of is_uploaded_file is_writable is_writeable mkdir mktime nl2br parse_ini_file parse_str parse_url passthru pathinfo readlink realpath rewind rewinddir rmdir round str_ireplace str_pad str_repeat str_replace str_rot13 str_shuffle str_split str_word_count strcasecmp strchr strcmp strcoll strcspn strftime strip_tags stripcslashes stripos stripslashes stristr strlen strnatcasecmp strnatcmp strncasecmp strncmp strpbrk strpos strptime strrchr strrev strripos strrpos strspn strstr strtok strtolower strtotime strtoupper strtr strval substr substr_compare";var b="and or xor __FILE__ __LINE__ array as break case cfunction class const continue declare default die do else elseif empty enddeclare endfor endforeach endif endswitch endwhile extends for foreach function include include_once global if new old_function return static switch use require require_once var while __FUNCTION__ __CLASS__ __METHOD__ abstract interface public implements extends private protected throw";this.regexList=[{regex:dp.sh.RegexLib.SingleLineCComments,css:"comment"},{regex:dp.sh.RegexLib.MultiLineCComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp("\\b([\\d]+(\\.[\\d]+)?|0x[a-f0-9]+)\\b","gi"),css:"number"},{regex:new RegExp("\\$\\w+","g"),css:"vars"},{regex:new RegExp(this.GetKeywords(a),"gmi"),css:"func"},{regex:new RegExp(this.GetKeywords(b),"gm"),css:"keyword"}];this.CssClass="dp-c"};dp.sh.Brushes.Php.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Php.Aliases=["php"];
;
dp.sh.Brushes.Python=function(){var b="and assert break class continue def del elif else except exec finally for from global if import in is lambda not or pass print raise return try yield while";var a="None True False self cls class_";this.regexList=[{regex:dp.sh.RegexLib.SingleLinePerlComments,css:"comment"},{regex:new RegExp("^\\s*@\\w+","gm"),css:"decorator"},{regex:new RegExp("(['\"]{3})([^\\1])*?\\1","gm"),css:"comment"},{regex:new RegExp('"(?!")(?:\\.|\\\\\\"|[^\\""\\n\\r])*"',"gm"),css:"string"},{regex:new RegExp("'(?!')*(?:\\.|(\\\\\\')|[^\\''\\n\\r])*'","gm"),css:"string"},{regex:new RegExp("\\b\\d+\\.?\\w*","g"),css:"number"},{regex:new RegExp(this.GetKeywords(b),"gm"),css:"keyword"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"special"}];this.CssClass="dp-py";this.Style=".dp-py .builtins { color: #ff1493; }.dp-py .magicmethods { color: #808080; }.dp-py .exceptions { color: brown; }.dp-py .types { color: brown; font-style: italic; }.dp-py .commonlibs { color: #8A2BE2; font-style: italic; }"};dp.sh.Brushes.Python.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Python.Aliases=["py","python"];
;
dp.sh.Brushes.Ruby=function(){var a="alias and BEGIN begin break case class def define_method defined do each else elsif END end ensure false for if in module new next nil not or raise redo rescue retry return self super then throw true undef unless until when while yield";var b="Array Bignum Binding Class Continuation Dir Exception FalseClass File::Stat File Fixnum Fload Hash Integer IO MatchData Method Module NilClass Numeric Object Proc Range Regexp String Struct::TMS Symbol ThreadGroup Thread Time TrueClass";this.regexList=[{regex:dp.sh.RegexLib.SingleLinePerlComments,css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp(":[a-z][A-Za-z0-9_]*","g"),css:"symbol"},{regex:new RegExp("(\\$|@@|@)\\w+","g"),css:"variable"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"},{regex:new RegExp(this.GetKeywords(b),"gm"),css:"builtin"}];this.CssClass="dp-rb";this.Style=".dp-rb .symbol { color: #a70; }.dp-rb .variable { color: #a70; font-weight: bold; }"};dp.sh.Brushes.Ruby.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Ruby.Aliases=["ruby","rails","ror"];
;
dp.sh.Brushes.Sql=function(){var b="abs avg case cast coalesce convert count current_timestamp current_user day isnull left lower month nullif replace right session_user space substring sum system_user upper user year";var c="absolute action add after alter as asc at authorization begin bigint binary bit by cascade char character check checkpoint close collate column commit committed connect connection constraint contains continue create cube current current_date current_time cursor database date deallocate dec decimal declare default delete desc distinct double drop dynamic else end end-exec escape except exec execute false fetch first float for force foreign forward free from full function global goto grant group grouping having hour ignore index inner insensitive insert instead int integer intersect into is isolation key last level load local max min minute modify move name national nchar next no numeric of off on only open option order out output partial password precision prepare primary prior privileges procedure public read real references relative repeatable restrict return returns revoke rollback rollup rows rule schema scroll second section select sequence serializable set size smallint static statistics table temp temporary then time timestamp to top transaction translation trigger true truncate uncommitted union unique update values varchar varying view when where with work";var a="all and any between cross in join like not null or outer some";this.regexList=[{regex:new RegExp("--(.*)$","gm"),css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:dp.sh.RegexLib.SingleQuotedString,css:"string"},{regex:new RegExp(this.GetKeywords(b),"gmi"),css:"func"},{regex:new RegExp(this.GetKeywords(a),"gmi"),css:"op"},{regex:new RegExp(this.GetKeywords(c),"gmi"),css:"keyword"}];this.CssClass="dp-sql";this.Style=".dp-sql .func { color: #ff1493; }.dp-sql .op { color: #808080; }"};dp.sh.Brushes.Sql.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Sql.Aliases=["sql"];
;
dp.sh.Brushes.Vb=function(){var a="AddHandler AddressOf AndAlso Alias And Ansi As Assembly Auto Boolean ByRef Byte ByVal Call Case Catch CBool CByte CChar CDate CDec CDbl Char CInt Class CLng CObj Const CShort CSng CStr CType Date Decimal Declare Default Delegate Dim DirectCast Do Double Each Else ElseIf End Enum Erase Error Event Exit False Finally For Friend Function Get GetType GoSub GoTo Handles If Implements Imports In Inherits Integer Interface Is Let Lib Like Long Loop Me Mod Module MustInherit MustOverride MyBase MyClass Namespace New Next Not Nothing NotInheritable NotOverridable Object On Option Optional Or OrElse Overloads Overridable Overrides ParamArray Preserve Private Property Protected Public RaiseEvent ReadOnly ReDim REM RemoveHandler Resume Return Select Set Shadows Shared Short Single Static Step Stop String Structure Sub SyncLock Then Throw To True Try TypeOf Unicode Until Variant When While With WithEvents WriteOnly Xor";this.regexList=[{regex:new RegExp("'.*$","gm"),css:"comment"},{regex:dp.sh.RegexLib.DoubleQuotedString,css:"string"},{regex:new RegExp("^\\s*#.*","gm"),css:"preprocessor"},{regex:new RegExp(this.GetKeywords(a),"gm"),css:"keyword"}];this.CssClass="dp-vb"};dp.sh.Brushes.Vb.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Vb.Aliases=["vb","vb.net"];
;
dp.sh.Brushes.Xml=function(){this.CssClass="dp-xml";this.Style=".dp-xml .cdata { color: #ff1493; }.dp-xml .tag, .dp-xml .tag-name { color: #069; font-weight: bold; }.dp-xml .attribute { color: red; }.dp-xml .attribute-value { color: blue; }"};dp.sh.Brushes.Xml.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Xml.Aliases=["xml","xhtml","xslt","html","xhtml"];dp.sh.Brushes.Xml.prototype.ProcessRegexList=function(){function c(f,e){f[f.length]=e}var b=0;var a=null;var d=null;this.GetMatches(new RegExp("(?:&lt;|<)\\!\\[[\\w\\s]*\\[[^\\]]*\\]\\](?:&gt;|>)","gm"),"cdata");this.GetMatches(new RegExp("(&lt;|<)!--\\s*.*?\\s*--(&gt;|>)","gm"),"comments");d=new RegExp("([:\\w-.]+)\\s*=\\s*(\".*?\"|'.*?'|\\w+)*|(\\w+)","gm");while((a=d.exec(this.code))!=null){if(a[1]==null){continue}c(this.matches,new dp.sh.Match(a[1],a.index,"attribute"));if(a[2]!=undefined){c(this.matches,new dp.sh.Match(a[2],a.index+a[0].indexOf(a[2]),"attribute-value"))}}this.GetMatches(new RegExp("(&lt;|<)/*\\?*(?!\\!)|/*\\?*(&gt;|>)","gm"),"tag");d=new RegExp("(?:&lt;|<)/*\\?*\\s*([:\\w-.]+)","gm");while((a=d.exec(this.code))!=null){c(this.matches,new dp.sh.Match(a[1],a.index+a[0].indexOf(a[1]),"tag-name"))}};
;
dp.sh.Brushes.Plain=function(){var a="";this.regexList=[];this.CssClass="dp-c"};dp.sh.Brushes.Plain.prototype=new dp.sh.Highlighter();dp.sh.Brushes.Plain.Aliases=["plain"];
;
jive.namespace("rte");if(!jive.rte.renderedContent){jive.rte.renderedContent=(function(){function c(f,e){var g=$j.extend({},{contentSelector:"div.jive-rendered-content",syntaxSelector:'pre[name="code"], textarea[name="code"]'},e||{});if(f){if(typeof f.getContent=="function"){f=f.getContent()}}else{f=document}var d=this;jive.conc.nextTick(function(){var h=$j(g.contentSelector,f);d.emit("renderedContentWithSelector",h,g);jive.bindLightboxMedia({context:$j(f)})})}function a(d,e){d.find("table").each(function(){var f=$j(this);var g=$j.extend({},{textExtraction:"complex"},f.data("tablesorter")||{});f.tablesorter(g)});d.find(e.syntaxSelector).each(function(){var f=$j(this);if(!f.data("highlighted")){dp.SyntaxHighlighter.Highlight(this);f.data("highlighted",true)}})}function b(){this.addListener("renderedContent",c);this.addListener("renderedContentWithSelector",a)}jive.conc.observable(b.prototype);return new b()})();$j(function(){jive.rte.renderedContent.emit("renderedContent")})};
;
jive.namespace("rte");jive.rte.ExternalLinkModal=(function(e,c){if(e!="true"){return}if(c==null){c=""}var g=/^(?:[^\/]*\/\/(?:www\.)*)([^\/]*)/;var h=c.split(/\b,+/);var b=[];if(c!=""){$j.each(h,function(){var i=g.exec(this);if(i!=null){b.push(i[1])}else{b.push(this)}})}var d=g.exec(window.location.toString());if(d==null){console.log("Error: could not parse href: "+window.location.toString())}else{b.push(d[1])}jive.rte.renderedContent.addListener("renderedContentWithSelector",a);function a(i){i.find("a").each(function(){$j(this).click(function(j){var k=g.exec($j.trim(this.href))[1];var m=false;$j.each(b,function(){if(k.indexOf(this)==0){m=true;return false}});if(!m){var l=this.href.substring(0,34);if(l!=this.href){l+="..."}$j.get("/external-link-capture.jspa",{url:this.href,linkText:l},f);j.preventDefault()}})})}function f(l){var k=$j("<div/>",{"class":"jive-modal j-modal",id:"js-modalized"}).css({width:"450px"});var j=jive.util.separateScripts(l);var i=j[1];k.html(j[0]);k.lightbox_me({destroyOnClose:true,centered:true});i()}});
;
jive.rest=(function(){var a=_jive_base_url+"/__services/v2/rest";return{url:function(b){return a+b},admin:{url:function(b){return a+"/admin"+b}}}})();jive.rest.corev3=(function(){var a=_jive_base_url+"/api/core/v3";return{url:function(b){return a+b}}})();jive.cached_rest=(function(){var a=_jive_base_url+window.CS_RESOURCE_BASE_URL+"/__services/v2/rest";return{url:function(b){return a+b}}})();jive.app.url=(function(){var a=_jive_base_url;return function(c,d){var b=d||new soy.StringBuilder();b.append(a+c.path);if(!d){return b.toString()}}})();jive.resource=(function(){var a;if(typeof(_jive_resource_url)!="undefined"){var b=_jive_resource_url;a=function(d,e){var c=e||new soy.StringBuilder();c.append(b+d.path);if(!e){return c.toString()}}}else{a=function(){throw"the global variable _jive_resource_url is undefined."}}return{url:a}})();jive.json=(function(){var a=function(b){var c=b.replace(/^throw [^;]*;/,"");return JSON.parse(c)};return{parse:a}})();jive.api=(function(){var c="v1";var a=_jive_base_url+"/__services/v2/rest";var b="apps";return{apps:function(e,d){d=d?d:c;return a+"/"+b+"/"+d+"/"+e}}})();jive.secure=(function(){var b=/^\//,a=/^[a-z]+:/i;return function(c){if(c.match(b)){return"https://"+location.host+c}else{if(c.match(a)){return c.replace(a,"https:")}}}})();
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.error=="undefined"){jive.error={}}if(typeof jive.error.rest=="undefined"){jive.error.rest={}}if(typeof jive.error.rest.soy=="undefined"){jive.error.rest.soy={}}jive.error.rest.soy.errorSaving=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_saving"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");return C?"":B.toString()};jive.error.rest.soy.errorFinding=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_finding"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");return C?"":B.toString()};jive.error.rest.soy.errorUpdating=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_updating"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");return C?"":B.toString()};jive.error.rest.soy.errorDestroying=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_destroying"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");return C?"":B.toString()}
;
jive.RestService=jive.oo.Class.extend(function(a){var b=jQuery;a.resourceType="abstract";a.displayGenericErrorMessages=true;a.putOnUpdate=false;a.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};a.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}b.ajax(b.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.emitSuccess(k)},error:this.errorCallback(j,c),timeout:120000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new jive.conc.Promise(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=b.extend({},this.defaultParams,e);return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new jive.conc.Promise(),c=this;if(e.hasOwnProperty("id")){e=e.id}b.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};a.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};a.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};a.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};a.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.emitError.apply(e,d)};a.displayError=function(c){b(c).message({style:"error"})};a.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};a.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};a.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};a.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};a.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};a.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};a.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}});define("jive.RestService",function(){return jive.RestService});
;
jive.rte.FormAttachmentService=jive.oo.Class.extend(function(a){function d(e,f){if(console){console.log(e,f)}$j("<div>"+e+"</div>").message({style:"error"})}function c(e){return e.substr(e.lastIndexOf(".")+1)}a.init=function(e){this.container=e.container;this.name=e.name;this.attachments=e.attachments||[];this.maxSize=e.maxSize;this.maxFiles=e.maxFiles;this.allowByDefault=e.allowByDefault;this.attachmentExtensions=e.attachmentExtensions||[];this.hasAttachPerms=e.hasAttachPerms||false;for(var f=0;f<this.attachmentExtensions.length;++f){this.attachmentExtensions[f]=c(this.attachmentExtensions[f])}};function b(f){if(f.substr(0,12)=="C:\\fakepath\\"){return f.substr(12)}var e=f.lastIndexOf("/");if(e>=0){return f.substr(e+1)}e=f.lastIndexOf("\\");if(e>=0){return f.substr(e+1)}return f}this.save=function(f){var e=new jive.conc.Promise();e.addErrback(d);if(this.attachments.length>=this.maxFiles){e.emitError(jive.i18n.getMsg("attach.err.tooManyAttchmts.text"))}else{if(f.elem){if(f.filename==null){f.filename=b($j(f.elem).val())}if(f.size==null&&f.elem.files&&f.elem.files[0]&&f.elem.files[0].size){f.size=f.elem.files[0].size}if(!this.isValidType(f)){e.emitError(jive.i18n.i18nText(jive.i18n.getMsg("attach.err.badContentType.text"),[f.filename]))}else{if(!this.isValidSize(f)){e.emitError(jive.i18n.i18nText(jive.i18n.getMsg("attach.err.file_too_large.text"),[f.filename]))}else{$j(f.elem).removeAttr("id").removeAttr("style").hide().attr("name",this.name).appendTo(this.container);this.attachments.push(f);e.emitSuccess()}}}else{e.emitError(jive.i18n.getMsg("attach.err.upload_errors.text"))}}return e};this.findAll=function(){var e=new jive.conc.Promise();e.emitSuccess(this.attachments.slice());return e};this.destroy=function(g){var f=new jive.conc.Promise();f.addErrback(d);var e=false;this.attachments=$j.map(this.attachments,function(h){if(!e&&((h.id!=null&&h.id==g.id)||(h.elem!=null&&h.elem==g.elem))){e=true;return null}return h});if(e&&g.id){$j("<input type='hidden' name='removeAttachmentIDs[]' value='"+g.id+"'/>").appendTo(this.container)}if(e&&g.elem){$j(g.elem).remove()}if(e){f.emitSuccess()}else{f.emitError("attachment not found",g)}return f};this.getRestrictions=function(){var e=new jive.conc.Promise();e.emitSuccess({maxSize:this.maxSize,maxFiles:this.maxFiles,allowByDefault:this.allowByDefault,attachmentExtensions:this.attachmentExtensions,hasAttachPerms:this.hasAttachPerms});return e};a.isValidType=function(g){var e=false;var f=g.filename;var h=c(f);if(this.allowByDefault&&this.attachmentExtensions.indexOf(h)<0){e=true}else{if(!this.allowByDefault&&this.attachmentExtensions.indexOf(h)>=0){e=true}}return e};a.isValidSize=function(e){return e.size==null||this.maxSize>=e.size}});
;
jive.namespace("rte");jive.rte.ImageService=jive.RestService.extend(function(b,c){var f="image/jpeg";var e="image/png";var d=/^data:(image\/[^;,]+)[^,]*,/;b.resourceType="rteImage";b.init=function(g){c.init.call(this,g);b.options=$j.extend({maxWidth:1600,maxHeight:1080,maxDataUrlLength:Math.ceil(2048*1024*8/5),objectId:g.objectId,objectType:g.objectType},g);this.defaultParams={objectId:g.objectId,objectType:g.objectType,containerId:g.containerId,containerType:g.containerType};b.isInitialized=false;b.initPromise=new jive.conc.Promise();this.initSettings()};b.initSettings=function(){var g=new jive.conc.Promise();this.commonAjaxRequest(g,"GET",{url:this.getUrl("settings")}).addCallback(function(h){$j.extend(b.options,h);b.isInitialized=true;b.initPromise.emitSuccess({maxWidth:b.options.maxWidth,maxHeight:b.options.maxHeight,objectId:b.options.objectId,objectType:b.options.objectType})}).addErrback(function(){b.initPromise.emitError()})};b.initCanvas=function(){try{if(this.canvas==null){this.canvas=document.createElement("canvas");this.canvasContext=this.canvas.getContext("2d")}return true}catch(g){return false}};this.getSettings=function(){return b.options};this.scaleClientImage=function(m,l){var j=new jive.conc.Promise();if(!this.initCanvas()){console.log("Warning: couldn't initialize canvas; will not scale");j.emitError("Warning: couldn't initialize canvas; will not scale");return}var i;if(l){i=l}else{var h=d.exec(m);if(h){i=h[1]}else{i=e}}var k=this;function g(){var p=k.options.maxWidth;var o=k.options.maxHeight;var n=$j("<img />").load(function(){if(n.width>p||n.height>o){var q=p/n.width;if(q>o/n.height){q=o/n.height}function r(v,x){var u=Math.round(v*n.width);var s=Math.round(v*n.height);k.canvas.width=u;k.canvas.height=s;k.canvasContext.drawImage(n,0,0,n.width,n.height,0,0,u,s);try{var w=k.canvas.toDataURL(i);if(w.length>k.options.maxDataUrlLength&&i!=f){w=k.canvas.toDataURL(f)}if(w.length>k.options.maxDataUrlLength){i=f;jive.conc.nextTick(function(){r(v*0.8,x)})}else{x.emitSuccess(w)}}catch(t){if(t.code&&t.code==t.SECURITY_ERR){k.canvas=null;k.initCanvas()}else{throw t}}}r(q,j)}else{if(!d.test(m)){r(1,j)}else{j.emitSuccess(m)}}}).attr("src",m).get(0)}if(this.isInitialized){g()}else{b.initPromise.addCallback(g)}return j};this.create=function(h,g){var i=this;var j=new jive.conc.Promise();i.commonAjaxRequest(j,"POST",{url:i.getUrl(null,{name:h}),contentType:"text/plain",processData:false,data:g});return j};this.createFromImageSrc=function(h,i,g){var j=this;var k=new jive.conc.Promise();j.commonAjaxRequest(k,"POST",{url:j.getUrl(null,{name:h},g),contentType:"application/x-www-form-urlencoded",processData:false,data:"url="+encodeURIComponent(i)});return k};function a(h,g,k){try{var j=new XMLHttpRequest();j.open("POST",g,true);j.setRequestHeader("Content-Type","application/octet-stream; charset=UTF-8");j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01");j.setRequestHeader("X-J-Token",_jive_auth_token);j.onreadystatechange=function(){if(j.readyState==4){if(j.status>=200&&j.status<300){k.emitSuccess(JSON.parse(j.responseText))}else{k.emitError(j.responseText)}}};j.send(h);return k}catch(i){k.emitError(i);return k}}this.postFile=function(g){var h=this;var i=new jive.conc.Promise();a(g,h.getUrl(null,{name:g.name,mimeType:g.type}),i);return i};this.update=function(j,g){var h=this;var i=new jive.conc.Promise();h.commonAjaxRequest(i,"PUT",{url:h.getUrl(j),contentType:"text/plain",processData:false,data:g});return i};b.getUrl=function(k,j,i){var g=$j.extend({},this.defaultParams,j||{});var h="?"+$j.param(g);if(k){return(i?i:this.RESOURCE_ENDPOINT)+"/"+k+h}else{return(i?i:this.POST_RESOURCE_ENDPOINT)+h}};b.getUploadUrl=function(){return this.getUrl("upload")}});define("jive.rte.ImageService",function(){return jive.rte.ImageService});
;
jive.namespace("rte");jive.rte.LinkService=jive.RestService.extend(function(a){a.resourceType="rteLink";this.resolve=function(b){var c=this;return c.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c.getUrl({href:b})})};a.getUrl=function(d){var b=$j.extend({},this.defaultParams,d||{});var c="?"+$j.param(b);return this.RESOURCE_ENDPOINT+c}});
;
jive.namespace("rte");jive.rte.FormService=jive.oo.Class.extend(function(a){a.init=function(c){this.$form=c.$form;if(!this.$form||this.$form.length!=1||this.$form.get(0).nodeName.toLowerCase()!="form"){throw new Error("options.$form is required and must select a single form element")}this._formSubmitHandler=null;var e=this;function f(h){var l=true;if(e.$form.data("validator")){var g=e.$form.find(":input").not(":button, :image, :reset, :submit");l=e.$form.data("validator").checkValidity(g,h)}if(e.isFormEnabled()){if(e._formSubmitHandler){return l&&e._formSubmitHandler(h)}else{return l}}var k;for(var j=e.formDisabledTokens.length-1;j>=0;--j){if(typeof e.formDisabledTokens[j]=="string"){k=e.formDisabledTokens[j];break}}if(k){$j(b(k)).message({style:"info"})}return false}var d=this.$form.get(0);if(d.onsubmit){this.setFormSubmitHandler(d.onsubmit);d.onsubmit=null}if(c.formSubmitHandler){this.setFormSubmitHandler(c.formSubmitHandler)}this.$form.unbind("submit").bind("submit",f);this.formDisabledTokens=[]};function b(c){return $j("<div/>").text(c).get(0)}this.setFormSubmitHandler=function(d,c){if(!c){c=this.$form.get(0)}d=$j.proxy(d,c);this._formSubmitHandler=d};this.isFormEnabled=function(){for(var c=this.formDisabledTokens.length-1;c>=0;--c){if(this.formDisabledTokens[c]){return false}}return true};this.setFormEnabled=function(c,d){if(!d){d=true}if(!c){this.formDisabledTokens.push(d);return this.formDisabledTokens.length}else{this.formDisabledTokens[c-1]=false}}});define("jive.rte.FormService",function(){return jive.rte.FormService});
;
jive.namespace("rte");jive.rte.EntitlementService=jive.RestService.extend(function(a,b){a.pluralizedResourceType="emention/restrictedView";a.init=function(d){b.init.call(this,d);a.options=d;var c=this;this.editingObjectID=d.objectID;this.editingObjectType=d.objectType;this.entitlement=d.entitlement;jive.localexchange.addListener("placeChanged",function(e){if(e&&e.id&&e.type){c.changeSpaceInfo(e.id,e.type)}})};a.changeSpaceInfo=function(d,c){this.editingObjectID=d;this.editingObjectType=c};this.checkEntitlement=function(c,f,d){var e=this;var g=new jive.conc.Promise();if(d!=undefined&&c==3){g.emitSuccess(d.indexOf(f)!=-1)}else{if(c&&f){e.commonAjaxRequest(g,"GET",{url:e.getUrl(c,f),contentType:"text/plain",processData:false})}}return g};a.getUrl=function(c,e){var f=[];var d=this;f.push("editingObjectID="+d.editingObjectID);f.push("editingObjectType="+d.editingObjectType);f.push("entitlement="+d.entitlement);f.push("mentionedObjectType="+encodeURI(c));f.push("mentionedObjectID="+encodeURI(e));var g=encodeURI("?"+f.join("&"));return this.RESOURCE_ENDPOINT+g}});define("jive.rte.EntitlementService",function(){return jive.rte.EntitlementService});
;
jive.namespace("soy.func");jive.soy.func.resourceUrl=(function(){function a(b){return b.replace(/^[^\/]/,"/")}return function(f,e,d,h){if(!f){f="/"}var g=d?d:f,c=h.indexOf(g)===0?h.replace(g,""):h,b=e.indexOf(g)===0?e.replace(g,""):e;return g+b+c}})();jive.soy.func.buildParameterString=function(a){if(a){return $j.param(a)}else{return""}};jive.soy.func.normalizeUrl=(function(){var c=/^[a-z]+:/i,b=/^\/+/,a=/\/+$/;return function(e,f){var d=(!e.match(e+"/$"))?e+"/":e;if(!f.match(c)&&f.match(b)&&f.indexOf(d)!==0){e=e.replace(a,"");f=f.replace(b,"");return e+"/"+f}else{return f}}})();jive.soy.func.themeUrl=(function(){return function(b,c){if(!b){b="/"}var a=c.indexOf(b)===0?c.replace(b,""):c;return b+a}})();jive.soy.func.randomString=function(){return Math.random().toString(36).replace(".","")};jive.soy.func.eval=function(b,c,f,a,g){var d=b.split(".").reduce(function(i,h){return i?i[h]:null},window);if(!d){return"ERROR: no template found for "+b}else{try{return d(a,g)||""}catch(e){if(c){if(f){return e+" params:"+JSON.stringify(a)}else{return""}}else{throw e}}}};
;
(function(c){var b={};jive.Template=function a(h,f){try{var d=/^[\w\-]+$/.test(h)?b[h]=b[h]||a(document.getElementById(h).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+h.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',jive.util.escapeHTML($1),'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")}catch(g){throw ("jive.template Error parsing template: "+g)}return f?d(f):d}})(jQuery);
;
var pc=navigator.userAgent.toLowerCase();var ie4_win=(pc.indexOf("win")!=-1)&&(pc.indexOf("msie")!=-1)&&(parseInt(navigator.appVersion)>=4);var is_gecko=pc.indexOf("gecko/")!=-1&&parseFloat(pc.substring(pc.indexOf("gecko/")+6,pc.indexOf("gecko/")+14))>20030108;function styleTag(m,d,h){var e=0;var c=h.scrollTop;var a;if(document.selection){if(document.selection.createRange().parentElement().tagName=="TEXTAREA"){var f=document.selection.createRange().text;e=getSelectionRangeEnd(h);a=_markupText(f,m,d);document.selection.createRange().text=a[0];e+=a[1]}}else{if(typeof(h.selectionStart)!="undefined"&&typeof(h.selectionEnd)!="undefined"){if(h.selectionStart==h.selectionEnd){return}var g=h.textLength;var b=h.selectionStart;var i=h.selectionEnd;if(i==1||i==2){i=g}var l=(h.value).substring(0,b);var k=(h.value).substring(b,i);var j=(h.value).substring(i,g);a=_markupText(k,m,d);h.value=l+a[0]+j;e=i+a[1]}else{return}}if(e>0){setCaretTo(h,e,c)}}function _markupText(k,n,e){var a=trimLeadingSpace(k);k=a[0];var j=a[1];a=trimTrailingSpace(k);k=a[0];var f=a[1];var d=0;if(k.indexOf("\n")>0){var m=k.split("\n");var h="";for(var g=0;g<m.length;g++){var l=m[g];a=trimLeadingSpace(l);l=a[0];var c=a[1];a=trimTrailingSpace(l);l=a[0];var b=a[1];if(l==""){h+=c+l+b}else{h+=c+n+l+e+b;d+=(n.length+e.length)}if(g<m.length-1){h+="\n"}}k=j+h+f}else{k=j+n+k+e+f}a=new Array(2);a[0]=k;a[1]=d;return a}function trimLeadingSpace(c){var b="";while(c.length>0&&(c.charAt(0)==" "||c.charAt(0)=="\n"||c.charAt(0)=="\r")){b+=c.charAt(0);c=c.substring(1)}var a=new Array(2);a[0]=c;a[1]=b;return a}function trimTrailingSpace(c){var b="";while(c.length>0&&(c.charAt(c.length-1)==" "||c.charAt(c.length-1)=="\n"||c.charAt(c.length-1)=="\r")){b+=c.charAt(c.length-1);c=c.substring(0,c.length-1)}var a=new Array(2);a[0]=c;a[1]=b;return a}function getSelectionRangeText(b){if(document.selection){return document.selection.createRange().text}else{if(is_gecko){var c=b.selectionStart;var a=b.selectionEnd;return b.value.substr(c,a-c)}else{return""}}}function getSelectionRangeEnd(b){if(document.selection){var a=document.selection.createRange();var c=a.duplicate();c.moveToElementText(b);c.setEndPoint("EndToEnd",a);var d=c.text.length-a.text.length;return d+a.text.length}else{if(is_gecko){return b.selectionEnd}else{return 0}}}function setCaretTo(b,g,e){b.focus();if(b.createTextRange){var c=0;var d=0;var f=b.value;while(c>-1&&c<g){c=f.indexOf("\r\n",c);if(c>=0){d++;c+=2}}if(d>1){d--}var a=b.createTextRange();a.move("character",(g-d));a.select()}else{if(b.selectionStart){b.setSelectionRange(g,g)}}if(e>0){b.scrollTop=e}}function caret(a){if(ie4_win&&a.createTextRange&&document.selection.createRange().parentElement().tagName=="TEXTAREA"){a.caretPos=document.selection.createRange().duplicate()}}function funcname(b){var a=b.toString().match(/function (\w*)/)[1];if((a==null)||(a.length==0)){return"anonymous"}return a}function stacktrace(){var c="";for(var b=arguments.caller;b!=null;b=b.caller){c+=funcname(b.callee)+"\n";if(b.caller==b){break}}return c}function printStackTrace(){alert("stack trace is "+stacktrace())};
;
function jiveToggleTab(a,b){b.forEach(function(c){$j('[id="'+c+'-tab"]').removeClass("jive-body-tabcurrent active j-ui-elem");$j('[id="'+c+'"]').hide()});$j('[id="'+a+'-tab"]').addClass("jive-body-tabcurrent active j-ui-elem");$j('[id="'+a+'"]').show()}function jiveToggleOptions(a){var b=$j('[id="'+a+'-form"]'),c=$j('[id="'+a+'-hdr"]');if(b.is(":visible")){b.hide();c.removeClass().addClass("jive-compose-hdr-opt-closed")}else{b.show();c.removeClass().addClass("jive-compose-hdr-opt")}}function jiveShowTopicFilter(a){$j('[id="'+a+'"]').toggle()}function jiveToggleSpaceDetails(b){var a=$j('[id="'+b+'"]').toggle();if(a.is(":visible")){$j('[id="'+b+'-less"]').show();$j('[id="'+b+'-more"]').hide()}else{$j('[id="'+b+'-less"]').hide();$j('[id="'+b+'-more"]').show()}}function jiveToggleSpaceDetails2(b){var a=$j('[id="'+b+'"]');if(a.hasClass("jive-space-namedesc-full")){a.removeClass();$j('[id="'+b+'-less"]').hide();$j('[id="'+b+'-more"]').show()}else{a.removeClass().addClass("jive-space-namedesc-full");$j('[id="'+b+'-less"]').show();$j('[id="'+b+'-more"]').hide()}}function callOnLoad(a){$j(document).ready(a)}Jive={};Jive.AlertMessage=function(b,a){a=a||{};var c=$j('[id="'+b+'"]');c.each(function(){if(a.beforeStart){a.beforeStart(this)}});c.fadeIn(1000,function(){var d=$j(this);setTimeout(function(){d.fadeOut(1000,function(){d.each(function(){if(a.afterFinish){a.afterFinish(this)}})})},3000)})};var TimeoutExecutor=$Class.extend({init:function(b,a){this.callback=b;this.timeout=a;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timeoutID=setTimeout(this.onTimerEvent.bind(this),this.timeout)},onTimerEvent:function(){try{this.currentlyExecuting=true;if(this.callback&&this.callback instanceof Function){this.callback()}}finally{this.currentlyExecuting=false;delete this.timeoutID}},cancel:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID}},reset:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID;this.registerCallback()}}});
;
define("jive.XhrStack",function(){return function(){var a=jive.conc.observable({}),c=0,b;var d=function(g,f,e){if(g===c){a.emit.apply(a,Array.prototype.slice.call(arguments,2))}};a.add=function(f,g){c=c+1;a.empty();b=f;var h=d.curry(c,g,"success"),e=d.curry(c,g,"failure");b.then(h).fail(e);return a};a.empty=function(){b&&b.abort();b=undefined;return a};return a}});
;
(function(g,h){g.ui=g.ui||{};var d=/left|center|right/,e=/top|center|bottom/,a="center",f={},b=g.fn.position,c=g.fn.offset;g.fn.position=function(j){if(!j||!j.of){return b.apply(this,arguments)}j=g.extend({},j);var n=g(j.of),m=n[0],p=(j.collision||"flip").split(" "),o=j.offset?j.offset.split(" "):[0,0],l,i,k;if(m.nodeType===9){l=n.width();i=n.height();k={top:0,left:0}}else{if(m.setTimeout){l=n.width();i=n.height();k={top:n.scrollTop(),left:n.scrollLeft()}}else{if(m.preventDefault){j.at="left top";l=i=0;k={top:j.of.pageY,left:j.of.pageX}}else{l=n.outerWidth();i=n.outerHeight();k=n.offset()}}}g.each(["my","at"],function(){var q=(j[this]||"").split(" ");if(q.length===1){q=d.test(q[0])?q.concat([a]):e.test(q[0])?[a].concat(q):[a,a]}q[0]=d.test(q[0])?q[0]:a;q[1]=e.test(q[1])?q[1]:a;j[this]=q});if(p.length===1){p[1]=p[0]}o[0]=parseInt(o[0],10)||0;if(o.length===1){o[1]=o[0]}o[1]=parseInt(o[1],10)||0;if(j.at[0]==="right"){k.left+=l}else{if(j.at[0]===a){k.left+=l/2}}if(j.at[1]==="bottom"){k.top+=i}else{if(j.at[1]===a){k.top+=i/2}}k.left+=o[0];k.top+=o[1];return this.each(function(){var t=g(this),v=t.outerWidth(),s=t.outerHeight(),u=parseInt(g.curCSS(this,"marginLeft",true))||0,r=parseInt(g.curCSS(this,"marginTop",true))||0,x=v+u+(parseInt(g.curCSS(this,"marginRight",true))||0),y=s+r+(parseInt(g.curCSS(this,"marginBottom",true))||0),w=g.extend({},k),q;if(j.my[0]==="right"){w.left-=v}else{if(j.my[0]===a){w.left-=v/2}}if(j.my[1]==="bottom"){w.top-=s}else{if(j.my[1]===a){w.top-=s/2}}if(!f.fractions){w.left=Math.round(w.left);w.top=Math.round(w.top)}q={left:w.left-u,top:w.top-r};g.each(["left","top"],function(A,z){if(g.ui.position[p[A]]){g.ui.position[p[A]][z](w,{targetWidth:l,targetHeight:i,elemWidth:v,elemHeight:s,collisionPosition:q,collisionWidth:x,collisionHeight:y,offset:o,my:j.my,at:j.at})}});if(g.fn.bgiframe){t.bgiframe()}t.offset(g.extend(w,{using:j.using}))})};g.ui.position={fit:{left:function(i,j){var l=g(window),k=j.collisionPosition.left+j.collisionWidth-l.width()-l.scrollLeft();i.left=k>0?i.left-k:Math.max(i.left-j.collisionPosition.left,i.left)},top:function(i,j){var l=g(window),k=j.collisionPosition.top+j.collisionHeight-l.height()-l.scrollTop();i.top=k>0?i.top-k:Math.max(i.top-j.collisionPosition.top,i.top)}},flip:{left:function(j,l){if(l.at[0]===a){return}var n=g(window),m=l.collisionPosition.left+l.collisionWidth-n.width()-n.scrollLeft(),i=l.my[0]==="left"?-l.elemWidth:l.my[0]==="right"?l.elemWidth:0,k=l.at[0]==="left"?l.targetWidth:-l.targetWidth,o=-2*l.offset[0];j.left+=l.collisionPosition.left<0?i+k+o:m>0?i+k+o:0},top:function(j,l){if(l.at[1]===a){return}var n=g(window),m=l.collisionPosition.top+l.collisionHeight-n.height()-n.scrollTop(),i=l.my[1]==="top"?-l.elemHeight:l.my[1]==="bottom"?l.elemHeight:0,k=l.at[1]==="top"?l.targetHeight:-l.targetHeight,o=-2*l.offset[1];j.top+=l.collisionPosition.top<0?i+k+o:m>0?i+k+o:0}}};if(!g.offset.setOffset){g.offset.setOffset=function(m,j){if(/static/.test(g.curCSS(m,"position"))){m.style.position="relative"}var l=g(m),o=l.offset(),i=parseInt(g.curCSS(m,"top",true),10)||0,n=parseInt(g.curCSS(m,"left",true),10)||0,k={top:(j.top-o.top)+i,left:(j.left-o.left)+n};if("using" in j){j.using.call(m,k)}else{l.css(k)}};g.fn.offset=function(i){var j=this[0];if(!j||!j.ownerDocument){return null}if(i){return this.each(function(){g.offset.setOffset(this,i)})}return c.call(this)}}(function(){var j=document.getElementsByTagName("body")[0],q=document.createElement("div"),n,p,k,o,m;n=document.createElement(j?"div":"body");k={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(j){jQuery.extend(k,{position:"absolute",left:"-1000px",top:"-1000px"})}for(var l in k){n.style[l]=k[l]}n.appendChild(q);p=j||document.documentElement;p.insertBefore(n,p.firstChild);q.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";o=g(q).offset(function(i,r){return r}).offset();n.innerHTML="";p.removeChild(n);m=o.top+o.left+(j?2000:0);f.fractions=m>21&&m<22})()}(jQuery));
;
(function(e){var c=e(),d;function f(g){window.clearTimeout(d);b(g.element);d=window.setTimeout(g.show.bind(g,this),g.options.showDelay)}function b(g){c.filter(":visible").not(g).trigger("cardHide").css("visibility","hidden").trigger("cardHidden")}function a(i,g,h){this.element=e(i);this.options=e.extend({},e.fn.hovercard.defaults,h);if(!g){throw new TypeError("HoverCard requires the option: selector")}c=c.add(i);e(document.body).on("mouseenter focusin",g,f.curry(this)).on("mouseleave focusout",g,function(j){window.clearTimeout(d);d=window.setTimeout(b.curry(e()),j)}.curry(this.options.hideDelay));this.element.on("mouseenter focusin",function(){window.clearTimeout(d)});this.element.on("mouseleave focusout",function(j,k){window.clearTimeout(d);d=window.setTimeout(function(){b(e());if(k.type==="focusout"){e(k.target).siblings(":visible").eq(0).focus()}},j)}.curry(this.options.hideDelay))}a.prototype.show=function(g){this.element.trigger(e.Event("cardShow",{relatedTarget:g}));this.position(g);this.element.css("visibility","visible").trigger(e.Event("cardShown",{relatedTarget:g}))};a.prototype.hide=function(){this.element.trigger("cardHide").css("visibility","hidden").trigger("cardHidden")};a.prototype.position=function(g){this.element.position(e.extend({},this.options.position,{of:e(g)}))};e.fn.hovercard=function(g,h){return this.each(function(){if(!e(this).data("hovercard")){e(this).data("hovercard",new a(this,g,h||{}))}})};e.fn.hovercard.Constructor=a;e.fn.hovercard.defaults={hideDelay:250,showDelay:("ontouchstart" in window)?0:750,position:{collision:"fit flip",my:"left top",at:"right bottom"}}})(jQuery);
;
define("jive/card",["jquery","jive.XhrStack","documentReady"],function($,Stack){var stack=new Stack(),selector="a.jiveTT-hover-user, a.jivecontainerTT-hover-container, img.jivecontainerTT-hover-container",request,$card;function getEventDescriptor($target){if($target.is(".jiveTT-hover-user")){return{type:"user",userId:$target.data("userid")||$target.data("userId")||$target.data("objectid")}}else{return{type:"container",objectId:$target.data("objectId")||$target.data("objectid"),objectType:$target.data("objectType")||$target.data("objecttype")}}}function populate(html){$("#jive-note-body").html(html)}$card=$("#jiveTT-note").hovercard(selector);$card.on("cardHidden",function(){$card.removeClass("j-mini-modal-user j-mini-modal-place")}).on("cardShow",populate.curry(jive.shared.displayutil.cardLoading({}))).on("cardShown",function(e){var $target=$(e.relatedTarget),descriptor=getEventDescriptor($target),$container=$card.children(".jive-tooltip2-mid").removeClass("j-mini-modal-user j-mini-modal-place"),ajaxOptions={data:{tooltip:true},dataType:"html",type:"GET"};switch(descriptor.type){case"user":$container.addClass("j-mini-modal-user");$card.attr("id","jive-note-user-body");var presenceRaw=$target.data("presence");var presenceObj=presenceRaw?eval(presenceRaw):null;presenceObj=presenceObj&&presenceObj.getPresencePostfix?presenceObj:null;$.extend(true,ajaxOptions,{url:window.profileShortUrl,data:{userID:descriptor.userId,presencePostfix:presenceObj?presenceObj.getPresencePostfix():null,presence:presenceObj?presenceRaw:null}});break;case"container":$card.attr("id","jive-note-container-body");$container.addClass("j-mini-modal-place");ajaxOptions.data.container=descriptor.objectId;ajaxOptions.url=window.containerShortUrl;ajaxOptions.data.containerType=descriptor.objectType;break;default:throw new Error("Unrecognized card type.")}$target.attr("aria-describedby",$card.attr("id")).one("cardHidden",function(){$(this).removeAttr("aria-describedby")});request=$.ajax(ajaxOptions).then(populate).fail(populate.curry(jive.shared.displayutil.cardError({})));request.always(function(){$card.data("hovercard").position(e.relatedTarget)});stack.add(request)})});
;
(function($){if(!window.jive){window.jive={}}window.jive.ieVersion=function(){var __IE__=false;
/*@cc_on
         @if ( @_jscript_version >= 10 )
         __IE__ = 10;
         @elif ( @_jscript_version >= 5.6 )
         __IE__ = true;
         @else
         __IE__ = 1;
         @end
         if ( __IE__ === true) {
         var elem = document.createElement('div');
         elem.innerHTML = '<!--[if IE 6]><br class="ie6"><![endif]--><!--[if IE 7]><br class="ie7"><![endif]--><!--[if IE 8]><br class="ie8"><![endif]--><!--[if gt IE 8]><br class="ie9"><![endif]-->';
         __IE__ = parseInt(elem.firstChild.className.substring(2), 0);
         elem = null;
         }
         @*/
return __IE__};var ie=jive.ieVersion();if(ie===false||ie>7){return}var reflowTimeout;var reflowDelay=100;var origDomManip=$.fn.domManip;function reflow(){document.body.className=document.body.className}$.fn.domManip=function(){clearTimeout(reflowTimeout);reflowTimeout=setTimeout(reflow,reflowDelay);return origDomManip.apply(this,arguments)};$(window).resize(function(){clearTimeout(reflowTimeout);reflowTimeout=setTimeout(reflow,reflowDelay)})})(jQuery);
;
jive.namespace("Util");jive.Util.AjaxErrorHandler=jive.oo.Class.extend(function(a){a.init=function(){};this.handleError=function(c){var b="An error occurred while executing request.";if(c.status==403){top.location=_jive_base_url+"/login.jspa";return}else{if(c.status==404){b=ajaxNotFoundMessage}else{if(c.status==500){b=ajaxErrorMessage}else{if(c.status==401){b=ajaxUnauthorizedMessage}}}}$j("<p />").html(b).message({style:"error"})};this.checkForLoginRedirect=function(b){var c=b.getResponseHeader("Content-Type");if(!c||c.match(/html/)){if($j("#loginform",b.responseText).length>0){top.location=_jive_base_url+"/login.jspa"}else{if($j("#jive-loginBox",b.responseText).length>0){top.location=_jive_base_url+"/admin/login.jsp"}}}}});
;
var soy=soy||{};soy.esc=soy.esc||{};(function(){var b=navigator.userAgent;var a=b.indexOf("Opera")==0;soy.$$IS_OPERA_=a;soy.$$IS_IE_=!a&&b.indexOf("MSIE")!=-1;soy.$$IS_WEBKIT_=!a&&b.indexOf("WebKit")!=-1})();soy.StringBuilder=function(a,b){this.buffer_=soy.$$IS_IE_?[]:"";if(a!=null){this.append.apply(this,arguments)}};soy.StringBuilder.prototype.bufferLength_=0;soy.StringBuilder.prototype.append=function(c,b,e){if(soy.$$IS_IE_){if(b==null){this.buffer_[this.bufferLength_++]=c}else{var a=this.buffer_;a.push.apply(a,arguments);this.bufferLength_=this.buffer_.length}}else{this.buffer_+=c;if(b!=null){for(var d=1;d<arguments.length;d++){this.buffer_+=arguments[d]}}}return this};soy.StringBuilder.prototype.clear=function(){if(soy.$$IS_IE_){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};soy.StringBuilder.prototype.toString=function(){if(soy.$$IS_IE_){var a=this.buffer_.join("");this.clear();if(a){this.append(a)}return a}else{return(this.buffer_)}};soy.$$DEFAULT_TEMPLATE_DATA_={};soy.renderElement=function(c,d,a,b){c.innerHTML=d(a||soy.$$DEFAULT_TEMPLATE_DATA_,undefined,b)};soy.renderAsFragment=function(d,b,a,c){return soy.$$renderWithWrapper_(d,b,a,false,c)};soy.renderAsElement=function(d,b,a,c){return(soy.$$renderWithWrapper_(d,b,a,true,c))};soy.$$renderWithWrapper_=function(h,e,c,b,i){var g=c||document;var a=g.createElement("div");a.innerHTML=h(e||soy.$$DEFAULT_TEMPLATE_DATA_,undefined,i);if(a.childNodes.length==1){var f=a.firstChild;if(!b||f.nodeType==1){return(f)}}if(b){return a}var d=g.createDocumentFragment();while(a.firstChild){d.appendChild(a.firstChild)}return d};soy.$$augmentData=function(d,a){function e(){}e.prototype=d;var c=new e();for(var b in a){c[b]=a[b]}return c};soy.$$getMapKeys=function(c){var b=[];for(var a in c){b.push(a)}return b};soy.$$getDelegateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};soy.$$registerDelegateFn=function(e,c,b){var d="key_"+e;var a=soy.$$DELEGATE_REGISTRY_PRIORITIES_[d];if(a===undefined||c>a){soy.$$DELEGATE_REGISTRY_PRIORITIES_[d]=c;soy.$$DELEGATE_REGISTRY_FUNCTIONS_[d]=b}else{if(c==a){throw Error('Encountered two active delegates with same priority (id/name "'+e+'").')}else{}}};soy.$$getDelegateFn=function(b){var a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+b];return a?a:soy.$$EMPTY_TEMPLATE_FN_};soy.$$EMPTY_TEMPLATE_FN_=function(a,c,b){return""};soy.$$tempHashEscape=function(a){return a.replace(soy.$$HASH_RE_,"__HashLit__")};soy.$$HASH_RE_=/#/g;soy.$$tempHashUnescape=function(a){return a.replace(soy.$$HASH_ESCAPED_RE_,"#")};soy.$$HASH_ESCAPED_RE_=/__HashLit__/g;soy.$$escapeHtml=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return a.content}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlRcdata=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return soy.esc.$$normalizeHtmlHelper(a.content)}return soy.esc.$$escapeHtmlHelper(a)};soy.$$stripHtmlTags=function(a){return String(a).replace(soy.esc.$$HTML_TAG_REGEX_,"")};soy.$$escapeHtmlAttribute=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlAttributeNospace=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlNospaceHelper(a)};soy.$$filterHtmlAttribute=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML_ATTRIBUTE){return a.content.replace(/=([^"']*)$/,'="$1"')}return soy.esc.$$filterHtmlAttributeHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};soy.$$escapeJsString=function(a){if(typeof a==="object"&&a.contentKind===soydata.SanitizedContentKind.JS_STR_CHARS){return a.content}return soy.esc.$$escapeJsStringHelper(a)};soy.$$escapeJsValue=function(a){if(a==null){return" null "}switch(typeof a){case"boolean":case"number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$escapeChar=function(d){if(d in soy.$$escapeCharJs_){return soy.$$escapeCharJs_[d]}var b=d;var a=d.charCodeAt(0);if(a>31&&a<127){b=d}else{if(a<256){b="\\x";if(a<16||a>256){b+="0"}}else{b="\\u";if(a<4096){b+="0"}}b+=a.toString(16).toUpperCase()}return soy.$$escapeCharJs_[d]=b};soy.$$escapeCharJs_={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"'":"\\'","\\":"\\\\"};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};soy.$$escapeUri=function(a){if(typeof a==="object"&&a.contentKind===soydata.SanitizedContentKind.URI){return soy.$$normalizeUri(a)}var b=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;if(soy.$$problematicUriMarks_.test(b)){return b.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_)}return b};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};soy.$$filterNormalizeUri=function(a){return soy.esc.$$filterNormalizeUriHelper(a)};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};soy.$$filterCssValue=function(a){if(a==null){return""}return soy.esc.$$filterCssValueHelper(a)};soy.$$changeNewlineToBr=function(a){a=String(a);if(!soy.$$CHANGE_NEWLINE_TO_BR_RE_.test(a)){return a}return a.replace(/(\r\n|\r|\n)/g,"<br>")};soy.$$CHANGE_NEWLINE_TO_BR_RE_=/[\r\n]/;soy.$$insertWordBreaks=function(j,a){j=String(j);var f=[];var h=0;var b=false;var k=false;var g=0;var d=0;for(var e=0,c=j.length;e<c;++e){var l=j.charCodeAt(e);if(g>=a&&l!=soy.$$CharCode_.SPACE){f[h++]=j.substring(d,e);d=e;f[h++]=soy.$$WORD_BREAK_;g=0}if(b){if(l==soy.$$CharCode_.GREATER_THAN){b=false}}else{if(k){switch(l){case soy.$$CharCode_.SEMI_COLON:k=false;++g;break;case soy.$$CharCode_.LESS_THAN:k=false;b=true;break;case soy.$$CharCode_.SPACE:k=false;g=0;break}}else{switch(l){case soy.$$CharCode_.LESS_THAN:b=true;break;case soy.$$CharCode_.AMPERSAND:k=true;break;case soy.$$CharCode_.SPACE:g=0;break;default:++g;break}}}}f[h++]=j.substring(d);return f.join("")};soy.$$CharCode_={SPACE:32,AMPERSAND:38,SEMI_COLON:59,LESS_THAN:60,GREATER_THAN:62};soy.$$WORD_BREAK_=soy.$$IS_WEBKIT_?"<wbr></wbr>":soy.$$IS_OPERA_?"&shy;":"<wbr>";soy.$$truncate=function(c,a,b){c=String(c);if(c.length<=a){return c}if(b){if(a>3){a-=3}else{b=false}}if(soy.$$isHighSurrogate_(c.charAt(a-1))&&soy.$$isLowSurrogate_(c.charAt(a))){a-=1}c=c.substring(0,a);if(b){c+="..."}return c};soy.$$isHighSurrogate_=function(a){return 55296<=a&&a<=56319};soy.$$isLowSurrogate_=function(a){return 56320<=a&&a<=57343};soy.$$bidiStartEdge=function(a){return a<0?"right":"left"};soy.$$bidiEndEdge=function(a){return a<0?"left":"right"};soy.$$bidiTextDir=function(b,a){b=soy.$$bidiStripHtmlIfNecessary_(b,a);if(!b){return 0}return soy.$$bidiDetectRtlDirectionality_(b)?-1:1};soy.$$bidiDirAttr=function(c,d,a){var b=soy.$$bidiTextDir(d,a);return new soydata.SanitizedHtmlAttribute(b&&b!=c?b<0?"dir=rtl":"dir=ltr":"")};soy.$$bidiMark=function(a){return((a>0)?"\u200E":(a<0)?"\u200F":"")};soy.$$bidiMarkAfter=function(c,d,a){var b=soy.$$bidiTextDir(d,a);return soy.$$bidiMarkAfterKnownDir_(c,b,d,a)};soy.$$bidiMarkAfterKnownDir_=function(c,b,d,a){return(c>0&&(b<0||soy.$$bidiIsRtlExitText_(d,a))?"\u200E":c<0&&(b>0||soy.$$bidiIsLtrExitText_(d,a))?"\u200F":"")};soy.$$bidiStripHtmlIfNecessary_=function(b,a){return a?b.replace(soy.$$BIDI_HTML_SKIP_RE_," "):b};soy.$$BIDI_HTML_SKIP_RE_=/<[^>]*>|&[^;]+;/g;soy.$$bidiSpanWrap=function(a,d){d=String(d);var c=soy.$$bidiTextDir(d,true);var b=soy.$$bidiMarkAfterKnownDir_(a,c,d,true);if(c>0&&a<=0){d="<span dir=ltr>"+d+"</span>"}else{if(c<0&&a>=0){d="<span dir=rtl>"+d+"</span>"}}return d+b};soy.$$bidiUnicodeWrap=function(a,d){d=String(d);var c=soy.$$bidiTextDir(d,true);var b=soy.$$bidiMarkAfterKnownDir_(a,c,d,true);if(c>0&&a<=0){d="\u202A"+d+"\u202C"}else{if(c<0&&a>=0){d="\u202B"+d+"\u202C"}}return d+b};soy.$$bidiLtrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF";soy.$$bidiNeutralChars_="\u0000-\u0020!-@[-`{-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u2BFF";soy.$$bidiRtlChars_="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";soy.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soy.$$bidiLtrChars_+"]*["+soy.$$bidiRtlChars_+"]");soy.$$bidiNeutralDirCheckRe_=new RegExp("^["+soy.$$bidiNeutralChars_+"]*$|^http://");soy.$$bidiIsRtlText_=function(a){return soy.$$bidiRtlDirCheckRe_.test(a)};soy.$$bidiIsNeutralText_=function(a){return soy.$$bidiNeutralDirCheckRe_.test(a)};soy.$$bidiRtlDetectionThreshold_=0.4;soy.$$bidiRtlWordRatio_=function(e){var b=0;var a=0;var d=e.split(" ");for(var c=0;c<d.length;c++){if(soy.$$bidiIsRtlText_(d[c])){b++;a++}else{if(!soy.$$bidiIsNeutralText_(d[c])){a++}}}return a==0?0:b/a};soy.$$bidiDetectRtlDirectionality_=function(a){return soy.$$bidiRtlWordRatio_(a)>soy.$$bidiRtlDetectionThreshold_};soy.$$bidiLtrExitDirCheckRe_=new RegExp("["+soy.$$bidiLtrChars_+"][^"+soy.$$bidiRtlChars_+"]*$");soy.$$bidiRtlExitDirCheckRe_=new RegExp("["+soy.$$bidiRtlChars_+"][^"+soy.$$bidiLtrChars_+"]*$");soy.$$bidiIsLtrExitText_=function(b,a){b=soy.$$bidiStripHtmlIfNecessary_(b,a);return soy.$$bidiLtrExitDirCheckRe_.test(b)};soy.$$bidiIsRtlExitText_=function(b,a){b=soy.$$bidiStripHtmlIfNecessary_(b,a);return soy.$$bidiRtlExitDirCheckRe_.test(b)};soy.esc.$$escapeUriHelper=function(a){return encodeURIComponent(String(a))};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"\x26#0;","\x22":"\x26quot;","\x26":"\x26amp;","\x27":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x09":"\x26#9;","\x0a":"\x26#10;","\x0b":"\x26#11;","\x0c":"\x26#12;","\x0d":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\x85":"\x26#133;","\xa0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\x08":"\\x08","\x09":"\\t","\x0a":"\\n","\x0b":"\\x0b","\x0c":"\\f","\x0d":"\\r","\x22":"\\x22","\x26":"\\x26","\x27":"\\x27","/":"\\/","\x3c":"\\x3c","\x3d":"\\x3d","\x3e":"\\x3e","\\":"\\\\","\x85":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029","$":"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\x08":"\\8 ","\x09":"\\9 ","\x0a":"\\a ","\x0b":"\\b ","\x0c":"\\c ","\x0d":"\\d ","\x22":"\\22 ","\x26":"\\26 ","\x27":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","\x3c":"\\3c ","\x3d":"\\3d ","\x3e":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\x85":"\\85 ","\xa0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\x08":"%08","\x09":"%09","\x0a":"%0A","\x0b":"%0B","\x0c":"%0C","\x0d":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20","\x22":"%22","\x27":"%27","(":"%28",")":"%29","\x3c":"%3C","\x3e":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTE_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeJsRegexHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(b)){return"zSoyz"}return b};soy.esc.$$normalizeUriHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterNormalizeUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(b)){return"zSoyz"}return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterHtmlAttributeHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTE_.test(b)){return"zSoyz"}return b};soy.esc.$$filterHtmlElementNameHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(b)){return"zSoyz"}return b};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?[a-zA-Z])(?:[^>'"]|"[^"]*"|'[^']*')*>/g;
;
var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,c=function(g,f){g=String(g);f=f||2;while(g.length<f){g="0"+g}return g};var d=function(g,f){var i=g.getTime();var j=g.getTimezoneOffset()*60000;var h=i+j;return new Date(h+(3600000*f))};return function(j,w,r){var h=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(j)=="[object String]"&&!/\d/.test(j)){w=j;j=undefined}j=j?new Date(j):new Date;if(isNaN(j)){throw SyntaxError("invalid date")}j=d(j,_jive_timezoneoffset);w=String(h.masks[w]||w||h.masks["default"]);if(w.slice(0,4)=="UTC:"){w=w.slice(4);r=true}var u=r?"getUTC":"get",n=j[u+"Date"](),f=j[u+"Day"](),k=j[u+"Month"](),q=j[u+"FullYear"](),t=j[u+"Hours"](),l=j[u+"Minutes"](),v=j[u+"Seconds"](),p=j[u+"Milliseconds"](),g=r?0:j.getTimezoneOffset(),i={d:n,dd:c(n),ddd:h.i18n.dayNames[f],dddd:h.i18n.dayNames[f+7],m:k+1,mm:c(k+1),mmm:h.i18n.monthNames[k],mmmm:h.i18n.monthNames[k+12],yy:String(q).slice(2),yyyy:q,h:t%12||12,hh:c(t%12||12),H:t,HH:c(t),M:l,MM:c(l),s:v,ss:c(v),l:c(p,3),L:c(p>99?Math.round(p/10):p),t:t<12?"a":"p",tt:t<12?"am":"pm",T:t<12?"A":"P",TT:t<12?"AM":"PM",Z:r?"UTC":(String(j).match(b)||[""]).pop().replace(e,""),o:(g>0?"-":"+")+c(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][n%10>3?0:(n%100-n%10!=10)*n%10]};return w.replace(a,function(m){return m in i?i[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",longDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",longTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};$j(document).ready(function(){dateFormat.i18n={dayNames:[jive.i18n.getMsg("date.format.js.sun.short"),jive.i18n.getMsg("date.format.js.mon.short"),jive.i18n.getMsg("date.format.js.tue.short"),jive.i18n.getMsg("date.format.js.wed.short"),jive.i18n.getMsg("date.format.js.thu.short"),jive.i18n.getMsg("date.format.js.fri.short"),jive.i18n.getMsg("date.format.js.sat.short"),jive.i18n.getMsg("date.format.js.sun.long"),jive.i18n.getMsg("date.format.js.mon.long"),jive.i18n.getMsg("date.format.js.tue.long"),jive.i18n.getMsg("date.format.js.wed.long"),jive.i18n.getMsg("date.format.js.thu.long"),jive.i18n.getMsg("date.format.js.fri.long"),jive.i18n.getMsg("date.format.js.sat.long")],monthNames:[jive.i18n.getMsg("date.format.js.jan.short"),jive.i18n.getMsg("date.format.js.feb.short"),jive.i18n.getMsg("date.format.js.mar.short"),jive.i18n.getMsg("date.format.js.apr.short"),jive.i18n.getMsg("date.format.js.may.short"),jive.i18n.getMsg("date.format.js.jun.short"),jive.i18n.getMsg("date.format.js.jul.short"),jive.i18n.getMsg("date.format.js.aug.short"),jive.i18n.getMsg("date.format.js.sep.short"),jive.i18n.getMsg("date.format.js.oct.short"),jive.i18n.getMsg("date.format.js.nov.short"),jive.i18n.getMsg("date.format.js.dec.short"),jive.i18n.getMsg("date.format.js.jan.long"),jive.i18n.getMsg("date.format.js.feb.long"),jive.i18n.getMsg("date.format.js.mar.long"),jive.i18n.getMsg("date.format.js.apr.long"),jive.i18n.getMsg("date.format.js.may.long"),jive.i18n.getMsg("date.format.js.jun.long"),jive.i18n.getMsg("date.format.js.jul.long"),jive.i18n.getMsg("date.format.js.aug.long"),jive.i18n.getMsg("date.format.js.sep.long"),jive.i18n.getMsg("date.format.js.oct.long"),jive.i18n.getMsg("date.format.js.nov.long"),jive.i18n.getMsg("date.format.js.dec.long")]}});Date.prototype.format=function(a,b){return dateFormat(this,a,b)};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.resourceInlineJs=function(A,C){var B=C||new soy.StringBuilder();B.append((A.id&&A.header)?'<script type="text/javascript">'+A.code+"<\/script>":(A.header)?'<script type="text/javascript">'+A.code+"<\/script>":(A.id)?'<script type="text/javascript">'+A.code+"<\/script>":'<script type="text/javascript">'+A.code+"<\/script>");return C?"":B.toString()};jive.shared.soy.escapeHelper=function(A,C){var B=C||new soy.StringBuilder();B.append((A.escape)?soy.$$escapeHtml(A.stringToEscape):A.stringToEscape);return C?"":B.toString()};jive.shared.soy.i18nHelper=function(A,C){var B=C||new soy.StringBuilder();B.append((A.noAutoEscape)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18nKey),[new soydata.SanitizedHtml(A.arg0),new soydata.SanitizedHtml(A.arg1),new soydata.SanitizedHtml(A.arg2),new soydata.SanitizedHtml(A.arg3),new soydata.SanitizedHtml(A.arg4),new soydata.SanitizedHtml(A.arg5),new soydata.SanitizedHtml(A.arg6),new soydata.SanitizedHtml(A.arg7),new soydata.SanitizedHtml(A.arg8),new soydata.SanitizedHtml(A.arg9)])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18nKey),[A.arg0,A.arg1,A.arg2,A.arg3,A.arg4,A.arg5,A.arg6,A.arg7,A.arg8,A.arg9])));return C?"":B.toString()};jive.shared.soy.getCountTextByType=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"reply":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.plural"),[A.count])));break;case"like":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.plural"),[A.count])));break;case"showlikescount":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showlikecount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showlikecount.plural"),[A.count])));break;case"bookmark":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.plural"),[A.count])));break;case"showbookmarkscount":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showbookmarkcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showbookmarkcount.plural"),[A.count])));break;case"follow":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.plural"),[A.count])));break;case"showfollowcount":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showfollowercount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showfollowercount.plural"),[A.count])));break;case"membership":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.plural"),[A.count])));break;case"showmembercount":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showmembercount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showmembercount.plural"),[A.count])));break;case"connections":B.append((A.bidirectionalGraph)?(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.plural"),[A.count])):(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.plural"),[A.count])));break;case"showconnectioncount":B.append((A.bidirectionalGraph)?(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showfriendcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showfriendcount.plural"),[A.count])):(A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showfollowingcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showfollowingcount.plural"),[A.count])));break;case"showsubspacecount":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showsubspacecount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.showsubspacecount.plural"),[A.count])));break;default:B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.singular"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.plural"),[A.count])))}return C?"":B.toString()};jive.shared.soy.render=function(opt_data,opt_sb){var output=opt_sb||new soy.StringBuilder();output.append(jive.soy.func.eval(opt_data.templateName,typeof (opt_data.failGracefully)!="undefined"?opt_data.failGracefully:true,false,opt_data.data,output));return opt_sb?"":output.toString()}
;
window.Zapatec=window.Zapatec||{};window.Zapatec.Calendar=window.Zapatec.Calendar||{};Zapatec.Calendar.bootstrap=function(b,c){var a=[b.button,b.displayArea,b.inputField].filter(function(d){return !!d}).map(function(d){return"#"+d});jive.util.lazyLoadJSBySels(a,"click focus","Zapatec.Calendar",function(){b=$j.extend({firstDay:0,weekNumbers:false},b);var d=Zapatec.Calendar.setup(b);if(c){c(d)}})};
;
jive.namespace("UserPicker");jive.UserPicker.Source=jive.oo.Class.extend(function(a){this.init=function(b){this.options=b;this.urls={userAutocomplete:jive.app.url("/user-autocomplete.jspa"),browseModal:jive.app.url("/user-autocomplete-modal.jspa")}};this.autocomplete=function(e){var g=new jive.conc.Promise(),c=this,b="",d=6500;if(c.lastAjaxObj){c.lastAjaxObj.abort()}var f={emailAllowed:c.options.emailAllowed,userAllowed:c.options.userAllowed,listAllowed:c.options.listAllowed,canInvitePartners:c.options.canInvitePartners,canInviteJustPartners:c.options.canInviteJustPartners,canInvitePreprovisioned:c.options.canInvitePreprovisioned,invitePreprovisionedDomainRestricted:c.options.invitePreprovisionedDomainRestricted,propNames:["avatarID","hasConnection"]};if(c.options.object){f=$j.extend(f,{objectID:c.options.object.objectID,objectType:c.options.object.objectType,entitlement:c.options.entitlement})}if(this.options&&this.options.filterIDs){this.options.filterIDs.forEach(function(h){b+=(b=="")?"?":"&";b+="args="+encodeURIComponent(h)})}if(this.options&&this.options.resultLimit){b+=(b=="")?"?":"&";b+="numResults="+encodeURIComponent(this.options.resultLimit)}if(e&&e.length>d){e=e.substring(0,d)}c.lastAjaxObj=$j.ajax({url:jive.rest.url("/users/search/"+encodeURI(e)+b),data:f,dataType:"json",success:function(h){g.emitSuccess(h)},error:function(h){g.emitError()}});return g};this.load=function(b){var e=new jive.conc.Promise();var c=this;var d={};if(c.options.object){d=$j.extend(d,{objectID:c.options.object.objectID,objectType:c.options.object.objectType,entitlement:c.options.entitlement})}$j.ajax({url:jive.rest.url("/users/"+b),dataType:"json",data:d,success:function(f){e.emitSuccess(f)},error:function(f){e.emitError(f)}});return e};this.save=function(d){var e=new jive.conc.Promise(),c=this;var b={};b[this.resourceType]=d;$j.ajax({type:"POST",url:this.RESOURCE_ENDPOINT+"/"+d.objectID+"/members",dataType:"json",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(f,h,g){e.emitSuccess(f)},error:function(h,j,i){try{var g=$j.parseJSON(h.responseText);if(g&&g.error&&g.error.message){e.emitError(g.error.message,g.error.code)}}catch(f){e.emitError(null,h&&h.status)}}});return e}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.UserPicker=="undefined"){jive.UserPicker={}}if(typeof jive.UserPicker.soy=="undefined"){jive.UserPicker.soy={}}jive.UserPicker.soy.renderUserPickerModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal" id="user-autocomplete-modal-container" style="display: none;"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.title"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="javascript:;" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section id="user-picker-modal-content" class="jive-modal-content jive-modal-content-userpicker">',A.body,"</section></div>");return C?"":B.toString()};jive.UserPicker.soy.renderModalBrowseButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="javascript:;" class="jive-chooser-browse">',(A.plural)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.title"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.title.singular"),[])),"</a>");return C?"":B.toString()};jive.UserPicker.soy.renderModalLoading=function(A,C){var B=C||new soy.StringBuilder();B.append("<div class='jive-user-modal-loading'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.adding_users"),[])),"</div>");return C?"":B.toString()};jive.UserPicker.soy.searching=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.searching"),[])));return C?"":B.toString()};jive.UserPicker.soy.renderDocumentViewersAdded=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.invited.users"),[])),"<br></p>");return C?"":B.toString()};jive.UserPicker.soy.renderSelectedUsersList=function(L,J){var F=J||new soy.StringBuilder();if(L.results.userlists.length>0||L.results.users.length>0){F.append((L.message)?L.message:"",'<ul class="clearfix">');var H=L.results.userlists;var E=H.length;for(var B=0;B<E;B++){var O=H[B];F.append('<li style="display: list-item;" class="connections d" data-list-id="',soy.$$escapeHtml(O.id),'"><img width="16" height="16" border="0" alt="',soy.$$escapeHtml(O.displayName),'" style="background-color: #',soy.$$escapeHtml(O.style),';" src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.73caaf5/","","/images/transparent.png")),'" class="lbl jive-icon-med jive-icon-label-frame"><a class="showConnections" href="javascript:;">',(O.excluded)?'<span class="excluded">':"",soy.$$escapeHtml(O.displayName)," <span>(",soy.$$escapeHtml(O.users.length),")</span>",(O.excluded)?"</span>":"","</a>",(O.displayExternallyVisibleVisualCue)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':"","<em>",(!L.disabled)?" "+((!O.excluded)?'<a class="remove" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.remove.label"),[]))+"</a>":'<a class="add" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.add.label"),[]))+"</a>"):"",'</em><div class="js-grouped-users-popover j-grouped-users-popover" id="listContents',soy.$$escapeHtml(O.id),'" style="display: none;"><ul class="j-simple-list">');var D=O.users;var G=D.length;for(var K=0;K<G;K++){var A=D[K];F.append("<li>");jive.shared.displayutil.userDisplayNameLink(A,F);F.append((!A.entitled)?'<span class="jive-icon-sml jive-icon-warn"></span>':"",(A.prop.isPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':"","</li>")}F.append("</ul></div>",(!O.entitled)?'<span class="jive-icon-sml jive-icon-warn"></span>':"","</li>")}var M=L.results.users;var I=M.length;for(var C=0;C<I;C++){var N=M[C];F.append('<li class="',(N.disabled)?"disabled":""," ",(!N.entitled||!N.prop.hasConnection&&L.relationship)?"j-warning":"",'" data-user-id="',soy.$$escapeHtml(N.id),'" data-user-email="',soy.$$escapeHtml(N.email),'" data-user-name="',soy.$$escapeHtml(N.username),'">');if(!N.anonymous&&!N.external){jive.shared.displayutil.avatar(soy.$$augmentData(N,{size:20,hideLink:true}),F)}else{F.append('<span class="jive-icon-med jive-icon-message"></span>')}F.append('<span class="',(N.excluded)?"excluded":"",'">',soy.$$escapeHtml(N.displayName),"</span>",(!N.anonymous&&!N.external||N.prop.isPartner)?(N.prop.isVisibleToPartner||N.displayExternallyVisibleVisualCue||N.prop.isPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':"":"",(!L.disabled&&!N.disabled)?"<em>"+((!N.excluded)?'<a class="remove" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.remove.label"),[]))+" "+soy.$$escapeHtml(N.displayName)+"</a>":'<a class="add" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.add.label"),[]))+"</a>")+"</em>":"",(!N.entitled)?'<span class="jive-icon-sml jive-icon-warn"></span>':"",(L.relationship&&!N.prop.hasConnection)?'<span class="jive-icon-sml jive-icon-redalert"></span>':"","</li>")}F.append("</ul>")}return J?"":F.toString()};jive.UserPicker.soy.renderSelectedUser=function(A,G){var C=G||new soy.StringBuilder();if(A.results.users.length>0){C.append('<ul class="jive-chooser-list j-people-list clearfix">');var F=A.results.users;var E=F.length;for(var B=0;B<E;B++){var D=F[B];if(B==0){C.append('<li style="display: list-item;" class="assignee',(D.disabled)?" disabled":"",(!D.entitled)?" notEntitled ":"",'" data-user-id="',soy.$$escapeHtml(D.id),'" data-user-email="',soy.$$escapeHtml(D.email),'" data-user-name="',soy.$$escapeHtml(D.username),'">');if(!D.anonymous&&!D.external){jive.shared.displayutil.avatar(soy.$$augmentData(D,{size:26,hideLink:true}),C)}else{C.append('<span class="jive-icon-med jive-icon-message"></span>')}C.append("<span>",soy.$$escapeHtml(D.displayName),"</span>",(!D.anonymous&&!D.external)?(D.prop.isVisibleToPartner||D.prop.isPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':"":"",(!A.disabled)?'<em><a class="remove" href="javascript:;" style="display: inline;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.change.label"),[]))+" "+soy.$$escapeHtml(D.displayName)+"</a></em>":"","</li>")}}C.append("</ul>")}return G?"":C.toString()};jive.UserPicker.soy.renderUserList=function(I,G){var D=G||new soy.StringBuilder();D.append('<div class="j-pop-main j-menu">');if(I.results.userlists.length>0){D.append('<header class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.labels.title"),[])),'</header><ul class="j-label-list" role="listbox">');var H=I.results.userlists;var A=H.length;for(var B=0;B<A;B++){var F=H[B];D.append('<li class="user-autocomplete-item clearfix ',(F.displayExternallyVisibleVisualCue)?"external-access":"",'" role="option"><a href="#" id="userlist_',soy.$$escapeHtml(F.id),'" data-list-id="',soy.$$escapeHtml(F.id),'"><img width="26" height="26" border="0" alt="',soy.$$escapeHtml(F.displayName),'" style="background-color: #',soy.$$escapeHtml(F.style),';" src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.73caaf5/","","/images/transparent.png")),'" class="lbl jive-icon-med jive-icon-label-frame">',soy.$$escapeHtml(F.displayName),(F.displayExternallyVisibleVisualCue)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':"","<span>(",soy.$$escapeHtml(F.users.length),")</span></a></li>")}D.append("</ul>")}if(I.results.users.length>0){D.append((I.results.users.length>0&&I.results.userlists.length>0)?'<header class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.people"),[]))+"</header>":"",'<ul class="j-people-list" role="listbox">');var C=I.results.users;var K=C.length;for(var J=0;J<K;J++){var E=C[J];D.append('<li class="user-autocomplete-item clearfix" role="option"><a href="#" id="user_',soy.$$escapeHtml(E.id),'" data-user-id="',soy.$$escapeHtml(E.id),'" data-user-email="',soy.$$escapeHtml(E.email),'" data-user-name="',soy.$$escapeHtml(E.displayName),'" data-user-username="',soy.$$escapeHtml(E.username),'">');if(!E.anonymous){jive.shared.displayutil.avatar(soy.$$augmentData(E,{size:26,hideLink:true}),D)}else{D.append('<span class="jive-icon-med jive-icon-message"></span>')}D.append("<span>",soy.$$escapeHtml(E.displayName),"</span>",(E.displayExternallyVisibleVisualCue||E.prop.isPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+'"></span>':"");jive.UserPicker.soy.userExtraInfo(E,D);D.append("</a></li>")}D.append("</ul>")}D.append((I.results.users.length==0&&I.results.userlists.length==0)?I.noResultsMessage:"","</div>");return G?"":D.toString()};jive.UserPicker.soy.userExtraInfo=function(A,C){var B=C||new soy.StringBuilder();B.append((A.displayName!=A.username&&A.username)?'<span class="j-select-user-extra-info" style="visibility: hidden; padding-left: 10px">('+soy.$$escapeHtml(A.username)+")</span>":"");return C?"":B.toString()};jive.UserPicker.soy.noUsersMatchMessage=function(A,C){var B=C||new soy.StringBuilder();if(A.emailAllowed){B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.email.none"),[])),"</p>");jive.UserPicker.soy.domainMessage(A,B)}else{B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.none"),[])),"</p>")}return C?"":B.toString()};jive.UserPicker.soy.pleaseEnterEmail=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.email"),[])),"</p>");return C?"":B.toString()};jive.UserPicker.soy.pleaseEnterValidEmail=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.notemail"),[])),"</p>");return C?"":B.toString()};jive.UserPicker.soy.pleaseEnterValidDomain=function(A,C){var B=C||new soy.StringBuilder();if(A.trial){B.append('<p class="font-color-normal empty"><span class="jive-icon-sml jive-icon-group-private-glyph"></span><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.note"),[])),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.emptyemail"),[])),"</p>")}else{jive.UserPicker.soy.domainMessage(A,B)}return C?"":B.toString()};jive.UserPicker.soy.domainMessage=function(A,C){var B=C||new soy.StringBuilder();B.append((A.domains&&A.domains.length>0)?'<p class="font-color-meta empty"><strong>'+((A.trial)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.domains"),[A.domains])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.domains.trial"),[A.domains])))+"</strong></p>":"");return C?"":B.toString()};jive.UserPicker.soy.limitMessage=function(A,C){var B=C||new soy.StringBuilder();B.append((A.limit&&A.limit>0)?'<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-warn jive-icon-sml"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.limit"),[A.limit]))+"</div></div>":"");return C?"":B.toString()};jive.UserPicker.soy.inputPlaceholder=function(A,C){var B=C||new soy.StringBuilder();B.append((A.userAllowed)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.placeholder.user"),[])):"",(A.userAllowed&&A.emailAllowed)?", ":"");if(A.emailAllowed){jive.UserPicker.soy.placeholderEmail(soy.$$augmentData(A,{index:0}),B);if(A.multiple){B.append(", ");jive.UserPicker.soy.placeholderEmail(soy.$$augmentData(A,{index:1}),B);B.append(",&nbsp;...")}}return C?"":B.toString()};jive.UserPicker.soy.placeholderEmail=function(A,C){var B=C||new soy.StringBuilder();B.append((A.index==0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.placeholder.emailprefix"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.placeholder.anotheremailprefix"),[])),(A.domains&&A.domains.length>A.index)?soy.$$escapeHtml(A.domains[A.index]):(A.domains&&A.domains.length)?soy.$$escapeHtml(A.domains[0]):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.placeholder.domain"),[])));return C?"":B.toString()}
;
jive.namespace("UserPicker");jive.UserPicker.ResultStore=jive.oo.Class.extend(function(a){this.init=function(b){this.userStore=new jive.ext.y.HashTable();this.listStore=new jive.ext.y.HashTable()};this.storeResults=function(b){var c=this;$j(b.users).each(function(e,d){if(d.id==-1){c.userStore.put(d.email,d)}else{c.userStore.put(d.id,d)}});$j(b.userlists).each(function(d,e){c.listStore.put(e.id,e)})};this.getUser=function(b,c){return this.userStore.get((b>-1)?b:c)};this.getList=function(b){return this.listStore.get(b)}});
;
jive.namespace("UserPicker");jive.UserPicker.SelectPeopleView=function(){var p=jive.conc.observable({}),b,i=false,e=false;name="",selectedUsers={},browseModalUrl=_jive_base_url+"/user-autocomplete-modal.jspa",closeFocusSelector="";function j(r){var q=r.map(function(s){return"userChk-"+s});return $j("input[id^=userChk-]").filter(function(){var s=$j(this).attr("id");return q.some(function(t){return s===t})})}function g(q){selectedUsers[q.userID]=q;k();m();!i&&c();j([q.userID]).closest("tr").addClass("selected")}function n(){j(Object.keys(selectedUsers)).each(function(){$j(this).prop("checked",true).closest("tr").addClass("selected")})}function m(){var r=[];$j.each(selectedUsers,function(){r.push(this.displayName)});var q=jive.util.escapeHTML(r.join(", "));$j("#preview").html(q)}function f(q){delete selectedUsers[q.userID];k();m();j([q.userID]).closest("tr").removeClass("selected")}function l(){b.delegate("#userpicker-options-link","click",function(q){q.preventDefault();$j("#jive-people-search-options").toggle()});b.delegate("#userpicker-addUsersButton","click",function(q){q.preventDefault();!$j(this).hasClass("j-disabled")&&c()});b.delegate("#user-picker-modal-content a:not([data-action])","click",function(q){q.preventDefault();d($j(this).attr("href")).addCallback(h)});b.delegate("#user-picker-modal-content a[data-action=goToPage]","click",function(q){q.preventDefault();$j("#profilesearchform-start").val($j(this).data("page"));b.find("form").submit()});b.delegate("#user-picker-modal-content :checkbox","click",function(){var q=$j(this),s=q.closest(".jive-table-cell-checkbox"),r={avatar:$j("#"+q.val()+"-avatar").html(),displayName:s.children().not("input").html(),userID:q.val(),userName:s.find(":hidden").val()};this.checked?g(r):f(r)});b.delegate(".userpicker-sort-link","click",function(q){q.preventDefault();$j("#profilesearchform-sort").val($j(this).data("sortType"));$j("#profilesearchform").submit()})}function a(){b.find("form").ajaxForm({beforeSubmit:function(q){q.push({name:"selectedUsers",value:o()});$j("#people-search-submit").prop("disabled",true);$j("#people-search-submit").val(jive.UserPicker.soy.searching())},success:function(q){h(q)}})}function o(){var q=[];$j.each(selectedUsers,function(r){return q.push(r)});return q.join(",")}function c(){var q=[];$j.each(selectedUsers,function(){q.push(this)});selectedUsers={};b.find("#userpicker-addUsersButton").after(jive.UserPicker.soy.renderModalLoading());p.emit("select"+name,{users:q})}function d(q){var r=new jive.conc.Promise();$j.get(q+"&selectedUsers="+o(),r.emitSuccess.bind(r));return r}function h(r){var q=$j(jive.UserPicker.soy.renderUserPickerModal({body:r}));$j("#user-picker-modal-content").replaceWith(q.find("#user-picker-modal-content"));k();m();n();a()}function k(){$j("#userpicker-addUsersButton").toggleClass("j-disabled",$j.isEmptyObject(selectedUsers))}p.setOptions=function(q){i=typeof(q.multiple)!="undefined"?q.multiple:false;name=typeof(q.name)!="undefined"?q.name:"";e=typeof(q.canInvitePartners)!="undefined"?q.canInvitePartners:false;closeFocusSelector=typeof(q.closeFocusSelector)!="undefined"?q.closeFocusSelector:"";return p};p.open=function(){$j.ajax({url:browseModalUrl,data:{multiple:i,canInvitePartners:e},success:function(q){p.render({body:q})}});return p};p.close=function(){b.find(".close").trigger("click");return p};p.render=function(q){b=$j(jive.UserPicker.soy.renderUserPickerModal(q));l();k();b.lightbox_me({zIndex:300015,destroyOnClose:true,parentLightbox:$j(".jive-modal:visible"),closeFocusSelector:closeFocusSelector,onLoad:function(){i=b.find(".jive-body-popup-container-userpicker").data("isMultiple");a()}})};return p};
;
jive.namespace("UserPicker");jive.UserPicker.Messages=jive.oo.Class.extend(function(a){this.init=function(e,c){this.userMessages=c&&c.userMessages||[];this.listMessages=c&&c.listMessages||[];var b=this;$j(".j-user-autocomplete").focus(function(){b.hideUserMessages()});this.$permissionmsg=c&&c.permissionsMessage;if(this.$permissionmsg){e.before(this.$permissionmsg.hide())}this.$relatedmsg=c&&c.relatedMessage;if(this.$relatedmsg){e.before(this.$relatedmsg.hide())}var d=jive.UserPicker.soy.limitMessage({limit:c.maxSelectedCount});this.$limitmsg=(c&&c.maxSelectedMessage)||$j(d);if(this.$limitmsg){e.before(this.$limitmsg.hide())}};this.showUserMessages=function(c){var b=this;if(c.pasted&&c.pasted.length){b.handlePaste(c.pasted)}else{if(c.added){b.handleAdd(c.added)}}};a.handlePaste=function(d){var c,b=this;$j.each(d,function(f,e){$j.each(b.userMessages,function(h,i){var g=b.renderMessage(e,i,false);c={context:g,user:e,message:i}})});if(d.length){setTimeout(function(){b.showMessage(c.user,c.message,c.context)},1000)}};a.handleAdd=function(c){var b=this;if(c.users){$j.each(b.listMessages,function(d,e){b.renderMessage(c,e,true)})}else{$j.each(c,function(d,e){$j.each(b.userMessages,function(f,g){b.renderMessage(e,g,(d==c.length-1))})})}};a.renderMessage=function(e,f,c){var b=this;var d=b.getMessagePopoverContext(e,f);if(d.length){var g=b.getPopoverSelector(e,f);d.closest(".jive-chooser-list").parent().delegate(g,"click",function(h){b.showMessage(e,f,$j(g));h.preventDefault()});if(c){b.showMessage(e,f,d)}}return d};a.getPopoverSelector=function(c,d){var b=this;return b.getItemSelector(c)+" "+b.getMessagePopoverContextSelector(d)};a.showMessage=function(c,d,b){setTimeout(function(){var e=$j(d.render(c)).popover({context:b,position:"right"});e.addClass("js-userpicker-user-msg");if(c.id>0){if(c.users){e.parent(".js-pop").attr("data-list-id",c.id)}else{e.parent(".js-pop").attr("data-user-id",c.id)}}else{e.parent(".js-pop").attr("data-user-email",c.email)}},0)};a.removeMessages=function(b){this.findPopoverForSelected(b).remove()};a.findPopoverForSelected=function(b){if(b.id>0){if(b.users){return $j('.js-pop[data-list-id="'+b.id+'"]')}else{return $j('.js-pop[data-user-id="'+b.id+'"]')}}else{return $j('.js-pop[data-user-email="'+b.email+'"]')}};a.getMessagePopoverContext=function(d,e){var b=this;var c=b.getItem(d);return c.find(b.getMessagePopoverContextSelector(e))};a.getItem=function(b){return $j(this.getItemSelector(b))};a.getItemSelector=function(b){if(b.id>0){if(b.users){return"li[data-list-id='"+b.id+"']"}else{return"li[data-user-id='"+b.id+"']"}}else{if(b.email){return"li[data-user-email='"+b.email+"']"}}console.error("[no selector can be created for user or list: "+b+"]")};a.getMessagePopoverContextSelector=function(b){if(b.popoverSelector){return b.popoverSelector}else{if(b.type=="info"){return"span.jive-icon-info:visible"}else{if(b.type=="warn"){return"span.jive-icon-warn:visible"}else{if(b.type=="error"){return"span.jive-icon-error:visible"}else{if(b.type=="success"){return"span.jive-icon-success:visible"}}}}}};this.hideUserMessages=function(){$j(".js-userpicker-user-msg").trigger("close")};this.togglePermissionMessage=function(b){if(this.$permissionmsg){if(b){this.$permissionmsg.hide()}else{this.$permissionmsg.show()}}};this.toggleRelatedMessage=function(b){if(this.$relatedmsg){if(b){this.$relatedmsg.hide()}else{this.$relatedmsg.show()}}};this.toggleLimitMessage=function(b){if(this.$limitmsg){if(b){this.$limitmsg.show()}else{this.$limitmsg.hide()}}}});
;
jive.namespace("UserPicker");jive.UserPicker.ResultListView=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(c){var b=this;this.$chooser=c.$chooser;this.$input=c.$input;this.hidden=true;this.emailAllowed=c.emailAllowed;this.userAllowed=c.userAllowed;this.listAllowed=c.listAllowed;this.trial=c.trial;this.canInvitePartners=c.canInvitePartners;this.canInvitePreprovisioned=c.canInvitePreprovisioned;this.invitePreprovisionedDomainRestricted=c.invitePreprovisionedDomainRestricted;this.domains=c.domains||[];this.onShow=c.onShow||$j.noop;this.onHide=c.onHide||$j.noop;this.onSelect=c.onSelect||$j.noop;this.$input.after(this.$chooser);this.$chooser.hide()};this.render=function(b){var c=this.getMessage();this.$chooser.html(jive.UserPicker.soy.renderUserList({results:b,noResultsMessage:c}));this.show()};a.getMessage=function(){var b;if(this.emailAllowed&&!this.userAllowed&&!this.listAllowed){if(this.isValidEmailAddressFragment(this.$input.val())){if(this.domains.length>0&&!this.canInvitePartners){b=jive.UserPicker.soy.pleaseEnterValidDomain({trial:this.trial,domains:this.domains})}else{b=jive.UserPicker.soy.pleaseEnterEmail({})}}else{b=jive.UserPicker.soy.pleaseEnterValidEmail({})}}else{if(this.emailAllowed){if(this.isEmailAddressInput(this.$input.val())){if(this.domains.length>0&&!this.canInvitePartners){b=jive.UserPicker.soy.pleaseEnterValidDomain({trial:this.trial,domains:this.domains})}else{b=jive.UserPicker.soy.pleaseEnterEmail({})}}else{b=jive.UserPicker.soy.noUsersMatchMessage({trial:this.trial,domains:this.domains,emailAllowed:true})}}else{b=jive.UserPicker.soy.noUsersMatchMessage({emailAllowed:true})}}return b};this.show=function(){var b=this;this.$chooser.show().css({left:this.$input.position().left,top:this.$input.position().top+this.$input.outerHeight()});if(this.hidden){if(this._blurHandler){$j(document).off("focus click","body",this._blurHandler)}this._blurHandler=function(e){var c=$j(e.target),d=e.target==b.$input.get(0),f=c.closest(b.$chooser).length>0;if(!d&&!f){b.hide()}};$j(document).on("focus click","body",this._blurHandler);this.emit("show");this.hidden=false;this.onShow.call(null,this.$chooser)}};this.hide=function(){this.$chooser.hide();if(this._blurHandler){$j(document).off("focus click","body",this._blurHandler);delete this._blurHandler}if(!this.hidden){this.emit("hide");this.hidden=true;this.onHide.call(null)}};this.findNameMatches=function(b){return this.$chooser.find("li a").filter(function(d,c){return $j(c).data("user-username").toLowerCase().trim().startsWith(b)||jive.util.equalsIgnoreCaseAndPadding(b,$j(c).data("user-name"))})};a.isEmailAddressInput=function(b){return b.match("^([\\w\\.!#$%&*\\+/?\\^`{}\\|~_'=-]+)@([\\w\\.-]+)?$")};a.isValidEmailAddressFragment=function(b){return b.match("^([\\w\\.!#$%&*\\+/?\\^`{}\\|~_'=-]+)@?([\\w\\.-]+)?$")}});
;
(function(f){var g={focusWait:400,blurWait:100,itemSelector:".js-suggestion:visible",tabSelector:"div .js-tab:visible",selectedClass:"j-selected",activeTabClass:"j-active",chooseOnSpace:false,keystrokeWait:null,hasFocus:a,deselectOnMouseOut:true};function a(){return this.ariaParent.is(":focus")}var j=f.ui.keyCode;var b=0;function e(p){return p+(b++)}function c(q,r){var p=f(q);if(!p.attr("id")){p.attr("id",e(r))}return p.attr("id")}function i(r,v){var x=this;var t={focusTarget:v,eventTarget:v,ariaParent:v};r=f.extend({},g,t,r);r.keyEventSource=v;this.options=r;this.$suggestBox=f();c(v,"typeAhead_");function D(K,I,J){if(K){if(I<=0){I=J-1}else{I-=1}}else{if(I==J-1){I=0}else{I+=1}}return I}function z(L){var I=x.getSelectable(),K=I.index(x.getSelected());K=D(L,K,I.length);var J=I.eq(K);x.setSelected(J);return J}function w(K){var I=x.getTabs();var J=I.index(x.getActiveTab());J=D(K,J,I.length);var L=I.eq(J);if(L.is("a")){L.click()}else{L.find("a").click()}jive.Accessibility.speak(L.text())}var q=true,G=null,u=null,F=null;function E(){if(r.focusWait<=0||r.hasFocus()){q=false}else{q=true}}E();function C(){if(r.keystrokeWait){if(u){clearTimeout(u)}u=setTimeout(function(){u=null;r.eventTarget.trigger("keystroke")},r.keystrokeWait)}else{r.eventTarget.trigger("keystroke")}}v.on("keydown.typeAhead",function B(J){var I;if(J.keyCode==j.UP||J.keyCode==j.DOWN){if(J.keyCode==j.UP){I=z(true)}else{I=z(false)}r.eventTarget.trigger("selectionChanged",[x,I]);J.preventDefault()}else{if(J.keyCode==j.ENTER||(r.chooseOnSpace&&J.keyCode==j.SPACE)){I=x.getSelected();if(I.length>0){r.eventTarget.trigger("selectionChosen",[x,I,J])}else{r.eventTarget.trigger("otherEnter",[x,J])}J.preventDefault()}else{if(J.keyCode==j.ESCAPE){if(x.$suggestBox.is(":visible")){r.eventTarget.trigger("close");J.preventDefault();J.stopPropagation()}}else{if(J.keyCode==j.LEFT||J.keyCode==j.RIGHT){r.eventTarget.trigger("close")}}}}}).on("keydown.typeAhead",function s(I){if(I.keyCode==j.TAB&&x.getTabs().length>1&&!q){if(I.shiftKey){w(true)}else{w(false)}r.eventTarget.trigger("tabChanged",[x]);I.preventDefault()}}).on("keyup.typeAhead",function A(I){if(I.keyCode<=45&&I.keyCode!=j.SPACE&&I.keyCode!=j.BACKSPACE){return}C()}).on("paste.typeAhead",function H(){C()});r.focusTarget.on("focus.typeAhead",function y(J,I){if(I){q=false;return}if(r.focusWait>0){if(G){clearTimeout(G)}G=setTimeout(function(){q=false;G=null;if(r.hasFocus()){r.eventTarget.trigger("focusWaitFinished",[x])}},r.focusWait)}else{q=false;r.eventTarget.trigger("focusWaitFinished",[x])}}).on("blur.typeAhead",function(){if(F){clearTimeout(F)}F=setTimeout(function(){F=null;if(!r.hasFocus()){r.eventTarget.trigger("blurWaitFinished",[x])}},r.blurWait);E()});r.eventTarget.on("close.typeAhead",function p(){r.ariaParent.removeAttr("aria-activedescendant")})}i.prototype.setSuggestElement=function h(s){var r=f(s);if(r&&r.length!=1){throw new Error("suggestContext must indicate a single element")}if(this.$suggestBox){if(this.$suggestBox.get(0)===r.get(0)){return}this.teardown(this.$suggestBox)}if(r){var p=this.options,q=this;this.$suggestBox=r.on("mousemove.typeAhead",function(u){var t=f(u.target).closest(p.itemSelector);var v=q.getSelected();if(t.length>0&&t.get(0)!=v.get(0)){q.setSelected(t);p.eventTarget.trigger("selectionChanged",[q,t])}}).on("mousedown.typeAhead",function(t){jive.conc.nextTick(function(){var u=f(window).scrollLeft(),v=f(window).scrollTop();p.focusTarget.trigger("focus",[true]);window.scrollTo(u,v)})}).on("click.typeAhead",function(v){var u=f(v.target),t=u.filter(p.itemSelector);if(t.length==0){t=u.closest(p.itemSelector)}if(t.length){p.eventTarget.trigger("selectionChosen",[q,t,v])}else{p.eventTarget.trigger("otherClick",[q,u,v])}v.preventDefault()});if(p.deselectOnMouseOut){this.$suggestBox.on("mouseleave.typeAhead",function(t){if(f(p.itemSelector).length>0){q.setSelected();p.eventTarget.trigger("selectionChanged",[q,f()])}})}this.options.ariaParent.attr("aria-owns",c(r,"suggestions_"))}else{this.$suggestBox=f()}};i.prototype.getSelected=function o(){return this.getSelectable().filter("."+this.options.selectedClass)};i.prototype.getSelectable=function d(){return this.$suggestBox.find(this.options.itemSelector)};i.prototype.getTabs=function n(){return this.$suggestBox.find(this.options.tabSelector)};i.prototype.getActiveTab=function k(){return this.getTabs().filter("."+this.options.activeTabClass)};i.prototype.setSelected=function m(p){if(p&&p.length!=0){p=f(p).filter(this.getSelectable());if(p.length!=1){throw new Error("toSelect must select exactly 1 selectable element")}}else{p=f()}this.getSelected().removeClass(this.options.selectedClass);p.addClass(this.options.selectedClass);this.options.ariaParent.attr("aria-activedescendant",c(p,"selected_option_"))};i.prototype.teardown=function l(p){if(p){p=f(p)}else{p=options.keyEventSource.add(this.$suggestBox).add(options.focusTarget).add(options.ariaParent).add(options.eventTarget);options.keyEventSource.removeData("typeAhead")}p.off(".typeAhead")};f.fn.typeAhead=function(p){return this.each(function(){var q=f(this);if(!q.data("typeAhead")){q.data("typeAhead",new i(p,q))}})}})(jQuery);
;
jive.namespace("UserPicker");jive.UserPicker.View=jive.AbstractView.extend(function(a){jive.conc.observable(this);this.init=function(j,b){this.options=b;var h=this;this.$input=j;if(b.placeholder){this.setPlaceholder(b.placeholder)}else{this.setPlaceholder(jive.UserPicker.soy.inputPlaceholder(b))}this.$input.attr("autocomplete","off");this.$input.parents("form").attr("autocomplete","off");if(b.emailAllowed&&!b.userAllowed){this.$input.addClass("j-user-autocomplete-email")}this.urls={userAutocomplete:_jive_base_url+"/user-autocomplete.jspa"};this.changes={};this.selectPeopleView=new jive.UserPicker.SelectPeopleView();this.selectionCallbacks=b.selectionCallbacks||[];this.messagesView=new jive.UserPicker.Messages(j,b);this.resultStore=new jive.UserPicker.ResultStore();this.showNoPicker=false;this.selectedUsers=[];this.selectedLists=[];j.addClass("jive-chooser-input jive-form-textinput-variable");j.before("<input type='hidden'/>");this.$valueStore=j.prev();this.$valueStore.attr("name",b.userParam||j.attr("name"));j.removeAttr("name");this.$selected=$j('<div class="jive-chooser-list j-result-list j-people-list  clearfix"></div>');if(this.options.resultListAllowed){j.after(this.$selected.hide())}var c=false;if(b.canInvitePartners){c=b.canInvitePartners}var k=false;if(b.canInvitePreprovisioned){k=b.canInvitePreprovisioned}var i=false;if(b.invitePreprovisionedDomainRestricted){i=b.invitePreprovisionedDomainRestricted}var e=$j('<div class="j-pop j-autocomplete j-rc4"></div>');this.chooserView=new jive.UserPicker.ResultListView({$chooser:e,$input:j,emailAllowed:b.emailAllowed,userAllowed:b.userAllowed,listAllowed:b.listAllowed,domains:b.domains,trial:b.trial,canInvitePartners:c,canInvitePreprovisioned:k,invitePreprovisionedDomainRestricted:i,onShow:function(l){j.data("typeAhead").setSuggestElement(l)}});this.maxSelectedCount=b.maxSelectedCount;this.isRelationshipRestricted=b.relatedMessage?true:false;if(h.options.userAllowed&&b.filterIDs.length===0){h.$browse=$j(jive.UserPicker.soy.renderModalBrowseButton({plural:h.options.multiple}));if(h.options.browseAllowed){j.after(h.$browse);h.$browse.click(function(){h.loadBrowseModal()})}}this.lastAjaxAsk="";var d=j.prop("defaultValue");function f(l){if(h.isEmptyInput()){h.hideTheUserList()}else{if(j.val()!==d){d=j.val();if(g(l.keyCode)){return h.selectBestMatch(true)}else{h.ajaxTheUserList()}}}}function g(m){var l=[$j.ui.keyCode.SPACE,$j.ui.keyCode.COMMA,59,186,220];return l.indexOf(m)>-1}j.on("keyup.userPicker",f);j.on("paste",function(l){j.off("keyup.userPicker");window.setTimeout(function(){if(!h.isEmptyInput()){h.handlePaste()}j.on("keyup.userPicker",f)},0)});j.typeAhead({keystrokeWait:400,itemSelector:"li:visible",selectedClass:"j-selected"}).on("focusWaitFinished",function(){h.ajaxTheUserList()}).on("selectionChosen",function(n,l,m){h.selectUser(m.children("a"))}).on("selectionChanged",function(n,l,m){l.getSelectable().find(".j-select-user-extra-info").css("visibility","hidden");m.find(".j-select-user-extra-info").css("visibility","visible")}).on("otherEnter",function(m,l){h.selectBestMatch(false)}).on("close",function(l){h.hideTheUserList(true);l.stopPropagation()}).attr("aria-autocomplete","list");this.typeAhead=j.data("typeAhead");this.setSelectedUsers(h.options.startingUsers.users);this.setSelectedLists(h.options.startingUsers.userlists)};a.selectAction=function(e){var d=this;var b=e.users;d.changes={added:[]};if(b.length>0){var c=b.length;b.forEach(function(f){d.emitP("loadUser",f.userID).addCallback(function(g){c--;if(g&&!d.containsItem(d.selectedUsers,g)){d.changes.added.push(g);d.selectedUsers.push(g);d.refreshSelectedUserListDisplayAndHiddenInput()}if(c===0){d.selectPeopleView.close();d.messagesView.showUserMessages(d.changes);d.emit("selectedUsersChanged",d.getSelectedUsersAndLists())}}).addErrback(function(){c--;if(c===0){d.selectPeopleView.close();d.messagesView.showUserMessages(d.changes);d.emit("selectedUsersChanged",d.getSelectedUsersAndLists())}})})}};this.removeList=function(e,b){var d=this;if(e){var c;if(d.showNoPicker){d.selectedLists=d.selectedLists.map(function(f){if(f.id==e){c=d.cloneList(f);f.excluded=b}return f})}else{d.selectedLists=d.selectedLists.filter(function(f){if(f.id==e){c=d.cloneList(f)}return f.id!=e})}if(b&&c){d.changes={removed:c}}}};this.removeUser=function(d,c,e){var f=this;var b;if(d&&d!=-1){if(f.showNoPicker){f.selectedUsers=f.selectedUsers.map(function(g){if(g.id==d){b=f.cloneUser(g);g.excluded=e}return g})}else{f.selectedUsers=f.selectedUsers.filter(function(g){if(g.id==d){b=f.cloneUser(g)}return g.id!=d})}}else{if(c){f.selectedUsers=f.selectedUsers.filter(function(g){if(g.email==c){b=f.cloneUser(g)}return g.email!=c})}}if(e&&b){f.changes={removed:b}}};a.setPlaceholder=function(b){this.$input.attr("placeholder",b);if(this.$input.placeHeld){this.$input.placeHeld()}};a.refreshSelectedUserListDisplayAndHiddenInput=function(){var f=this;var b=[];var g=[];var e=true;var c=true;var d=false;$j(f.selectedUsers).each(function(j,i){e=e&&i.entitled;i.prop.hasConnection=(typeof(i.prop)!="undefined"?(typeof(i.prop.hasConnection)!="undefined"?i.prop.hasConnection:true):true);i.prop.isVisibleToPartner=(typeof(i.prop)!="undefined"?(typeof(i.prop.isVisibleToPartner)!="undefined"?i.prop.isVisibleToPartner:false):false);c=c&&i.prop.hasConnection;if(!f.containsItem(b,i)&&!i.excluded){if(f.inSelectedCountLimit(g)){b.push(i);if(i.id==-1){g.push(i.email)}else{if(f.options.valueIsUsername){g.push(i.username)}else{g.push(i.id)}}}else{f.removeUser(i.id,i.email,false);d=true}}});$j(f.selectedLists).each(function(j,k){if(!k.excluded){var i=true;$j(k.users).each(function(m,l){i=i&&l.entitled;l.prop.hasConnection=(typeof(l.prop)!="undefined"?(typeof(l.prop.hasConnection)!="undefined"?l.prop.hasConnection:true):true);c=c&&l.prop.hasConnection;if(!f.containsItem(b,l)){if(f.inSelectedCountLimit(g)){b.push(l);if(l.id==-1){g.push(l.email)}else{if(f.options.valueIsUsername){g.push(l.username)}else{g.push(l.id)}}}else{f.removeUser(l.id,l.email,false);d=true}}});k.entitled=i;e=e&&i}});f.messagesView.togglePermissionMessage(e);f.messagesView.toggleRelatedMessage(c);f.messagesView.toggleLimitMessage(d);f.messagesView.hideUserMessages();f.$valueStore.val(g.join(","));if(f.selectedLists.length||f.selectedUsers.length){if(f.options.multiple){f.$selected.html(jive.UserPicker.soy.renderSelectedUsersList({results:{users:f.selectedUsers,userlists:f.selectedLists},message:f.options.message,disabled:f.options.disabled,relationship:f.isRelationshipRestricted})).show()}else{f.$selected.html(jive.UserPicker.soy.renderSelectedUser({results:{users:f.selectedUsers,userlists:f.selectedLists},disabled:f.options.disabled})).show();if(f.selectedUsers.length){f.$input.hide();if(f.$browse){f.$browse.hide()}}}var h;f.$selected.find("li").each(function(){h=$j(this);h.find("a.showConnections").click(function(){var i=this;var j=$j.find("#listContents"+$j(i).closest("li").data("list-id"));$j(j).popover({context:$j(i),putBack:true,destroyOnClose:false,container:f.$selected.closest(".j-modal")});return false});h.find("em a.add, em a.remove").parent().click(function(m){var n=$j(this).closest("li"),l=$j("a.add, a.remove",this),k=l.hasClass("remove"),o=n.data("list-id"),j=n.data("user-id"),i=n.data("user-email");n.closest(".j-modal").find(".js-pop").remove();if(o){f.removeList(o,k)}if(j||i){f.removeUser(j,i,k)}f.$input.focus();f.emit("selectedUsersChanged",f.getSelectedUsersAndLists());f.refreshSelectedUserListDisplayAndHiddenInput();m.preventDefault()})});if(h){f.$selected.find("ul").scrollTo(h)}}else{f.$selected.html("");f.$selected.hide();f.show()}f.selectionCallbacks.forEach(function(i){i(f.$selected,f.selectedUsers,f.selectedLists)})};a.inSelectedCountLimit=function(b){return !this.maxSelectedCount||b.length<this.maxSelectedCount};a.selectUser=function(e){var h=this;var b=e.data("user-id");var d=e.data("user-email");var i=e.data("list-id");var c=h.chooseResult(b,d,i);if(c){var f=(c.prop&&c.prop.matchToken)?c.prop.matchToken:$j.trim(h.$input.val());h.$input.val(h.$input.val().replace(new RegExp(f+"([,;|\\s])?"),""));h.$input.focus();h.refreshSelectedUserListDisplayAndHiddenInput();h.hideTheUserList(!b&&!i);var g={added:[c]};h.messagesView.showUserMessages(g)}};a.chooseResult=function(c,e,h){var f=this;var b;if(c||e){var d=f.resultStore.getUser(c,e);if(d&&!f.containsItem(f.selectedUsers,d)){f.selectedUsers.push(d);f.changes={added:d};f.emit("selectedUsersChanged",f.getSelectedUsersAndLists());b=d}}else{if(h){var g=f.resultStore.getList(h);if(g&&!f.containsItem(f.selectedLists,g)){f.selectedLists.push(g);f.changes={added:g};f.emit("selectedUsersChanged",f.getSelectedUsersAndLists());b=g}}}return b};a.containsItem=function(b,e){var d=this;var c=false;$j(b).each(function(f,g){if(e.id==-1){c=c||(jive.util.equalsIgnoreCaseAndPadding(g.email,e.email))}else{c=c||(g.id==e.id&&g.objectType==e.objectType)}});return c};a.cloneUser=function(b){return{displayName:b.displayName,id:b.id,anonymous:b.anonymous,external:b.external,enabled:b.enabled,visible:b.visible,objectType:b.objectType,username:b.username,email:b.email,entitled:b.entitled,prop:{hasConnection:(typeof(b.prop)!="undefined"?(typeof(b.prop.hasConnection)!="undefined"?b.prop.hasConnection:true):true),isVisibleToPartner:(typeof(b.prop)!="undefined"?(typeof(b.prop.isVisibleToPartner)!="undefined"?b.prop.isVisibleToPartner:false):false)},avatarID:b.avatarID,excluded:(typeof(b.excluded)!="undefined"?b.excluded:false),disabled:(typeof(b.disabled)!="undefined"?b.disabled:false)}};a.cloneList=function(d){var b=this;var c={displayName:d.displayName,id:d.id,objectType:d.objectType,style:d.style,users:[],excluded:(typeof(d.excluded)!="undefined"?d.excluded:false)};$j(d.users).each(function(f,e){c.users.push(b.cloneUser(e))});return c};this.shiv=function(b){if(typeof innerShiv!="undefined"){return innerShiv(b)}else{return b}};this.setSelectedUsers=function(b){if(!b){b=[]}var d=this;$j(b).each(function(e,f){if(!d.containsItem(d.selectedUsers,f)){d.selectedUsers.push(d.cloneUser(f))}});for(var c=0;c<d.selectedUsers.length;c++){if(!d.containsItem(b,d.selectedUsers[c])){d.selectedUsers.splice(c,1);c--}}this.refreshSelectedUserListDisplayAndHiddenInput()};this.setSelectedLists=function(b){if(!b){b=[]}var d=this;$j(b).each(function(e,f){if(!d.containsItem(d.selectedLists,f)){d.selectedLists.push(d.cloneList(f))}});for(var c=0;c<this.selectedLists.length;c++){if(!d.containsItem(b,d.selectedLists[c])){this.selectedLists.splice(c,1);c--}}this.refreshSelectedUserListDisplayAndHiddenInput()};this.getSelectedUsersAndLists=function(c){var b=this;var d=$j.merge([],this.selectedUsers);if(c){b.selectedLists.forEach(function(e){e.users.forEach(function(f){if(!b.containsItem(d,f)){d.push(f)}})})}return{users:d,userlists:this.selectedLists,changes:this.changes}};this.val=function(){return this.$valueStore.val()};a.hideTheUserList=function(b){this.chooserView.hide();if(!b){this.$input.val("")}};a.ajaxTheUserList=function(){if(this.lastAjaxAsk!=this.$input.val()&&this.$input.val().length){if(this.$input.val().length>1){this.lastAjaxAsk=this.$input.val();this.emit("autocompleteRequest",this.lastAjaxAsk.replace(";","|"))}}else{if(this.lastAjaxAsk.length&&this.$input.val().length){this.chooserView.show()}}return true};a.isEmptyInput=function(){return $j.trim(this.$input.val()).length===0};a.selectBestMatch=function(d){var c=this,b;var e=$j.trim(this.$input.val());if(e&&e.length>0){b=c.typeAhead.getSelectable();if(b.length==1){b=b.find("a:first");c.selectUser(b);return false}else{if(c.isValidEmailAddress(e.toLowerCase())){b=this.typeAhead.getSelected().children("a");if(jive.util.equalsIgnoreCaseAndPadding(b.data("user-email"),e)){c.selectUser(b)}return false}else{if(d){b=c.chooserView.findNameMatches(e);if(b.length==1){c.selectUser(b)}return false}}}}return true};a.handlePaste=function(){var c=this;var b={context:$j(".jive-chooser-browse")};c.showSpinner(b);c.emitP("batchRequest",$j.trim(c.$input.val()).replace(/;/g,"|")).addCallback(function(e){if(e.users){c.resultStore.storeResults(e);var d=[];$j.each(e.users,function(j,g){var h=$j.trim(g.prop.matchToken);var k=new RegExp(h+"([,;|\\s])?");if(c.pasteMatches(g,h,e.users)){var f=c.chooseResult(g.id,g.email);if(f){d.push(f)}c.$input.val(c.$input.val().replace(k,""))}});c.$input.val($j.trim($j.trim(c.$input.val()).replace("[,;|]+$","")));if(d.length){c.changes={added:d[0],pasted:d}}c.refreshSelectedUserListDisplayAndHiddenInput();if(e.limitExceeded){c.messagesView.toggleLimitMessage(true)}}}).always(function(){c.hideSpinner(b)})};a.pasteMatches=function(b,c,d){return b.prop.matchType=="email"&&jive.util.equalsIgnoreCaseAndPadding(c,b.email)||this.nameMatches(d,c).length===1};a.nameMatches=function(c,b){return c.filter(function(d){return b&&($j.trim(d.username.toLowerCase()).startsWith(b)||jive.util.equalsIgnoreCaseAndPadding(b,d.displayName))})};a.loadBrowseModal=function(){var b=this;b.options.closeFocusSelector=b.$browse;b.selectPeopleView.setOptions(b.options).addListener("select"+b.options.name,function(c){b.selectAction(c);b.$browse.focus()}).open();return false};this.setCanInvitePartners=function(c){this.options.canInvitePartners=c;this.refreshSelectedUserListDisplayAndHiddenInput()};this.setDisabled=function(c){this.options.disabled=c;this.refreshSelectedUserListDisplayAndHiddenInput()};this.hide=function(){this.$input.hide();if(this.$browse){this.$browse.hide()}};this.show=function(){if(!this.showNoPicker){this.$input.show();if(this.$browse){this.$browse.show()}}else{this.hide()}};this.setNoPicker=function(c){console.log("setting user picker to be fake read only: "+c);this.showNoPicker=c;this.show()};this.autocompleteResponse=function(b){var c=this;c.resultStore.storeResults(b);c.chooserView.render(b)};a.isValidEmailAddress=function(b){return b.match("^([\\w\\.!#$%&*\\+/?\\^`{}\\|~_'=-]+)@([\\w\\.-]+)\\.([\\w\\.-]+)$")}});
;
jive.namespace("UserPicker");jive.UserPicker.Main=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(b){var c=this;var d={startingUsers:{users:[],userlists:[]},multiple:false,emailAllowed:false,userAllowed:true,listAllowed:false,browseAllowed:true,resultListAllowed:true,disabled:false,valueIsUsername:false,document:$j(document),canInvitePartners:false,canInviteJustPartners:false,canInvitePreprovisioned:false,invitePreprovisionedDomainRestricted:false,object:null,entitlement:"VIEW",name:"",$input:null,existingModal:{modalContainer:"",prevContainer:"",browseContainer:""},filterIDs:[],maxSelectedCount:100};c.options=$j.extend(d,b);if(!c.options.view){c.options.view=new jive.UserPicker.View(c.options.$input,c.options)}if(!c.options.model){c.options.model=new jive.UserPicker.Source($j.extend(c.options,{resultLimit:c.options.maxSelectedCount}))}this.options.view.addListener("autocompleteRequest",function(e){c.options.model.autocomplete(e).addCallback(function(f){if(typeof(f)=="object"){c.options.view.autocompleteResponse(f)}})});this.options.view.addListener("batchRequest",function(e,f){c.options.model.autocomplete(e).addCallback(function(g){if(typeof(g)=="object"){f.emitSuccess(g)}else{f.emitSuccess({})}}).addErrback(function(g){f.emitError(g)})});this.options.view.addListener("loadUser",function(e,f){c.options.model.load(e).addCallback(function(g){f.emitSuccess(g)}).addErrback(function(g){f.emitError(g)})});this.options.view.addListener("selectedUsersChanged",function(e){c.emit("selectedUsersChanged",e)})};this.setDisabled=function(c){this.options.view.setDisabled(c)};this.setCanInvitePartners=function(c){this.options.view.setCanInvitePartners(c)};this.setUsers=function(b){this.options.view.setSelectedUsers(b)};this.setLists=function(b){this.options.view.setSelectedLists(b)};this.hide=function(){this.options.view.hide()};this.show=function(){this.options.view.show()};this.val=function(){return this.options.view.val()};this.getSelectedUsersAndLists=function(c){var b=this.options.view.getSelectedUsersAndLists(c);b.changes={};return b};this.setNoPicker=function(c){this.options.view.setNoPicker(c)};this.reset=function(){this.options.view.setSelectedUsers(this.options.startingUsers.users);this.options.view.setSelectedLists(this.options.startingUsers.userlists)}});
;
/*
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={};function E(F){return typeof F==="string"}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H){L=L.replace(h,r)}}O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else{O=M(F!==i?F:p[g][k])}return O}a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else{N=0}if(K.length===2){J=r(K[1]);if(F){J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J}if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else{if($.isArray(H[P])){H[P].push(J)}else{if(H[P]!==i){H[P]=[H[P],J]}else{H[P]=J}}}}else{if(P){H[P]=F?i:""}}});return H};function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else{F=E(F)?F.replace(H?w:x,""):F}return l(F,G)}l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y];function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i}return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i){F=2}var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})}q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H;function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)}if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h;function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e){return false}$(j.start)},teardown:function(){if(e){return false}$(j.stop)}});j=(function(){var m={},r,n,o,q;function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}}m.start=function(){if(r){return}var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else{if(u!==t){i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u}}r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this);
;
(function(){var a=(function(){try{return !!localStorage.getItem}catch(b){return false}})();if(a){jive.switchboard=jive.switchboard||(function(){var g={},i={},h="jive.switchboard",c;function d(){return Math.floor(Math.random()*100000).toString()}function b(){var j=localStorage.getItem(h);var k;try{k=j?JSON.parse(j):[]}catch(l){if(l instanceof SyntaxError){k=[]}else{throw l}}if(jQuery.isArray(k)){return k}else{return[]}}jive.conc.observable(g);var f=g.emit;g.emit=function(l){var k=b(),j,m;j=new Date();j.setMilliseconds(j.getMilliseconds()+5000);m={type:l,params:Array.prototype.slice.call(arguments,0),uuid:d(),expires:j.getTime()};i[m.uuid]=m;k.push(m);localStorage.setItem(h,JSON.stringify(k));return f.apply(g,JSON.parse(JSON.stringify(m.params)))};function e(m){var j=(new Date()).getTime(),l=b();var k=l.filter(function(n){return n.expires>j});if(l.length!=k.length){localStorage.setItem(h,JSON.stringify(k))}k.forEach(function(n){if(!i[n.uuid]){f.apply(g,n.params);i[n.uuid]=n}});Object.keys(i).forEach(function(n){if(i[n].expires<j){delete i[n]}});if(typeof m==="object"&&m.type==="storage"&&!jQuery.browser.msie){clearInterval(c)}}jQuery.each(b(),function(j,k){i[k.uuid]=k});c=setInterval(e,333);jQuery(window).bind("storage",e);return g})()}else{jive.switchboard=jive.switchboard||(function(){var b={};jive.conc.observable(b);return b})()}})();
;
jive.namespace("ActivityStream");jive.ActivityStream.BuilderServices=jive.RestService.extend(function(a){a.resourceType="stream-config";a.pluralizedResourceType=a.resourceType;this.getInitialViewData=function(c){var b=this.RESOURCE_ENDPOINT+"/getInitialView";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c.selectedStreamID+""})};this.getActivityStreams=function(b,d){var c=this.RESOURCE_ENDPOINT+"/user/activity/streams";if(b!=undefined&&d!=undefined){c+="/"+b+"/"+d}return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c})};this.getActivityStream=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})};this.manageAssociations=function(b,h){var d=this.RESOURCE_ENDPOINT+"/user/associations/manage",j=new jive.conc.Promise();if(h){d=$j.param.querystring(d,h)}var f=[],g={};for(var e=0,c=b.length;e<c;e++){f.push({objectType:b[e].objectType,objectID:b[e].id});if(!g[b[e].objectType+""]){g[b[e].objectType+""]={}}g[b[e].objectType+""][b[e].id+""]=b[e].itemStreamCounts}j.addCallback(function(l){for(var k=0,o=l.length;k<o;k++){var m=l[k];if(m.addedRelationship){if(!(m.associatedObjectType==3&&m.associatedObjectID==window._jive_current_user.ID)){jive.switchboard.emit("follow.user",jQuery.extend({},{id:m.associatedObjectID}))}jive.switchboard.emit("associations.create",m.addedRelationshipStreamViewBean.streamViewBean)}else{if(m.associatedObjectType!=3){if(g[m.associatedObjectType+""][m.associatedObjectID+""]==0){var n={objectType:m.associatedObjectType,objectID:m.associatedObjectID};jive.switchboard.emit("follow.create",n)}}}}});return this.commonAjaxRequest(j,"POST",{url:d,data:JSON.stringify(f)})};this.createNewStream=function(c){var b=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c.map(function(d){return{objectType:d.type,objectID:d.id}}))})};this.deleteStream=function(c,d){var b=this.RESOURCE_ENDPOINT+"/"+c;d.addCallback(function(h){var m=h.deletedStream;jive.switchboard.emit("associations.destroy",m);var k=m.specifiedPlaces;for(var f=0,e=k.length;f<e;f++){var g=k[f].type+"",l=k[f].id+"";if(k[f].prop.followInfo.streamsAssociatedBean.streamIDs.length==1){var j={objectType:g,objectID:l};jive.switchboard.emit("follow.destroy",j)}}});return this.commonAjaxRequest(d,"DELETE",{url:b})};this.modifyConfig=function(b){var c=this.RESOURCE_ENDPOINT+"/"+b.id+"/modify";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify({name:b.name,receiveEmails:b.receiveEmails,defaultStream:b.defaultStream})})};this.pinHomeNav=function(c,d){var b=this.RESOURCE_ENDPOINT+"/pinHomeNavView";this.commonAjaxRequest(d,"POST",{url:b,data:c})};this.addItemsToStream=function(g,b,f,e,d){var c=this.RESOURCE_ENDPOINT+"/"+f+"/objects";if(d){c=$j.param.querystring(c,d)}g.addCallback(function(q){jive.switchboard.emit("associations.create",q.streamViewBean);for(var p=0,m=q.addedRelationships.length;p<m;p++){jive.switchboard.emit("follow.user",jQuery.extend({},{id:q.addedRelationships[p]}))}var l=q.streamViewBean.specifiedPlaces;for(var n=0,h=l.length;n<h;n++){var r=l[n].type+"",k=l[n].id+"";if(e[r]&&!e[r][k]){var o={objectType:r,objectID:k};jive.switchboard.emit("follow.create",o)}}});return this.commonAjaxRequest(g,"POST",{url:c,data:JSON.stringify(b.map(function(h){return{objectType:h.type,objectID:h.id}}))})};this.removeItemsFromStream=function(g,b,f,e,d){var c=this.RESOURCE_ENDPOINT+"/"+f+"/objects/remove";if(d){c=$j.param.querystring(c,d)}g.addCallback(function(h){jive.switchboard.emit("associations.destroy",h.streamViewBean);var n=h.streamViewBean.specifiedPlaces;for(var k=0,j=n.length;k<j;k++){var l=n[k].type+"",o=n[k].id+"";if(e[l]&&e[l][o]==1){var m={objectType:l,objectID:o};jive.switchboard.emit("follow.destroy",m)}}});return this.commonAjaxRequest(g,"POST",{url:c,data:JSON.stringify(b.map(function(h){return{objectType:h.type,objectID:h.id}}))})};this.setItemAssociations=function(b,f,c,e,d){var g=new jive.conc.Promise();if(c){return this.addItemsToStream(g,b,f,e,d)}else{return this.removeItemsFromStream(g,b,f,e,d)}};this.removeAllAssociations=function(d,f,c){var b=this.RESOURCE_ENDPOINT+"/"+d+"/"+f,e=new jive.conc.Promise();if(c){b=$j.param.querystring(b,c)}e.addCallback(function(){var g={objectType:d,objectID:f};jive.switchboard.emit("follow.destroy",g)});return this.commonAjaxRequest(e,"DELETE",{url:b})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.activitystream=="undefined"){jive.eae.activitystream={}}if(typeof jive.eae.activitystream.builder=="undefined"){jive.eae.activitystream.builder={}}jive.eae.activitystream.builder.followInStreamsMenu=function(A,G){var B=G||new soy.StringBuilder();B.append('<div id=\'follow-in-menu\' class="j-follow-in-menu j-js-follow-in-streams-menu" style="display: none;" data-objectid="',soy.$$escapeHtmlAttribute(A.objectID),'" data-objecttype="',soy.$$escapeHtmlAttribute(A.objectType),'"><form><fieldset><legend>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.follow.in"),[])),"</legend>");var D=A.streams;var E=D.length;for(var F=0;F<E;F++){var C=D[F];jive.eae.activitystream.builder.streamSelector(C,B)}B.append((A.removeAllAssnI18nKey)?'<a href="#" class="j-js-stream-option j-js-remove-all-assns j-stop-following" role="button">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.removeAllAssnI18nKey),[]))+"</a>":"",'</fieldset></form><a href="#" class="j-followmenu-close close" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.done"),[])),"</a></div>");return G?"":B.toString()};jive.eae.activitystream.builder.streamSelector=function(A,C){var B=C||new soy.StringBuilder();B.append('<label for="stream_',soy.$$escapeHtmlAttribute(A.id),'" class="j-js-stream-option j-',soy.$$escapeHtmlAttribute(A.source)," ",(A.selected)?"selected":"",'" ',(A.selected)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.followingin.remove.text"),[]))+'"':"",' data-id="',soy.$$escapeHtmlAttribute(A.id),'" data-source="',soy.$$escapeHtmlAttribute(String(A.source).toLowerCase()),'"><input type="checkbox" id="stream_',soy.$$escapeHtmlAttribute(A.id),'" value="',soy.$$escapeHtmlAttribute(A.id),'" ',(A.selected)?'checked="checked"':""," />",soy.$$escapeHtml(A.name),"</label>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.activitystream=="undefined"){jive.eae.activitystream={}}if(typeof jive.eae.activitystream.builder=="undefined"){jive.eae.activitystream.builder={}}jive.eae.activitystream.builder.headerCss=function(A,C){var B=C||new soy.StringBuilder();B.append('<link id="j-streambuilder-css-link" rel="stylesheet" href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,"/6.0.3.73caaf5/","","/styles/jive-streambuilder.css"))),'" type="text/css" media="all" />');return C?"":B.toString()};jive.eae.activitystream.builder.main=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="stream-builder" class="j-sb">',(!A.viewData.hideBuilderHelp&&A.viewData.selectedStream.configuration.source!="connections")?'<div id="j-builder-init"><div class="j-builder-init"><div id="j-builder-help-splash" class="j-builder-help-splash clearfix"><h2 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.header"),[]))+'</h2><ul class="j-builder-list-why"><li><span title=\''+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.profile"),[]))+"' role='img' class=\"jive-icon-huge jive-icon-profile\"></span><h4>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.team.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.team.text"),[]))+"</p></li><li><span title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.project"),[]))+"' role='img' class=\"jive-icon-huge jive-icon-project\"></span><h4>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.project.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.project.text"),[]))+"</p></li><li><span title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.blog"),[]))+"' role='img' class=\"jive-icon-huge jive-icon-blog\"></span><h4>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.interesting.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.interesting.text"),[]))+'</p></li><li><span class="jive-icon-huge jive-icon-noisy"></span><h4>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.noisy.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.noisy.text"),[]))+'</p></li></ul><div class="j-builder-intro-why font-color-meta"><h4 class="font-face-deco">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.veryactive.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.veryactive.text1"),[]))+"</p><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.veryactive.text2"),[]))+'</p></div><div class="j-builder-intro-close clearfix"><button class="js-close-splash j-btn-global j-btn-callout">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.gotit.button"),[]))+'</button></div></div></div><div id="j-builder-help-arrows" style="display:none;"><div class="j-js-builder-dragarrow j-builder-init-dragarrow font-color-white">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.instr.dragdrop"),[]))+'</div><div class="j-js-builder-instr j-builder-instructions j-rc4"><h3>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.instr.header"),[]))+"</h3><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.instr.text"),[]))+"</p></div></div></div>":"");jive.eae.activitystream.builder.streamAssociationList({streamViewBean:A.viewData.selectedStream},B);B.append('<div id="stream-elements"><div class="j-js-mode-selectors j-toggle-mode clearfix"><a href="#" class="j-js-search-page-type j-toggle-suggested ',(A.viewData.initialResultSet.people.length||A.viewData.initialResultSet.places.length)?"font-color-normal":"",'" data-pagetype="suggested">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.mode.suggested"),[])),'</a><a href="#" class="j-js-search-page-type j-toggle-search ',(!A.viewData.initialResultSet.people.length&&!A.viewData.initialResultSet.places.length)?"font-color-normal":"",'" data-pagetype="people-places">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.mode.search"),[])),'</a><form class="j-asb-search j-form" id="search-form" autocomplete="off"><label for="j-stream-edit-search-textfield" class="j-508-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.instr"),[])),'</label><input type="text" id="j-stream-edit-search-textfield" class="j-asb-searchfield" placeholder="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.instr"),[])),'"><p class="j-508-label" aria-hidden="true" id="j-asb-clear-search-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.clear"),[])),'</p><a href="#" class="j-clear-search j-asb-clear-search" id="j-asb-clear-search" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.clear"),[])),'" aria-labelledby="j-asb-clear-search-label"><span class="jive-icon-sml jive-glyph-remove"></span></a></form></div><div id=\'j-js-asb-results\' class="j-asb-results">');jive.eae.activitystream.builder.searchResultsView({currentStreamID:A.viewData.selectedStream.configuration.id,currentUserID:A.viewData.currentUserID,type:(A.viewData.initialResultSet.people.length||A.viewData.initialResultSet.places.length)?"suggested":"people-places",allResults:A.viewData.initialResultSet},B);B.append("</div></div></div>");return C?"":B.toString()};jive.eae.activitystream.builder.streamAssociationList=function(F,E){var C=E||new soy.StringBuilder();C.append('<div id="current-stream" class="stream-contents"><header id="stream-header" class="j-current-stream clearfix"><div class="j-pref-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.options.email.updates"),[])),'</div><div class="j-email-options j-js-stream-options"><span class="j-508-label" id="stream-email-update-prefs">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.options.email.toggle"),[])),"</span>");jive.eae.activitystream.builder.emailOption({configuration:F.streamViewBean.configuration},C);C.append("</div>",(F.streamViewBean.configuration.source!="connections")?'<div class="j-delete-stream"><a href="#" class="j-close-builder j-js-delete-stream">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.options.delete"),[]))+"</a></div>":"",'</header><div id="stream-contents"><div class="j-type-toggle j-js-type-toggle clearfix"><a href="#" class="selected j-js-selected" data-type="people">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.people"),[])),' (<span class="j-js-people-count">',soy.$$escapeHtml(F.streamViewBean.specifiedPeople.length),'</span>)</a><a href="#" data-type="places">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.places"),[])),' (<span class="j-js-places-count">',soy.$$escapeHtml(F.streamViewBean.specifiedPlaces.length),'</span>)</a></div><ul class="j-js-assoc-list j-assoc-list" data-type="people">');var G=F.streamViewBean.specifiedPeople;var B=G.length;for(var K=0;K<B;K++){var H=G[K];jive.eae.activitystream.builder.specifiedObject({object:H},C)}C.append('</ul><ul class="j-js-assoc-list j-assoc-list" data-type="places" style="display:none;">');var J=F.streamViewBean.specifiedPlaces;var D=J.length;for(var I=0;I<D;I++){var A=J[I];jive.eae.activitystream.builder.specifiedObject({object:A},C)}C.append('</ul><div class="j-drag-here font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.instr"),[])),'</div><div class="j-backdrop ui-droppable"></div></div></div>');return E?"":C.toString()};jive.eae.activitystream.builder.streamItemCounts=function(A,C){var B=C||new soy.StringBuilder();B.append("<div>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.has.counts"),[])),'</div><div><span class="j-js-people-count">',(A.peopleCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.one.person"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.X.people"),[A.peopleCount])),'</span> <span class="j-js-places-count">',(A.placesCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.one.place"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.X.places"),[A.placesCount])),"</span></div>");return C?"":B.toString()};jive.eae.activitystream.builder.streamDisplayName=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-js-stream-display-name j-stream-name" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.change.stream.name"),[])),'">',soy.$$escapeHtml(A.displayName),'<span class="jive-icon-sml jive-glyph-edit"></span></a>');return C?"":B.toString()};jive.eae.activitystream.builder.emailOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-js-emails j-stream-email-prefs ',(A.configuration.receiveEmails)?"on font-color-new":"off font-color-meta-light",'" data-selected="',(A.configuration.receiveEmails)?"true":"false",'" title="',(A.configuration.receiveEmails)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.options.email.tt.on"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.options.email.tt.off"),[])),'" role="button" aria-pressed="',soy.$$escapeHtmlAttribute(A.configuration.receiveEmails),'" aria-labelledby="stream-email-update-prefs">',(A.configuration.receiveEmails)?'<span class="jive-icon-med jive-icon-emails-active" role="img"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("prefs.option.switch.on"),[])):'<span class="jive-icon-med jive-icon-emails-inactive" role="img"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("prefs.option.switch.off"),[])),"</a>");return C?"":B.toString()};jive.eae.activitystream.builder.searchResultsView=function(A,C){var B=C||new soy.StringBuilder();B.append("<div id='j-asb-suggested' ",(A.type!="suggested")?"style='display:none;'":"",">");jive.eae.activitystream.builder.suggestedView(A,B);B.append("</div><div id='j-asb-people-places' ",(A.type!="people-places")?"style='display:none;'":"",'><div class="j-result-set" class="j-js-people-results clearfix" style="">');jive.eae.activitystream.builder.peoplePlacesSearchResultSections(A,B);jive.eae.activitystream.builder.noPossibleSearchResults(null,B);B.append("</div></div>");return C?"":B.toString()};jive.eae.activitystream.builder.peoplePlacesSearchResultSections=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="people-places-search-results" ',(A.allResults&&(A.allResults.places.length>0||A.allResults.people.length>1||A.allResults.people.length==1&&A.allResults.people[0].id!=A.currentUserID))?"":'style="display:none;"','><header class="clearfix"><h3 class="j-search-type">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.people"),[])),'</h3></header><div class="j-js-people-results j-people-results clearfix">');if(A.type=="people-places"){jive.eae.activitystream.builder.searchResultsSection({currentStreamID:A.currentStreamID,type:"people",items:A.allResults.people},B)}B.append('</div><header class="clearfix"><h3 class="j-search-type">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.places"),[])),'</h3></header><div class="j-js-places-results  clearfix">');if(A.type=="people-places"){jive.eae.activitystream.builder.searchResultsSection({currentStreamID:A.currentStreamID,type:"places",items:A.allResults.places},B)}B.append("</div></div>");return C?"":B.toString()};jive.eae.activitystream.builder.noPossibleSearchResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-notmuch-here" style="display:none;"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.empty.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.intro.empty.text"),[])),"</p></div>");return C?"":B.toString()};jive.eae.activitystream.builder.showMoreResultsButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-show-more j-js-show-more-results" data-searchtype=\'',soy.$$escapeHtmlAttribute(A.type),'\'><span class="jive-icon-med jive-icon-arrow-down vmicon"></span><span class="jive-icon-med jive-icon-arrow-down-focus vmicon"></span><strong class="lnk font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.more"),[])),"</strong></a>");return C?"":B.toString()};jive.eae.activitystream.builder.suggestedView=function(H,F){var D=F||new soy.StringBuilder();if(H.allResults&&H.allResults.people.length){D.append('<div class="j-result-set"><header class="clearfix"><h3 class="j-search-type">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.suggested.people"),[])),'</h3></header><ul class="results">');var G=H.allResults.people;var K=G.length;for(var I=0;I<K;I++){var J=G[I];jive.eae.activitystream.builder.searchResult({currentStreamID:H.currentStreamID,item:J},D)}D.append("</ul></div>")}if(H.allResults&&H.allResults.places.length){D.append('<div class="j-result-set"><header class="clearfix"><h3 class="j-search-type">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.suggested.places"),[])),'</h3></header><ul class="results">');var A=H.allResults.places;var E=A.length;for(var B=0;B<E;B++){var C=A[B];jive.eae.activitystream.builder.searchResult({currentStreamID:H.currentStreamID,item:C},D)}D.append("</ul></div>")}D.append((!H.allResults||!H.allResults.people.length&&!H.allResults.places.length)?'<div class="j-result-set"><p class="j-empty">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.suggested.noresults"),[]))+"</p></div>":"");return F?"":D.toString()};jive.eae.activitystream.builder.searchResultsSection=function(A,C){var B=C||new soy.StringBuilder();if(A.items.length){B.append('<ul class="results j-js-',soy.$$escapeHtmlAttribute(A.type),'-results-list clearfix">');jive.eae.activitystream.builder.searchResultItems(A,B);B.append("</ul>")}else{B.append('<div class="j-no-results font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results."+A.type+".noresults"),[])),"</div>")}return C?"":B.toString()};jive.eae.activitystream.builder.searchResultItems=function(A,G){var D=G||new soy.StringBuilder();var C=A.items;var B=C.length;for(var F=0;F<B;F++){var E=C[F];jive.eae.activitystream.builder.searchResult({currentStreamID:A.currentStreamID,item:E},D)}return G?"":D.toString()};jive.eae.activitystream.builder.searchResult=function(A,C){var B=C||new soy.StringBuilder();if(A.item.objectType=="3"){B.append('<li class="j-js-search-result j-result ',(A.item.prop.connections&&A.item.prop.connections.approvalsEnabled&&!A.item.prop.connections.targetUserACurrentFriend)?"j-disabled":"j-js-draggable j-draggable"," ",(A.item.prop.connections&&A.item.prop.connections.streamsAssociatedBean&&A.item.prop.connections.streamsAssociatedBean.streamIDs.indexOf(A.currentStreamID)>-1)?"j-in-current-stream":"",'" data-objecttype="',soy.$$escapeHtmlAttribute(A.item.type),'" data-id="',soy.$$escapeHtmlAttribute(A.item.id),'" aria-labelledby="j-user-result-',soy.$$escapeHtmlAttribute(A.item.id),'"><span class="j-draggit j-ui-elem"></span><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.item.prop.profileImage.url),'" class="j-result-img" alt="',soy.$$escapeHtmlAttribute(A.item.displayName),'"><h5 id="j-user-result-',soy.$$escapeHtmlAttribute(A.item.id),'">',soy.$$escapeHtml(A.item.displayName),"</h5>",(A.item.prop.profile.location)?'<span class="person-location font-color-meta-light"> '+soy.$$escapeHtml(A.item.prop.profile.location)+"</span>":"",(A.item.prop.isVisibleToPartner)?'<p class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+"</em></p>":(A.item.prop.profile)?(A.item.prop.profile.title)?"<p>"+soy.$$escapeHtml(A.item.prop.profile.title)+"</p>":"":"");if(A.item.prop.connections&&!(A.item.prop.connections.approvalsEnabled&&!A.item.prop.connections.targetUserACurrentFriend)){jive.eae.activitystream.builder.streamsAssociatedButton({connectionData:A.item.prop.connections},B)}B.append('<p class="person-stats"><span aria-hidden="true">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[])),'</span> <a class="j-js-followers-link" href="#" data-activity-type="follow" data-activity-count="',(A.item.prop.connections&&A.item.prop.connections.followerCount)?soy.$$escapeHtmlAttribute(A.item.prop.connections.followerCount):"0",'" data-following="',(A.item.prop.connections.targetUserACurrentFriend)?"true":"false",'" ',(A.item.prop.connections.friendLists&&A.item.prop.connections.friendLists.length)?'data-labeldata="'+soy.$$escapeHtmlAttribute(JSON.stringify(A.item.prop.connections.friendLists).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+'"':""," ",(A.item.prop.connections.labelsShown)?'data-labelsshown="true"':"",'aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[]))," ",(A.item.prop.connections&&A.item.prop.connections.followerCount)?soy.$$escapeHtmlAttribute(A.item.prop.connections.followerCount):"0",'">',(A.item.prop.connections&&A.item.prop.connections.followerCount)?soy.$$escapeHtml(A.item.prop.connections.followerCount):"0",'</a></p><span class="j-508-label" aria-hidden="true" id="button-in-stream-user-',soy.$$escapeHtmlAttribute(A.item.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.alreadyfollowing.user.text"),[A.item.displayName])),'</span><button class="j-btn-global j-btn-disabled j-add-to-current j-instream" disabled="disabled" id="button-in-stream-user-',soy.$$escapeHtmlAttribute(A.item.id),'" aria-labelledby="button-in-stream-user-',soy.$$escapeHtmlAttribute(A.item.id),'-label" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.in.stream"),[])),'</button><span class="j-508-label" aria-hidden="true" id="button-add-user-',soy.$$escapeHtmlAttribute(A.item.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.startfollowing.user.text"),[A.item.displayName])),'</span><button class="j-btn-global j-add-to-current j-btn-callout j-addstream j-js-add-to-current" id="button-add-user-',soy.$$escapeHtmlAttribute(A.item.id),'" aria-labelledby="button-add-user-',soy.$$escapeHtmlAttribute(A.item.id),'-label" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.add"),[])),"</button></li>")}else{if(A.item.archetype=="containers"){B.append('<li class="j-js-search-result j-result ',(A.item.prop.followInfo.showFollowControls)?"j-js-draggable j-draggable":"j-disabled"," ",(A.item.prop.followInfo&&A.item.prop.followInfo.streamsAssociatedBean&&A.item.prop.followInfo.streamsAssociatedBean.streamIDs.indexOf(A.currentStreamID)>-1)?"j-in-current-stream":"",'" data-objecttype="',soy.$$escapeHtmlAttribute(A.item.type),'" data-id="',soy.$$escapeHtmlAttribute(A.item.id),'" aria-labelledby="j-container-result-',soy.$$escapeHtmlAttribute(A.item.id),'"><span class="j-draggit j-ui-elem"></span>',(A.item.prop.placeImage&&A.item.prop.placeImage.urlMedium)?'<img src="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.item.prop.placeImage.urlMedium)+'" class="j-result-img" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.image"),[]))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.image"),[]))+'">':'<img src="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/default-space.png")))+'" class="j-result-img" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.image"),[]))+'" alt="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.image"),[]))+'">');if(A.item.prop.followInfo&&A.item.prop.followInfo.showFollowControls){jive.eae.activitystream.builder.streamsAssociatedButton({connectionData:A.item.prop.followInfo},B)}B.append('<h5 id="j-container-result-',soy.$$escapeHtmlAttribute(A.item.id),'">',soy.$$escapeHtml(A.item.subject),"</h5>",(A.item.prop.parentInfo)?'<p class="j-page-header-parent font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[]))+" <span>"+soy.$$escapeHtml(A.item.prop.parentInfo.subject)+"</span></p>":"",(A.item.prop.isVisibleToPartner)?'<p class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+"</em></p>":(A.item.prop.descSnippet)?'<p class="place-desc">'+soy.$$escapeHtml(A.item.prop.descSnippet)+"</p>":"",(A.item.type==600)?'<p class="place-stats">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[]))+' <a class="j-js-followers-link" data-activity-type="follow" data-activity-count="'+((A.item.prop.followInfo&&A.item.prop.followInfo.numFollowers)?soy.$$escapeHtmlAttribute(A.item.prop.followInfo.numFollowers):"0")+'" data-following="'+((A.item.prop.followInfo.streamsAssociatedBean.streamIDs.length)?"true":"false")+'">'+((A.item.prop.followInfo&&A.item.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.item.prop.followInfo.numFollowers):"0")+"</a></p>":(A.item.type==700)?'<p class="place-stats">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[]))+' <a class="j-js-followers-link" data-activity-type="follow" data-activity-count="'+((A.item.prop.followInfo&&A.item.prop.followInfo.numFollowers)?soy.$$escapeHtmlAttribute(A.item.prop.followInfo.numFollowers):"0")+'" data-following="'+((A.item.prop.followInfo.streamsAssociatedBean.streamIDs.length)?"true":"false")+'">'+((A.item.prop.followInfo&&A.item.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.item.prop.followInfo.numFollowers):"0")+"</a></p>":(A.item.type==14)?'<p class="place-stats">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[]))+' <a class="j-js-followers-link" data-activity-type="follow" data-activity-count="'+((A.item.prop.followInfo&&A.item.prop.followInfo.numFollowers)?soy.$$escapeHtmlAttribute(A.item.prop.followInfo.numFollowers):"0")+'" data-following="'+((A.item.prop.followInfo.streamsAssociatedBean.streamIDs.length)?"true":"false")+'">'+((A.item.prop.followInfo&&A.item.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.item.prop.followInfo.numFollowers):"0")+"</a></p>":"",'<span class="j-508-label" aria-hidden="true" id="button-instream-container-',soy.$$escapeHtmlAttribute(A.item.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.alreadyfollowing.place.text"),[A.item.subject])),'</span><button class="j-btn-global j-btn-disabled j-add-to-current j-instream" disabled="disabled" id="button-instream-container-',soy.$$escapeHtmlAttribute(A.item.id),'" aria-labelledby="button-instream-container-',soy.$$escapeHtmlAttribute(A.item.id),'-label" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.in.stream"),[])),'</button><span class="j-508-label" aria-hidden="true" id="button-addstream-container-',soy.$$escapeHtmlAttribute(A.item.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.startfollowing.place.text"),[A.item.subject])),'</span><button class="j-btn-global j-btn-callout j-add-to-current j-addstream j-js-add-to-current" id="button-addstream-container-',soy.$$escapeHtmlAttribute(A.item.id),'" aria-labelledby="button-addstream-container-',soy.$$escapeHtmlAttribute(A.item.id),'-label" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.add"),[])),"</button></li>")}}return C?"":B.toString()};jive.eae.activitystream.builder.jsDraggableHelper=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-drag-cursor j-rc6">',(A.count>1)?"<span>"+soy.$$escapeHtml(A.count)+"</span> "+soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("global.items"),[])).toLowerCase()):"<span>"+soy.$$escapeHtml(A.count)+"</span>"+soy.$$escapeHtml(String(jive.i18n.i18nText(jive.i18n.getMsg("global.item"),[])).toLowerCase()),"</div>");return C?"":B.toString()};jive.eae.activitystream.builder.jsAddBtnSuccessMessage=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-item-added font-color-normal j-rc4" style="display:none;"><span class="jive-icon-med jive-glyph-addmsg-arrow"></span>',(A.type=="new")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.added"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.added.already"),[])),"</div>");return C?"":B.toString()};jive.eae.activitystream.builder.streamsAssociatedButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class= "j-js-asb-search-item-assocs j-asp-assoc active j-menu-trigger j-rc3 j-rc-none-top">');jive.eae.activitystream.builder.streamsAssociatedButtonDetails(A,B);B.append("</div>");return C?"":B.toString()};jive.eae.activitystream.builder.streamsAssociatedButtonDetails=function(A,C){var B=C||new soy.StringBuilder();B.append((A.connectionData.streamsAssociatedBean&&A.connectionData.streamsAssociatedBean.streamIDs)?'<span class="j-js-specifics j-specifics" data-streamids="['+soy.$$escapeHtmlAttribute(A.connectionData.streamsAssociatedBean.streamIDs)+']" data-assocwithcomms="'+soy.$$escapeHtmlAttribute(A.connectionData.streamsAssociatedBean.associatedWithCommunications)+'"><span class="jive-icon-med jive-icon-activity-pulse'+((A.connectionData.streamsAssociatedBean.streamIDs.length)?"-active":"")+'"></span><span class="j-508-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.search.results.in.streams"),[]))+"</span><span>"+soy.$$escapeHtml(A.connectionData.streamsAssociatedBean.streamIDs.length)+"</span></span>":'<span class="j-js-specifics j-specifics" data-streamids="[]" data-assocwithcomms="0"><span class="jive-icon-med jive-icon-activity-pulse"></span></span>');return C?"":B.toString()};jive.eae.activitystream.builder.specifiedObject=function(A,C){var B=C||new soy.StringBuilder();if(A.object.type=="3"){B.append('<li class="j-js-specified-item j-followed-item ',(A.justAdded)?"j-just-added":"","\" data-itemtype='user' data-objecttype='",soy.$$escapeHtmlAttribute(A.object.objectType),"' data-id='",soy.$$escapeHtmlAttribute(A.object.id),"'>");jive.shared.displayutil.avatar(soy.$$augmentData(A.object,{size:22,hideLink:true}),B);B.append('<span class="j-item j-item-person">');jive.shared.displayutil.userDisplayName(A.object,B);B.append("</span>",(A.object.prop.isVisibleToPartner)?'<span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.external.contributor"),[]))+"</em></span>":"");if(A.object.prop.connections&&!(A.object.prop.connections.approvalsEnabled&&!A.object.prop.connections.targetUserACurrentFriend)){jive.eae.activitystream.builder.streamsAssociatedButton({connectionData:A.object.prop.connections},B)}B.append('<span class="j-508-label" id="remove-control-',soy.$$escapeHtmlAttribute(A.object.objectType),"-",soy.$$escapeHtmlAttribute(A.object.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.stopfollowing.user.text"),[A.object.displayName])),'</span><a href="#" class="controls" role="button" aria-labelledby="remove-control-',soy.$$escapeHtmlAttribute(A.object.objectType),"-",soy.$$escapeHtmlAttribute(A.object.id),'-label"><span class="j-js-remove-item jive-icon-sml jive-glyph-remove"></span></a></li>')}else{if(A.object.archetype=="containers"){B.append('<li class="j-js-specified-item j-followed-item ',(A.justAdded)?"j-just-added":"","\" data-itemtype='place' data-objecttype='",soy.$$escapeHtmlAttribute(A.object.type),"' data-id='",soy.$$escapeHtmlAttribute(A.object.id),"'><span title='",soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.content.type."+A.object.type),[])),"' role='img' class=\"jive-icon-big ",soy.$$escapeHtmlAttribute(A.object.iconCss),'"></span><span class="j-item">',A.object.subject,"</span>",(A.object.prop.isVisibleToPartner)?'<span class="font-color-meta-light j-browse-external-access"><em>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+"</em></span>":"");if(A.object.prop.followInfo&&A.object.prop.followInfo.showFollowControls){jive.eae.activitystream.builder.streamsAssociatedButton({connectionData:A.object.prop.followInfo},B)}B.append('<span class="j-508-label" id="remove-control-',soy.$$escapeHtmlAttribute(A.object.type),"-",soy.$$escapeHtmlAttribute(A.object.id),'-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.stopfollowing.place.text"),[A.object.subject])),'</span><a href="#" class="controls" role="button" aria-labelledby="remove-control-',soy.$$escapeHtmlAttribute(A.object.type),"-",soy.$$escapeHtmlAttribute(A.object.id),'-label"><span class="j-js-remove-item jive-icon-sml jive-glyph-remove"></span></a></li>')}}return C?"":B.toString()};jive.eae.activitystream.builder.jsI18nHelper=function(A,C){var B=C||new soy.StringBuilder();B.append((A.param1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[A.param1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));return C?"":B.toString()};jive.eae.activitystream.builder.deleteStreamModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal" id="jive-js-stream-delete-modal"><header><h2 class="jive-modal-title jive-modal-title-delete-doc">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.delete.header"),[])),'</h2></header><div class="jive-modal-content clearfix"><p><span title=\'',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.warning"),[])),"' role='img' class=\"jive-icon-med jive-icon-warn\"></span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activitystream.builder.streams.delete.confirm.text"),[])),'</p><div class="jive-form-buttons"><input id="stream-delete-submit-button" type="submit" class="j-btn-callout" name="delete" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.delete"),[])),"\" data-id='",soy.$$escapeHtmlAttribute(A.streamID),'\'/><input id="stream-delete-close-button"  type="submit" class="jive-modal-close close" value="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'" /></div></div></div>');return C?"":B.toString()};jive.eae.activitystream.builder.hiddenRulesContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-modal-hiding-rules" class="jive-modal j-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.modal.title"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><div class="jive-modal-content clearfix"><header class="j-hrule-hd">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.modal.description"),[])),'</header><div id="j-hiding-rules-sections" class="j-sb-hrules j-yscroller">');if(A.rulesData.hidingRuleBeans["item"]||A.rulesData.hidingRuleBeans["context"]||A.rulesData.hidingRuleBeans["item-context"]){jive.eae.activitystream.builder.hidingRules({itemData:A.rulesData.hidingRuleBeans["item"],headerKey:"eae.menu.hide.modal.content.type",isOtherRule:false,type:"item"},B);jive.eae.activitystream.builder.hidingRules({itemData:A.rulesData.hidingRuleBeans["context"],headerKey:"eae.menu.hide.modal.context.type",isOtherRule:false,type:"context"},B);jive.eae.activitystream.builder.hidingRules({itemData:A.rulesData.hidingRuleBeans["item-context"],headerKey:"eae.menu.hide.modal.context.and.content.type",isOtherRule:true,type:"type-context"},B)}else{jive.eae.activitystream.builder.noHiddenRules(null,B)}B.append('</div><button class="j-btn-global j-btn-callout j-hrules-close close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.done"),[])),"</button></div></div>");return C?"":B.toString()};jive.eae.activitystream.builder.noHiddenRules=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-nohrules font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.modal.norules"),[])),"</p>");return C?"":B.toString()};jive.eae.activitystream.builder.hidingRules=function(B,G){var C=G||new soy.StringBuilder();if(B.itemData){C.append('<h5 class="j-hrule-type">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.headerKey),[])),':</h5><ul class="j-js-hiding-rules j-hrules" data-type="',soy.$$escapeHtmlAttribute(B.type),'">');var F=B.itemData;var E=F.length;for(var D=0;D<E;D++){var A=F[D];jive.eae.activitystream.builder.hidingRule({item:A,isOtherRule:B.isOtherRule},C);jive.eae.activitystream.builder.hidingRuleUndone({item:A,isOtherRule:B.isOtherRule},C)}C.append("</ul>")}return G?"":C.toString()};jive.eae.activitystream.builder.hidingRule=function(A,F){var B=F||new soy.StringBuilder();B.append('<li class="j-js-hiding-rule j-hrule" data-objecttype="',soy.$$escapeHtmlAttribute(A.item.objectType),'" data-objectid="',soy.$$escapeHtmlAttribute(A.item.objectID),'" data-contenttype="',soy.$$escapeHtmlAttribute(A.item.contentType),'">');if(A.isOtherRule){if(A.item.contentType==1464927464){jive.shared.soy.i18nHelper({i18nKey:"eae.menu.hide.modal.plural.hidden",arg0:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.user_wallentries.title"),[A.item.objectName]))},B)}else{if(A.item.contentType==129){var C=new soy.StringBuilder();if(A.item.appIcon){jive.shared.displayutil.renderIconElement({icon:A.item.appIcon},C);C.append(" ")}else{C.append('<span class="',soy.$$escapeHtml(A.item.iconCss),'"></span>')}C.append('<a href="',soy.$$escapeHtml(A.item.objectUrl),'" class="title">',soy.$$escapeHtml(A.item.objectName),"</a>");jive.shared.soy.i18nHelper({i18nKey:"eae.menu.hide.modal.other.hidden",arg0:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomment"),[])),arg1:C.toString(),noAutoEscape:true},B)}else{var D=new soy.StringBuilder();if(A.item.appIcon){jive.shared.displayutil.renderIconElement({icon:A.item.appIcon},D);D.append(" ")}else{D.append('<span class="',soy.$$escapeHtml(A.item.iconCss),'"></span>')}D.append('<a href="',soy.$$escapeHtml(A.item.objectUrl),'" class="title">',soy.$$escapeHtml(A.item.objectName),"</a>");jive.shared.soy.i18nHelper({i18nKey:"eae.menu.hide.modal.other.hidden",arg0:soy.$$escapeHtml(A.item.objectTypeName),arg1:D.toString(),noAutoEscape:true},B)}}}else{var E=new soy.StringBuilder((A.item.objectType==129)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomments.on"),[]))+" ":"");if(A.item.appIcon){jive.shared.displayutil.renderIconElement({icon:A.item.appIcon},E);E.append(" ")}else{E.append('<span class="',soy.$$escapeHtml(A.item.iconCss),'"></span>')}E.append('<a href="',soy.$$escapeHtml(A.item.objectUrl),'" class="title">',soy.$$escapeHtml(A.item.objectName),"</a>");jive.shared.soy.i18nHelper({i18nKey:(A.item.objectType==129)?"eae.menu.hide.modal.plural.hidden":"eae.menu.hide.modal.regular.hidden",arg0:E.toString(),noAutoEscape:true},B)}B.append('<a href="#" class="j-js-rule-undo j-hrule-undo">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.undo"),[])),"</a></li>");return F?"":B.toString()};jive.eae.activitystream.builder.hidingRuleUndone=function(A,F){var D=F||new soy.StringBuilder();D.append('<li class="j-js-undone-hiding-rule j-hrule undone" style="display:none;" data-objecttype="',soy.$$escapeHtmlAttribute(A.item.objectType),'" data-objectid="',soy.$$escapeHtmlAttribute(A.item.objectID),'" data-contenttype="',soy.$$escapeHtmlAttribute(A.item.contentType),'">');if(A.isOtherRule){if(A.item.contentType==1464927464){jive.shared.soy.i18nHelper({i18nKey:"eae.menu.hide.modal.other.unhidden.general",arg0:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.user_wallentries.title"),[A.item.objectName]))},D)}else{if(A.item.contentType==129){var E=new soy.StringBuilder();if(A.item.appIcon){jive.shared.displayutil.renderIconElement({icon:A.item.appIcon},E);E.append(" ")}else{E.append('<span class="',soy.$$escapeHtml(A.item.iconCss),'"></span>')}E.append('<a href="',soy.$$escapeHtml(A.item.objectUrl),'">',soy.$$escapeHtml(A.item.objectName),"</a>");jive.shared.soy.i18nHelper({i18nKey:"eae.menu.hide.modal.other.unhidden",arg0:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomment"),[])),arg1:E.toString(),noAutoEscape:true},D)}else{var C=new soy.StringBuilder();if(A.item.appIcon){jive.shared.displayutil.renderIconElement({icon:A.item.appIcon},C);C.append(" ")}else{C.append('<span class="',soy.$$escapeHtml(A.item.iconCss),'"></span>')}C.append('<a href="',soy.$$escapeHtml(A.item.objectUrl),'">',soy.$$escapeHtml(A.item.objectName),"</a>");jive.shared.soy.i18nHelper({i18nKey:"eae.menu.hide.modal.other.unhidden",arg0:soy.$$escapeHtml(A.item.objectTypeName),arg1:C.toString(),noAutoEscape:true},D)}}}else{var B=new soy.StringBuilder((A.item.objectType==129)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomments.on"),[]))+" ":"");if(A.item.appIcon){jive.shared.displayutil.renderIconElement({icon:A.item.appIcon},B);B.append(" ")}else{B.append('<span class="',soy.$$escapeHtml(A.item.iconCss),'"></span>')}B.append('<a href="',soy.$$escapeHtml(A.item.objectUrl),'">',soy.$$escapeHtml(A.item.objectName),"</a>");jive.shared.soy.i18nHelper({i18nKey:(A.item.objectType==129)?"eae.menu.hide.modal.other.unhidden.general":"eae.menu.hide.modal.regular.unhidden",arg0:B.toString(),noAutoEscape:true},D)}D.append(' <a href="#" class="j-js-rule-redo j-hrule-redo">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.redo"),[])),'</a> <a href="#" class="j-js-rule-dismiss j-hrule-redo">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.dismiss"),[])),"</a></li>");return F?"":D.toString()}
;
jive.namespace("FollowApp");jive.FollowApp.FollowView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.FollowApp;jive.conc.observable(this);this.init=function(f,e){var d=this;this.i18n=e.i18n;this.options=e;this.addFollowLinkID="#jive-link-"+f+"-startFollowing";this.followingLinkID="#jive-link-"+f+"-following";c(document).ready(function(){if(d.options.objectID){c(d.addFollowLinkID+", "+d.followingLinkID).click(function(i){var h=c(this),g=h.hasClass("j-button-follow");d.manageAssociations(d.options.objectType,d.options.objectID,h,$j(d.addFollowLinkID),$j(d.followingLinkID),h.closest(".j-js-follow-controls"));i.preventDefault()})}else{c("body").off("click.followbtn").on("click.followbtn",".start-follow a, .following a",function(k){var j=this,h=$j(this),g=h.closest(".j-js-follow-controls"),i=h.attr("data-objecttype"),n=h.attr("data-objectid");if(h.parent().hasClass("start-follow")){var m=h,l=h.parent().siblings(".following").find("a")}else{l=h,m=h.parent().siblings(".start-follow").find("a")}d.manageAssociations(i,n,h,m,l,g);k.preventDefault()})}});jive.switchboard.removeListener("follow.create",d.followCreated).addListener("follow.create",d.followCreated);jive.switchboard.removeListener("follow.destroy",d.followDestroyed).addListener("follow.destroy",d.followDestroyed)};this.followCreated=function(g){var h=$j(".js-browse-thumbnail[data-object-type="+g.objectType+"][data-object-id="+g.objectID+"]"),d=$j(".js-browse-item[data-object-type="+g.objectType+"][data-object-id="+g.objectID+"]");if(h.length){e=h.find('[data-command="showFollowers"]');f=e.data("count");f=f+1;if(e.length){e.data("count",f);e.text(f)}}else{if(d.length){var e=d.find('.j-td-followers [data-command="showFollowers"]'),f=e.data("count");f=f+1;if(e.length){e.data("count",f);e.text(f)}}}};this.followDestroyed=function(g){var h=$j(".js-browse-thumbnail[data-object-type="+g.objectType+"][data-object-id="+g.objectID+"]"),d=$j(".js-browse-item[data-object-type="+g.objectType+"][data-object-id="+g.objectID+"]");if(h.length){e=h.find('[data-command="showFollowers"]');f=e.data("count");f=f-1;if(e.length){e.data("count",f);e.text(f)}}else{if(d.length){var e=d.find('.j-td-followers [data-command="showFollowers"]'),f=e.data("count");f=f-1;if(e.length){e.data("count",f);e.text(f)}}}};this.updateBrowseFollowUI=function(d,h){var i=$j(".js-browse-thumbnail[data-object-type="+h.objectType+"][data-object-id="+h.objectID+"]"),e=$j(".js-browse-item[data-object-type="+h.objectType+"][data-object-id="+h.objectID+"]");if(i.length){f=i.find('[data-command="showFollowers"]');g=f.data("count");g=d?g+1:g-1;if(f.length){f.data("count",g);f.text(g)}}else{if(e.length){var f=e.find('.j-td-followers [data-command="showFollowers"]'),g=f.data("count");g=d?g+1:g-1;if(f.length){f.data("count",g);f.text(g)}}}};this.manageAssociations=function(f,k,h,j,i,d){var e=this,g=d.data("streamsassoc");e.emitP("manageAssociations",f,k,g).addCallback(function(o){var q=o[0],r=q.streams;j.hide();var n=0;for(var m=0,l=r.length;m<l;m++){if(r[m].selected){n++}}var p=d.data("streamsassoc");if(n!=p){d.data("streamsassoc",n);i.find(".j-js-streams-assoc-count").replaceWith(jive.people.profile.streamsAssociatedCount({count:n,renderLocation:d.data("location")}))}i.show();h.closest("#jiveTT-note").addClass("snb-pinned");e.$streamsMenu=$j(jive.eae.activitystream.builder.followInStreamsMenu({objectID:k,objectType:f,streams:r,removeAllAssnI18nKey:"eae.activitystream.builder.followlink.removeall"}));e.$streamsMenu.popover({context:d,darkPopover:false,destroyOnClose:true,putBack:false,onLoad:function(){e.$streamsMenu.delegate("a.j-js-remove-all-assns","click",function(s){e.emitP("removeAllAssociations",f,k).addCallback(function(){i.hide();j.show();d.data("streamsassoc",0);e.$streamsMenu.trigger("close")});s.preventDefault()});e.$streamsMenu.delegate("input","change",function(x){var t=$j(this),w=t.closest(".j-js-follow-in-streams-menu"),v=t.val(),u=t.is(":checked"),s=w.find("label.j-js-stream-option.selected").length;e.emitP("setItemAssociation",f,k,v,u,s).addCallback(function(y){if(u){t.closest("label").addClass("selected")}else{t.closest("label").removeClass("selected")}t.focus();var A=e.$streamsMenu.find(".j-js-stream-option"),z=0;A.each(function(){if($j(this).hasClass("selected")){z++}});d.data("streamsassoc",z);if(z==0){i.hide();i.find(".j-js-streams-assoc-count").replaceWith(jive.people.profile.streamsAssociatedCount({count:z,renderLocation:d.data("location")}));j.show()}else{i.find(".j-js-streams-assoc-count").replaceWith(jive.people.profile.streamsAssociatedCount({count:z,renderLocation:d.data("location")}));i.show();j.hide()}})});e.$streamsMenu.delegate(".j-js-close","click",function(){e.$streamsMenu.trigger("close")})},onClose:function(){var s=i.closest("#jiveTT-note");if(s.length){s.removeClass("snb-pinned");$j(document).bind("mousemove.follow-in",function(t){if(!$j(t.target).closest("#jiveTT-note").length){s.trigger("mouseout")}$j(document).unbind("mousemove.follow-in")})}}})})};this.displayConfirmation=function(d){if(d){$j("<p />").html(d).message({style:"success"})}};this.updateYourProjects=function(e,d){if(d){c("#sidebar-yourprojects-row-"+e).show().effect("highlight",{},5000)}else{c("#sidebar-yourprojects-row-"+e).fadeOut("slow")}};this.tearDown=function(){var d=this;jive.switchboard.removeListener("follow.create",d.followCreated);jive.switchboard.removeListener("follow.destroy",d.followDestroyed)};a.createSpinner=function(d,e){d.addClass("font-color-meta-light")};a.destroySpinner=function(d){d.removeClass("font-color-meta-light")}});
;
jive.namespace("FollowApp");jive.FollowApp.FollowSource=jive.RestService.extend(function(a){a.resourceType="follow";this.destroy=function(b){var c=new jive.conc.Promise();$j.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+b.objectType+"/"+b.objectID,success:function(){c.emitSuccess()},error:function(d){c.emitError(null,d.status)},timeout:30000});return c}});
;
jive.namespace("FollowApp");jive.FollowApp.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.objectID=c.objectID;this.objectType=c.objectType;this.i18n=c.i18n;this.featureName=c.featureName;this.followSource=new jive.FollowApp.FollowSource(c);this.streamsSource=new jive.ActivityStream.BuilderServices(c);this.followView=new jive.FollowApp.FollowView(this.featureName,c);this.followView.addListener("manageAssociations",function(d,j,e,h){var g=b.objectType;if(!g){g=d}var f=b.objectID;if(!f){f=j}var i={objectType:g,id:f,itemStreamCounts:e};b.streamsSource.manageAssociations([i]).addCallback(function(k){h.emitSuccess(k)}).addErrback(function(l,k){h.emitError(l,k)})}).addListener("setItemAssociation",function(e,f,j,g,k,m){var h=b.objectType;if(!h){h=e}var d=b.objectID;if(!d){d=f}var i={type:h,id:d},l={};l[e+""]={};l[e+""][f+""]=k;b.streamsSource.setItemAssociations([i],j,g,l).addCallback(function(){m.emitSuccess()}).addErrback(function(o,n){m.emitError(o,n)})}).addListener("removeAllAssociations",function(d,h,g){var f=b.objectType;if(!f){f=d}var e=b.objectID;if(!e){e=h}b.streamsSource.removeAllAssociations(f,e).addCallback(function(){g.emitSuccess()}).addErrback(function(j,i){g.emitError(j,i)})})};this.tearDown=function(){this.followView.removeListener("manageAssociations").removeListener("setItemAssociation").removeListener("removeAllAssociations").tearDown()}});define("jive.followApp.Main",function(){return jive.FollowApp.Main});
;
(function(){var c=new Date().getTime();var e=0;var a=10;var b=86400;var d=true;jQuery(document).bind("mousemove keydown",function(){c=new Date().getTime()});jive.switchboard.addListener("user.idle",function(f,g){d=d&&g<=e});window.setInterval(function(){if(e<c){e=c;a=10;d=true;jive.switchboard.emit("user.idle",0,e);return}else{if(!d||a>=b){return}}var f=Math.round((new Date().getTime()-c)/1000);if(f>a){while(f>a&&a<b){a=a*2}jive.switchboard.emit("user.idle",a,e)}},1000)})();
;
(function(){var a=false;var j=[];var i={};var d=null;var b={isPacemaker:false,handle:null};var e=window._jive_browser_event_polling_delay||30000;var g=new Date().getTime();var f=false;var l=600;(function(){for(var o=0,m=window._jive_browser_event.providers.length;o<m;++o){var n=window._jive_browser_event.providers[o];i[n]=true}})();jive.switchboard.addListener("newListener",function(m){if(i[m]&&j.indexOf(m)<0){j.push(m)}});jive.switchboard.addListener("user.idle",function(m,n){if(a){console.log("user is idle, last activity was "+m+"s ago")}g=Math.max(g,Number(n));if(f&&m==0){if(a){console.log("waking up, resume polling")}h()}});(function(){var p=0;var q=$j.noop;function m(){if(b.handle){if(b.isPacemaker){window.clearInterval(b.handle);b.isPacemaker=false}else{window.clearTimeout(b.handle)}b.handle=null}}jive.switchboard.addListener("browserWindow.heartbeat",function(){if(b.isPacemaker){return}if(a){console.log("I heard the heartbeat")}m();b.handle=window.setTimeout(function(){if(a){console.log("Cardiac arrest, triggering an election")}b.handle=null;n()},120000)});function o(t){if(t.id<p){return}if(a){console.log("responding to election",t)}p=Math.max(p,t.id);q();q=function(){q=$j.noop;w()};if(d){window.clearTimeout(d);d=null}m();var u=window.setTimeout(function(){if(a){console.log("I am the the winner of the election",t,r)}u=null;w();j=r;c=c||{};d=window.setTimeout(h,1);b.handle=window.setInterval(function(){if(a){console.log("Sending heartbeat")}jive.switchboard.emit("browserWindow.heartbeat")},90000);b.isPacemaker=true},5000);function w(){if(u){if(a){console.log("I concede the election",t)}window.clearTimeout(u);u=null}if(v){jive.switchboard.removeListener("browserWindow.vote",v);v=null}}j=[];var r=window._jive_browser_event.providers.filter(function(x){return jive.switchboard.listeners(x).length>0});var s={previousEvents:c,myEvents:r,tieBreaker:Math.random(),electionId:t.id};c=null;if(a){console.log("submitting my vote",s)}var v=function(x){if(!u){return}if(x.electionId==s.electionId){c=c||x.previousEvents;if(x.tieBreaker>s.tieBreaker){w()}else{r=r.concat(x.myEvents).unique()}}};jive.switchboard.addListener("browserWindow.vote",v);jive.switchboard.emit("browserWindow.vote",s)}jive.switchboard.addListener("browserWindow.elect",o);function n(){var r={since:window._jive_browser_event.since,id:new Date().getTime()+Math.random()};jive.switchboard.emit("browserWindow.elect",r);f=false}$j(window).load(n).unload(function(){jive.switchboard.removeListener("browserWindow.elect",o);n()})})();var k=jive.app.url({path:"/__services/v2/rest/browserEvents/"});var c=null;function h(){d=null;var o=new Date().getTime();var m=((o-g)/1000);if(m>l){if(a){console.log("idle for "+m+"s, going to sleep")}f=true;return}f=false;var n=window._jive_browser_event.since+"?e="+encodeURIComponent(j.join(","));if(a){console.log("idle for "+m+"s, polling server:",n)}$j.ajax({type:"GET",url:k+n,contentType:"application/json",dataType:"json",success:function(v){if(!(v&&v.events)){return}var s=new Date().getTime();e=v.wait||e;window._jive_browser_event.since=v.now+o-s;var q={};for(var u=0,p=v.events.length;u<p;++u){var w=v.events[u];var t=w.providerName+"["+w.id+"]@"+w.timestamp;q[t]=true;if(c&&c[t]){continue}if(a){console.log("Distributing event to switchboard",w.event)}jive.switchboard.emit(w.providerName,w.event)}c=q;var r=o+e-s;d=window.setTimeout(h,Math.max(r,5000))},complete:function(){if(d==null){e=Math.min(e*2,3600000);d=window.setTimeout(h,e)}}})}})();
;
jive.UserRelationshipListSource=jive.RestService.extend(function(a){a.resourceType="userrelationshiplist";this.getListsForMember=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:this.RESOURCE_ENDPOINT+"/members/"+b})};this.getListMembers=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:this.RESOURCE_ENDPOINT+"/"+b+"/members"})};this.addListMember=function(b,c){return this.commonAjaxRequest(new jive.conc.Promise(),"PUT",{url:this.RESOURCE_ENDPOINT+"/"+b+"/members",data:c})};this.removeListMember=function(b,c){return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:this.RESOURCE_ENDPOINT+"/"+b+"/members/"+c})}});
;
jive.UserRelationshipSource=jive.RestService.extend(function(a){a.resourceType="userrelationship";this.follow=function(b,c){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT+"/"+b})};this.unfollow=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:this.RESOURCE_ENDPOINT+"/"+b})};this.orgCreate=function(b,d,c){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT+"/orgchart/"+d+"/"+b})};this.orgRetire=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:this.RESOURCE_ENDPOINT+"/orgchart/"+b})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}if(typeof jive.people.profile=="undefined"){jive.people.profile={}}jive.people.profile.followLink=function(A,D){var B=D||new soy.StringBuilder();if(!A.targetUserDisabled){B.append('<div class="js-follow-user-link j-follow-user-link clearfix" data-userid="',soy.$$escapeHtmlAttribute(A.targetUserID),'" data-streamsassoc="',soy.$$escapeHtmlAttribute(A.streamsAssociatedCount),'" data-location="',soy.$$escapeHtmlAttribute(A.renderLocation),'" data-bidirectional="',soy.$$escapeHtmlAttribute(A.bidirectional),'" data-follower-count="',soy.$$escapeHtmlAttribute(A.followerCount),'" data-displayname="',soy.$$escapeHtmlAttribute(A.targetUserDisplayName),'" data-approvals-enabled="',soy.$$escapeHtmlAttribute(A.approvalsEnabled),'" aria-live="polite" aria-atomic="true" aria-label="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.following.label"),[])),'"><a href="#" class="js-follow ',(!A.darkButton)?"j-social-button j-ui-elem":"j-social-action",'" ',(A.targetUserACurrentFriend||A.targetUserAPendingFriend)?'style="display:none"':"","><span",(!A.darkButton)?' class="j-ui-elem"':"",">",(!A.bidirectional)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.startfollowing.button"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addfriend.button"),[])),' <span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span></span></a><a href="#" class="j-following js-following ',(!A.hideFriendListChooser&&A.friendLists&&A.friendLists.length>0)?"j-split-button notlast":""," ",(!A.darkButton)?"j-social-button j-ui-elem":"j-social-action",'" ',(!A.targetUserACurrentFriend)?'style="display:none"':"","><span",(!A.darkButton)?' class="j-ui-elem"':"",">");var C=new soy.StringBuilder();jive.people.profile.streamsAssociatedCount({count:A.streamsAssociatedCount,renderLocation:A.renderLocation},C);jive.shared.soy.i18nHelper({i18nKey:"profile.friends.following.link",arg0:C.toString(),noAutoEscape:true},B);B.append('</span></a><span class="js-pending j-disabled ',(!A.darkButton)?"j-social-button j-ui-elem":"j-social-action",'" ',(!A.targetUserAPendingFriend)?'style="display:none"':"","><span",(!A.darkButton)?' class="j-ui-elem"':"",">",(!A.bidirectional)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.follow.pendingapproval.text"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friend.pendingapproval.text"),[])),"</span></span>");jive.people.profile.friendListChooser(soy.$$augmentData(A,{hidden:!A.targetUserACurrentFriend}),B);if(!A.hideFollowingCount){jive.people.profile.followCounts(A,B)}B.append("</div>")}return D?"":B.toString()};jive.people.profile.streamsAssociatedCount=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-js-streams-assoc-count j-instream-count">');if(A.count>0){jive.shared.soy.i18nHelper({i18nKey:"profile.friends.following.in",arg0:'<span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span> '+((A.renderLocation=="content-page")?(A.count>1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.following.count.streams"),[A.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.following.count.stream"),[A.count])):soy.$$escapeHtml(A.count)),noAutoEscape:true},B)}else{B.append('<span class="jive-icon-med jive-icon-activity-pulse-active j-instreamicon"></span>')}B.append("</span>");return C?"":B.toString()};jive.people.profile.followCounts=function(A,C){var B=C||new soy.StringBuilder();B.append('<ul class="font-color-meta">',(!A.bidirectional)?"<li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.following"),[]))+' <span class="js-following-count">'+soy.$$escapeHtml(A.followingCount)+"</span></li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[]))+' <span class="js-follower-count">'+soy.$$escapeHtml(A.followerCount)+"</span></li>":"<li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.friends"),[]))+' <span class="js-follower-count">'+soy.$$escapeHtml(A.followerCount)+"</span></li>","</ul>");return C?"":B.toString()};jive.people.profile.friendListChooser=function(A,G){var B=G||new soy.StringBuilder();B.append('<span class="j-js-friend-list-chooser-container"',(A.hideFriendListChooser||A.friendLists&&A.friendLists.length==0)?' style="display: none;"':"",">",(!A.darkButton)?'<a href="#" class="js-connection-label-btn j-connection-label-btn " '+((A.hidden)?'style="display:none"':"")+' title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+"</a>":'<a href="#" class="js-connection-label-btn j-connection-label-btn j-social-action" '+((A.hidden)?'style="display:none"':"")+' title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+'"><span class="jive-icon-med jive-icon-friend-applylabels"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+"</a>",'<div class="j-menu j-connection-labels-menu js-connection-labels-menu" style="display: none;" data-userid="',soy.$$escapeHtmlAttribute(A.targetUserID),'"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[])),'</p><form class="j-js-friend-list-chooser"><ul>');if(A.friendLists){var C=A.friendLists;var F=C.length;for(var D=0;D<F;D++){var E=C[D];jive.people.profile.friendListChooserLabel(soy.$$augmentData(E,{selected:E.targetUserAMember,userID:A.targetUserID}),B)}}B.append("</ul></form></div></span>");return G?"":B.toString()};jive.people.profile.friendListChooserLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><a href="#" class="js-label-option j-label-option ',(A.selected)?"selected":"",'" ',(A.selected)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.removelabel.text"),[]))+'"':"",' data-list-id="',soy.$$escapeHtmlAttribute(A.listID),'"><input type="checkbox" id="label_',soy.$$escapeHtmlAttribute(A.listID),"_",soy.$$escapeHtmlAttribute(A.userID),'" value="',soy.$$escapeHtmlAttribute(A.listID),'" ',(A.selected)?'checked="checked"':"",' /><label for="label_',soy.$$escapeHtmlAttribute(A.listID),"_",soy.$$escapeHtmlAttribute(A.userID),'"><div class="j-label-color"alt="',soy.$$escapeHtmlAttribute(A.name),'" title="',soy.$$escapeHtmlAttribute(A.name),'"><div style="background:#',soy.$$filterCssValue(A.css),'" ></div></div>',soy.$$escapeHtml(A.name),"</label></a></li>");return C?"":B.toString()}
;
jive.namespace("FollowUserApp");jive.FollowUserApp.ProfileFollowView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.FollowApp;this.init=function(e){var d=this;d.bidirectional=e.bidirectional;d.message=function(h,k,g){g=c.extend({showClose:true,style:"success"},g||{});var j={follow:e.i18n.startFollowingMessage,pending:e.i18n.pendingConnectionMessage,unfollow:e.i18n.stopFollowingMessage},i=j[h].replace("{0}",k);c(i).message(g)};$j("body").delegate("a.js-follow, a.js-following","click",function(j){var g=$j(this),i=g.closest("div.js-follow-user-link"),h=i.attr("data-userid");d.$parentContainer=i;d.bidirectional=d.$parentContainer.attr("data-bidirectional")=="true";d.manageAssociations(h,g,i,function(k){if(!k){i.find(".js-follow").hide();i.find(".js-pending").show();d.message("pending",i.attr("data-displayname"),{style:"info"})}});j.preventDefault()});jive.switchboard.addListener("follow.user",function(l){var g=".js-follow-user-link[data-userid="+l.id+"]",n=[];$j(g).each(function(){var r=$j(this),q=r.attr("data-follower-count")*1;n.push(r.attr("data-displayname"));r.attr("data-follower-count",++q).find(".js-follower-count").text(q);var o=r.closest(".js-browse-row"),s=r.closest(".js-browse-thumbnail");if(o.length){var p=o.find(".j-td-followers .j-user-follow-info");if(p.length){p.data("count",q);p.text(q)}}else{if(s.length){p=s.find('.j-user-info .j-user-follow-info[data-command="showFollowers"]');if(p.length){p.data("count",q);p.text(q)}}}});var h=$j(".js-follow-user-link[data-userid="+window._jive_effective_user_id+"]");if(h.length){var j=h.closest(".js-browse-row"),m=h.closest(".js-browse-thumbnail");if(j.length){var i=j.find(".j-td-following .j-user-follow-info"),k=i.data("count")*1;++k;if(i.length){i.data("count",k);i.text(k)}}else{if(m.length){i=m.find('.j-user-info .j-user-follow-info[data-command="showConnections"]');k=i.data("count")*1;++k;if(i.length){i.data("count",k);i.text(k)}}}}if(n.length>0){jive.switchboard.emit("follow.user.complete",l)}});jive.switchboard.addListener("unfollow.user",function(l){var g=".js-follow-user-link[data-userid="+l.id+"]",n=[];$j(g).each(function(q){var s=$j(this),r=s.attr("data-follower-count")*1;n.push(s.attr("data-displayname"));s.attr("data-follower-count",--r).find(".js-follower-count").text(r).end();var o=s.closest(".js-browse-row"),t=s.closest(".js-browse-thumbnail");if(o.length){var p=o.find(".j-td-followers .j-user-follow-info");if(p.length){p.data("count",r);p.text(r)}}else{if(t.length){p=t.find('.j-user-info .j-user-follow-info[data-command="showFollowers"]');if(p.length){p.data("count",r);p.text(r)}}}$j(".js-connection-labels-menu[data-userid='"+q+"'] .js-label-option").removeClass("selected").find("input:checked").prop("checked",false)}.partial(l.id));var h=$j(".js-follow-user-link[data-userid="+window._jive_effective_user_id+"]");if(h.length){var j=h.closest(".js-browse-row"),m=h.closest(".js-browse-thumbnail");if(j.length){var i=j.find(".j-td-following .j-user-follow-info"),k=i.data("count")*1;--k;if(i.length){i.data("count",k);i.text(k)}}else{if(m.length){i=m.find('.j-user-info .j-user-follow-info[data-command="showConnections"]');k=i.data("count")*1;--k;if(i.length){i.data("count",k);i.text(k)}}}}if(n.length>0){}});function f(j,g){var i=j.closest(".js-follow-user-link").attr("data-userid");var k=d.getMenu(i);var h=k.clone();h.delegate("a.js-label-option","click",function(o){var m=c(this),n=m.find(":checkbox"),l=n.val();if(n.is(":checked")){n.prop("checked",false);m.removeClass("selected");d.emitP("removeLabel",i,l).addErrback(function(){n.prop("checked",true);m.addClass("selected")})}else{n.prop("checked",true);m.addClass("selected");d.emitP("addLabel",i,l).addErrback(function(){n.prop("checked",false);m.removeClass("selected")})}o.preventDefault()});h.popover({context:j,darkPopover:true,destroyOnClose:true,onClose:g})}c(document).delegate("a.js-connection-label-btn","click",function(h){var g=c(this);if(!g.hasClass("active")){g.addClass("active");f(g,function(){jive.conc.nextTick(function(){g.removeClass("active")})})}h.preventDefault()})};this.manageAssociations=function(f,e,h,i){var d=this,g=h.data("streamsassoc");d.emitP("manageAssociations","3",f,g).addCallback(function(p){var m=p[0];if(m.approved){var s=m.streams;if(m.addedRelationship){s[0].selected=true}var r=0;for(var n=0,o=s.length;n<o;n++){if(s[n].selected){r++}}h.closest("#jiveTT-note").addClass("snb-pinned");var l=h.find(".js-follow"),k=h.find(".js-following"),j=h.find("a.js-connection-label-btn");if(r!=g){h.data("streamsassoc",r);k.find(".j-js-streams-assoc-count").replaceWith(jive.people.profile.streamsAssociatedCount({count:r,renderLocation:h.data("location")}))}e.hide();k.show();if(j.length){j.show()}var q="eae.activitystream.builder.followlink.removeall";if(d.bidirectional){q="profile.friends.remove.link"}d.$streamsMenu=$j(jive.eae.activitystream.builder.followInStreamsMenu({objectID:f,objectType:"3",streams:s,removeAllAssnI18nKey:q}));d.$streamsMenu.popover({context:h,darkPopover:false,destroyOnClose:true,putBack:false,closeOnClickSelector:"html, .js_lb_overlay",onLoad:function(){d.$streamsMenu.delegate("a.j-js-remove-all-assns","click",function(v){var t=$j(this),u=t.closest(".j-js-follow-in-streams-menu");var w=$j(".js-connection-labels-menu[data-userid='"+u.data("objectid")+"'] .js-label-option.selected").map(function(){return $j(this).attr("data-list-id")}).toArray();d.emitP("removeAllAssociations",u.data("objecttype"),u.data("objectid"),w).addCallback(function(){l.show();k.hide();j.hide();d.$streamsMenu.trigger("close");h.data("streamsassoc",0)});v.preventDefault()});d.$streamsMenu.delegate("input","change",function(z){var w=$j(this),v=w.closest(".j-js-follow-in-streams-menu"),y=w.val(),u=v.data("objecttype"),A=v.data("objectid"),x=w.is(":checked"),t=v.find("label.j-js-stream-option.selected").length;d.emitP("setItemAssociation",u,A,y,x,t).addCallback(function(C){var B=t;if(x){w.closest("label").addClass("selected");B++}else{w.closest("label").removeClass("selected");B--;if(t==1&&u==3&&A==window._jive_current_user.ID){l.show();k.hide()}}k.find(".j-js-streams-assoc-count").replaceWith(jive.people.profile.streamsAssociatedCount({count:B,renderLocation:h.data("location")}));h.data("streamsassoc",B)})});d.$streamsMenu.delegate(".j-js-close","click",function(){d.$streamsMenu.trigger("close")})},onClose:function(){var t=k.closest("#jiveTT-note"),u=k.closest(".j-js-recommendation");if(t.length){t.removeClass("snb-pinned");$j(document).bind("mousemove.follow-in",function(v){if(!$j(v.target).closest("#jiveTT-note").length){t.trigger("mouseout")}$j(document).unbind("mousemove.follow-in")})}else{if(u.length){u.fadeOut(400,function(){var v=k.closest(".j-js-recommendation-people-module");u.remove();if(!v.find("li.j-js-recommendation").length){v.fadeOut("fast")}})}}}})}if(i){i(m.approved)}})};this.addLabelItem=function(d){var e=$j("#j-browse-item-grid .j-js-friend-list-chooser-container");e.find(".j-js-friend-list-chooser").each(function(){d.userID=$j(this).closest(".js-connection-labels-menu").attr("data-userid");$j(this).append(jive.people.profile.friendListChooserLabel(d))});if(!e.is(":visible")){$j("#j-browse-item-grid .js-following").addClass("j-split-button notlast");e.show()}};this.updateLabelItem=function(d){$j(".js-label-option[data-list-id='"+d.listID+"']").each(function(){var e=$j(this);d.selected=e.hasClass("selected");d.userID=e.closest(".js-connection-labels-menu").attr("data-userid");e.replaceWith(jive.people.profile.friendListChooserLabel(d))})};this.removeLabelItem=function(d){$j(".js-label-option[data-list-id='"+d+"']").remove()};this.apply=function(e,d){this.getMenuItem(d,e.id).addClass("selected").find(":checkbox").prop("checked",true)};this.unapply=function(e,d){this.getMenuItem(d,e.id).removeClass("selected").find(":checkbox").prop("checked",false)};a.getMenu=function(d){return c(".js-connection-labels-menu[data-userid='"+d+"']")};a.getMenuItem=function(e,d){return c(".js-connection-labels-menu[data-userid='"+e+"'] a.js-label-option[data-list-id='"+d+"']")};a.createSpinner=function(d){d.addClass("font-color-meta-light")};a.destroySpinner=function(d){d.removeClass("font-color-meta-light")}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.user=="undefined"){jive.browse.user={}}jive.browse.user.labelDot=function(A,C){var B=C||new soy.StringBuilder();B.append('<li data-list-id="',soy.$$escapeHtmlAttribute(A.listID),'" class="j-label-dot j-rc7" style="background:#',soy.$$filterCssValue(A.css),';" title="',soy.$$escapeHtmlAttribute(A.name),'"></li>');return C?"":B.toString()}
;
jive.namespace("FollowUserApp");jive.FollowUserApp.LabelsView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(c){var d=b(".js-browse-thumbnail, .js-browse-row");if(c){d=d.filter('[data-object-id="'+c+'"]')}this.content=d.find(".j-label-dot-list")};this.add=function(d){var c=b(jive.browse.user.labelDot(d));if(this.get(d.id).length<1){this.content.append(c)}};this.remove=function(d){var c=this.get(d.id);c.remove()};this.update=function(d){var c=this.get(d.id);c.each(function(){var e=b(jive.browse.user.labelDot(d));b(this).replaceWith(e)})};a.get=function(c){return this.content.find('.j-label-dot[data-list-id="'+c+'"]')}});
;
jive.namespace("FollowUserApp");jive.FollowUserApp.Main=jive.oo.Class.extend(function(a){var b=jive.FollowUserApp;this.init=function(d){var c=this;this.followView=d.followView;this.relSource=new jive.UserRelationshipSource();this.labelSource=new jive.UserRelationshipListSource();this.streamsSource=new jive.ActivityStream.BuilderServices();this.followView.addListener("manageAssociations",function(f,i,e,g){var h={objectType:f,id:i,itemStreamCounts:e};c.streamsSource.manageAssociations([h]).addCallback(function(j){g.emitSuccess(j)}).addErrback(function(k,j){g.emitError(k,j)})}).addListener("setItemAssociation",function(f,l,i,h,g,k){var j={type:f,id:l},e={};e[f]={};e[f][l]=g;c.streamsSource.setItemAssociations([j],i,h,e).addCallback(function(m){k.emitSuccess(m)}).addErrback(function(n,m){k.emitError(n,m)})}).addListener("removeAllAssociations",function(e,h,g,f){c.streamsSource.removeAllAssociations(e,h).addCallback(function(){f.emitSuccess();if(!(e==3&&h==window._jive_current_user.ID)){setTimeout(function(){jive.switchboard.emit("unfollow.user",jQuery.extend({},{id:h,labelIDs:g}))},200)}}).addErrback(function(j,i){f.emitError(j,i)})}).addListener("addLabel",function(f,e,g){jive.conc.synchronize({add:c.labelSource.addListMember(e,f),label:c.labelSource.get(e)}).addCallback(function(h){jive.switchboard.emit("userlabel.applied",h.label,f);g.emitSuccess()}).addErrback(function(i,h){g.emitError(i,h)})}).addListener("removeLabel",function(f,e,g){c.labelSource.removeListMember(e,f).addCallback(function(){jive.switchboard.emit("userlabel.unapplied",{id:e},f);g.emitSuccess()}).addErrback(function(i,h){g.emitError(i,h)})});jive.switchboard.addListener("userlabel.created",function(e){c.followView.addLabelItem(e)});jive.switchboard.addListener("userlabel.updated",function(e){c.followView.updateLabelItem(e);c.labelView().update(e)});jive.switchboard.addListener("userlabel.removed",function(e){c.followView.removeLabelItem(e.id);c.labelView().remove(e)});jive.switchboard.addListener("userlabel.applied",function(f,e){c.followView.apply(f,e);c.labelView(e).add(f)});jive.switchboard.addListener("userlabel.unapplied",function(f,e){c.followView.unapply(f,e);c.labelView(e).remove(f)})};a.labelView=function(c){return new b.LabelsView(c)}});
;
function JiveContainerAutoComplete(j,n,b,k,d,i,o,l,c){var h=this;var e=jive.rest.url("/places/types/ordered");var a=jive.rest.url("/places/search/");this.showDetail="true";this.query=j;this.resultFilterBeanName=n;this.allowedContainerIds=b;this.rootContainerID=k;this.rootContainerType=d;this.target=i;this.clickStrategy=o;this.showDescription=l;this.noResultsText=c;var g;$j(".search-results-scrollable").scroll(function(){h.doScroll($j(this))});this.addListEntries=function m(p,r){for(var t=0;t<p.length;t++){var q=p[t];var s=$j("<li class='clearfix' id='"+q.objectType+"_"+q.ID+"'></li>");s.append(this.createObjectLink(q));r.append(s);r.removeClass("j-striped");r.find("li:even").addClass("j-striped")}};this.createObjectLink=function f(q){var p;if(q.disabledPlace=="true"){p=$j("<span></span>")}else{var r=this.showDetail=="true"?"jivecontainerTT-hover-container":"";if(q.onClickJs&&q.onClickJs.length>0){p=$j("<a href='#' class='"+r+" no-underline' onclick='"+q.onClickJs+"'); return false;'></a>")}else{p=$j("<a href='"+q.objectURL+"' class='"+r+" no-underline'></a>")}}var t=$j("<span class='jive-places-name'></span>");t.text(q.name);var u=$j("<span class='jive-icon-med "+q.iconCssClass+"'></span>");p.append(u);p.append(t);if(this.showDetail=="true"){p.bind("mouseover",function(){quickcontainersummary.getContainerTooltip(q.ID,q.objectType)});p.mouseout(function(){quickcontainersummary.cancelTooltip()})}if(this.showDescription=="true"){var s=$j("<span class='font-color-meta-light'>"+q.description+"</span>");return $j.merge(p,s)}else{return p}};this.clearPlaces=function(){$j(this.target).empty()};this.loadPlaces=function(p,q){this.addListEntries(p,$j(q))};this.doLoadExternalPlaces=function(r){var p=r.placesCollection;if(!p||p.length==0){$j(this.target).append("<li>"+this.noResultsText+"</li>")}for(var q=0;q<p.length;q++){var s=p[q].places;h.loadPlaces(s,this.target)}};this.loadExternalPlaces=function(p){if(!g){$j.getJSON(e,function(q){g=q.placetype})}h.doLoadExternalPlaces(p)};this.doScroll=function(p){if(p[0].scrollHeight-p.scrollTop()==p.outerHeight()){var q=p.find("li").length;if(q%30==0){var r={};if(this.resultFilterBeanName){r.resultFilterBeanName=this.resultFilterBeanName}if(this.allowedContainerIds){r.allowedContainerIds=this.allowedContainerIds}if(this.rootContainerID){r.rootContainerID=this.rootContainerID}if(this.rootContainerType){r.rootContainerType=this.rootContainerType}if(q){r.startPos=q}if(this.maxReturned){r.maxReturned=this.maxReturned}if(this.clickStrategy){r.clickStrategy=this.clickStrategy}$j.getJSON(a+j,r,function(s){$j.each(s.placesCollection,function(t,u){h.loadPlaces(u.places,h.target)})})}}}};
;
jive.namespace("JAF.Apps");jive.JAF.Apps.Disabled=jive.oo.Class.extend(function(a){this.init=function(d,b){function c(f,g,e){if(e==="javascript:;"){f.preventDefault();$j("<p/>").html(g).message({style:"warn"})}else{window.open(e)}}if(b.disabled){$j(".j-apps-feature-disabled").live("click",function(e){c(e,d.apps_feature_disabled,$j(this).attr("href"))})}else{if(b.anonymous){$j(".jive_macro_appEmbeddedView").live("click",function(e){c(e,d.apps_feature_disabled_for_anonymous,$j(this).attr("href"))})}else{if(b.partner){$j(".jive_macro_appEmbeddedView").live("click",function(e){c(e,d.apps_feature_disabled_for_partners,$j(this).attr("href"))})}}}}});
;
jive.namespace("Apps");jive.Apps.RteArtifacts=jive.oo.Class.extend(function(b){var i=CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/skins/default/img/progress.gif";var f=450;var h="OpenSocial/2.5";var g="legacy";this.init=function(){};b.showMessage=function(l,k){$j("<p/>").html(l).message({style:k})};this.buildArtifactMarkup=function(v,z){var m=v?v[osapi.container.GadgetSite.RPC_ARG_KEY]:null;var o=m.jiveData.app;var y=z.artifactJson;var r=z.rteBound;b.makeArtifactURLsAbsolute(y,o,z.suppressImageUpload);var t=b.normalizeArtifact(y);var l=t.icon;var q=t.previewImage;var x=l||q;if(console){console.log("imageUrl",x)}var u=this;var s=function(K,H){if(!K){v.callback({error:"No artifactJson metadata was provided"});return}var I=m.getActiveGadgetHolder().getGadgetInfo();var C=I.modulePrefs.features.actions;var A;if(C&&C.params&&C.params["action-contributions"]){var F=C.params["action-contributions"];for(var E=0;E<F.length;++E){var M=F[E].replace(/\n/mg,"");var D=M.match(/id="(.+?)"/);A=D?D[1]:null;if(A&&A==z.actionId){break}}}if(!A){v.callback({error:"App does not define action "+z.actionId});return}if(!m){u.showMessage("Error occured, app site missing");v.callback({error:"Application framework error"});return}var N=m.jiveData;var J=u.createArtifact({ed:document,appUUID:N.app.appUUID,appInstanceUUID:N.app.appInstanceUUID,data:K,rteBound:r});var G=$j(J);var L=G.wrap("<span></span>").parent().html();if($j.browser.msie){if($j.browser.version<9){L=L.replace(/<\w[^>]*>/g,function(O){return O.replace(/(\w+=)([-.\w]+)/g,'$1"$2"')});L=L.replace(/(<IMG((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\s*>)/g,"$1</IMG>")}else{var B=function(O,P){var Q=G.attr(P);if(Q){var R=Q.replace(/\"/g,"&quot;");O=O.replace(P+"='"+Q+"'",P+'="'+R+'"')}return O};L=B(L,"_context")}}v.callback({markup:L,error:H})};if(z.suppressImageUpload||!x){s(y);return}var n=l?b.uploadArtifactIcon(l,o.appInstanceUUID):undefined;var p=q?b.uploadArtifactImage(q):undefined;var k=n||p;if(!k){var w="Error uploading iconUrl or previewImage.";u.showMessage(w);if(console){console.log(w)}s(y,w);return}k.addCallback(function(A){A=A||x;if(l){b.updateIcon(y,A)}else{b.updatePreviewImage(y,A)}s(y)}).addErrback(function(A){var B="Could not upload "+x;u.showMessage(B);if(console){console.log(B,A)}s(y,B)})};b.isProxiedUrl=function(k){return k.startsWith(gadgets.io.getProxyUrl().split("?")[0])};b.makeRelativeAppResourceUrl=function(k,m){var l=m.appURL?m.appURL.match(/.*\//)[0]:"";if(k.match(/^http/)===null&&k.match(/^\/\//)===null){return l+k}return null};this.makeArtifactURLsAbsolute=function(l,q,k){var m=function(s){var r=b.makeRelativeAppResourceUrl(s,q);if(r){return r}else{if(s.match(/^\/\//)){if(typeof gadgets!="undefined"){var v=gadgets.io.getProxyUrl();var u=v.match(/^https?:(\/\/.+)\?/);if(u&&u.length>1){u[1]=u[1].substring(0,2)+".*"+u[1].substring(2);if(s.match("^"+u[1])){var t=s.match(/url=(.+)&?/);if(t&&t.length>1){return t[1]}}}}}}};var p=b.normalizeArtifact(l);var o=p.previewImage;if(o){o=m(o)||o;if(!k&&!b.isProxiedUrl(o)){o=gadgets.io.getProxyUrl(o)}b.updatePreviewImage(l,o)}var n=p.icon;if(n){n=m(n)||n;if(!k&&!b.isProxiedUrl(n)){n=gadgets.io.getProxyUrl(n)}b.updateIcon(l,n)}if(console){console.log(l)}};b.updatePreviewImage=function(l,k){if(b.deduceArtifactFormatType(l)==h){l.previewImage=k}else{l.display.previewImage=k}};b.updateIcon=function(k,l){if(b.deduceArtifactFormatType(k)==h){k.preferredExperience.display.icon=l}else{k.display.icon=l}};b.deduceArtifactFormatType=function(k){return k.preferredExperience?h:g};b.normalizeArtifact=function(l){var p=b.deduceArtifactFormatType(l);if(p==h){var o=l.preferredExperience;var k=o.target.type;k=k==="gadget"?"embed":k;o.display=o.display||{};o.target=o.target||{};var n=o.display.type;var m=n=="image"?o.display.altText:o.display.label;return{hasPreviewImage:n=="image"&&l.previewImage,hasIcon:n=="text"&&Boolean(o.display.icon),linkType:k||"none",label:m||l.actionLabel,icon:o.display.icon,previewImage:l.previewImage,url:l.url,view:o.target.view,context:l.context,artifactFormatType:p}}else{l.display=l.display||{};l.target=l.target||{};return{hasPreviewImage:l.display.type=="image",hasIcon:l.display.type=="text"&&Boolean(l.display.icon),linkType:l.target.type||"none",label:l.display.label||l.actionLabel,icon:l.display.icon,previewImage:l.display.previewImage,url:l.target.url,view:l.target.view,context:l.target.context,artifactFormatType:p}}};b.extractFileName=function(k){return b.isProxiedUrl(k)?k.match(/.*\%2F(.+)/)[1]:k.match(/.*\/(.+)/)[1]};this.createArtifact=function(m){var x=m.rte,p=m.ed,D=m.appUUID,E=m.actionId,J=m.data,C=m.editedContentBean,n=m.appInstanceUUID,k=m.rteBound;var q=x||k;var G=q?function(M){return"__"+M}:function(M){return"_"+M};J=J||{};J.actionLabel=m.actionLabel;var s=b.normalizeArtifact(J);var u=s.hasPreviewImage;var B=s.hasIcon;var A=s.linkType;var v=s.label;var H=s.icon;var z=s.previewImage;var o=s.url;var y=s.view;var l=s.context;var L=x?p.getDoc():p;var r=$j(L.createElement("a"));r.attr("jivemacro","appEmbeddedView");r.attr("__jive_macro_name","appEmbeddedView");r.attr("href",A=="url"?o:"javascript:;");if(x){if(u){var F=(C&&C.attachmentConfigActionBean)?C.attachmentConfigActionBean.canAttach:true;var I=b.extractFileName(z);var w=$j(p.dom.create("img")).attr("src",i).attr("alt",I);r.append(w);var t=$j(p.dom.create("img")).attr("src",z).attr("alt",I).addClass("jiveImage").hide();r.append(t);t.load(function(){t.unbind();j(t);w.unbind().remove();t.show();jive.conc.nextTick(function(){if(F&&e(t)){c(t,x,p).addCallback(function(M){z=M.attr("src");r.attr("__previewImage",z)})}})});r.addClass("jive-link-app-preview")}else{if(B){var F=(C&&C.attachmentConfigActionBean)?C.attachmentConfigActionBean.canAttach:true;r.text(v);r.css("background-image","url('"+H+"')");r.addClass("jive-link-app-icon");r.attr("__icon",H);var I=b.extractFileName(H);var t=$j(p.dom.create("img")).attr("src",H).attr("alt",I).hide();jive.conc.nextTick(function(){if(F&&e(t)){d(t,x,p,n).addCallback(function(M){H=M.attr("src");r.attr("__icon",H);r.css("background-image","url('"+H+"')")})}});r.append($j(p.dom.create("span")).addClass("j-ui-elem").addClass("j-app-link"))}else{r.text(v);r.addClass("jive-link-app");r.append($j(x?p.dom.create("span"):L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}}}else{if(u){var I=b.extractFileName(z);r.attr(G("previewImage"),z);r.addClass("jive-link-app-preview");var K=$j(L.createElement("img"));K.attr("src",z).attr("alt",I).addClass("jiveImage");r.append(K)}else{if(B){r.text(v);if(!$j.browser.msie){r.css("background-image","url('"+H+"')")}r.addClass("jive-link-app-icon");r.attr(G("icon"),H);r.append($j(L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}else{r.text(v);r.addClass("jive-link-app");r.append($j(L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}}}if(v){r.attr("title",v)}r.attr(G("appUUID"),D);r.attr(G("action_id"),E);if(A=="embed"){r.attr(G("view"),y||"embedded");r.attr(G("context"),JSON.stringify(l||{}))}if(o){r.attr(G("url"),o)}r.attr("modifiedTitle","true");r.addClass("jive_macro");r.addClass("jive_macro_appEmbeddedView");return r[0]};this.parseSelectionContextFromArtifact=function(n){var m=n.attr("__context");var t=n.attr("__view");var l=n.attr("__url");var o=n.attr("__previewImage")?"image":"text";var u=n.attr("__title");var p=n.attr("__previewImage");var v=n.text().trim()||"";var s=n.attr("__icon");var r=null;switch(o){case"image":r={type:"image",previewImage:p};if(u){r.label=u}break;case"text":r={type:"text",label:v};if(s){r.icon=s}break}var k=(m||t)?"embed":"url";var q=null;switch(k){case"embed":q={type:"embed",view:t||"embedded"};if(m){q.context=JSON.parse(m)}if(l){q.url=l}break;case"url":q={type:"url",url:l||""};break}return{display:r,target:q}};this.uploadArtifactIcon=function(l,k){var m=b.extractFileName(l);var n=jive.api.apps("instances/"+k+"/attach_image")+"?name="+m;return a(n,l)};this.uploadArtifactImage=function(k){var l=b.extractFileName(k);var m=jive.rest.url("/rteImages")+"?name="+l+"&objectId=-1&objectType=-1";return a(m,k)};function j(m){var k=m.width();if(k>f){var n=f/k;var l=Math.round(n*k);m.attr("width",l)}}function e(m){var k=m.attr("src");if(k.match(/^\/[^\/]/)){return 0}var l="(https?:)?//"+location.hostname+(location.port?":"+location.port:"");if(!k.match("^"+l)){return true}return b.isProxiedUrl(k)?1:0}function d(n,m,l,k){var o=jive.api.apps("instances/"+k+"/attach_image");return c(n,m,l,o)}function c(k,l,r,p){var m=l.getImageService();var s=k.attr("alt");var t=k.attr("src");function o(){if(console){console.log("Image REST request failed for %s",s,arguments)}k.remove()}var n=new jive.conc.Promise();var u=l.getFormService();var q=u.setFormEnabled(false,r.getLang("jiveimage.please_wait"));m.createFromImageSrc(s,b.isProxiedUrl(t)?t:encodeURI(t),p).addCallback(function(v){k.load(function(){var w=$j(this);w.css({width:w.width()+"px",height:w.height()+"px","max-width":"","max-height":""})});k.attr("src",v.url);jive.conc.nextTick(function(){r.nodeChanged()});n.emitSuccess(k)}).addErrback(function(){o();n.emitError()}).always(function(){u.setFormEnabled(q)});return n}function a(o,k){var n=new jive.conc.Promise();var l={url:o,contentType:"application/x-www-form-urlencoded",processData:false,data:"url="+b.isProxiedUrl(k)?k:encodeURIComponent(k)};var m={contentType:"application/json; charset=utf-8"};$j.ajax($j.extend({type:"POST",dataType:"json",success:function(p,r,q){if(!p||!p.url){n.emitError()}else{n.emitSuccess(p.url)}},error:function(p){n.emitError(p)},timeout:30000},m,l));return n}});
;
window.___jsl=window.___jsl||{};
(window.___jsl.ci=window.___jsl.ci||[]).push({opensocial:{invalidatePath:"http://techweb.disneyanimation.com/gadgets/api/rpc",path:"http://%host%/social/rpc",domain:"shindig",supportedFields:{person:["id",{name:["familyName","givenName","unstructured"]},"emails","thumbnailUrl","profileUrl","aboutMe","hasApp","photos","jive_enabled"],mediaItem:"album_id,created,description,duration,file_size,id,language,last_updated,location,mime_type,num_comments,num_views,num_votes,rating,start_time,tagged_people,tags,thumbnail_url,title,type,url".split(","),album:"id,thumbnailUrl,title,description,location,ownerId".split(","),
group:["id","title","description"],activity:"appId,body,bodyId,externalId,id,mediaItems,postedTime,priority,streamFaviconUrl,streamSourceUrl,streamTitle,streamUrl,templateParams,title,url,userId".split(","),activityEntry:"actor,content,generator,icon,id,object,published,provider,target,title,updated,url,verb,openSocial,extensions".split(",")},enableCaja:!1},rpc:{commSwf:"http://techweb.disneyanimation.com/gadgets/xpc.swf",parentRelayUrl:"/gadgets/ifpc.relay.html",useLegacyProtocol:!1},container:{relayPath:"/gadgets/files/container/rpc_relay.html"},
views:{home:{isOnlyVisible:!1,urlTemplate:"http://techweb.disneyanimation.com/gadgets/home?{var}",aliases:["HOME"]},"default":{isOnlyVisible:!1,urlTemplate:"http://techweb.disneyanimation.com/gadgets/default?{var}",aliases:["DEFAULT","profile"]},about:{isOnlyVisible:!1},canvas:{isOnlyVisible:!0,urlTemplate:"http://techweb.disneyanimation.com/gadgets/canvas?{var}",aliases:["FULL_PAGE"]},"user-prefs":{isOnlyVisible:!0},embedded:{isOnlyVisible:!0},"system-settings":{isOnlyVisible:!0}},osapi:{endPoints:["http://%host%/social/rpc"]},
"osapi.services":{"http://%host%/social/rpc":"jive.connects.configuration,gadgets.metadata,activities.supportedFields,albums.supportedFields,jive.market.getSbsContext,mediaItems.create,gadgets.proxySupportedFields,albums.get,jive.market.getAppInstances,jive.dev.isCachingEnabled,jive.connects.post,http.put,jive.ext.post,jive.core.post,jive.market.installMultiAppNonTransactional,systemSettings.create,system.listMethods,jive.connects.pooled,gadgets.proxy,systemSettings.get,gadgets.cajole,jive.core.put,http.head,messages.create,jive.connects.patch,albums.delete,jive.market.uninstallApp,jive.connects.put,mediaItems.update,messages.delete,appdata.update,gadgets.js,jive.market.isCachingEnabled,http.post,gadgets.tokenSupportedFields,jive.ext.delete,jive.dev.setCachingEnabled,jive.ext.put,jive.core.get,http.get,appdata.delete,jive.binary.metadata,jive.market.installMultiApp,appdata.create,gadgets.supportedFields,mediaItems.get,jive.connects.reset,groups.create,jive.connects.get,activities.delete,activities.update,albums.update,jive.connects.statistics,activities.get,groups.supportedFields,activitystreams.create,appdata.get,messages.get,jive.connects.delete,cache.invalidate,groups.get,people.supportedFields,http.delete,jive.connects.connection,jive.version.getVersionInfo,gadgets.jsSupportedFields,systemSettings.delete,people.get,jive.market.installApp,activitystreams.get,jive.core.delete,jive.market.refreshApp,mediaItems.delete,activitystreams.update,application.get,jive.binary.token,jive.market.requestAppSync,systemSettings.update,groups.update,jive.market.setCachingEnabled,gadgets.cajaSupportedFields,activities.create,jive.connects.head,jive.connects.update,albums.create,gadgets.token,jive.ext.get,activitystreams.delete,activitystreams.supportedFields,groups.delete".split(",")},
"core.io":{jsonProxyUrl:"http://%host%/gadgets/makeRequest",proxyUrl:"http://%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%rewriteMime%"}});window.___jsl=window.___jsl||{};window.___jsl.u="http://techweb.disneyanimation.com/../gadgets/js/jive-core-container:container:core:rpc:open-views:selection:actions.js?c=1&container=default&jiveUrlHash=d6e93230c10470c8e7e91e85dc78edd5?c=1&container=default&jiveUrlHash=d6e93230c10470c8e7e91e85dc78edd5";window.___jsl.f="jive-core-container,container,core,rpc,open-views,selection,actions.js?c=1&container=default&jiveUrlHash=d6e93230c10470c8e7e91e85dc78edd5".split(",");gadgets=window.gadgets||{};shindig=window.shindig||{};osapi=window.osapi||{};var safeJSON=window.safeJSON,tamings___=window.tamings___||[],bridge___,caja___=window.caja___,___=window.___;if(!window.gadgets.config)gadgets.config=function(){function a(b,d){for(var c in d)d.hasOwnProperty(c)&&(typeof b[c]==="object"&&typeof d[c]==="object"?a(b[c],d[c]):b[c]=d[c])}function b(a){var d="";if(a.nodeType==3||a.nodeType==4)d=a.nodeValue;else if(a.innerText)d=a.innerText;else if(a.innerHTML)d=a.innerHTML;else if(a.firstChild){d=[];for(a=a.firstChild;a;a=a.nextSibling)d.push(b(a));d=d.join("")}return d}function c(d){var c;c=document.scripts||document.getElementsByTagName("script");if(!c||c.length==
0)c=null;else{var f;if(e.u)for(var g=0;!f&&g<c.length;++g){var k=c[g];k.src&&k.src.indexOf(e.u)==0&&(f=k)}f||(f=c[c.length-1]);c=!f.src?null:f}if(c){var p;c=b(c);try{p=(new Function("return ("+c+"\n)"))()}catch(r){}if(typeof p!=="object"){try{p=(new Function("return ({"+c+"\n})"))()}catch(o){}p=typeof p==="object"?p:{}}e.f&&e.f.length==1&&!p[e.f[0]]&&(c={},c[e.f[0]]=p,p=c);a(d,p);(p=window.___cfg)&&a(d,p)}}function d(a){for(var b in f)if(f.hasOwnProperty(b))for(var d=f[b],c=0,e=d.length;c<e;++c)a(b,
d[c])}var e,f={},g={};return{register:function(a,b,d,c){var e=f[a];e||(e=[],f[a]=e);e.push({validators:b||{},callback:d,callOnUpdate:c})},get:function(a){return a?g[a]||{}:g},init:function(b,f){e=window.___jsl||{};a(g,b);c(g);a(g,window.___config||{});d(function(a,b){var d=g[a];if(d&&!f){var c=b.validators,e;for(e in c)if(c.hasOwnProperty(e)&&!c[e](d[e]))throw Error('Invalid config value "'+d[e]+'" for parameter "'+e+'" in component "'+a+'"');}b.callback&&b.callback(g)})},update:function(b,c){var e=
[];d(function(a,d){(b.hasOwnProperty(a)||c&&g&&g[a])&&d.callback&&d.callOnUpdate&&e.push(d.callback)});g=c?{}:g||{};a(g,b);for(var f=0,k=e.length;f<k;++f)e[f](g)}}}();gadgets.log=function(){function a(a,b){!(a<c)&&d&&(a===2&&d.warn?d.warn(b):a===3&&d.error?d.error(b):d.log&&d.log(b))}var b=function(b){a(1,b)};gadgets.warn=function(b){a(2,b)};gadgets.error=function(b){a(3,b)};gadgets.setLogLevel=function(a){c=a};b.INFO=1;b.WARNING=2;b.NONE=4;var c=1,d=window.console?window.console:window.opera?window.opera.postError:void 0;return b}();(function(){gadgets.config.EnumValidator=function(a){var b=[];if(arguments.length>1)for(var c=0,d;d=arguments[c];++c)b.push(d);else b=a;return function(a){for(var d=0;b[d];++d)if(a===b[d])return!0;return!1}};gadgets.config.RegExValidator=function(a){return function(b){return a.test(b)}};gadgets.config.ExistsValidator=function(a){return typeof a!=="undefined"};gadgets.config.NonEmptyStringValidator=function(a){return typeof a==="string"&&a.length>0};gadgets.config.BooleanValidator=function(a){return typeof a===
"boolean"};gadgets.config.LikeValidator=function(a){return function(b){for(var c in a)if(a.hasOwnProperty(c)&&!(0,a[c])(b[c]))return!1;return!0}}})();gadgets.util=gadgets.util||{};gadgets.util.makeClosure=function(a,b,c){for(var d=[],e=2,f=arguments.length;e<f;++e)d.push(arguments[e]);return function(){for(var c=d.slice(),e=0,f=arguments.length;e<f;++e)c.push(arguments[e]);return b.apply(a,c)}};gadgets.util.makeEnum=function(a){var b,c,d={};for(b=0;c=a[b];++b)d[c]=c;return d};gadgets.util=gadgets.util||{};
(function(){gadgets.util.createElement=function(a){var b;if(!document.body||document.body.namespaceURI)try{b=document.createElementNS("http://www.w3.org/1999/xhtml",a)}catch(c){}return b||document.createElement(a)};gadgets.util.createIframeElement=function(a){var b=gadgets.util.createElement("iframe");try{var c,d=["<","iframe"],e=a||{},f;for(f in e)e.hasOwnProperty(f)&&(d.push(" "),d.push(f),d.push('="'),d.push(gadgets.util.escapeString(e[f])),d.push('"'));d.push("></");d.push("iframe");d.push(">");
c=d.join("");var g=gadgets.util.createElement(c);if(g&&(!b||g.tagName==b.tagName&&g.namespaceURI==b.namespaceURI))b=g}catch(h){}c=b;var a=a||{},i;for(i in a)a.hasOwnProperty(i)&&(c[i]=a[i]);return b};gadgets.util.getBodyElement=function(){if(document.body)return document.body;try{var a=document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body");if(a&&a.length==1)return a[0]}catch(b){}return document.documentElement||document}})();gadgets.util=gadgets.util||{};gadgets.util.attachBrowserEvent=function(a,b,c,d){typeof a.addEventListener!="undefined"?a.addEventListener(b,c,d):typeof a.attachEvent!="undefined"?a.attachEvent("on"+b,c):gadgets.warn("cannot attachBrowserEvent: "+b)};gadgets.util.removeBrowserEvent=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):gadgets.warn("cannot removeBrowserEvent: "+b)};gadgets.util=gadgets.util||{};(function(){var a=[];gadgets.util.registerOnLoadHandler=function(b){a.push(b)};gadgets.util.runOnLoadHandlers=function(){gadgets.util.registerOnLoadHandler=function(a){a()};for(var b=0,c=a.length;b<c;++b)a[b]();a=void 0}})();gadgets.util=gadgets.util||{};
(function(){function a(a,b){return String.fromCharCode(b)}var b={0:!1,10:!0,13:!0,34:!0,39:!0,60:!0,62:!0,92:!0,8232:!0,8233:!0,65282:!0,65287:!0,65308:!0,65310:!0,65340:!0};gadgets.util.escape=function(a,b){if(a)if(typeof a==="string")return gadgets.util.escapeString(a);else if(typeof a==="array")for(var e=0,f=a.length;e<f;++e)a[e]=gadgets.util.escape(a[e]);else if(typeof a==="object"&&b){e={};for(f in a)a.hasOwnProperty(f)&&(e[gadgets.util.escapeString(f)]=gadgets.util.escape(a[f],!0));return e}return a};
gadgets.util.escapeString=function(a){if(!a)return a;for(var d=[],e,f,g=0,h=a.length;g<h;++g)e=a.charCodeAt(g),f=b[e],f===!0?d.push("&#",e,";"):f!==!1&&d.push(a.charAt(g));return d.join("")};gadgets.util.unescapeString=function(b){return!b?b:b.replace(/&#([0-9]+);/g,a)}})();gadgets.util=gadgets.util||{};
(function(){var a=null;gadgets.util.getUrlParameters=function(b){var c=typeof b==="undefined";if(a!==null&&c)return a;for(var d={},b=b||document.location.href,e=b.indexOf("?"),f=b.indexOf("#"),b=(f===-1?b.substr(e+1):[b.substr(e+1,f-e-1),"&",b.substr(f+1)].join("")).split("&"),e=window.decodeURIComponent?decodeURIComponent:unescape,f=0,g=b.length;f<g;++f){var h=b[f].indexOf("=");if(h!==-1){var i=b[f].substring(0,h),h=b[f].substring(h+1),h=h.replace(/\+/g," ");try{d[i]=e(h)}catch(j){}}}c&&(a=d);return d}})();
gadgets.util.getUrlParameters();gadgets.util=gadgets.util||{};(function(){function a(a){b=a["core.util"]||{}}var b={},c={};gadgets.config&&gadgets.config.register("core.util",null,a);gadgets.util.getFeatureParameters=function(a){return typeof b[a]==="undefined"?null:b[a]};gadgets.util.hasFeature=function(a){return typeof b[a]!=="undefined"};gadgets.util.getServices=function(){return c}})();if(window.JSON&&window.JSON.parse&&window.JSON.stringify)gadgets.json=function(){function a(a){return this[a]}var b=/___$/;return{parse:function(a){try{return window.JSON.parse(a)}catch(b){return!1}},stringify:function(c){function d(b){return e.call(this,b,a)}var e=window.JSON.stringify,f=Array.prototype.toJSON&&e([{x:1}])==='"[{\\"x\\": 1}]"'?d:e;try{return f(c,function(a,d){return!b.test(a)?d:void 0})}catch(g){return null}}}}();if(!window.JSON||!window.JSON.parse||!window.JSON.stringify)gadgets.json=function(){function a(a){return a<10?"0"+a:a}function b(a){var e,f,g;e=/[\"\\\x00-\x1f\x7f-\x9f]/g;switch(typeof a){case "string":return e.test(a)?'"'+a.replace(e,function(a){var b=c[a];if(b)return b;b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+a+'"';case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);case "object":if(!a)return"null";e=[];
if(typeof a.length==="number"&&!a.propertyIsEnumerable("length")){g=a.length;for(f=0;f<g;f+=1)e.push(b(a[f])||"null");return"["+e.join(",")+"]"}for(f in a)!/___$/.test(f)&&a.hasOwnProperty(f)&&typeof f==="string"&&(g=b(a[f]))&&e.push(b(f)+":"+g);return"{"+e.join(",")+"}"}return""}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",a(this.getUTCMonth()+1),"-",a(this.getUTCDate()),"T",a(this.getUTCHours()),":",a(this.getUTCMinutes()),":",a(this.getUTCSeconds()),"Z"].join("")};var c={"\u0008":"\\b",
"\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:b,parse:function(a){return/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?eval("("+a+")"):!1}}}();gadgets.json.flatten=function(a){var b={};if(a===null||a===void 0)return b;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];null===d||void 0===d||(b[c]=typeof d==="string"?d:gadgets.json.stringify(d))}return b};shindig.Auth=function(){var a=null,b=null;gadgets.config.register("shindig.auth",null,function(c){var d=gadgets.util.getUrlParameters(),c=c["shindig.auth"]||{};c.authToken?a=c.authToken:d.st&&(a=d.st);if(a!==null){for(var e=a.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");if(g.length===2){var h=g[0],g=g[1];g==="$"&&(g=encodeURIComponent(d[h]),e[f]=h+"="+g)}}a=e.join("&")}c.trustedJson&&(b=eval("("+c.trustedJson+")"))});return{getSecurityToken:function(){return a},updateSecurityToken:function(b){a=
b},getTrustedData:function(){return b}}};shindig.auth=new shindig.Auth;gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.wpm)gadgets.rpctx.wpm=function(){function a(a,b,c){typeof window.addEventListener!="undefined"?window.addEventListener(a,b,c):typeof window.attachEvent!="undefined"&&window.attachEvent("on"+a,b)}function b(a){var b=gadgets.json.parse(a.data);if(b&&b.f){var d=gadgets.rpc.getTargetOrigin(b.f);(!e||!(typeof a.origin!=="undefined"?a.origin!==d:a.domain!==/^.+:\/\/([^:]+).*/.exec(d)[1]))&&c(b,a.origin)}}var c,d,e=!0;return{getCode:function(){return"wpm"},isParentVerifiable:function(){return!0},
init:function(f,g){gadgets.config.register("rpc",null,function(a){String((a?a.rpc:{}).disableForceSecure)==="true"&&(e=!1)});c=f;d=g;a("message",b,!1);d("..",!0);return!0},setup:function(a){d(a,!0);return!0},call:function(a,b,d){var c=gadgets.rpc.getTargetOrigin(a),e=gadgets.rpc._getTargetWin(a);c?window.setTimeout(function(){e.postMessage(gadgets.json.stringify(d),c)},0):gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message");return!0}}}();gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.flash)gadgets.rpctx.flash=function(){function a(a,b){var c;E[b]=E[b]||function(){a.apply({},arguments)};return H+"."+b}function b(){if(o===null&&document.body&&l){var a=l+"?cb="+Math.random()+"&origin="+F+"&jsl=1",c=document.createElement("div");c.style.height="1px";c.style.width="1px";a='<object height="1" width="1" id="'+j+'" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="always"></param><param name="movie" value="'+a+'"></param><embed type="application/x-shockwave-flash" allowScriptAccess="always" src="'+
a+'" height="1" width="1"></embed></object>';document.body.appendChild(c);c.innerHTML=a;o=c.firstChild}++u;m!==null&&(o!==null||u>=x)?window.clearTimeout(m):m=window.setTimeout(b,t)}function c(){D[".."]||(i(".."),C++,C>=B&&z!==null?(window.clearTimeout(z),z=null):z=window.setTimeout(c,s))}function d(){if(o!==null&&o.setup){for(;n.length>0;){var a=n.shift(),b=a.targetId;o.setup(a.token,b===".."?gadgets.rpc.RPC_ID:b,b===".."?"INNER":"OUTER")}v!==null&&(window.clearTimeout(v),v=null)}else v===null&&
n.length>0&&(v=window.setTimeout(d,w))}function e(){d();m!==null&&window.clearTimeout(m);m=null}function f(){!D[".."]&&z===null&&(z=window.setTimeout(c,s))}function g(a,b,c){var b=gadgets.rpc.getTargetOrigin(a),d=gadgets.rpc.getAuthToken(a);o["sendMessage_"+(a===".."?gadgets.rpc.RPC_ID:a)+"_"+d+"_"+(a===".."?"INNER":"OUTER")].call(o,gadgets.json.stringify(c),b);return!0}function h(a,b){var c=gadgets.json.parse(a),d=c[A];d?(r(d,!0),D[d]=!0,d!==".."&&i(d,!0)):window.setTimeout(function(){p(c,b)},0)}
function i(a,b){var c=gadgets.rpc.RPC_ID,d={};d[A]=b?"..":c;d[q]=c;g(a,c,d)}var j="___xpcswf",l=null,k=!1,p=null,r=null,o=null,t=100,x=50,w=500,v=null,n=[],m=null,u=0,A="_scr",q="_pnt",s=100,B=50,C=0,z=null,D={},F=window.location.protocol+"//"+window.location.host,H,E=function(){window.___jsl=window.___jsl||{};var a=window.___jsl._fm={};H="___jsl._fm";return a}();gadgets.config.register("rpc",null,function(a){k&&(l=a.rpc.commSwf||"//xpc.googleusercontent.com/gadgets/xpc.swf")});a(e,"ready");a(f,"setupDone");
a(h,"receiveMessage");return{getCode:function(){return"flash"},isParentVerifiable:function(){return!0},init:function(a,b){p=a;r=b;return k=!0},setup:function(a,c){n.push({token:c,targetId:a});o===null&&m===null&&(m=window.setTimeout(b,t));d();return!0},call:g,_receiveMessage:h,_ready:e,_setupDone:f}}();gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.frameElement)gadgets.rpctx.frameElement=function(){function a(a,e,h){try{if(e!==".."){var i=window.frameElement;if(typeof i[b]==="function")return typeof i[b][c]!=="function"&&(i[b][c]=function(a){d(gadgets.json.parse(a))}),i[b](gadgets.json.stringify(h)),!0}else{var j=document.getElementById(a);if(typeof j[b]==="function"&&typeof j[b][c]==="function")return j[b][c](gadgets.json.stringify(h)),!0}}catch(l){}return!1}var b="__g2c_rpc",c="__c2g_rpc",d,e;return{getCode:function(){return"fe"},
isParentVerifiable:function(){return!1},init:function(a,b){d=a;e=b;return!0},setup:function(a){if(a!=="..")try{document.getElementById(a)[b]=function(a){d(gadgets.json.parse(a))}}catch(c){return!1}a===".."&&(e("..",!0),gadgets.util.registerOnLoadHandler(function(){window.setTimeout(function(){gadgets.rpc.call(a,gadgets.rpc.ACK)},500)}));return!0},call:function(b,c,d){return a(b,c,d)}}}();gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.nix)gadgets.rpctx.nix=function(){function a(){var h=e[".."];if(!h)if(++g>c)gadgets.warn("Nix transport setup failed, falling back..."),f("..",!1);else{if(!h&&window.opener&&"GetAuthToken"in window.opener&&(h=window.opener,h.GetAuthToken()==gadgets.rpc.getAuthToken(".."))){var i=gadgets.rpc.getAuthToken("..");h.CreateChannel(window[b]("..",i),i);e[".."]=h;window.opener=null;f("..",!0);return}window.setTimeout(function(){a()},d)}}var b="GRPC____NIXVBS_get_wrapper",c=10,d=500,e={},
f,g=0;return{getCode:function(){return"nix"},isParentVerifiable:function(){return!1},init:function(a,c){f=c;if(typeof window[b]!=="unknown"){window.GRPC____NIXVBS_handle_message=function(b){window.setTimeout(function(){a(gadgets.json.parse(b))},0)};window.GRPC____NIXVBS_create_channel=function(a,b,c){gadgets.rpc.getAuthToken(a)===c&&(e[a]=b,f(a,!0))};var d="Class GRPC____NIXVBS_wrapper\n Private m_Intended\nPrivate m_Auth\nPublic Sub SetIntendedName(name)\n If isEmpty(m_Intended) Then\nm_Intended = name\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\n If isEmpty(m_Auth) Then\nm_Auth = auth\nEnd If\nEnd Sub\nPublic Sub SendMessage(data)\n GRPC____NIXVBS_handle_message(data)\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken = m_Auth\nEnd Function\nPublic Sub CreateChannel(channel, auth)\n Call GRPC____NIXVBS_create_channel(m_Intended, channel, auth)\nEnd Sub\nEnd Class\nFunction "+
b+"(name, auth)\nDim wrap\nSet wrap = New GRPC____NIXVBS_wrapper\nwrap.SetIntendedName name\nwrap.SetAuth auth\nSet "+b+" = wrap\nEnd Function";try{window.execScript(d,"vbscript")}catch(g){return!1}}return!0},setup:function(c,d){if(c==="..")return a(),!0;try{var e=document.getElementById(c),f=window[b](c,d);e.contentWindow.opener=f}catch(g){return!1}return!0},call:function(a,b,c){try{e[a]&&e[a].SendMessage(gadgets.json.stringify(c))}catch(d){return!1}return!0}}}();gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.rmr)gadgets.rpctx.rmr=function(){function a(a,b,c,d){var f=function(){document.body.appendChild(a);a.src="about:blank";if(d)a.onload=function(){e(d)};a.src=b+"#"+c};document.body?f():gadgets.util.registerOnLoadHandler(function(){f()})}function b(a){var c=null;i[a].searchCounter++;try{var d=gadgets.rpc._getTargetWin(a),c=a===".."?d.frames["rmrtransport-"+gadgets.rpc.RPC_ID]:d.frames["rmrtransport-.."]}catch(e){}d=!1;c&&(d=f(a,c));!d&&!(i[a].searchCounter>h)&&window.setTimeout(function(){b(a)},
g)}function c(a,b,c,e){var f=null;if(f=c!==".."?i[".."]:i[a]){b!==gadgets.rpc.ACK&&f.queue.push(e);if(f.waiting||f.queue.length===0&&!(b===gadgets.rpc.ACK&&e&&e.ackAlone===!0))return!0;if(f.queue.length>0)f.waiting=!0;a=f.relayUri+"#"+d(a);try{f.frame.contentWindow.location=a;var g=f.width==10?20:10;f.frame.style.width=g+"px";f.width=g}catch(h){return!1}}return!0}function d(a){var a=i[a],b={id:a.sendId};if(a){b.d=Array.prototype.slice.call(a.queue,0);var c={s:gadgets.rpc.ACK,id:a.recvId};if(!a.originVerified)c.sendToken=
a.verifySendToken;if(a.verifyRecvToken)c.recvToken=a.verifyRecvToken;b.d.push(c)}return gadgets.json.stringify(b)}function e(a){for(var b=i[a],d=b.receiveWindow.location.hash.substring(1),e=gadgets.json.parse(decodeURIComponent(d))||{},d=e.d||[],f=!1,g=!1,h=0,e=b.recvId-e.id,j=0;j<d.length;++j){var m=d[j];if(m.s===gadgets.rpc.ACK){k(a,!0);b.verifyRecvToken=m.sendToken;if(!b.originVerified&&m.recvToken&&String(m.recvToken)==String(b.verifySendToken))b.originVerified=!0;b.waiting&&(g=!0);b.waiting=
!1;var u=Math.max(0,m.id-b.sendId);b.queue.splice(0,u);b.sendId=Math.max(b.sendId,m.id||0)}else f=!0,++h<=e||(++b.recvId,l(m,b.originVerified?b.relayOrigin:void 0))}if(f||g&&b.queue.length>0)c(a,gadgets.rpc.ACK,a===".."?gadgets.rpc.RPC_ID:"..",{ackAlone:f})}function f(b,c){function f(){e(b)}var g=i[b];try{var h=!1;if(!("document"in c))return!1;h=typeof c.document=="object";if(!h)return!1;if(c.location.href==="about:blank")return!1}catch(j){return!1}g.receiveWindow=c;typeof c.attachEvent==="undefined"?
c.onresize=f:c.attachEvent("onresize",f);b===".."?a(g.frame,g.relayUri,d(b),b):e(b);return!0}var g=500,h=10,i={},j=gadgets.util.getUrlParameters().parent,l,k;return{getCode:function(){return"rmr"},isParentVerifiable:function(){return!0},init:function(a,b){l=a;k=b;return!0},setup:function(c){try{if(typeof i[c]!=="object"){var e=document.createElement("iframe"),f=e.style;f.position="absolute";f.top="0px";f.border="0";f.opacity="0";f.width="10px";f.height="1px";e.id="rmrtransport-"+c;e.name=e.id;var g=
gadgets.rpc.getRelayUrl(c),h=gadgets.rpc.getOrigin(j);g||(g=h+"/robots.txt");i[c]={frame:e,receiveWindow:null,relayUri:g,relayOrigin:h,searchCounter:0,width:10,waiting:!0,queue:[],sendId:0,recvId:0,verifySendToken:String(Math.random()),verifyRecvToken:null,originVerified:!1};c!==".."&&a(e,g,d(c));b(c)}}catch(k){return gadgets.warn("Caught exception setting up RMR: "+k),!1}return!0},call:function(a,b,d){return c(a,d.s,b,d)}}}();gadgets.rpctx=gadgets.rpctx||{};
if(!gadgets.rpctx.ifpc)gadgets.rpctx.ifpc=function(){function a(a){for(var b=[],c=0,d=a.length;c<d;++c)b.push(encodeURIComponent(gadgets.json.stringify(a[c])));return b.join("&")}function b(a){for(var b,d=c.length-1;d>=0;--d){var e=c[d];try{if(e&&(e.recyclable||e.readyState==="complete"))if(e.parentNode.removeChild(e),window.ActiveXObject)c[d]=e=null,c.splice(d,1);else{e.recyclable=!1;b=e;break}}catch(f){}}if(!b)b=document.createElement("iframe"),b.style.border=b.style.width=b.style.height="0px",
b.style.visibility="hidden",b.style.position="absolute",b.onload=function(){this.recyclable=!0},c.push(b);b.src=a;window.setTimeout(function(){document.body.appendChild(b)},0)}var c=[],d=0,e,f={};return{getCode:function(){return"ifpc"},isParentVerifiable:function(){return!0},init:function(a,b){e=b;e("..",!0);return!0},setup:function(a){e(a,!0);return!0},call:function(c,e,f){var j=gadgets.rpc.getRelayUrl(c);++d;if(!j)return gadgets.warn("No relay file assigned for IFPC"),!1;var l=null,k=[];if(f.l)l=
[j,"#",a([e,d,1,0,a([e,f.s,"","",e].concat(f.a))])].join(""),k.push(l);else for(var l=[j,"#",c,"&",e,"@",d,"&"].join(""),c=encodeURIComponent(gadgets.json.stringify(f)),e=2E3-l.length,f=Math.ceil(c.length/e),j=0,p;c.length>0;)p=c.substring(0,e),c=c.substring(e),k.push([l,f,"&",j,"&",p].join("")),j+=1;do b(k.shift());while(k.length>0);return!0},_receiveMessage:function(a,b){var c=a[1],d=parseInt(a[2],10),e=parseInt(a[3],10),k=a[a.length-1],p=d===1;if(d>1){f[c]||(f[c]=[]);f[c][e]=k;a:{for(d-=1;d>=0;--d)if(typeof f[c][d]===
"undefined"){d=!1;break a}d=!0}d&&(k=f[c].join(""),delete f[c],p=!0)}p&&b(gadgets.json.parse(decodeURIComponent(k)))}}}();if(!window.gadgets.rpc)gadgets.rpc=function(){function a(a,b){if(!C[a]){var c=y;b||(c=I);C[a]=c;for(var d=z[a]||[],e=0;e<d.length;++e){var f=d[e];f.t=m[a];c.call(a,f.f,f)}z[a]=[]}}function b(){function a(){N=!0}O||(typeof window.addEventListener!="undefined"?window.addEventListener("unload",a,!1):typeof window.attachEvent!="undefined"&&window.attachEvent("onunload",a),O=!0)}function c(a,c,d,e,f){if(!m[c]||m[c]!==d)gadgets.error("Invalid auth token. "+m[c]+" vs "+d),G(c,K);f.onunload=function(){q[c]&&
!N&&(G(c,M),gadgets.rpc.removeReceiver(c))};b();e=gadgets.json.parse(decodeURIComponent(e))}function d(b,c){if(b&&typeof b.s==="string"&&typeof b.f==="string"&&b.a instanceof Array)if(m[b.f]&&m[b.f]!==b.t&&(gadgets.error("Invalid auth token. "+m[b.f]+" vs "+b.t),G(b.f,K)),b.s==="__ack")window.setTimeout(function(){a(b.f,!0)},0);else{b.c&&(b.callback=function(a){gadgets.rpc.call(b.f,"__cb",null,b.c,a)});if(c){var d=e(c);b.origin=c;var f=b.r;if(!f||e(f)!=d)f=c;b[x]=f}d=(w[b.s]||w[""]).apply(b,b.a);
b.c&&typeof d!=="undefined"&&gadgets.rpc.call(b.f,"__cb",null,b.c,d)}}function e(a){if(!a)return"";a=a.toLowerCase();a.indexOf("//")==0&&(a=window.location.protocol+a);a.indexOf("://")==-1&&(a=window.location.protocol+"//"+a);var b=a.substring(a.indexOf("://")+3),c=b.indexOf("/");c!=-1&&(b=b.substring(0,c));var a=a.substring(0,a.indexOf("://")),c="",d=b.indexOf(":");if(d!=-1){var e=b.substring(d+1),b=b.substring(0,d);if(a==="http"&&e!=="80"||a==="https"&&e!=="443")c=":"+e}return a+"://"+b+c}function f(a){if(a.charAt(0)==
"/"){var b=a.indexOf("|"),c=b>0?a.substring(1,b):a.substring(1),a=b>0?a.substring(b+1):null;return{id:c,origin:a}}else return null}function g(a){if(typeof a==="undefined"||a==="..")return window.parent;var b=f(a);if(b)return window.frames[b.id];a=String(a);return(b=document.getElementById(a))&&b.contentWindow?b.contentWindow:(b=window.frames[a])&&!b.closed?b:null}function h(a,b){if(q[a]!==!0){typeof q[a]==="undefined"&&(q[a]=0);var c=g(a);(a===".."||c!=null)&&y.setup(a,b)===!0?q[a]=!0:q[a]!==!0&&
q[a]++<10?window.setTimeout(function(){h(a,b)},500):(C[a]=I,q[a]=!0)}}function i(a,b){var c=g(a);if(!s[a]||s[a].sameDomain||s[a]!==J&&c.Function.prototype!==s[a].constructor.prototype){var d=j(a);if(e(d)!==e(window.location.href))return s[a]=J,!1;try{s[a]=c.gadgets.rpc.receiveSameDomain,s[a].sameDomain=!0}catch(f){return s[a]=J,!1}}return s[a]&&s[a]!==J?(s[a](b),!0):!1}function j(a){(a=v[a])&&a.substring(0,1)==="/"&&(a=a.substring(1,2)==="/"?document.location.protocol+a:document.location.protocol+
"//"+document.location.host+a);return a}function l(a,b,c){/http(s)?:\/\/.+/.test(b)||(b.indexOf("//")==0?b=window.location.protocol+b:b.charAt(0)=="/"?b=window.location.protocol+"//"+window.location.host+b:b.indexOf("://")==-1&&(b=window.location.protocol+"//"+b));v[a]=b;typeof c!=="undefined"&&(n[a]=!!c)}function k(a,b){b=b||"";m[a]=String(b);h(a,b)}function p(a){a=(a.passReferrer||"").split(":",2);D=a[0]||"none";F=a[1]||"origin"}function r(b){if(String(b.useLegacyProtocol)==="true")y=gadgets.rpctx.ifpc,
y.init(d,a)}function o(a,b){function c(d){d=d?d.rpc:{};p(d);var f=d.parentRelayUrl||"",f=e(B.parent||b)+f;l("..",f,String(d.useLegacyProtocol)==="true");r(d);k("..",a)}!B.parent&&b?c({}):gadgets.config.register("rpc",null,c)}function t(a,b,c){if(a==="..")o(c||B.rpctoken||B.ifpctok||"",b);else a:{var d=null;if(a.charAt(0)!="/"){if(!gadgets.util)break a;d=document.getElementById(a);if(!d)throw Error("Cannot set up gadgets.rpc receiver with ID: "+a+", element not found.");}d=d&&d.src;b=b||gadgets.rpc.getOrigin(d);
l(a,b);b=gadgets.util.getUrlParameters(d);k(a,c||b.rpctoken)}}var x="referer",w={},v={},n={},m={},u=0,A={},q={},s={},B={},C={},z={},D=null,F=null,H=!!gadgets.util.getUrlParameters().parent&&window.top!==window.self,E=window.name,G=function(){},M=1,K=2,L=window.console,P=L&&L.log&&function(a){L.log(a)}||function(){},I=function(){function a(b){return function(){P(b+": call ignored")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return!0},init:a("init"),setup:a("setup"),call:a("call")}}();
gadgets.util&&(B=gadgets.util.getUrlParameters());var N=!1,O=!1,y;y=B.rpctx=="flash"?gadgets.rpctx.flash:B.rpctx=="rmr"?gadgets.rpctx.rmr:typeof window.postMessage==="function"?gadgets.rpctx.wpm:typeof window.postMessage==="object"?gadgets.rpctx.wpm:window.ActiveXObject?gadgets.rpctx.flash?gadgets.rpctx.flash:gadgets.rpctx.nix:navigator.userAgent.indexOf("WebKit")>0?gadgets.rpctx.rmr:navigator.product==="Gecko"?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc;w[""]=function(){P("Unknown RPC service: "+
this.s)};w.__cb=function(a,b){var c=A[a];c&&(delete A[a],c.call(this,b))};var J={};return{config:function(a){if(typeof a.securityCallback==="function")G=a.securityCallback},register:function(a,b){if(a==="__cb"||a==="__ack")throw Error("Cannot overwrite callback/ack service");if(a==="")throw Error("Cannot overwrite default service: use registerDefault");w[a]=b},unregister:function(a){if(a==="__cb"||a==="__ack")throw Error("Cannot delete callback/ack service");if(a==="")throw Error("Cannot delete default service: use unregisterDefault");
delete w[a]},registerDefault:function(a){w[""]=a},unregisterDefault:function(){delete w[""]},forceParentVerifiable:function(){if(!y.isParentVerifiable())y=gadgets.rpctx.ifpc},call:function(a,b,c,d){var a=a||"..",e="..";a===".."?e=E:a.charAt(0)=="/"&&(e=gadgets.rpc.getOrigin(window.location.href),e="/"+E+(e?"|"+e:""));++u;c&&(A[u]=c);var g={s:b,f:e,c:c?u:0,a:Array.prototype.slice.call(arguments,3),t:m[a],l:!!n[a]},o;a:if(D==="bidir"||D==="c2p"&&a===".."||D==="p2c"&&a!==".."){o=window.location.href;
var h="?";if(F==="query")h="#";else if(F==="hash")break a;h=o.lastIndexOf(h);h=h===-1?o.length:h;o=o.substring(0,h)}else o=null;o&&(g.r=o);if(!(a!==".."&&f(a)==null&&!document.getElementById(a))&&!i(a,g))if(o=C[a],!o&&f(a)!==null&&(o=y),o){if(n[a])o=gadgets.rpctx.ifpc;o.call(a,e,g)===!1&&(C[a]=I,y.call(a,e,g))}else z[a]?z[a].push(g):z[a]=[g]},getRelayUrl:j,setRelayUrl:l,setAuthToken:k,setupReceiver:t,getAuthToken:function(a){return m[a]},removeReceiver:function(a){delete v[a];delete n[a];delete m[a];
delete q[a];delete s[a];delete C[a]},getRelayChannel:function(){return y.getCode()},receive:function(a,b){a.length>4?y._receiveMessage(a,d):c.apply(null,a.concat(b))},receiveSameDomain:function(a){a.a=Array.prototype.slice.call(a.a);window.setTimeout(function(){d(a)},0)},getOrigin:e,getTargetOrigin:function(a){var b=null,b=j(a);b||(b=(b=f(a))?b.origin:a==".."?B.parent:document.getElementById(a).src);return e(b)},init:function(){y.init(d,a)===!1&&(y=I);H?t(".."):gadgets.config.register("rpc",null,
function(a){a=a.rpc||{};p(a);r(a)})},_getTargetWin:g,_parseSiblingId:f,ACK:"__ack",RPC_ID:E||"..",SEC_ERROR_LOAD_TIMEOUT:0,SEC_ERROR_FRAME_PHISH:M,SEC_ERROR_FORGED_MSG:K}}(),gadgets.rpc.init();shindig.uri=function(){var a=/^(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/;return function(b){function c(b){if(b.match(a)===null)throw"Malformed URL: "+b;t=RegExp.$1;x=RegExp.$2;w=RegExp.$3;v=RegExp.$4;m=RegExp.$5}function d(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c][1];e!==void 0&&b.push(q(a[c][0])+(e!==null?"="+q(e):""))}return b.join("&")}function e(){n&&(v=d(n),n=null);return v}function f(){u&&(m=d(u),u=null);return m}function g(a){n=n||k(v);return p(n,a)}function h(a){u=
u||k(m);return p(u,a)}function i(a,b){n=r(n||k(v),a,b);return s}function j(a,b){u=r(u||k(m),a,b);return s}function l(){return[t,t!==""?":":"",x!==""?"//":"",x].join("")}function k(a){for(var b=[],a=a.split("&"),c=0,d=a.length;c<d;++c){var e=a[c].split("="),f=e.shift(),g=null;e.length>0&&(g=e.join("").replace(/\+/g," "));b.push([f,g!=null?A(g):null])}return b}function p(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c][0]==b)return a[c][1]}function r(a,b,c){var d=b;typeof b==="string"&&(d={},d[b]=c);for(var e in d){for(var b=
!1,c=0,f=a.length;!b&&c<f;++c)a[c][0]==e&&(a[c][1]=d[e],b=!0);b||a.push([e,d[e]])}return a}function o(a,b){a=a||"";a[0]===b&&(a=a.substr(b.length));return a}var t="",x="",w="",v="",n=null,m="",u=null,A=window.decodeURIComponent?decodeURIComponent:unescape,q=window.encodeURIComponent?encodeURIComponent:escape,s=null;typeof b==="object"&&typeof b.toString==="function"?c(b.toString()):b&&c(b);return s={getSchema:function(){return t},getAuthority:function(){return x},getOrigin:l,getPath:function(){return w},
getQuery:e,getFragment:f,getQP:g,getFP:h,setSchema:function(a){t=a;return s},setAuthority:function(a){x=a;return s},setPath:function(a){typeof a!=="undefined"&&a!=null&&(w=(a[0]==="/"?"":"/")+a);return s},setQuery:function(a){n=null;v=o(a,"?");return s},setFragment:function(a){u=null;m=o(a,"#");return s},setQP:i,setFP:j,setExistingP:function(a,b){g(a,b)!==void 0&&i(a,b);h(a,b)!==void 0&&j(a,b);return s},toString:function(){var a=e(),b=f();return[l(),w,a!==""?"?":"",a,b!==""?"#":"",b].join("")}}}}();gadgets.io=function(){function a(){var a;if(typeof shindig!="undefined"&&shindig.xhrwrapper&&shindig.xhrwrapper.createXHR)return shindig.xhrwrapper.createXHR();else if(typeof ActiveXObject!="undefined")return(a=new ActiveXObject("Msxml2.XMLHTTP"))||(a=new ActiveXObject("Microsoft.XMLHTTP")),a;else if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest)return new window.XMLHttpRequest;else throw"no xhr available";}function b(a,b){if(a.readyState!==4)return!0;try{if(a.status!==200){var c=""+a.status;
a.responseText&&(c=c+" "+a.responseText);b({errors:[c],rc:a.status,text:a.responseText});return!0}}catch(d){return b({errors:[d.number+" Error not specified"],rc:d.number,text:d.description}),!0}return!1}function c(a,c,d,f){b(f,c)||c(e(d,{body:f.responseText}))}function d(a,c,d,f){if(!b(f,c)){var f=f.responseText,g=f.indexOf(k)+k.length;if(!(g<k.length))f=f.substr(g),f=eval("("+f+")"),f=f[a],f.oauthState&&(l=f.oauthState),f.st&&shindig.auth.updateSecurityToken(f.st),c(e(d,f))}}function e(a,b){var c=
{text:b.body,rc:b.rc||200,headers:b.headers,oauthApprovalUrl:b.oauthApprovalUrl,oauthError:b.oauthError,oauthErrorText:b.oauthErrorText,errors:[]};if(c.rc<200||c.rc>=400)c.errors=[c.rc+" Error"];else if(c.text)switch(c.rc>=300&&c.rc<400&&(a.CONTENT_TYPE="TEXT"),a.CONTENT_TYPE){case "JSON":case "FEED":c.data=gadgets.json.parse(c.text);if(!c.data)c.errors.push("500 Failed to parse JSON"),c.rc=500,c.data=null;break;case "DOM":var d;typeof ActiveXObject!="undefined"?(d=new ActiveXObject("Microsoft.XMLDOM"),
d.async=!1,d.validateOnParse=!1,d.resolveExternals=!1,d.loadXML(c.text)?c.data=d:(c.errors.push("500 Failed to parse XML"),c.rc=500)):(d=(new DOMParser).parseFromString(c.text,"text/xml"),"parsererror"===d.documentElement.nodeName?(c.errors.push("500 Failed to parse XML"),c.rc=500):c.data=d);break;default:c.data=c.text}return c}function f(b,c,d,e,f,h,i,j){var k=a();c.indexOf("//")==0&&(c=document.location.protocol+c);k.open(f,c,!0);if(d)b=gadgets.util.makeClosure(null,i,b,d,h,k),document.all&&!document.querySelector?
g(k,b):k.onreadystatechange=b;if(e!==null){b="application/x-www-form-urlencoded";typeof j==="string"&&(b=j,j={});j=j||{};j["Content-Type"]||(j["Content-Type"]=b);for(var l in j)k.setRequestHeader(l,j[l])}k.send(e)}function g(a,b){var c=h;i[c]=window.setInterval(function(){a&&a.readyState===4&&(window.clearInterval(i[c]),delete i[c],b&&b())},50);h++}var h=0,i={},j={},l,k="throw 1; < don't be evil' >";gadgets.config.register("core.io",null,function(a){j=a["core.io"]||{}});return{makeRequest:function(a,
b,c){var c=c||{},g=c.METHOD||"GET",h=c.REFRESH_INTERVAL,i,k;c.AUTHORIZATION&&c.AUTHORIZATION!=="NONE"?(i=c.AUTHORIZATION.toLowerCase(),k=shindig.auth.getSecurityToken()):g==="GET"&&h===void 0&&(h=3600);var n=!0;typeof c.OWNER_SIGNED!=="undefined"&&(n=c.OWNER_SIGNED);var m=!0;typeof c.VIEWER_SIGNED!=="undefined"&&(m=c.VIEWER_SIGNED);var u=c.HEADERS||{};g==="POST"&&!u["Content-Type"]&&(u["Content-Type"]="application/x-www-form-urlencoded");var A=gadgets.util.getUrlParameters();k={url:a,httpMethod:g,
headers:gadgets.io.encodeValues(u,!1),postData:c.POST_DATA||"",authz:i||"",st:k||"",contentType:c.CONTENT_TYPE||"TEXT",numEntries:c.NUM_ENTRIES||"3",getSummaries:!!c.GET_SUMMARIES,signOwner:n,signViewer:m,gadget:A.url,container:A.container||A.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters().nocache||"",getFullHeaders:!!c.GET_FULL_HEADERS};if(i==="oauth"||i==="signed"){if(gadgets.io.oauthReceivedCallbackUrl_)k.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_,gadgets.io.oauthReceivedCallbackUrl_=
null;k.oauthState=l||"";for(var q in c)c.hasOwnProperty(q)&&q.indexOf("OAUTH_")===0&&(k[q]=c[q])}i=j.jsonProxyUrl.replace("%host%",document.location.host);a:{if(gadgets.io.preloaded_&&k.httpMethod==="GET")for(q=0;q<gadgets.io.preloaded_.length;q++)if((n=gadgets.io.preloaded_[q])&&n.id===k.url){delete gadgets.io.preloaded_[q];n.rc!==200?b({rc:n.rc,errors:[n.rc+" Error"]}):(n.oauthState&&(l=n.oauthState),b(e(c,{body:n.body,rc:n.rc,headers:n.headers,oauthApprovalUrl:n.oauthApprovalUrl,oauthError:n.oauthError,
oauthErrorText:n.oauthErrorText,errors:[]})));q=!0;break a}q=!1}q||(g==="GET"&&h>0?(g="?refresh="+h+"&"+gadgets.io.encodeValues(k),f(a,i+g,b,null,"GET",c,d)):f(a,i,b,gadgets.io.encodeValues(k),"POST",c,d))},makeNonProxiedRequest:function(a,b,d,e){d=d||{};f(a,a,b,d.POST_DATA,d.METHOD,d,c,e)},clearOAuthState:function(){l=void 0},encodeValues:function(a,b){var c=!b,d=[],e=!1,f;for(f in a)a.hasOwnProperty(f)&&!/___$/.test(f)&&(e?d.push("&"):e=!0,d.push(c?encodeURIComponent(f):f),d.push("="),d.push(c?
encodeURIComponent(a[f]):a[f]));return d.join("")},getProxyUrl:function(a,b){var c=j.proxyUrl;if(!c)return c;var d=b||{},e=d.REFRESH_INTERVAL;e===void 0&&(e="3600");var f=gadgets.util.getUrlParameters(),d=d.rewriteMime?"&rewriteMime="+encodeURIComponent(d.rewriteMime):"",c=c.replace("%url%",encodeURIComponent(a)).replace("%host%",document.location.host).replace("%rawurl%",a).replace("%refresh%",encodeURIComponent(e)).replace("%gadget%",encodeURIComponent(f.url)).replace("%container%",encodeURIComponent(f.container||
f.synd||"default")).replace("%rewriteMime%",d);c.indexOf("//")==0&&(c=window.location.protocol+c);return c}}}();gadgets.io.RequestParameters=gadgets.util.makeEnum("METHOD,CONTENT_TYPE,POST_DATA,HEADERS,AUTHORIZATION,NUM_ENTRIES,GET_SUMMARIES,GET_FULL_HEADERS,REFRESH_INTERVAL,OAUTH_SERVICE_NAME,OAUTH_USE_TOKEN,OAUTH_TOKEN_NAME,OAUTH_REQUEST_TOKEN,OAUTH_REQUEST_TOKEN_SECRET,OAUTH_RECEIVED_CALLBACK".split(","));gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);
gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);(function(){osapi.newBatch=function(){var a={},b=[],c=function(a){var b={method:a.request.method,id:a.key};a.request.rpc&&(b.params=a.request.rpc);return b};a.execute=function(a){for(var e={},f={},g=0,h=[],i=0;i<b.length;i++){var j=b[i].request.transport;f[j.name]||(h.push(j),g++);f[j.name]=f[j.name]||[];f[j.name].push(c(b[i]))}i=function(c){c.error&&(e.error=c.error);for(var f=0;f<b.length;f++){var h=b[f].key,i=c[h];i&&(e[h]=i.error?i:i.data||i.result)}g--;g===0&&a(e)};for(j=0;j<h.length;j++)h[j].execute(f[h[j].name],
i);g==0&&window.setTimeout(function(){a(e)},0)};a.add=function(c,e){e&&c&&b.push({key:c,request:e});return a};return a}})();osapi._registerMethod=function(a,b){if(a!=="newBatch"){for(var c=a.split("."),d=osapi,e=0;e<c.length-1;e++)d[c[e]]=d[c[e]]||{},d=d[c[e]];var f=c[c.length-1],g;d[f]&&(g=d[f]);d[f]=function(c){c=c||{};c.userId=c.userId||"@viewer";c.groupId=c.groupId||"@self";return new osapi._BoundCall(a,b,c)};if(typeof tamings___!=="undefined")c=function(){caja___.markTameAsFunction(d[f],a)},g&&g.__taming_index?(d[f].__taming_index=g.__taming_index,tamings___[g.__taming_index]=c):(d[f].__taming_index=tamings___.length,
tamings___.push(c))}};osapi._BoundCall=function(a,b,c){this.method=a;this.transport=b;this.rpc=c};osapi._BoundCall.prototype.execute=function(a){var b=typeof caja___!=="undefined"&&caja___.getUseless&&caja___.getUseless(),c=b?caja___.getUseless():this,d=b?caja___.untame(a):a,a=osapi.newBatch();a.add(this.method,this);a.execute(function(a){a.error?d.call(c,a.error):d.call(c,a[c.method])})};shindig._uri=shindig.uri;shindig.uri=function(){var a=shindig._uri;shindig._uri=null;return function(b){var c=a(b);c.hasSameOrigin=function(a){return c.getOrigin()==a.getOrigin()};c.resolve=function(a){c.getSchema()==""&&c.setSchema(a.getSchema());c.getAuthority()==""&&c.setAuthority(a.getAuthority());var b=c.getPath();if(b==""||b.charAt(0)!="/"){var f=a.getPath(),g=f.lastIndexOf("/");g!=-1&&f.substring(0,g+1);c.setPath(a.getPath()+b)}};return c}}();(function(){function a(a,b){var f={POST_DATA:gadgets.json.stringify(a),CONTENT_TYPE:"JSON",METHOD:"POST",AUTHORIZATION:"SIGNED"},g={"Content-Type":"application/json"},h=this.name,i=shindig.auth.getSecurityToken();if(i)c?g.Authorization="OAuth2 "+i:(h+="?st=",h+=encodeURIComponent(i));gadgets.io.makeNonProxiedRequest(h,function(a){if(a.errors[0])b({error:{code:a.rc,message:a.text}});else if(a=a.result||a.data,a.error)b(a);else{for(var c={},d=0;d<a.length;d++)c[a[d].id]=a[d];b(c)}},f,g)}function b(b){var e=
b["osapi.services"];c=b["osapi.useOAuth2"];if(e)for(var f in e)if(e.hasOwnProperty(f)&&(f.indexOf("http")==0||f.indexOf("//")==0))for(var b={name:f.replace("%host%",document.location.host),execute:a},g=e[f],h=0;h<g.length;h++)osapi._registerMethod(g[h],b)}var c;gadgets.config&&gadgets.config.register("osapi.services",null,b)})();gadgets.util.registerOnLoadHandler(function(){if(osapi&&osapi.people&&osapi.people.get)osapi.people.getViewer=function(a){a=a||{};a.userId="@viewer";a.groupId="@self";return osapi.people.get(a)},osapi.people.getViewerFriends=function(a){a=a||{};a.userId="@viewer";a.groupId="@friends";return osapi.people.get(a)},osapi.people.getOwner=function(a){a=a||{};a.userId="@owner";a.groupId="@self";return osapi.people.get(a)},osapi.people.getOwnerFriends=function(a){a=a||{};a.userId="@owner";a.groupId="@friends";
return osapi.people.get(a)}});osapi.container={};osapi.container.MetadataParam={LOCAL_EXPIRE_TIME:"localExpireTimeMs",URL:"url"};osapi.container.MetadataResponse={IFRAME_URL:"iframeUrl",NEEDS_TOKEN_REFRESH:"needsTokenRefresh",VIEWS:"views",EXPIRE_TIME_MS:"expireTimeMs",FEATURES:"features",HEIGHT:"height",MODULE_PREFS:"modulePrefs",PREFERRED_HEIGHT:"preferredHeight",PREFERRED_WIDTH:"preferredWidth",RESPONSE_TIME_MS:"responseTimeMs",WIDTH:"width"};osapi.container.TokenResponse={TOKEN:"token"};
osapi.container.NavigateTiming={URL:"url",ID:"id",START:"start",XRT:"xrt",SRT:"srt",DL:"dl",OL:"ol",PRT:"prt"};osapi.container.RenderParam={ALLOW_DEFAULT_VIEW:"allowDefaultView",CAJOLE:"cajole",CLASS:"class",DEBUG:"debug",HEIGHT:"height",NO_CACHE:"nocache",TEST_MODE:"testmode",USER_PREFS:"userPrefs",VIEW:"view",WIDTH:"width"};osapi.container.ViewParam={VIEW:"view"};osapi.container.CallbackType={ON_PRELOADED:"onPreloaded",ON_NAVIGATED:"onNavigated",ON_CLOSED:"onClosed",ON_UNLOADED:"onUnloaded",ON_RENDER:"onRender"};osapi.container.util={};osapi.container.util.getSafeJsonValue=function(a,b,c){return a[b]!=void 0&&a[b]!=null?a[b]:c};osapi.container.util.mergeJsons=function(a,b){var c={},d;for(d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c};osapi.container.util.newMetadataRequest=function(a){osapi.container.util.isArray(a)||(a=[a]);return{container:window.__CONTAINER,ids:a,fields:"iframeUrl,modulePrefs.*,needsTokenRefresh,userPrefs.*,views.preferredHeight,views.preferredWidth,expireTimeMs,responseTimeMs".split(",")}};
osapi.container.util.newTokenRequest=function(a){osapi.container.util.isArray(a)||(a=[a]);return{container:window.__CONTAINER,ids:a,fields:["token"]}};osapi.container.util.toArrayOfJsonKeys=function(a){var b=[],c;for(c in a)b.push(c);return b};osapi.container.util.isArray=function(a){return Object.prototype.toString.call(a)=="[object Array]"};osapi.container.util.isEmptyJson=function(a){for(var b in a)return!1;return!0};osapi.container.util.warn=function(a){console&&console.warn&&console.warn(a)};
osapi.container.util.getCurrentTimeMs=function(){return(new Date).getTime()};osapi.container.util.createIframeHtml=function(a){var b=[];b.push("<iframe ");for(var c in a){var d=a[c];d&&(b.push(c),b.push('="'),b.push(d),b.push('" '))}b.push("></iframe>");return b.join("")};osapi.container.GadgetHolder=function(a,b){this.siteId_=a;this.el_=b;this.securityToken_=this.iframeId_=this.renderParams_=this.viewParams_=this.gadgetInfo_=null;this.onConstructed()};osapi.container.GadgetHolder.prototype.relayPath_=null;osapi.container.GadgetHolder.prototype.onConstructed=function(){};osapi.container.GadgetHolder.prototype.getElement=function(){return this.el_};osapi.container.GadgetHolder.prototype.getIframeId=function(){return this.iframeId_};
osapi.container.GadgetHolder.prototype.getGadgetInfo=function(){return this.gadgetInfo_};osapi.container.GadgetHolder.prototype.dispose=function(){this.gadgetInfo_=null};osapi.container.GadgetHolder.prototype.getUrl=function(){return this.gadgetInfo_?this.gadgetInfo_.url:null};osapi.container.GadgetHolder.prototype.getView=function(){return this.renderParams_[osapi.container.RenderParam.VIEW]};osapi.container.GadgetHolder.prototype.getIframeElement=function(){return this.el_.getElementsByTagName("iframe")[0]};
osapi.container.GadgetHolder.prototype.setSecurityToken=function(a){this.securityToken_=a;return this};osapi.container.GadgetHolder.prototype.render=function(a,b,c){this.iframeId_=osapi.container.GadgetHolder.IFRAME_ID_PREFIX_+this.siteId_;this.gadgetInfo_=a;this.viewParams_=b;this.renderParams_=c;this.hasFeature_(a,"pubsub-2")?this.doOaaIframeHtml_():this.doNormalIframeHtml_()};osapi.container.GadgetHolder.IFRAME_ID_PREFIX_="__gadget_";
osapi.container.GadgetHolder.prototype.doNormalIframeHtml_=function(){this.el_.innerHTML=this.getIframeHtml_();var a=shindig.uri(this.gadgetInfo_[osapi.container.MetadataResponse.IFRAME_URL]),b=shindig.uri().setSchema(a.getSchema()).setAuthority(a.getAuthority()).setPath(this.relayPath_);gadgets.rpc.setupReceiver(this.iframeId_,b.toString(),a.getFP("rpctoken"))};
osapi.container.GadgetHolder.prototype.doOaaIframeHtml_=function(){var a={id:this.iframeId_,name:this.iframeId_,src:this.getIframeUrl_(),scrolling:"no",marginwidth:"0",marginheight:"0",frameborder:"0",vspace:"0",hspace:"0","class":this.renderParams_[osapi.container.RenderParam.CLASS],height:this.renderParams_[osapi.container.RenderParam.HEIGHT],width:this.renderParams_[osapi.container.RenderParam.WIDTH]};new OpenAjax.hub.IframeContainer(gadgets.pubsub2router.hub,this.iframeId_,{Container:{onSecurityAlert:function(a,
c){gadgets.error(["Security error for container ",a.getClientID()," : ",c].join(""));a.getIframe().src="about:blank"},onConnect:function(a){gadgets.log(["connected: ",a.getClientID()].join(""))}},IframeContainer:{parent:this.el_,uri:this.getIframeUrl_(),tunnelURI:shindig.uri(this.relayPath_).resolve(shindig.uri(window.location.href)),iframeAttrs:a}})};
osapi.container.GadgetHolder.prototype.hasFeature_=function(a,b){var c=a[osapi.container.MetadataResponse.MODULE_PREFS];return c&&(c=c[osapi.container.MetadataResponse.FEATURES])&&c[b]?!0:!1};
osapi.container.GadgetHolder.prototype.getIframeHtml_=function(){var a={id:this.iframeId_,name:this.iframeId_,src:this.getIframeUrl_(),scrolling:"no",marginwidth:"0",marginheight:"0",frameborder:"0",vspace:"0",hspace:"0","class":this.renderParams_[osapi.container.RenderParam.CLASS],height:this.renderParams_[osapi.container.RenderParam.HEIGHT],width:this.renderParams_[osapi.container.RenderParam.WIDTH]};return osapi.container.util.createIframeHtml(a)};
osapi.container.GadgetHolder.prototype.getIframeUrl_=function(){var a=shindig.uri(this.gadgetInfo_[osapi.container.MetadataResponse.IFRAME_URL]);a.setQP("debug",this.renderParams_[osapi.container.RenderParam.DEBUG]?"1":"0");a.setQP("nocache",this.renderParams_[osapi.container.RenderParam.NO_CACHE]?"1":"0");a.setQP("testmode",this.renderParams_[osapi.container.RenderParam.TEST_MODE]?"1":"0");a.setQP("view",this.getView());if(this.renderParams_[osapi.container.RenderParam.CAJOLE]){var b=a.getQP("libs");
b==null||b==""?a.setQP("libs","caja"):a.setQP("libs",[b,":caja"].join(""));a.setQP("caja","1")}this.updateUserPrefParams_(a);a.setQP("parent",window.__CONTAINER_URI.getOrigin());this.securityToken_&&a.setExistingP("st",this.securityToken_);a.setQP("mid",String(this.siteId_));osapi.container.util.isEmptyJson(this.viewParams_)||(b=gadgets.json.stringify(this.viewParams_),a.setFP("view-params",b));return a.toString()};
osapi.container.GadgetHolder.prototype.updateUserPrefParams_=function(a){var b=this.renderParams_[osapi.container.RenderParam.USER_PREFS];if(b)for(var c in b){var d="up_"+c,e=b[c];e instanceof Array&&(e=e.join("|"));a.setExistingP(d,e)}};function init(a){if(a.container)osapi.container.GadgetHolder.prototype.relayPath_=a.container.relayPath}gadgets.config&&gadgets.config.register("container",null,init);osapi.container.GadgetSite=function(a){this.container_=a.container;this.service_=a.service;this.navigateCallback_=a.navigateCallback;this.currentGadgetEl_=a.gadgetEl;this.loadingGadgetEl_=a.bufferEl;this.id_=this.currentGadgetEl_&&this.currentGadgetEl_.id?this.currentGadgetEl_.id:osapi.container.GadgetSite.nextUniqueId_++;this.loadingGadgetHolder_=this.currentGadgetHolder_=this.parentId_=null;this.onConstructed()};osapi.container.GadgetSite.prototype.onConstructed=function(){};
osapi.container.GadgetSite.prototype.setHeight=function(a){var b=this.getActiveGadgetHolder();if(b&&(b=b.getIframeElement()))b.style.height=a+"px";return this};osapi.container.GadgetSite.prototype.setWidth=function(a){var b=this.getActiveGadgetHolder();if(b&&(b=b.getIframeElement()))b.style.width=a+"px";return this};osapi.container.GadgetSite.prototype.setParentId=function(a){this.parentId_=a;return this};osapi.container.GadgetSite.prototype.getId=function(){return this.id_};
osapi.container.GadgetSite.prototype.getActiveGadgetHolder=function(){return this.loadingGadgetHolder_||this.currentGadgetHolder_};osapi.container.GadgetSite.prototype.getFeature=function(a,b){var c=b||this.getActiveGadgetHolder().getGadgetInfo();return c[osapi.container.MetadataResponse.FEATURES]&&c[osapi.container.MetadataResponse.FEATURES][a]};osapi.container.GadgetSite.prototype.getParentId=function(){return this.parentId_};
osapi.container.GadgetSite.prototype.navigateTo=function(a,b,c,d){var e=osapi.container.util.getCurrentTimeMs(),f=this.service_.getCachedGadgetMetadata(a),g=d||function(){},h=this;this.service_.getGadgetMetadata(osapi.container.util.newMetadataRequest([a]),function(d){var j=!f?osapi.container.util.getCurrentTimeMs()-e:0,d=d[a];if(d.error){var l=["Failed to navigate for gadget ",a,"."].join("");osapi.container.util.warn(l)}else h.container_.applyLifecycleCallbacks_(osapi.container.CallbackType.ON_RENDER,
d),h.render(d,b,c);l={};l[osapi.container.NavigateTiming.URL]=a;l[osapi.container.NavigateTiming.ID]=h.id_;l[osapi.container.NavigateTiming.START]=e;l[osapi.container.NavigateTiming.XRT]=j;h.onNavigateTo(l);g(d)})};osapi.container.GadgetSite.prototype.onNavigateTo=function(a){if(this.navigateCallback_){var b=window[this.navigateCallback_];typeof b==="function"&&b(a)}};
osapi.container.GadgetSite.prototype.render=function(a,b,c){var d=null;(this.currentGadgetHolder_?this.currentGadgetHolder_.getUrl():null)==a.url&&(d=this.currentGadgetHolder_.getView());var e=function(b){if(typeof b!=="undefined"&&b!=null)for(var b=b.aliases||[],c=0;c<b.length;c++)if(a[osapi.container.MetadataResponse.VIEWS][b[c]])return{view:b[c],viewInfo:a[osapi.container.MetadataResponse.VIEWS][b[c]]};return null},d=c[osapi.container.RenderParam.VIEW]||b[osapi.container.ViewParam.VIEW]||d,f=a[osapi.container.MetadataResponse.VIEWS][d];
if(d&&!f){var g=e(gadgets.config.get("views")[d]);if(g)d=g.view,f=g.viewInfo}if(!f&&c[osapi.container.RenderParam.ALLOW_DEFAULT_VIEW]&&d!=osapi.container.GadgetSite.DEFAULT_VIEW_&&(d=osapi.container.GadgetSite.DEFAULT_VIEW_,f=a[osapi.container.MetadataResponse.VIEWS][d],!f&&(g=e(gadgets.config.get("views")[d]))))d=g.view,f=g.viewInfo;if(f){this.loadingGadgetHolder_=new osapi.container.GadgetHolder(this.id_,this.loadingGadgetEl_||this.currentGadgetEl_);var e={},h;for(h in c)e[h]=c[h];e[osapi.container.RenderParam.VIEW]=
d;e[osapi.container.RenderParam.HEIGHT]=c[osapi.container.RenderParam.HEIGHT]||f[osapi.container.MetadataResponse.PREFERRED_HEIGHT]||a[osapi.container.MetadataResponse.MODULE_PREFS][osapi.container.MetadataResponse.HEIGHT]||String(osapi.container.GadgetSite.DEFAULT_HEIGHT_);e[osapi.container.RenderParam.WIDTH]=c[osapi.container.RenderParam.WIDTH]||f[osapi.container.MetadataResponse.PREFERRED_WIDTH]||a[osapi.container.MetadataResponse.MODULE_PREFS][osapi.container.MetadataResponse.WIDTH]||String(osapi.container.GadgetSite.DEFAULT_WIDTH_);
this.updateSecurityToken_(a,e);this.loadingGadgetHolder_.render(a,b,e);this.onRender(a,b,c)}else gadgets.warn(["Unsupported view ",d," for gadget ",a.url,"."].join(""))};osapi.container.GadgetSite.prototype.onRender=function(){this.swapBuffers_();this.currentGadgetHolder_&&this.currentGadgetHolder_.dispose();this.currentGadgetHolder_=this.loadingGadgetHolder_;this.loadingGadgetHolder_=null};
osapi.container.GadgetSite.prototype.rpcCall=function(a,b,c){this.currentGadgetHolder_&&gadgets.rpc.call(this.currentGadgetHolder_.getIframeId(),a,b,c)};osapi.container.GadgetSite.prototype.updateSecurityToken_=function(a){(a=this.service_.getCachedGadgetToken(a.url))&&this.loadingGadgetHolder_.setSecurityToken(a[osapi.container.TokenResponse.TOKEN])};
osapi.container.GadgetSite.prototype.close=function(){this.loadingGadgetEl_&&this.loadingGadgetEl_.firstChild&&this.loadingGadgetEl_.removeChild(this.loadingGadgetEl_.firstChild);this.currentGadgetEl_&&this.currentGadgetEl_.firstChild&&this.currentGadgetEl_.removeChild(this.currentGadgetEl_.firstChild);this.loadingGadgetHolder_&&this.loadingGadgetHolder_.dispose();this.currentGadgetHolder_&&this.currentGadgetHolder_.dispose()};osapi.container.GadgetSite.nextUniqueId_=0;
osapi.container.GadgetSite.prototype.swapBuffers_=function(){if(this.loadingGadgetEl_){this.loadingGadgetEl_.style.left="";this.loadingGadgetEl_.style.position="";this.currentGadgetEl_.style.position="absolute";this.currentGadgetEl_.style.left="-2000px";var a=this.currentGadgetEl_;this.currentGadgetEl_=this.loadingGadgetEl_;this.loadingGadgetEl_=a}};osapi.container.GadgetSite.RPC_ARG_KEY="gs";osapi.container.GadgetSite.DEFAULT_HEIGHT_=200;osapi.container.GadgetSite.DEFAULT_WIDTH_=320;
osapi.container.GadgetSite.DEFAULT_VIEW_="default";osapi.container.UrlHolder=function(a,b){this.siteId_=a;this.el_=b;this.renderParams_=this.url_=this.iframeId_=null;this.onConstructed()};osapi.container.UrlHolder.prototype.onConstructed=function(){};osapi.container.UrlHolder.prototype.getElement=function(){return this.el_};osapi.container.UrlHolder.prototype.getIframeId=function(){return this.iframeId_};osapi.container.UrlHolder.prototype.dispose=function(){this.url_=null};osapi.container.UrlHolder.prototype.getUrl=function(){return this.url_};
osapi.container.UrlHolder.prototype.getIframeElement=function(){return this.el_.firstChild};osapi.container.UrlHolder.prototype.render=function(a,b){this.iframeId_=osapi.container.UrlHolder.IFRAME_PREFIX_+this.siteId_;this.url_=a;this.renderParams_=b;this.el_.innerHTML=this.createIframeHtml_()};
osapi.container.UrlHolder.prototype.createIframeHtml_=function(){var a={id:this.iframeId_,name:this.iframeId_,src:this.getUrl(),scrolling:"auto",marginwidth:"0",marginheight:"0",frameborder:"0",vspace:"0",hspace:"0","class":this.renderParams_[osapi.container.RenderParam.CLASS],height:this.renderParams_[osapi.container.RenderParam.HEIGHT],width:this.renderParams_[osapi.container.RenderParam.WIDTH]};return osapi.container.util.createIframeHtml(a)};osapi.container.UrlHolder.IFRAME_PREFIX_="__url_";osapi.container.UrlSite=function(a){this.holder_=this.parentId_=null;this.id_=osapi.container.UrlSite.nextUniqueId_++;this.el_=a[osapi.container.UrlSite.URL_ELEMENT];this.url_=null;this.onConstructed()};osapi.container.UrlSite.prototype.onConstructed=function(){};osapi.container.UrlSite.prototype.setHeight=function(a){if(this.holder_){var b=this.holder_.getIframeElement();if(b)b.style.height=a+"px"}return this};
osapi.container.UrlSite.prototype.setWidth=function(a){if(this.holder_){var b=this.holder_.getIframeElement();if(b)b.style.width=a+"px"}return this};osapi.container.UrlSite.prototype.setParentId=function(a){this.parentId_=a;return this};osapi.container.UrlSite.prototype.getId=function(){return this.id_};osapi.container.UrlSite.prototype.getParentId=function(){return this.parentId_};osapi.container.UrlSite.prototype.getActiveUrlHolder=function(){return this.holder_};
osapi.container.UrlSite.prototype.close=function(){this.el_&&this.el_.firstChild&&this.el_.removeChild(this.el_.firstChild);this.holder_&&this.holder_.dispose()};osapi.container.UrlSite.prototype.render=function(a,b){this.holder_=new osapi.container.UrlHolder(this.id_,this.el_);var c={},d;for(d in b)c[d]=b[d];this.holder_.render(a,c)};osapi.container.UrlSite.nextUniqueId_=0;osapi.container.UrlSite.URL_ELEMENT="urlEl";osapi.container.Service=function(a){a=this.config_=a||{};this.apiHost_=String(osapi.container.util.getSafeJsonValue(a,osapi.container.ServiceConfig.API_HOST,window.__API_URI.getOrigin()));this.apiPath_=String(osapi.container.util.getSafeJsonValue(a,osapi.container.ServiceConfig.API_PATH,"/rpc"));this.cachedMetadatas_={};this.cachedTokens_={};if(a.GET_LANGUAGE)this.getLanguage=a.GET_LANGUAGE;if(a.GET_COUNTRY)this.getCountry=a.GET_COUNTRY;this.registerOsapiServices();this.onConstructed(a)};
osapi.container.Service.prototype.onConstructed=function(){};
osapi.container.Service.prototype.getGadgetMetadata=function(a,b){var c=b||function(){},d=osapi.container.util.toArrayOfJsonKeys(this.getUncachedDataByRequest_(this.cachedMetadatas_,a)),e=this.getCachedDataByRequest_(this.cachedMetadatas_,a);if(d.length==0)c(e);else{var f=this;a.ids=d;a.language=this.getLanguage();a.country=this.getCountry();osapi.gadgets.metadata(a).execute(function(b){if(b.error)for(var d=0;d<a.ids.length;d++)e[i]={error:b.error};else{var d=osapi.container.util.getCurrentTimeMs(),
i;for(i in b){var j=b[i];f.updateResponse_(j,i,d);f.cachedMetadatas_[i]=j;e[i]=j}}c(e)})}};osapi.container.Service.prototype.addGadgetMetadatas=function(a,b){this.addToCache_(a,b,this.cachedMetadatas_)};osapi.container.Service.prototype.addGadgetTokens=function(a,b){this.addToCache_(a,b,this.cachedTokens_)};osapi.container.Service.prototype.addToCache_=function(a,b,c){var d=osapi.container.util.getCurrentTimeMs(),e;for(e in a){var f=a[e];this.updateResponse_(f,e,d,b);c[e]=f}};
osapi.container.Service.prototype.updateResponse_=function(a,b,c,d){a[osapi.container.MetadataParam.URL]=b;a[osapi.container.MetadataParam.LOCAL_EXPIRE_TIME]=a[osapi.container.MetadataResponse.EXPIRE_TIME_MS]-(d==null?a[osapi.container.MetadataResponse.RESPONSE_TIME_MS]:d)+c};
osapi.container.Service.prototype.getGadgetToken=function(a,b){var c=b||function(){},d=this,e=function(b){var e={};if(b.error)for(var h=0;h<a.ids.length;h++)e[a.ids[h]]={error:b.error};else for(h in b)b[h].url=h,d.cachedTokens_[h]=b[h],e[h]=b[h];c(e)};if(this.config_[osapi.container.ContainerConfig.GET_GADGET_TOKEN])this.config_[osapi.container.ContainerConfig.GET_GADGET_TOKEN](a,e);else osapi.gadgets.token(a).execute(e)};osapi.container.Service.prototype.getCachedGadgetMetadata=function(a){return this.cachedMetadatas_[a]};
osapi.container.Service.prototype.getCachedGadgetToken=function(a){return this.cachedTokens_[a]};osapi.container.Service.prototype.uncacheStaleGadgetMetadataExcept=function(a){for(var b in this.cachedMetadatas_)typeof a[b]==="undefined"&&this.cachedMetadatas_[b][osapi.container.MetadataParam.LOCAL_EXPIRE_TIME]<osapi.container.util.getCurrentTimeMs()&&delete this.cachedMetadatas_[b]};
osapi.container.Service.prototype.registerOsapiServices=function(){var a=this.apiHost_+this.apiPath_,b={"gadgets.rpc":["container.listMethods"]};b[a]=["gadgets.metadata","gadgets.token"];gadgets.config.init({osapi:{endPoints:[a]},"osapi.services":b})};osapi.container.Service.prototype.getCachedDataByRequest_=function(a,b){return this.filterCachedDataByRequest_(a,b,function(a){return typeof a!=="undefined"})};
osapi.container.Service.prototype.getUncachedDataByRequest_=function(a,b){return this.filterCachedDataByRequest_(a,b,function(a){return typeof a==="undefined"})};osapi.container.Service.prototype.filterCachedDataByRequest_=function(a,b,c){for(var d={},e=0;e<b.ids.length;e++){var f=b.ids[e],g=a[f];c(g)&&(d[f]=g)}return d};osapi.container.Service.prototype.getLocale_=function(){var a=window.navigator;return a.userLanguage||a.systemLanguage||a.language};
osapi.container.Service.prototype.getLanguage=function(){try{return this.getLocale_().split("-")[0]||"ALL"}catch(a){return"ALL"}};osapi.container.Service.prototype.getCountry=function(){try{return this.getLocale_().split("-")[1]||"ALL"}catch(a){return"ALL"}};osapi.container.ServiceConfig={};osapi.container.ServiceConfig.API_HOST="apiHost";osapi.container.ServiceConfig.API_PATH="apiPath";osapi.container.Container=function(a){a=this.config_=a||{};this.gadgetLifecycleCallbacks_={};this.preloadedGadgetUrls_={};this.sites_={};this.allowDefaultView_=Boolean(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.ALLOW_DEFAULT_VIEW,!0));this.renderCajole_=Boolean(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.RENDER_CAJOLE,!1));this.renderDebugParam_=String(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.RENDER_DEBUG_PARAM,
osapi.container.ContainerConfig.RENDER_DEBUG));var b=window.__CONTAINER_URI.getQP(this.renderDebugParam_);this.renderDebug_=typeof b==="undefined"?Boolean(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.RENDER_DEBUG,!1)):b==="1";this.renderTest_=Boolean(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.RENDER_TEST,!1));this.tokenRefreshInterval_=Number(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.TOKEN_REFRESH_INTERVAL,18E5));
this.navigateCallback_=String(osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.NAVIGATE_CALLBACK,null));this.service_=new osapi.container.Service(a);this.tokenRefreshTimer_=null;this.initializeMixins_();this.preloadCaches(a);this.registerRpcServices_();this.onConstructed(a)};
osapi.container.Container.prototype.newGadgetSite=function(a,b){var c=new osapi.container.GadgetSite({container:this,service:this.service_,navigateCallback:this.navigateCallback_,gadgetEl:a,bufferEl:b||null});return this.sites_[c.getId()]=c};
osapi.container.Container.prototype.navigateGadget=function(a,b,c,d,e){var f=e||function(){},e=osapi.container.ContainerConfig,g=osapi.container.RenderParam;this.allowDefaultView_&&(d[g.ALLOW_DEFAULT_VIEW]=!0);this.renderCajole_&&(d[g.CAJOLE]=!0);this.renderDebug_&&(d[g.NO_CACHE]=!0,d[g.DEBUG]=!0);this.renderTest_&&(d[g.TEST_MODE]=!0);this.refreshService_();var h=this,i=function(e){d[g.USER_PREFS]=e;a.navigateTo(b,c,d,function(c){c.error?gadgets.warn(["Failed to possibly schedule token refresh for gadget ",
b,"."].join("")):c[osapi.container.MetadataResponse.NEEDS_TOKEN_REFRESH]&&h.scheduleRefreshTokens_();h.applyLifecycleCallbacks_(osapi.container.CallbackType.ON_NAVIGATED,a);f(c)})};if(this.config_[e.GET_PREFERENCES]&&!d[g.USER_PREFS])this.config_[e.GET_PREFERENCES](a.getId(),b,i);else i(d[g.USER_PREFS])};osapi.container.Container.prototype.closeGadget=function(a){var b=a.getId();this.applyLifecycleCallbacks_(osapi.container.CallbackType.ON_CLOSED,a);a.close();delete this.sites_[b];this.unscheduleRefreshTokens_()};
osapi.container.Container.prototype.addGadgetLifecycleCallback=function(a,b){return!this.gadgetLifecycleCallbacks_[a]?(this.gadgetLifecycleCallbacks_[a]=b,!0):!1};osapi.container.Container.prototype.removeGadgetLifecycleCallback=function(a){delete this.gadgetLifecycleCallbacks_[a]};osapi.container.Container.prototype.preloadGadget=function(a,b){this.preloadGadgets([a],b)};
osapi.container.Container.prototype.preloadGadgets=function(a,b){var c=b||function(){},d=osapi.container.util.newMetadataRequest(a),e=this;this.refreshService_();this.service_.getGadgetMetadata(d,function(a){e.addPreloadGadgets_(a);e.applyLifecycleCallbacks_(osapi.container.CallbackType.ON_PRELOADED,a);c(a)})};osapi.container.Container.prototype.unloadGadget=function(a){this.unloadGadgets([a])};
osapi.container.Container.prototype.unloadGadgets=function(a){for(var b=0;b<a.length;b++){var c=a[b];delete this.preloadedGadgetUrls_[c];this.applyLifecycleCallbacks_(osapi.container.CallbackType.ON_UNLOADED,c)}};osapi.container.Container.prototype.getGadgetMetadata=function(a,b){var c=osapi.container.util.newMetadataRequest([a]);this.refreshService_();this.service_.getGadgetMetadata(c,b)};
osapi.container.Container.prototype.rpcRegister=function(a,b){var c=this;gadgets.rpc.register(a,function(){this[osapi.container.GadgetSite.RPC_ARG_KEY]=c.getGadgetSiteByIframeId_(this.f);for(var a=[this],e=0;e<arguments.length;++e)a.push(arguments[e]);return b.apply(c,a)})};osapi.container.Container.prototype.onConstructed=function(){};osapi.container.Container.addMixin=function(a,b){osapi.container.Container.prototype.mixins_[a]=b};osapi.container.ContainerConfig={};
osapi.container.ContainerConfig.ALLOW_DEFAULT_VIEW="allowDefaultView";osapi.container.ContainerConfig.RENDER_CAJOLE="renderCajole";osapi.container.ContainerConfig.RENDER_DEBUG="renderDebug";osapi.container.ContainerConfig.RENDER_DEBUG_PARAM="renderDebugParam";osapi.container.ContainerConfig.RENDER_TEST="renderTest";osapi.container.ContainerConfig.TOKEN_REFRESH_INTERVAL="tokenRefreshInterval";osapi.container.ContainerConfig.NAVIGATE_CALLBACK="navigateCallback";
osapi.container.ContainerConfig.PRELOAD_REF_TIME="preloadRefTime";osapi.container.ContainerConfig.PRELOAD_METADATAS="preloadMetadatas";osapi.container.ContainerConfig.PRELOAD_TOKENS="preloadTokens";osapi.container.ContainerConfig.GET_LANGUAGE="GET_LANGUAGE";osapi.container.ContainerConfig.GET_COUNTRY="GET_COUNTRY";osapi.container.ContainerConfig.GET_PREFERENCES="GET_PREFERENCES";osapi.container.ContainerConfig.SET_PREFERENCES="SET_PREFERENCES";osapi.container.ContainerConfig.GET_GADGET_TOKEN="GET_GADGET_TOKEN";
osapi.container.Container.prototype.mixins_={};osapi.container.Container.prototype.initializeMixins_=function(){for(var a in this.mixins_)this[a]=new this.mixins_[a](this)};osapi.container.Container.prototype.addPreloadGadgets_=function(a){for(var b in a)a[b].error?gadgets.warn(["Failed to preload gadget ",b,"."].join("")):(this.addPreloadedGadgetUrl_(b),a[b][osapi.container.MetadataResponse.NEEDS_TOKEN_REFRESH]&&this.scheduleRefreshTokens_())};
osapi.container.Container.prototype.preloadCaches=function(a){var b=osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.PRELOAD_METADATAS,{}),c=osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.PRELOAD_TOKENS,{}),a=osapi.container.util.getSafeJsonValue(a,osapi.container.ContainerConfig.PRELOAD_REF_TIME,null);this.service_.addGadgetMetadatas(b,a);this.service_.addGadgetTokens(c,a);this.addPreloadGadgets_(b)};
osapi.container.Container.prototype.refreshService_=function(){this.service_.uncacheStaleGadgetMetadataExcept(this.getActiveGadgetUrls_())};osapi.container.Container.prototype.getGadgetSiteByIframeId_=function(a){for(var b in this.sites_){var c=this.sites_[b],d=c.getActiveGadgetHolder();if(d&&d.getIframeId()===a)return c}return null};
osapi.container.Container.prototype.scheduleRefreshTokens_=function(){if(this.isRefreshTokensEnabled_()&&!this.tokenRefreshTimer_){var a=this;this.tokenRefreshTimer_=window.setInterval(function(){a.refreshTokens_()},this.tokenRefreshInterval_)}};osapi.container.Container.prototype.unscheduleRefreshTokens_=function(){if(this.tokenRefreshTimer_&&this.getTokenRefreshableGadgetUrls_().length<=0)window.clearInterval(this.tokenRefreshTimer_),this.tokenRefreshTimer_=null};
osapi.container.Container.prototype.isRefreshTokensEnabled_=function(){return this.tokenRefreshInterval_>0};
osapi.container.Container.prototype.registerRpcServices_=function(){var a=this;this.rpcRegister("resize_iframe",function(a,c){var d=a[osapi.container.GadgetSite.RPC_ARG_KEY];d&&d.setHeight(c)});this.rpcRegister("resize_iframe_width",function(a,c){var d=a[osapi.container.GadgetSite.RPC_ARG_KEY];d&&d.setWidth(c);return!0});this.rpcRegister("set_pref",function(b,c,d){var e=b[osapi.container.GadgetSite.RPC_ARG_KEY],f=a.config_[osapi.container.ContainerConfig.SET_PREFERENCES];if(e&&f){for(var g={},h=2,
i=arguments.length;h<i;h+=2)g[arguments[h]]=arguments[h+1];f(e.getId(),e.getActiveGadgetHolder().getUrl(),g)}})};osapi.container.Container.prototype.addPreloadedGadgetUrl_=function(a){this.preloadedGadgetUrls_[a]=null};osapi.container.Container.prototype.getTokenRefreshableGadgetUrls_=function(){var a={},b;for(b in this.getActiveGadgetUrls_())this.service_.getCachedGadgetMetadata(b)[osapi.container.MetadataResponse.NEEDS_TOKEN_REFRESH]&&(a[b]=null);return osapi.container.util.toArrayOfJsonKeys(a)};
osapi.container.Container.prototype.getActiveGadgetUrls_=function(){return osapi.container.util.mergeJsons(this.getNavigatedGadgetUrls_(),this.preloadedGadgetUrls_)};osapi.container.Container.prototype.getNavigatedGadgetUrls_=function(){var a={},b;for(b in this.sites_){var c=this.sites_[b].getActiveGadgetHolder();c&&(a[c.getUrl()]=null)}return a};
osapi.container.Container.prototype.refreshTokens_=function(){var a=this.getTokenRefreshableGadgetUrls_(),b=this;this.service_.getGadgetToken(osapi.container.util.newTokenRequest(a),function(a){for(var d in b.sites_){var e=b.sites_[d].getActiveGadgetHolder();if(b.service_.getCachedGadgetMetadata(e.getUrl())[osapi.container.MetadataResponse.NEEDS_TOKEN_REFRESH]){var f=a[e.getUrl()];f.error?gadgets.warn(["Failed to get token for gadget ",e.getUrl(),"."].join("")):gadgets.rpc.call(e.getIframeId(),"update_security_token",
null,f[osapi.container.TokenResponse.TOKEN])}}})};osapi.container.Container.prototype.applyLifecycleCallbacks_=function(a,b){for(name in this.gadgetLifecycleCallbacks_){var c=this.gadgetLifecycleCallbacks_[name][a];c&&c(b)}};osapi.container.Container.prototype.newUrlSite=function(a){var b={};b[osapi.container.UrlSite.URL_ELEMENT]=a;return new osapi.container.UrlSite(b)};osapi.container.Container.prototype.navigateUrl=function(a,b,c){a.render(b,c);return a};(function(){gadgets.config.init({rpc:{parentRelayUrl:""},"core.io":{jsonProxyUrl:"http://%host%/gadgets/makeRequest",proxyUrl:"http://%host%/gadgets/proxy?refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"}});(function(){window.__CONTAINER_URI=shindig.uri(window.location.href);var a=window.__API_URI=null;if(window.__CONTAINER_SCRIPT_ID)a=document.getElementById(window.__CONTAINER_SCRIPT_ID);else{var b=document.getElementsByTagName("script");b.length>0&&(a=b[b.length-1])}if(a)window.__API_URI=
shindig.uri(a.src),window.__API_URI.resolve(window.__CONTAINER_URI);window.__CONTAINER=window.__API_URI?window.__API_URI.getQP("container"):"default"})()})();osapi.container.ee={};osapi.container.ee.RenderParam={GADGET_RENDER_PARAMS:"gadgetRenderParams",GADGET_VIEW_PARAMS:"gadgetViewParams",URL_RENDER_PARAMS:"urlRenderParams",DATA_MODEL:"eeDataModel",EMBEDDED:"embedded"};osapi.container.ee.DataModel={CONTEXT:"context",GADGET:"gadget",URL:"url",PREVIEW_IMAGE:"previewImage",PREFERRED_EXPERIENCE:"preferredExperience"};osapi.container.ee.PreferredExperience={TARGET:"target",DISPLAY:"display",TYPE:"type",VIEW:"view",VIEW_TARGET:"viewTarget"};
osapi.container.ee.Context={ASSOCIATED_CONTEXT:"associatedContext",OPENSOCIAL:"openSocial"};osapi.container.ee.AssociatedContext={ID:"id",TYPE:"type",OBJECT_REFERENCE:"objectReference"};osapi.container.ee.TargetType={GADGET:"gadget",URL:"url"};osapi.container.ee.DisplayType={IMAGE:"image",TEXT:"text"};osapi.container.ee.ContainerConfig={GET_EE_NAVIGATION_TYPE:"GET_EE_NAVIGATION_TYPE"};(function(){osapi.container.Container.addMixin("ee",function(a){function b(b,h,l,k,p){var r=l[osapi.container.ee.RenderParam.GADGET_VIEW_PARAMS]||{},o=l[osapi.container.ee.RenderParam.GADGET_RENDER_PARAMS]||{};o[osapi.container.RenderParam.VIEW]=osapi.container.ee.RenderParam.EMBEDDED;var t=h[d.PREFERRED_EXPERIENCE];t&&(t=t[e.TARGET])&&t[e.TYPE]===f.GADGET&&t[e.VIEW]&&(o[osapi.container.RenderParam.VIEW]=t[e.VIEW]);if(p){var t=h[d.CONTEXT],x=!0;t?typeof t!="object"&&(x=!1):t={};if(x){x={};x[g.ASSOCIATED_CONTEXT]=
{};for(var w in p)p.hasOwnProperty(w)&&(x[w]=p[w]);t[g.OPENSOCIAL]=x;h[d.CONTEXT]=t}}o[osapi.container.ee.RenderParam.DATA_MODEL]=h;var v=a.newGadgetSite(b),n=h[d.GADGET];a.preloadGadget(n,function(e){!e[n]||e[n].error?h[d.URL]!=null?c(b,h,l,k):k!=null&&k(v,e[n]||{error:e}):a.navigateGadget(v,n,r,o,function(a){k!=null&&k(v,a)})})}function c(b,c,e,f){e=e[osapi.container.ee.RenderParam.URL_RENDER_PARAMS]||{};b=a.newUrlSite(b);c=a.navigateUrl(b,c[d.URL],e);f&&f(c,null)}var d=osapi.container.ee.DataModel,
e=osapi.container.ee.PreferredExperience,f=osapi.container.ee.TargetType,g=osapi.container.ee.Context,h=osapi.container.ee.ContainerConfig;a.rpcRegister("ee_gadget_rendered",function(a){return(a=a.gs.currentGadgetHolder_.renderParams_.eeDataModel)?a[d.CONTEXT]:null});return{navigate:function(e,f,g,k,p){var r=null;if(a.config_&&a.config_[h.GET_EE_NAVIGATION_TYPE]&&typeof a.config_[h.GET_EE_NAVIGATION_TYPE]==="function")r=a.config_[h.GET_EE_NAVIGATION_TYPE].call(a,f);else a:{if(f[osapi.container.ee.DataModel.PREFERRED_EXPERIENCE]&&
(r=f[osapi.container.ee.DataModel.PREFERRED_EXPERIENCE],r[osapi.container.ee.PreferredExperience.TARGET]&&(r=r[osapi.container.ee.PreferredExperience.TARGET])&&r[osapi.container.ee.PreferredExperience.TYPE])){r=r[osapi.container.ee.PreferredExperience.TYPE];break a}r=null}if(r===null)if(f[d.GADGET])r=osapi.container.ee.TargetType.GADGET;else if(f[d.URL])r=osapi.container.ee.TargetType.URL;r===osapi.container.ee.TargetType.GADGET?b(e,f,g,k,p):r===osapi.container.ee.TargetType.URL&&c(e,f,g,k)},close:function(b){b instanceof
osapi.container.GadgetSite&&a.closeGadget(b);b instanceof osapi.container.UrlSite&&b.close()}}})})();(function(){function a(a,c,d){var e="",f=h.getGadgetSiteByIframeId_(this.f);f!==void 0&&f.getActiveGadgetHolder()!==void 0&&(e=f.getActiveGadgetHolder().getUrl());var g="",i="",j={};if(d!==void 0){if(d.view!==void 0)g=d.view;if(d.viewTarget!==void 0)i=d.viewTarget;if(d.viewParams!==void 0)j=d.viewParams}h.preloadGadget(e,function(d){var f={};if(d!==void 0&&d[e]!==void 0)if(d[e].error){gadgets.error("Failed to preload gadget : "+e);c!=null&&c(null,d[e]);return}else f=d[e];var d=h.views.createElementForGadget(f,
g,i),l=h.newGadgetSite(d),d={};g!==void 0&&g!==""&&(d[osapi.container.RenderParam.VIEW]=g);d[osapi.container.RenderParam.WIDTH]="100%";d[osapi.container.RenderParam.HEIGHT]="100%";h.navigateGadget(l,e,j,d,function(d){d!=null&&b(l,a);c!=null&&c(l,d)})})}function b(a,b){var c;a&&a.getActiveGadgetHolder()&&(c=a.getActiveGadgetHolder().getIframeId());l[c]=a;typeof a.getId()!=="undefined"&&b!=null&&(i[a.getId()]=b)}function c(a,c,d,e){var f=d.gadget;h.preloadGadget(f,function(g){if((g[f]==null||g[f]!=
null&&g[f].error)&&!d.url)c!=null&&c(null,g[f]);else{var i="",g={};if(e!=void 0){if(e.viewTarget!=void 0)i=e.viewTarget;if(e.viewParams!=void 0)g=e.viewParams}var i=h.views.createElementForEmbeddedExperience(i),j={};j[osapi.container.RenderParam.VIEW]=osapi.container.ee.RenderParam.EMBEDDED;j[osapi.container.RenderParam.WIDTH]="100%";j[osapi.container.RenderParam.HEIGHT]="100%";var l={};l[osapi.container.RenderParam.WIDTH]="100%";l[osapi.container.RenderParam.HEIGHT]="100%";var m={};m[osapi.container.ee.RenderParam.GADGET_RENDER_PARAMS]=
j;m[osapi.container.ee.RenderParam.URL_RENDER_PARAMS]=l;m[osapi.container.ee.RenderParam.GADGET_VIEW_PARAMS]=g;h.ee.navigate(i,d,m,function(d,e){e!=null&&b(d,a);c!=null&&c(d,e)})}})}function d(a,b,c){var c=h.views.createElementForUrl(c),c=h.newUrlSite(c),d={};d[osapi.container.RenderParam.WIDTH]="100%";d[osapi.container.RenderParam.HEIGHT]="100%";h.navigateUrl(c,a,d);b!==void 0&&b(c)}function e(a){var b=this.f,a=a==void 0||a==""?l[b]:a;if(a!=null&&(b=a.getId(),b!==void 0&&i[b]!==void 0&&j[b]!==void 0))i[b](j[b]);
h.views.destroyElement(a)}function f(a){if(a!==void 0&&l[this.f]!==void 0){var b=l[this.f].getId();b!==void 0&&(j[b]=a)}}function g(a){if(a!=null){var b=document.documentElement,c={width:-1,height:-1};if(b!==void 0)c.width=b.clientWidth,c.height=b.clientHeight;a(c)}}var h,i,j,l;osapi.container.Container.addMixin("views",function(b){h=b;gadgets.rpc.register("gadgets.views.openGadget",a);gadgets.rpc.register("gadgets.views.openEmbeddedExperience",c);gadgets.rpc.register("gadgets.views.openUrl",d);gadgets.rpc.register("gadgets.views.close",
e);gadgets.rpc.register("gadgets.views.setReturnValue",f);gadgets.rpc.register("gadgets.window.getContainerDimensions",g);i={};j={};l={};return{createElementForGadget:function(){console.log("container need to define createElementForGadget function")},createElementForEmbeddedExperience:function(){console.log("container need to define createElementForEmbeddedExperience function")},createElementForUrl:function(){console.log("container need to define createElementForUrl function")},destroyElement:function(){console.log("container need to define destroyElement function")}}})})();(function(){var a=shindig.uri(window.location.href);window.__API_URI=window.__JAF_DEBUG&&window.__JAF_DEBUG==1?shindig.uri("/../gadgets/js/jive-core-container:container:core:rpc:open-views:dynamic-height:selection:actions.js?c=1&debug=1&container=default"):shindig.uri("/../gadgets/js/jive-core-container:container:core:rpc:open-views:dynamic-height:selection:actions.js?c=1&container=default");window.__API_URI.resolve(a);window.__CONTAINER="default"})();(function(){function a(a){e=a;d.forEach(function(b){b(a)})}function b(a){typeof a==="function"&&d.push(a)}function c(c,d){switch(c){case "set":a(d);break;case "add":b(d);break;default:throw Error("Unknown selection command");}}var d=[],e;osapi.container.Container.addMixin("selection",function(){gadgets.rpc.register("gadgets.selection",c);return{setSelection:function(b){a(b)},getSelection:function(){return e},addListener:function(a){b(a)},removeListener:function(a){a=d.indexOf(a);a!=-1&&d.splice(a,
1)}}})})();gadgets.config.init({opensocial:{invalidatePath:"http://techweb.disneyanimation.com/gadgets/api/rpc",path:"http://%host%/social/rpc",domain:"shindig",supportedFields:{person:["id",{name:["familyName","givenName","unstructured"]},"emails","thumbnailUrl","profileUrl","aboutMe","hasApp","photos","jive_enabled"],mediaItem:"album_id,created,description,duration,file_size,id,language,last_updated,location,mime_type,num_comments,num_views,num_votes,rating,start_time,tagged_people,tags,thumbnail_url,title,type,url".split(","),
album:"id,thumbnailUrl,title,description,location,ownerId".split(","),group:["id","title","description"],activity:"appId,body,bodyId,externalId,id,mediaItems,postedTime,priority,streamFaviconUrl,streamSourceUrl,streamTitle,streamUrl,templateParams,title,url,userId".split(","),activityEntry:"actor,content,generator,icon,id,object,published,provider,target,title,updated,url,verb,openSocial,extensions".split(",")},enableCaja:!1},rpc:{commSwf:"http://techweb.disneyanimation.com/gadgets/xpc.swf",parentRelayUrl:"/gadgets/ifpc.relay.html",
useLegacyProtocol:!1},container:{relayPath:"/gadgets/files/container/rpc_relay.html"},views:{home:{isOnlyVisible:!1,urlTemplate:"http://techweb.disneyanimation.com/gadgets/home?{var}",aliases:["HOME"]},"default":{isOnlyVisible:!1,urlTemplate:"http://techweb.disneyanimation.com/gadgets/default?{var}",aliases:["DEFAULT","profile"]},about:{isOnlyVisible:!1},canvas:{isOnlyVisible:!0,urlTemplate:"http://techweb.disneyanimation.com/gadgets/canvas?{var}",aliases:["FULL_PAGE"]},"user-prefs":{isOnlyVisible:!0},
embedded:{isOnlyVisible:!0},"system-settings":{isOnlyVisible:!0}},osapi:{endPoints:["http://%host%/social/rpc"]},"osapi.services":{"http://%host%/social/rpc":"jive.connects.configuration,gadgets.metadata,activities.supportedFields,albums.supportedFields,jive.market.getSbsContext,mediaItems.create,gadgets.proxySupportedFields,albums.get,jive.market.getAppInstances,jive.dev.isCachingEnabled,jive.connects.post,http.put,jive.ext.post,jive.core.post,jive.market.installMultiAppNonTransactional,systemSettings.create,system.listMethods,jive.connects.pooled,gadgets.proxy,systemSettings.get,gadgets.cajole,jive.core.put,http.head,messages.create,jive.connects.patch,albums.delete,jive.market.uninstallApp,jive.connects.put,mediaItems.update,messages.delete,appdata.update,gadgets.js,jive.market.isCachingEnabled,http.post,gadgets.tokenSupportedFields,jive.ext.delete,jive.dev.setCachingEnabled,jive.ext.put,jive.core.get,http.get,appdata.delete,jive.binary.metadata,jive.market.installMultiApp,appdata.create,gadgets.supportedFields,mediaItems.get,jive.connects.reset,groups.create,jive.connects.get,activities.delete,activities.update,albums.update,jive.connects.statistics,activities.get,groups.supportedFields,activitystreams.create,appdata.get,messages.get,jive.connects.delete,cache.invalidate,groups.get,people.supportedFields,http.delete,jive.connects.connection,jive.version.getVersionInfo,gadgets.jsSupportedFields,systemSettings.delete,people.get,jive.market.installApp,activitystreams.get,jive.core.delete,jive.market.refreshApp,mediaItems.delete,activitystreams.update,application.get,jive.binary.token,jive.market.requestAppSync,systemSettings.update,groups.update,jive.market.setCachingEnabled,gadgets.cajaSupportedFields,activities.create,jive.connects.head,jive.connects.update,albums.create,gadgets.token,jive.ext.get,activitystreams.delete,activitystreams.supportedFields,groups.delete".split(",")},
"core.io":{jsonProxyUrl:"http://%host%/gadgets/makeRequest",proxyUrl:"http://%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%rewriteMime%"}});window.___jsl.l=(window.___jsl.l||[]).concat("jive-core-container,container,core,rpc,open-views,selection,actions.js?c=1&container=default&jiveUrlHash=d6e93230c10470c8e7e91e85dc78edd5".split(","));
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.apps=="undefined"){jive.apps={}}if(typeof jive.apps.alerts=="undefined"){jive.apps.alerts={}}jive.apps.alerts.renderDevError=function(A,C){var B=C||new soy.StringBuilder();B.append("<p><a href='javascript:;' onclick=\"$j('#j-dev-err-msg-",soy.$$escapeHtml(A.appId),'\').show();">Click here for more info</a></p><div id="j-dev-err-msg-',soy.$$escapeHtml(A.appId),'" class="j-app-error-message"  style="display:none"><p>',soy.$$escapeHtml(A.errorMessage),"</p><a href='javascript:;' onclick=\"$j('#j-dev-err-msg-",soy.$$escapeHtml(A.appId),"').hide();\">Hide this message</a></div>");return C?"":B.toString()};jive.apps.alerts.renderAppHalt=function(A,C){var B=C||new soy.StringBuilder();switch(A.code){case 401:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.credentials",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-configure-credentials-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.credentials.btn",noAutoEscape:true},B);B.append("</button></div>");break;case 10404:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.unavailable",noAutoEscape:true},B);B.append("</p>");if(A.errorMessage){jive.apps.alerts.renderDevError(A,B)}B.append("<p>");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.unavailable.detail",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-refresh-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.refresh.btn",noAutoEscape:true},B);B.append("</button></div>");break;case 10500:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.app.cannot.load",noAutoEscape:true},B);B.append("</p><ul><li><strong>");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.app.cannot.load.delete",noAutoEscape:true},B);B.append("</strong> ");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.app.cannot.load.delete.detail",noAutoEscape:true},B);B.append("</li></ul>");if(A.errorMessage){jive.apps.alerts.renderDevError(A,B)}B.append('<button class="j-error-msg-delete-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.delete.btn",noAutoEscape:true},B);B.append('</button><button class="j-error-msg-refresh-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.refresh.btn",noAutoEscape:true},B);B.append("</button></div>");break;case 6000:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.app.malformed",noAutoEscape:true},B);B.append("</p>");if(A.message){jive.apps.alerts.renderDevError({appId:A.appId,errorMessage:A.message},B)}B.append('<button class="j-error-msg-refresh-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.refresh.btn",noAutoEscape:true},B);B.append("</button></div>");break;case 1000:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span>');if(A.modifier&&A.modifier=="configurationError"){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.failure"),[])))}else{B.append("<p>");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.configure",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-configure-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.configure.btn",noAutoEscape:true},B);B.append("</button>")}B.append("</div>");break;case 1010:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span>');if(A.modifier&&A.modifier=="configurationError"){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.failure"),[])))}else{B.append("<p>");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.configure.update",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-configure-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.configure.btn",noAutoEscape:true},B);B.append("</button>")}B.append("</div>");break;case 2010:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.banned",noAutoEscape:true},B);B.append("</p><ul><li><strong>");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.banned.detail.delete",noAutoEscape:true},B);B.append("</strong> ");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.banned.detail.delete.detail",noAutoEscape:true},B);B.append('</li></ul><p><a class="j-launch-market-faq" href="javascript:;">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.banned.detail.more.info",noAutoEscape:true},B);B.append('</a>.</p><button class="j-error-msg-delete-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.delete.btn",noAutoEscape:true},B);B.append("</button></div>");break;case 2020:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.blacklisted",arg0:A.creator,noAutoEscape:true},B);B.append("</p><ul><li><strong>");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.blacklisted.detail.delete",noAutoEscape:true},B);B.append("</strong> ");jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.blacklisted.detail.delete.detail",noAutoEscape:true},B);B.append('</li></ul><p><a class="j-launch-market-faq" href="javascript:;">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.blacklisted.detail.more.info",noAutoEscape:true},B);B.append('</a>.</p><button class="j-error-msg-delete-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.delete.btn",noAutoEscape:true},B);B.append("</button></div>");break;case 2040:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.subscription.expired",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-remove-subscription-expired-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.renew.subscription",noAutoEscape:true},B);B.append("</button></div>");break;case 2050:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.subscription.disabled",noAutoEscape:true},B);B.append("</p>",(A.message)?"<p><b>"+soy.$$escapeHtml(A.message)+"</b></p>":"",'<div><button class="j-error-msg-delete-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.delete.btn",noAutoEscape:true},B);B.append('</button><button class="j-error-msg-app-more-info-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.more.info.btn",noAutoEscape:true},B);B.append("</button></div></div>");break;case 2060:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><h3>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.oauth.credentials",noAutoEscape:true},B);B.append('</h3><div class="j-oauth-grant"><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.oauth.credentials.need.grant",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-grant-oauth-access-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.oauth.credentials.grant.btn",noAutoEscape:true},B);B.append('</button></div><div class="j-oauth-authorize"><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.oauth.credentials.authorization",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-granted-oauth-access-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.halt.needs.oauth.credentials.granted.btn",noAutoEscape:true},B);B.append('</button><button class="j-error-msg-oauth-approved-btn" style="display:none"></button></div></div>');break;case 5010:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.throttle.violation",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-remove-throttle-violation-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.dismiss",noAutoEscape:true},B);B.append("</button></div>");break;case 5020:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.bulkcancel.warning",noAutoEscape:true},B);B.append('</p><button class="j-error-msg-delete-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.bulkcancel.deleteButton",noAutoEscape:true},B);B.append('</button><button class="j-error-msg-purchase-app-btn">');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.bulkcancel.purchaseButton",noAutoEscape:true},B);B.append("</button></div>");break;default:B.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"appframework.app.alert.unexpected",noAutoEscape:true},B);B.append("(",soy.$$escapeHtml(A.code),")</p>",(A.message)?"<p>"+soy.$$escapeHtml(A.message)+"</p>":"");if(A.errorMessage){jive.apps.alerts.renderDevError(A,B)}B.append("</div>")}return C?"":B.toString()}
;
define("jive.AppFileUploader",["jquery"],function(a){return $Class.extend({init:function(e,d,b,c,f){this.app=e;this.key=d;this.callback=f;this.element=null;this.token=c;this.options=a.extend({showTitle:false,showDescription:false,dialogTitle:this.app.title,submitText:"Upload",core:false,validExtensions:[]},b||{});this.showDialog()},showDialog:function(){var e=this;a("body").append('<div class="jive-modal" id="app-upload-modal-content" style="display:none;"></div>');this.element=a("#app-upload-modal-content");var c=this.options||{};if(typeof c.actionUrl==="undefined"){var b="";if(this.token){b=encodeURIComponent(this.token)}c.actionUrl=c.actionUrl||"/social/rpc?responseFormat=html"+(b?"&st="+b:"")}var d=a(jive.apps.base.renderAppDataUploadPopup({options:c}));this.element.html(d).lightbox_me({closeSelector:".close",destroyOnClose:true}).find("iframe").bind("load",function(){e.handleIframeLoad()}).end().find("input[type=submit]").click(function(){if(e.isValid()){e.setRequestParams()}else{return false}})},isValid:function(){if(this.isFileBlank()){this.showError("File is required!");return false}else{if(this.isFileExtensionInvalid()){this.showError("File is invalid. Valid extensions: "+this.options.validExtensions.join(", "));return false}}return true},isFileBlank:function(){return this.element.find("input[type=file]").val()===""},isFileExtensionInvalid:function(){return this.options.validExtensions.length>0&&a.inArray(a(this.element.find("input[type=file]").val().split(".")).last()[0],this.options.validExtensions)==-1},showError:function(b){this.element.find("div.jive-error-box").show().find("span.message").html(b)},hideError:function(){this.element.find("div.jive-error-box").hide()},setRequestParams:function(){this.element.find("input[name=request]").val(JSON.stringify(this.generateRequestParams()));if(!document.cookie.match("X-JCAPI-Token")){var d=this.element.find("form").attr("action");var c;if(d){var b=d.match(/^https?:\/\/.+?(\/[0-9a-zA-Z\/]+)/);if(b&&b.length>1){c=b[1]}else{if(d.match(/^\//)){c=d}}}if(c){document.cookie="X-JCAPI-Token=MFVrG3oK; path="+c}}},generateRequestParams:function(){var d=[{method:"appdata.uploadContent",params:{appId:"@app",userId:["@viewer"],groupId:"@self",fields:[this.key],data:{}},id:"key"}];var c={url:"@field:file"};if(this.options.showTitle){var e=a("#app-upload-modal-content input[name=title]").val();if(e.length>0){c.title=e}}if(this.options.showDescription){var b=a("#app-upload-modal-content textarea[name=description]").val();if(b.length>0){c.description=b}}d[0]["params"]["data"][this.key]=c;return d},handleIframeLoad:function(){var f="jive-modal-file-upload-iframe";var d=document.getElementById(f);var h;var b=null;try{if(d.contentDocument){h=d.contentDocument}else{if(d.contentWindow){h=d.contentWindow.document}else{h=window.frames[f].document}}}catch(e){b=e}var c={};if(b!==null){var g='{"code":"4005","message":"Access denied to object"}';c=JSON.parse(g)}else{if(h.location.href=="about:blank"){return}else{c={}}}var i;if(this.options.core===true){i=c;this.callback(i);a("#app-upload-modal-content").trigger("close")}else{if(a.isArray(c)&&c[0]["result"]&&c[0]["result"]){var j=this.getValue(c[0]["result"]);if(j&&j[this.key]){i=j[this.key];this.callback(JSON.parse(i));a("#app-upload-modal-content").trigger("close")}}}},getValue:function(c){var b=null;a.each(c,function(d,e){b=e});return b}})});
;
define("jive.JAF.Configuration.OAuthOverlay",function(){return jive.AbstractView.extend(function(a){this.init=function(f,d,e){this.content=d;var c=this;d.find(".j-oauth-authorize").append("<input type='hidden' id='_alias' value='"+e+"'/>");var g=this.content.find(".j-error-msg-grant-oauth-access-btn");g.bind("click",f.get_oauth_popup().createOpenerOnClick());var b=this.content.find(".j-error-msg-granted-oauth-access-btn");b.bind("click",f.get_oauth_popup().createApprovedOnClick());var h=this.content.find(".j-error-msg-oauth-approved-btn");h.click(function(){c.emit("oauth.approved")})};this.hideGrant=function(){this.content.find(".j-oauth-grant").hide()};this.showWaiting=function(){this.content.find(".j-oauth-authorize").show()};this.hideWaiting=function(){this.content.find(".j-oauth-authorize").hide()}})});
;
jive.namespace("JAF.Configuration");jive.JAF.Configuration.PopupDialog=function(a,d,b,c){this.destination_=a;this.windowOptions_=d;this.openCallback_=b;this.closeCallback_=c;this.win_=null};jive.JAF.Configuration.PopupDialog.prototype.createOpenerOnClick=function(){var a=this;return function(){a.onClick_()}};jive.JAF.Configuration.PopupDialog.prototype.onClick_=function(){this.win_=window.open(this.destination_,"_blank",this.windowOptions_);if(this.win_){var a=this;var b=function(){a.checkClosed_()};this.timer_=window.setInterval(b,100);this.openCallback_()}return false};jive.JAF.Configuration.PopupDialog.prototype.checkClosed_=function(){if((!this.win_)||this.win_.closed){this.win_=null;this.handleApproval_()}};jive.JAF.Configuration.PopupDialog.prototype.handleApproval_=function(){if(this.timer_){window.clearInterval(this.timer_);this.timer_=null}if(this.win_){this.win_.close();this.win_=null}this.closeCallback_();return false};jive.JAF.Configuration.PopupDialog.prototype.createApprovedOnClick=function(){var a=this;return function(){a.handleApproval_()}};
;
define("jive.JAF.Configuration.OAuthPopup",function(a){return jive.AbstractView.extend(function(b){this.init=function(d,e){var c=this;this.popupURI=d;this.windowChars=e;this.oauthPopup=new jive.JAF.Configuration.PopupDialog(d,e,function(){c.emit("popup.opened")},function(){c.emit("popup.closed")})};this.get_oauth_popup=function(){return this.oauthPopup};this.click=function(){this.oauthPopup.click()};b.gup=function(e,d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+d+"=([^&#]*)";var g=new RegExp(c);var f=g.exec(e);if(f==null){return""}else{return f[1]}}})});
;
define("jive.JAF.Configuration.OAuthMain",["jive.JAF.Configuration.OAuthOverlay","jive.JAF.Configuration.OAuthPopup"],function(b,a){return jive.oo.Class.extend(function(c){jive.conc.observable(this);this.init=function(g,e,d,f,h){this.app=g;this.alias=e;this.redirectURI=d;this.windowchars=f;this.callback=h};this.getApp=function(){return this.app};this.invokeCallback=function(){if(this.callback){this.callback()}};c.create_popup=function(){var d=this;var e=new a(this.redirectURI,this.windowChars);var g=this.callback;var f=this.app;e.addListener("popup.opened",function(){d.container.hideGrant();d.container.showWaiting();d.emit("popup.opened",f)});e.addListener("popup.closed",function(){d.container.hideWaiting();var h={authorized:true};g(h);d.emit("popup.closed",f)});return e};this.launch_popup=function(d){this.popupWrapper=this.create_popup();this.container=new b(this.popupWrapper,d,this.alias);var e=this.app;this.container.addListener("oauth.approved",function(){var h=d.find("#_error");var j=d.find("#_errorDescription");var g=!(h.length>0||j.length>0);var i=d.find("#_alias").attr("value");var f={alias:i};if(!g){f.error={code:h.attr("value"),message:j.attr("value")}}callback(f);self.emit("oauth.approved",e)})};this.authorization_done=function(f,g){var e=$j("#j-app-view-"+this.app.id);var d=e.find(".j-oauth-authorize");if(f){d.append("<input type='hidden' id='_error' value='"+f+"'/>")}if(g){d.append("<input type='hidden' id='_errorDescription' value='"+g+"'/>")}e.find(".j-error-msg-oauth-approved-btn").click()}})});
;
define("jive.JAF.Configuration.Validate",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(d,c,e){this.serviceBlock=d;this.errorOptions=c;this.invalidFields=e};this.work=function(){var c=this;this.serviceBlock.find(".j-service-error").removeClass("j-service-error");var d=this.serviceBlock.find("INPUT.j-service-radio:visible");if(d.filter(":checked").length==0){this.errorOptions.missing_endpoint=true;d.each(function(){c.invalidFields.push(this)})}this.serviceBlock.find("INPUT.j-service-credential:visible").each(function(){var e=a.trim(a(this).val());a(this).val(e);if(!e){c.errorOptions.missing_credential=true;c.invalidFields.push(this)}});this.serviceBlock.find("textarea.j-service-credential:visible").each(function(){var e=a.trim(a(this).val());a(this).val(e);if(!e){c.errorOptions.missing_credential=true;c.invalidFields.push(this)}})}})});
;
define("jive.JAF.Configuration.Error",["jquery"],function(a){return jive.oo.Class.extend(function(b){b.init=function(){};this.clear=function(){a("#jive-modal-app-configure-feedback").hide()};this.render=function(d){if(d==null){return}var c=[];if(d.missing_endpoint){c.push("missing.endpoint")}if(d.missing_credential){c.push("missing.credential")}if(c.length==0){c.push("error.general")}if(c.length<1){this.clear();return}try{a("#jive-modal-app-configure-feedback").show().html(jive.apps.configure.renderAppDataErrorMessage(c))}catch(f){}};this.fieldsToVisualMarkers=function(c){return(a(c).map(function(){var d=a(this);return d.hasClass("j-service-radio")?d.parent()[0]:this})).addClass("j-service-error")}})});
;
define("jive.JAF.Configuration.MsgPoster",["jquery"],function(a){return jive.oo.Class.extend(function(b){this.post_message=function(c,d){var e=jive.apps.configure.renderAppDataErrorMessage({messageKeys:[c]});a("<p/>").html(e).message({style:d})}})});
;
define("jive.JAF.Configuration.CredentialsForm",["jquery","jive.JAF.Configuration.MsgPoster","jive.JAF.Configuration.Validate","jive.JAF.Configuration.Error"],function(c,a,d,b){return jive.AbstractView.extend(function(e){jive.conc.observable(this);e.init=function(g){var f=this;this.content=g.domTarget;this.approved=[];this.denied=[];this.currentService=1;this.configuredServices=[];this.totalServices=0;this.msg_poster=new a()};this.render=function(g){var f=this;var h=c(jive.apps.configure.renderConfigureCredentialBlocks({credentialsSetupView:g}));this.content.append(h.html());this.servicesCount=g.serviceOptionView.length;if(this.servicesCount<2){this.content.find("#current-service-counter").remove()}else{this.content.find("#current-service").text(this.currentService)}this.processServices(this.content.find(".j-service-block-container:first"))};this.activate=function(){this.content.find(".j-service-focus-hint").first().focus()};e.save=function(){var g=this.content.find(".j-service-block-container:first");var f=g.find(".j-service-block:first");var h=f.attr("data-connectionid");if(this.validate_block(f)){this.approved.push(Number(h));this.process_block(f);this.currentService++;this.content.find("#current-service").text(this.currentService);if(this.currentService<=this.servicesCount){g.hide().next().show()}else{this.postConfigurations()}}};e.process_block=function(g){var h=this;var f={serviceID:g.attr("data-serviceid"),alias:g.attr("data-alias")};f.credentials=h.get_credentials(g);this.configuredServices.push(f)};e.get_credentials=function(g){var f=[];g.find(".j-service-credential").each(function(){f.push({name:this.getAttribute("data-name"),value:this.value})});return f};e.cancel=function(){var g=this.content.find(".j-service-block-container:first");var f=g.find(".j-service-block:first");var h=f.attr("data-connectionid");this.denied.push(Number(h));this.currentService++;this.content.find("#current-service").text(this.currentService);if(this.currentService<=this.servicesCount){g.hide().next().show()}else{this.postConfigurations()}};this.completed=function(){return this.currentService>this.servicesCount};e.processServices=function(g){var j=true;var f=g;var h=this;var i;while(f.length){var k=f.find(".app-config-save");f.find(".app-config-save").click(function(){h.save()});f.find(".app-config-cancel").click(function(){h.cancel()});f.find(".j-service-credential").keypress(function(m){var l=m.which||m.keyCode;if(l===jive.Event.KEY_RETURN){k.click()}});if(j&&f.css("display")!="none"){i=f.find(".j-service-focus-hint");if(i.length){j=false}}f=f.next()}};e.validate_block=function(g){var i=new b();i.clear();var f={};var h=[];g.find(".j-service-error").removeClass("j-service-error");var j=new d(g,f,h);j.work();if(h.length){i.render(f);i.fieldsToVisualMarkers(h)}return h.length==0};e.postConfigurations=function(){if(!this.denied||this.denied.length<1){this.emit("app.credentials_done",{services:this.configuredServices,approved:this.approved,denied:this.denied})}else{this.emit("app.credentials_cancelled")}};this.msgSuccess=function(f){this.msg_poster.post_message("credentials.success","success")};this.msgFailed=function(f){this.msg_poster.post_message("credentials.fail","success")};this.msgCancelled=function(f){this.msg_poster.post_message("credentials.cancel","warn")}})});
;
define("jive.JAF.CoreContainer.CredentialsModel",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(d){var c=this;this.alias=d.alias};this.get_credentials=function(e,c){var f=new jive.conc.Promise();var d=jive.api.apps("instances/"+e+"/credentials_setup?aliases="+c);a.ajax({url:d,type:"GET",success:function(g){f.emitSuccess(g)}});return f};this.persist=function(f,e){var d=this;var c={instanceAppID:f,services:e.services};a.ajax({type:"PUT",url:jive.api.apps("instances/update_credentials"),data:JSON.stringify(c),contentType:"application/json",dataType:"json",success:function(h){var g={alias:d.alias};d.emit("app.credentials.persisted.success",g)},error:function(i){var g={alias:d.alias,error:{}};g.error.code=i.status?i.status:500;g.error.message=i.statusText;if(i.response&&i.response.startsWith("{")){var h=JSON.parse(i.response);if(h.message){g.error.message=h.message}}d.emit("app.credentials.persisted.failed",g)}})}})});
;
define("jive.JAF.Configuration.CredentialsMainV2",["jive.JAF.Configuration.CredentialsForm","jive.JAF.CoreContainer.CredentialsModel"],function(a,b){return jive.oo.Class.extend(function(c){jive.conc.observable(this);c.init=function(e){var d=this;var h=e.instanceAppID;var f=e.serviceAlias;d.completionCallback=e.completionCallback;this.model=new b({alias:e.serviceAlias});var g=e.domTarget;this.view=new a({domTarget:g});this.view.addListener("app.credentials_done",function(i){d.model.persist(h,i)});this.view.addListener("app.credentials_cancelled",function(){d.emitFailure("The user denied this operation.")});this.model.get_credentials(h,f).addCallback(function(i){d.view.render(i)});this.model.addListener("app.credentials.persisted.success",function(i){d.view.msgSuccess(i);d.completionCallback(i)});this.model.addListener("app.credentials.persisted.failed",function(i){d.view.msgFailed(i);d.completionCallback(i)})};this.emitFailure=function(f){var e=this;var d={alias:e.serviceAlias};d.error={code:401,message:f};e.view.msgCancelled(d);e.completionCallback(d)};this.activate=function(){this.view.activate()};this.completed=function(){return this.view.completed()}})});
;
define("jive.JAF.CoreContainer.AppCredentialsView",["jquery","jive.JAF.Configuration.CredentialsMainV2"],function(a,b){return jive.oo.Class.extend(function(c){jive.conc.observable(this);this.init=function(d){this.app=d.app;this.serviceAlias=d.args.alias;this.callback=d.callback;this.completed=false};this.getApp=function(){return this.app};this.createUI=function(){var d=this;this.ui=a(jive.apps.container.credentialsView());this.credentialsMain=new b({domTarget:d.ui,instanceAppID:d.app.instanceAppID,serviceAlias:d.serviceAlias,completionCallback:function(e){d.callback(e);if(e.error){d.emit("app.credentials.complete.error")}else{d.emit("app.credentials.complete.success")}}});return this.ui};this.activate=function(){if(!this.credentialsMain){return}var d=this;window.setTimeout(function(){d.credentialsMain.activate()},350)};this.cleanup=function(){if(!this.credentialsMain.completed()){this.credentialsMain.emitFailure("The user cancelled this operation");this.emit("app.service.message",{severity:"warn",message:"You may not be able to use this app until you provide credentials."})}}})});
;
define("jive.JAF.Configuration.ServiceBlocks",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(){this.blocks=a(".app-services-section .j-service-block-alert")};this.validate=function(c){return c(this.blocks)};this.get_services=function(){var c=[];this.blocks.each(function(){var e=a(this).attr("data-serviceid");if(e){c.push({serviceID:e,alias:a(this).attr("data-alias")})}else{var d=a(this).find("input.j-service-radio:checked");if(d){c.push({serviceID:d.attr("data-serviceid"),alias:d.attr("data-alias")})}}});return c}})});
;
define("jive.JAF.Configuration.ConfigureView",["jquery","jive.JAF.Configuration.ServiceBlocks","jive.JAF.Configuration.Validate","jive.JAF.Configuration.Error"],function(c,a,d,b){return jive.AbstractView.extend(function(e){this.init=function(g,h,f){this.instanceAppID=g.instanceAppID;this.configSetupData=h;this.configSetupData.app=g;if(h.requiresServices){this.content=c(jive.apps.configure.renderConfigureApp({configureAppView:h}));f.html("");f.append(this.content);c("#app-config-save").focus();this.bindClickEvents()}else{this.content=c(jive.apps.configure.renderConfigureAppNotNeeded());f.html("");f.append(this.content)}};e.bindClickEvents=function(){var f=this;var g=this.content;f.emit("app.service.wire.cancel",{callback:function(){f.emit("app.cancel_configuration")}});f.emit("app.service.wire.submit",{callback:function(){var h=new a();var j=h.validate(f.validate);if(j){var i=h.get_services();f.emit("app.save_configuration",i)}}});g.find(".j-service-radio").each(function(){var h=c(this).attr("data-optiongroupid");var i=c(this).attr("data-optionid");c(this).click(function(){c(".j-service-credentials[data-optiongroupid="+h+"]").hide();c(".j-service-credentials[data-optionid="+i+"]").show()})})};e.validate=function(g){var i=new b();i.clear();var f={};var h=[];g.find(".j-service-error").removeClass("j-service-error");g.each(function(){var j=new d(c(this),f,h);j.work()});if(h.length){i.render(f);i.fieldsToVisualMarkers(h)}return h.length==0}})});
;
define("jive.JAF.Configuration.ConfigureModel",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(){};this.persist_configuration=function(c){var d=this;a.ajax({type:"PUT",url:jive.api.apps("instances/"),data:JSON.stringify(c),contentType:"application/json",dataType:"json",success:function(e){d.emit("app.configure.success")},error:function(e){d.emit("app.configure.failed")}})};this.get_configuration_data=function(e){var c=this;var d=jive.api.apps("instances/"+e+"/config_setup");a.getJSON(d,function(f){c.emit("app.got.configure.data",f)})}})});
;
define("jive.JAF.Configuration.ConfigureMainV2",["jive.JAF.Configuration.ConfigureView","jive.JAF.Configuration.ConfigureModel"],function(a,b){return jive.oo.Class.extend(function(c){jive.conc.observable(this);c.init=function(e){var d=this;var f=e.app;this.domTarget=e.domTarget;this.instanceAppID=f.instanceAppID;this.model=new b();this.model.addListener("app.got.configure.data",function(g){d.configureView=new a(f,g,d.domTarget);d.configureView.addListener("app.save_configuration",function(i){var h={instanceAppID:d.instanceAppID,services:i};d.model.persist_configuration(h)});d.configureView.addListener("app.cancel_configuration",function(){d.emit("app.configure.cancel",d.instanceAppID)});d.configureView.addListener("app.service.wire.submit",function(h){d.emit("app.service.wire.submit",h)});d.configureView.addListener("app.service.wire.cancel",function(h){d.emit("app.service.wire.cancel",h)})});this.model.get_configuration_data(this.instanceAppID);this.model.addListener("app.configure.success",function(){d.emit("app.configure.success",d.instanceAppID)});this.model.addListener("app.configure.failed",function(){d.emit("app.configure.failed",d.instanceAppID)})}})});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.placepicker=="undefined"){jive.placepicker={}}jive.placepicker.containers=function(A,C){var B=C||new soy.StringBuilder();B.append('<nav class="j-nav-back"><p class="font-color-meta"><strong><span class="',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtmlAttribute(A.selectedContentType.uploadLink.iconCss):soy.$$escapeHtmlAttribute(A.selectedContentType.iconCss),' jive-icon-med"></span>',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.headingKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.headingKey),[])),'</strong>(<a href="#" class="back">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.select_different_type"),[])),'</a>)</p></nav><div role="search"><h4 class="font-color-meta">',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.searchPlaceholderKey),[])),'</h4><label for="container-filter-id" class="j-508-label">',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.searchPlaceholderKey),[])),'</label><input type="search" name="container-filter" id="container-filter-id" class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="j-places-list">');jive.placepicker.recentPlaces(A,B);B.append('</div><a href="#" class="j-menu-quick-bottomlink">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.browse_places"),[])),"</a>");return C?"":B.toString()};jive.placepicker.recentPlaces=function(A,C){var B=C||new soy.StringBuilder();if(A.suggestCreatePersonalBlog){B.append('<div class="j-places-list-personal">');jive.shared.soy.i18nHelper({i18nKey:"blogs.picker.create.new.text",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"blogs-create-blog!input.jspa"))+'">',arg1:"</a>",noAutoEscape:true},B);B.append("</div>")}else{if(A.userContainerType&&A.userContainerID&&!A.hideUserContainer){B.append('<div class="j-places-list-personal">');jive.placepicker.containerLink({subject:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerTitleKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerTitleKey),[]),type:A.userContainerType,id:A.userContainerID,contentType:A.selectedContentType.id,iconCss:"jive-icon-profile",iconSize:"sml",caption:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerCaptionKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:true,upload:A.upload},B);B.append("</div>")}else{if(A.personalBlogType&&A.personalBlogID){B.append('<div class="j-places-list-personal">');jive.placepicker.containerLink({subject:A.personalBlogName,type:A.personalBlogType,id:A.personalBlogID,contentType:A.selectedContentType.id,iconCss:"jive-icon-blog",iconSize:"sml",caption:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerCaptionKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:true},B);B.append("</div>")}}}if(A.containers&&A.containers.length>0){B.append('<h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.recent"),[])),"</h4>");jive.placepicker.containerList(A,B)}return C?"":B.toString()};jive.placepicker.searchResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<h4 class="j-place-search-results font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.search.results"),[])),' <em>(<a href="#" class="j-clear-search">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.clear.results"),[])),"</a>)</em></h4>");jive.placepicker.containerList(A,B);return C?"":B.toString()};jive.placepicker.containerList=function(A,G){var C=G||new soy.StringBuilder();C.append((A.containerName)?'<div class="j-container-selected-space"><a href="#" class="js-parent-container j-subspace-back-link"><span class="jive-icon-sml ui-icon-triangle-1-w"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("community.list.spaces.navigate.back_to"),[]))+" "+soy.$$escapeHtml(A.containerName)+"</a></div>":"",'<ul class="j-icon-list wide">');var B=A.containers;var F=B.length;if(F>0){for(var D=0;D<F;D++){var E=B[D];jive.placepicker.containerListEntry({container:E,contentType:A.contentType,containerType:A.containerType,containerID:A.containerID,upload:A.upload,showSubspaces:A.showSubspaces},C)}}else{C.append("<li>",(A.emptyKey)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.emptyKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.noresults"),[])),"</li>")}C.append("</ul>");return G?"":C.toString()};jive.placepicker.containerListEntry=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.container.type==A.containerType&&A.container.id==A.containerID)?'class="current"':"",">");jive.placepicker.containerLink(soy.$$augmentData(A.container,{contentType:A.contentType,iconSize:"sml",upload:A.upload,writableByUser:A.container.prop&&A.container.prop.perms&&A.container.prop.perms.allowedToContribute&&A.container.prop.perms.allowedToMove,props:A.container.prop}),B);B.append((A.container.type==A.containerType&&A.container.id==A.containerID)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.current_place"),[]))+"</em>":"",(A.showSubspaces)?(A.container.prop&&A.container.prop.childInfo&&A.container.prop.childInfo.hasChildren)?'<a href="#" class="js-child-spaces j-subspace-view-link font-color-meta" data-objecttype="'+soy.$$escapeHtmlAttribute(A.container.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(A.container.id)+'"'+((A.container.prop.parentInfo)?'data-parent-objecttype="'+soy.$$escapeHtmlAttribute(A.container.prop.parentInfo.type)+'" data-parent-objectid="'+soy.$$escapeHtmlAttribute(A.container.prop.parentInfo.id)+'"':"")+' title="'+((A.container.prop.childInfo.numChildren==1)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.container.prop.childInfo.numChildren])))+'">'+((A.container.prop.childInfo.numChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.container.prop.childInfo.numChildren])))+'<span class="jive-icon-sml ui-icon-triangle-1-e"></span></a>':"":"","</li>");return C?"":B.toString()};jive.placepicker.containerLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.writableByUser)?(A.contentType==14)?'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/community-create!input.jspa")+"?"+encodeURIComponent("community")+"="+encodeURIComponent(A.id)))+'" data-objecttype="'+soy.$$escapeHtmlAttribute(A.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(A.id)+'" class="js-target-container">':'<a href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.normalizeUrl(window._jive_base_url,"/choose-container.jspa")+"?"+encodeURIComponent("contentType")+"="+encodeURIComponent(A.contentType)+"&"+encodeURIComponent("containerType")+"="+encodeURIComponent(A.type)+"&"+encodeURIComponent("container")+"="+encodeURIComponent(A.id)+"&"+encodeURIComponent("upload")+"="+encodeURIComponent(A.upload?"true":"false")))+'" data-objecttype="'+soy.$$escapeHtmlAttribute(A.type)+'" data-objectid="'+soy.$$escapeHtmlAttribute(A.id)+'" class="js-target-container">':"","<span   ",(A.writableByUser)?(A.type==600)?"title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.project"),[]))+"'":(A.type==700)?"title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.group"),[]))+"'":(A.type==14)?'title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.space"),[]))+'"':"":"title='"+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.access.placeunavailable"),[]))+"'",' class="',(A.writableByUser)?soy.$$escapeHtmlAttribute(A.iconCss)+" jive-icon-"+((A.iconSize)?soy.$$escapeHtmlAttribute(A.iconSize):"med"):"jive-icon-sml jive-icon-place-unavailable",'" role="img"></span><span class="',(!A.writableByUser)?"jive-container-unavailable-text":"",' js-container-title" ',(!A.writableByUser)?'title="'+((A.type==2020)?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.usercontainer.unavailable"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.unavailable"),[])))+'"':"",">",soy.$$escapeHtml(A.subject),"</span>",(A.props&&A.props.isVisibleToPartner)?'<span class="jive-icon-med jive-icon-partner" title="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("partner.browse.ext_access"),[]))+'"></span>':"",(A.writableByUser)?"</a>":"",(A.caption)?' <span class="j-container-caption font-color-meta">'+soy.$$escapeHtml(A.caption)+"</span>":"");return C?"":B.toString()};jive.placepicker.browseContainers=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-container-browse jive-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.choose"),[])),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><div><input type="search" name="container-filter" ',(A.selectedContentType.searchPlaceholderKey)?'placeholder="'+soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.searchPlaceholderKey),[]))+'"':"",' class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="js-place-picker-content"><div class="j-container-browse-personal">');if(A.suggestCreatePersonalBlog){jive.shared.soy.i18nHelper({i18nKey:"blogs.picker.create.new.text",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"blogs-create-blog!input.jspa"))+'">',arg1:"</a>",noAutoEscape:true},C)}else{if(A.userContainer&&!A.hideUserContainer){if(A.selectedContentType.id==38){jive.placepicker.containerLink({subject:A.userContainer.subject,type:A.userContainer.type,id:A.userContainer.id,contentType:A.selectedContentType.id,iconCss:"jive-icon-blog",iconSize:"sml",caption:jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:A.userContainer.prop&&A.userContainer.prop.perms&&A.userContainer.prop.perms.allowedToContribute&&A.userContainer.prop.perms.allowedToMove,props:A.userContainer.prop},C)}else{jive.placepicker.containerLink({subject:jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerTitleKey),[]),type:A.userContainer.type,id:A.userContainer.id,contentType:A.selectedContentType.id,iconCss:"jive-icon-profile",iconSize:"sml",caption:jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:A.userContainer.prop&&A.userContainer.prop.perms&&A.userContainer.prop.perms.allowedToContribute&&A.userContainer.prop.perms.allowedToMove,upload:A.upload,props:A.userContainer.prop},C)}}}C.append('</div><section class="j-accordion-container">');var F=A.filterGroupBean.filters;var D=F.length;for(var E=0;E<D;E++){var B=F[E];C.append('<h4 class="j-accordion-toggle selected"><a href="#" class="js-accordion-link" data-placefilter="',soy.$$escapeHtmlAttribute(B.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.description),[])),'</a></h4><div class="j-places-list" style="display:none"></div>')}C.append("</section></div></section><div>");return G?"":C.toString()};jive.placepicker.moreContainers=function(A,G){var B=G||new soy.StringBuilder();var E=A.containers;var D=E.length;for(var F=0;F<D;F++){var C=E[F];jive.placepicker.containerListEntry({container:C,contentType:A.contentType,containerType:A.containerType,containerID:A.containerID,upload:A.upload,showSubspaces:A.showSubspaces},B)}return G?"":B.toString()}
;
jive.TypeaheadInput=jive.oo.Class.extend(function(b){var c=jQuery;jive.conc.observable(this);b.init=function(g,f){var d=this;f=f||{};this.element=c(g);this.minLength=f.minLength||2;this.delay=f.delay||333;this.suppressEnterKey=f.suppressEnterKey;var h=this.processKey.bind(this);if(c.browser.mozilla){this.element.keypress(function(i){h(i)})}else{this.element.keydown(function(i){h(i)})}this.element.bind("search change",h);this.element.focus(function(){d.focused=true;d.startWatch(h)});this.element.blur(function(){d.focused=false;d.stopWatch(h)});if(!("placeholder" in c("<input>")[0])){this.placeholder=this.element.attr("placeholder");this.placeheldClass=((this.element.data("placeHeld")||{}).options||{}).className}var e=this.delay;this.getDelay=c.isFunction(e)?this.delay:function(){return e};this.isClear=a(this.minLength,this.element.val())};this.val=function(d){if(this.focused&&typeof d!="undefined"){}else{if(d===""&&this.placeholder){this.element.val(this.placeholder);this.element.addClass(this.placeheldClass)}else{return this.element.val.apply(this.element,arguments)}}};b.processKey=function(g){var f=this.element.val(),d=this;if(g&&g.which=="13"&&d.suppressEnterKey){g.preventDefault()}if(f!==this.prevValue){if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(function(){d.emitChange(d.element.val())},this.getDelay(f));this.prevValue=f}};b.emitChange=function(d){if(!this.isClear&&a(this.minLength,d)){this.emit("clear");this.isClear=true}else{if(d.length>=this.minLength&&!this.placeheld()){this.emit("change",d);this.isClear=false}}};function a(d,e){return c.trim(e)===""||e.length<d}b.placeheld=function(){if(this.placeholder&&this.placeheldClass){return this.element.val()===this.placeholder&&this.element.hasClass(this.placeheldClass)}else{return false}};b.startWatch=function(e){var d=this;this.stopWatch(e);this.watchTimeout=setTimeout(function(){e();d.startWatch(e)},333)};b.stopWatch=function(){clearTimeout(this.watchTimeout)}});
;
jive.namespace("Placepicker");jive.Placepicker.ContainerSearchView=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);this.init=function(d,f,e){var c=this;this.target=b(f);this.prevContent=this.target.children();this.visibleContent=this.prevContent.filter(":visible");b(d).each(function(){var g=new jive.TypeaheadInput(this);g.addListener("change",function(h){c.emitP("search",h).addCallback(function(i){if(c.searchResults){c.searchResults.remove()}c.searchResults=b(jive.placepicker.searchResults(i));c.flatFind(c.searchResults,".j-clear-search").click(function(j){c.restoreContent();g.val("");j.preventDefault()});if(c.visibleContent.size()==0){c.visibleContent=c.prevContent.filter(":visible")}c.visibleContent.hide();f.append(c.searchResults);c.resizePopover()})});g.addListener("clear",c.restoreContent.bind(c))})};this.update=function(){};a.restoreContent=function(){if(this.searchResults){this.searchResults.remove()}this.visibleContent.show();this.resizePopover()};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.resizePopover=function(){this.target.parents(".js-pop *").trigger("popover.resize",[{fade:false}])}});
;
(function(a){a.fn.endlessScroll=function(c){var f={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};var c=a.extend(f,c);var d=true;var e=false;var b=0;if(c.ceaseFire.apply(this)===true){d=false}if(d===true){a(this).scroll(function(){var h=a(".endless_scroll_inner_wrap",this);if(h.length==0){a(this).wrapInner('<div class="endless_scroll_inner_wrap" />')}if(h.length>0&&(h.height()-a(this).height()<=a(this).scrollTop()+c.bottomPixels)){if((c.fireOnce==false||(c.fireOnce==true&&e!=true))){if(c.resetCounter.apply(this)===true){b=0}e=true;b++;a(c.insertAfter).after('<div id="endless_scroll_loader">'+c.loader+"</div>");if(typeof c.data=="function"){data=c.data.apply(this)}else{data=c.data}if(data!==false){a("div#endless_scroll_loader").remove();a(c.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>");a("div#endless_scroll_data").hide().fadeIn();a("div#endless_scroll_data").removeAttr("id");var g=new Array();g[0]=b;c.callback.apply(this,g);if(c.fireDelay!==false||c.fireDelay!==0){a("body").after('<div id="endless_scroll_marker"></div>');a("div#endless_scroll_marker").fadeTo(c.fireDelay,1,function(){a(this).remove();e=false})}else{e=false}}}}})}}})(jQuery);
;
jive.namespace("Placepicker");jive.Placepicker.ContainerBrowseView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(c){this.containerStack=new Array();c=c||{};this.filterGroup=c.filterGroup||"placePicker";this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false;this.hideUserContainer=c.hideUserContainer||false};this.render=function(e){var f=new jive.conc.Promise(),c=this;c.rootCommunity=e.rootCommunity;c.showRootCommunity=e.showRootCommunity;c.contentType=e.contentType;c.modal=b(jive.placepicker.browseContainers(e));c.modal.delegate(".js-target-container","click",function(j){var h=b(this).data("objecttype");var i=b(this).data("objectid");var g=$j(this).find(".js-container-title").text();c.emit("container",{targetContainerType:h,targetContainerID:i,targetContainerName:g});if(c.closeOnSelect){c.modal.trigger("close")}if(!c.followLinks){j.preventDefault()}});var d=function(){c.setupSubspaceHandlers(c.modal);var g=c.serviceArgs("following");c.showSpinner();c.emitP("browseLoad",g).addCallback(function(i){var j=b(jive.placepicker.containerList(jQuery.extend({emptyKey:"browse.places.empty.message"},i)));c.addListToAccordionSection(c.modal.find(".j-places-list").first(),j,true);var h=c.modal.find(".j-accordion-container").accordion({create:function(l,m){b(this).find("h4 a.js-accordion-link").attr("tabindex","-1")},changestart:function(n,o){if(o.newContent.find("li").length==0){var m=o.newHeader.find(".js-accordion-link");var l=c.serviceArgs(m.data("placefilter"));c.setupAccordionSection(o.newHeader.next(),l,true)}}});var k=new jive.Placepicker.ContainerSearchView(c.modal.find("input[name=container-filter]"),c.modal.find(".js-place-picker-content"));c.proxyListener(k,"search")}).always(function(){c.hideSpinner()})};c.modal.lightbox_me({closeSelector:".close",destroyOnClose:true,onLoad:d,showOverlay:true,closeFocusSelector:"#js-publishbar-place-browse",parentLightbox:b(c.parent).closest(".jive-modal:visible")});return f};this.close=function(){if(this.modal){this.modal.trigger("close")}};a.setupAccordionSection=function(d,g,i){var c=this;var f=c.isSpacesSection(g.filterID);var e=c.isFollowingSection(g.filterID);if(f){g=c.setupSpaceArgs(g);d.data("containerType",g.containerType);d.data("containerID",g.containerID);if(c.isRootCommunity(g)){var h=c.rootCommunityList();return c.addListToAccordionSection(d,h,i)}}var j=null;if(e){j="browse.places.empty.message"}c.showSpinner(d);c.emitP("browseLoad",g).addCallback(function(l){c.hideSpinner(d);if(f){if(c.isRootCommunityChildren(g)&&!c.showRootCommunity){l.containerName=null}}var k=b(jive.placepicker.containerList(jQuery.extend({showSubspaces:f,emptyKey:j},l)));return c.addListToAccordionSection(d,k,i)})};a.addScroller=function(d){var c=this;d.endlessScroll({fireDelay:false,callback:function(){var i=b(this).find("li").size();if(i%20==0){var g=b(this).prev().find("a");var f=g.data("placefilter");var h=c.serviceArgs(f,i);var e=b(this).data("containerID");var j=b(this).data("containerType");if(e>-1){h=b.extend({containerType:j,containerID:e},h)}c.emitP("browseLoad",h).addCallback(function(l){var k=b(jive.placepicker.moreContainers(b.extend({showSubspaces:c.isSpacesSection(f)},l)));d.find("ul").append(k)})}}})};a.setupSubspaceHandlers=function(d){var c=this;c.containerStack.push({containerType:c.rootCommunity.type,containerID:-1});d.delegate(".js-child-spaces","click",function(h){var g=b(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var e=g.data("placefilter");var f=b.extend({containerType:b(this).data("objecttype"),containerID:b(this).data("objectid")},c.serviceArgs(e));c.containerStack.push({containerType:b(this).data("parent-objecttype"),containerID:b(this).data("parent-objectid")});c.setupAccordionSection(b(this).closest(".j-places-list"),f,false);h.preventDefault()});d.delegate(".js-parent-container","click",function(h){var g=b(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var e=g.data("placefilter");var j=c.containerStack.pop();if(c.isRootCommunity(j)){var i=c.rootCommunityList();c.addListToAccordionSection(b(this).closest(".j-places-list"),i,false)}else{var f=b.extend({containerType:j.containerType,containerID:j.containerID},c.serviceArgs(e));c.setupAccordionSection(b(this).closest(".j-places-list"),f,false)}h.preventDefault()})};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.isSpacesSection=function(c){return c=="space"};a.isFollowingSection=function(c){return c=="following"};a.isRootCommunityChildren=function(d){var c=this;return d.containerType==c.rootCommunity.type&&d.containerID==c.rootCommunity.id};a.isRootCommunity=function(d){var c=this;return d.containerType==c.rootCommunity.type&&d.containerID==-1};a.setupSpaceArgs=function(d){var c=this;if(!d.containerType&&!d.containerID){if(c.showRootCommunity){d.containerType=c.rootCommunity.type;d.containerID=-1}else{d.containerType=c.rootCommunity.type;d.containerID=c.rootCommunity.id}}return d};a.addListToAccordionSection=function(d,e,f){var c=this;d.html(e);d.show();if(f){c.addScroller(d)}};a.serviceArgs=function(d,f){var c=this;var e=c.isSpacesSection(d)?"spaceOrder":"subject";return{filterGroupID:c.filterGroup,filterID:d,start:f?f:0,sortKey:e,numResults:20}};a.rootCommunityList=function(){var c=this;return b(jive.placepicker.containerList({showSubspaces:true,containers:[c.rootCommunity],contentType:c.contentType,containerType:-1,containerID:-1}))};a.createSpinner=function(c){this.$spinner=b(jive.shared.soy.loading());if(c){c.append(this.$spinner)}};a.destroySpinner=function(c){if(this.$spinner){this.$spinner.remove()}}});
;
jive.namespace("Placepicker");jive.Placepicker.BrowseContainersSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/containers")}});
;
jive.namespace("Placepicker");jive.Placepicker.SearchContainersSource=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/containers/search")}});
;
jive.namespace("Placepicker");jive.Placepicker.PlacePickerSource=jive.RestService.extend(function(a,b){a.resourceType="placepicker";a.init=function(d,c){c=c||{};b.init.call(this,c);$j.extend(this.defaultParams,{containerType:c.containerType,containerID:c.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/placepicker/"+d)}});
;
jive.namespace("Placepicker");jive.Placepicker.Main=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(c){var b=this;this.pickerContext=c.pickerContext||"create";this.objectType=c.objectType;this.objectID=c.objectID||-1;this.upload=c.upload;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.filterGroup=c.filterGroup;this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false;this.filterByContainer=c.filterByContainer||false;this.hideUserContainer=c.hideUserContainer||false;this.fromQuest=c.fromQuest;this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource(this.pickerContext,{containerType:this.containerType,containerID:this.containerID});this.containerBrowseView=new jive.Placepicker.ContainerBrowseView({filterGroup:this.filterGroup,parent:this.parent,followLinks:this.followLinks,closeOnSelect:this.closeOnSelect,hideUserContainer:this.hideUserContainer});this.containerBrowseView.addListener("browseLoad",function(d,f){var e=jQuery.extend({contentType:b.objectType,contentID:b.objectID},d);if(b.filterByContainer){e=jQuery.extend({},{containerType:b.containerType,containerID:b.containerID},e)}b.browseContainers.findAll(e).addCallback(function(g){f.emitSuccess({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload,containers:g.items,containerName:g.containerName,parentName:g.parentName})})});this.containerBrowseView.addListener("search",function(d,e){b.containers.findAll({query:d,contentType:b.objectType,contentID:b.objectID}).addCallback(function(f){e.emitSuccess(jQuery.extend({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload},f))})});this.containerBrowseView.addListener("container",function(d){b.emit("container",d)})};this.showPicker=function(){var b=this;b.placePicker.findAll({contentType:b.objectType,contentID:b.objectID}).addCallback(function(c){b.containerBrowseView.render(jQuery.extend({contentID:b.contentID,contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,hideUserContainer:b.hideUserContainer,selectedContentType:{id:b.objectType,personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey}},c))})}});
;
define("jive.Apps.PlacePicker.Main",function(){return jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.closeOnSelect=true;this.placePicker=new jive.Placepicker.Main({closeOnSelect:this.closeOnSelect,filterGroup:"appPlacePicker",personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey,containerType:c.containerType,pickerContext:"app",filterByContainer:(c.containerType)?true:false,objectType:c.contentType})};this.showPicker=function(c){var b=this;b.placePicker.showPicker();b.placePicker.addListener("container",function(d){c(d);b.placePicker.removeListener("container")})}})});
;
define("jive.JAF.Alerts.BlockingView",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(c){this.app=c};this.applyBlockingAlert=function(c,e){var d=this.prepareBlockingAlertHtml(this.app,e);a(c).append(d);return d};b.prepareBlockingAlertHtml=function(j,i){var f;var e=this;var h=j.id;var c="";if(i){switch(i.code){case 1000:case 1010:if(j.configurationError){c="configurationError"}f=function(k,l){l.find(".j-error-msg-configure-app-btn").click(function(){e.emit("app.block",{type:"app.launch.config",app:j})})};break;case 2010:f=function(k,l){l.find(".j-error-msg-remove-banned-app-btn").click(function(){e.emit("app.block",{type:"app.remove.banned",app:j})});l.find(".j-error-msg-delete-app-btn").click(function(){e.emit("app.block",{type:"app.delete",app:j})});l.find(".j-launch-market-faq").click(function(){window.open(window._jive_base_url+"/apps/market/marketfaq/"+j.appUUID,"fullscreen=yes")})};break;case 2020:f=function(k,l){l.find(".j-error-msg-remove-blacklisted-app-btn").click(function(){e.emit("app.block",{type:"app.remove.blacklisted",app:j})});l.find(".j-error-msg-delete-app-btn").click(function(){e.emit("app.block",{type:"app.delete",app:j})});l.find(".j-launch-market-faq").click(function(){window.open(window._jive_base_url+"/apps/market/marketfaq/"+j.appUUID,"fullscreen=yes")})};break;case 2040:f=function(k,l){l.find(".j-error-msg-remove-subscription-expired-app-btn").click(function(){e.emit("app.block",{type:"app.launch.account",app:j})});l.find(".j-visit-app-market-link").click(function(){window.open(window._jive_base_url+"/apps/market/marketfaq/"+j.appUUID,"fullscreen=yes")})};break;case 2050:f=function(k,l){l.find(".j-error-msg-app-more-info-btn").click(function(){window.open(window._jive_base_url+"/apps/market/marketfaq/"+j.appUUID,"fullscreen=yes")});l.find(".j-error-msg-delete-app-btn").click(function(){e.emit("app.block",{type:"app.delete",app:j})})};break;case 5010:f=function(k,l){l.find(".j-error-msg-remove-throttle-violation-btn").click(function(){e.emit("app.block",{type:"app.remove.throttle.violation",app:j})});l.find(".j-why-apps-may-be-suspended").click(function(){window.open(window._jive_base_url+"/apps/market/marketfaq/"+j.appUUID,"fullscreen=yes")})};break;case 5020:f=function(k,l){l.find(".j-error-msg-delete-app-btn").click(function(){e.emit("app.block",{type:"app.delete",app:j})});l.find(".j-error-msg-purchase-app-btn").click(function(){e.emit("app.block",{type:"app.launch.market",app:j})})};break;case 10404:f=function(k,l){l.find(".j-error-msg-refresh-app-btn").click(function(){e.emit("app.block",{type:"app.refresh",app:j})})};break;case 10500:f=function(k,l){l.find(".j-error-msg-delete-app-btn").click(function(){e.emit("app.block",{type:"app.delete",app:j})});l.find(".j-error-msg-refresh-app-btn").click(function(){e.emit("app.block",{type:"app.refresh",app:j})})};break;case 6000:break}}if(!f){f=function(k,l){l.find(".j-error-msg-refresh-app-btn").click(function(){e.emit("app.block",{type:"app.refresh",app:j})})}}var d={code:i.code,modifier:c,message:i.message,creator:i.creator,errorMessage:i.errorMessage,iconSrc:j.iconSrc,appTitle:j.title};var g=a(jive.apps.alerts.renderAppHalt(d));f(this,g);return g}})});
;
define("jive.JAF.Alerts.AlertMainV2",["jive.JAF.Alerts.BlockingView"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(d,c){this.app=d;this.targetDomElement=c;this.blockingAlerts=this.app.blockingAlerts};this.hasBlockingAlerts=function(){return this.blockingAlerts.length>0};this.getApp=function(){return this.app};this.getActiveAlert=function(){return this.hasBlockingAlerts?this.blockingAlerts[0]:false};this.applyBlock=function(e,h,g){h=h||this.app;e=e?e:this.targetDomElement;if(!e){return}g=g||this.getActiveAlert();if(!g){return}var d=this;var c=new a(h);var f=c.applyBlockingAlert(e,g);c.addListener("app.block",function(i){d.emit("app.block",i)});return f};this.routeActionClicks=function(g,h,d,f,e){if(g.type=="app.launch.config"){h(this)}else{if(g.type=="app.launch.market"||g.type=="launch.market.app.profile"){window.location=window._jive_base_url+"/apps/market/marketapp/"+g.app.appUUID}else{if(g.type=="launch.market.faq"){window.open(window._jive_base_url+"/apps/market/marketfaq/"+g.app.appUUID,"fullscreen=yes")}else{if(g.type=="app.launch.account"){window.location=window._jive_base_url+"/apps/market/marketuser/"+g.app.appUUID}else{var c=function(){};var i=function(){};if(g.type=="app.remove.banned"||g.type=="app.remove.blacklisted"||g.type=="app.delete"||g.type=="app.hide"){c=d;i=f}e.emit(g.type,g.app,c,i)}}}}}})});
;
define("jive.JAF.CoreContainer.AppsContainerView",["jive.JAF.Configuration.ConfigureMainV2","jive.Apps.PlacePicker.Main","jive.JAF.Alerts.AlertMainV2"],function(a,c,b){return jive.AbstractView.extend(function(d){jive.conc.observable(this);var e={};this.getEmbeddedContext=function(f){return e[f]};this.setEmbeddedContext=function(f,g){e[f]=g};this.deleteEmbeddedContext=function(f){delete e[f]};this.prepareMarketContext=function(f){e["market-app"]={target:{type:"embed"},jive:f};return{embeddedID:"market-app"}};this.init=function(f,g){this.commonContainer=f;this.options=g;this.bounds={maxWidth:1200,maxHeight:1200,minWidth:350,minHeight:150};this.addListener("app.apply.alert",this.handleAppAlert)};this.render=function(){};this.handleAppsMarketInstall=function(){};this.renderApp_=function(f,h,l,j){var o=this;if(!f){return}var i=new b(h,$j(f.currentGadgetEl_));if(i.hasBlockingAlerts()){o.emit("app.apply.alert",i)}else{var g=this.createRenderParams_(h);var k=h.appURL;var m=l||function(){};var n=j||{};this.commonContainer.navigateGadget(f,k,n,g,m)}};this.renderAppEE_=function(i,l,j,h,f){var g=new b(l,i);if(g.hasBlockingAlerts()){this.emit("app.apply.alert",g);return false}else{var k=l.appURL||"";this.getAppFeatures(k,function(m){this.renderAppEE_impl(i,l,j,m,h,f)});return true}};this.renderAppEE_impl=function(m,i,k,f,n,l){k=k||{};var h=this.isOpenSocialFeatureRequired("2.5",(f||{}),"embedded-experiences");var o=d.constructEEDataModel(i,k);if(h){k=d.constructOpenSocialEEContext(k);if(!!k.appContext){o.context=k.appContext}}var g=this.createRenderParams_(i);var p=n||function(){};var q=l||{};var j={};j[osapi.container.ee.RenderParam.GADGET_RENDER_PARAMS]=g;j[osapi.container.ee.RenderParam.GADGET_VIEW_PARAMS]=q;this.commonContainer.ee.navigate(m,o,j,p,k.containerContext)};d.constructOpenSocialEEContext=function(g){var f={};if(g.jive&&g.jive.content){f.containerContext={};f.containerContext[osapi.container.ee.Context.ASSOCIATED_CONTEXT]={};f.containerContext[osapi.container.ee.Context.ASSOCIATED_CONTEXT]=g.jive.content}if(g&&g.target&&g.target.context){f.appContext=g.target.context}return f};d.constructEEDataModel=function(l,j){var k=l.appURL;var g=l.view;var i={};i.gadget=k;i.context=j;if(j&&(j.target||j.display)){var h=j.display||{};var f=j.target||{};if(f.type&&f.type==="embed"){f.type=osapi.container.ee.TargetType.GADGET}i[osapi.container.ee.DataModel.PREFERRED_EXPERIENCE]={display:h,target:f};if(j.target&&!j.target.hasOwnProperty("view")){j.target.view=l.view}}return i};this.computeAppDimensions=function(k,g){var j;if(g){j=g.replace(".","_")}var f=(j&&k.heightByView&&k.heightByView[j])||k.height||k.actionHeight;var i=(j&&k.widthByView&&k.widthByView[j])||k.width||k.actionWidth;var h=false;if(f===9999&&i===9999){h=true}return{height:f,width:i,isMaximum:h}};d.createRenderParams_=function(j){var g=osapi.container.RenderParam;var i={};var f=j.view;window.__METADATA_VIEW=f||"canvas";i[g.VIEW]=f;var h=this.computeAppDimensions(j,f);i[g.HEIGHT]=h.height;i[g.WIDTH]=h.width;i[g.USER_PREFS]=j.userPrefs;if(typeof(window.__JAF_DEBUG)!=="undefined"&&window.__JAF_DEBUG===0){i[g.NO_CACHE]=j.hasOwnProperty(g.NO_CACHE)?j.nocache:false}return i};this.getRealTitle=function(h,g){var f="";if((h.title||g)&&h.actionLabel){f=(g?g:h.title)+" : "+h.actionLabel}else{if(h.title||g){f=g?g:h.title}else{if(h.actionLabel){f=h.actionLabel}}}return f};this.getAppFeatures=function(g,h){var f=this;this.commonContainer.preloadGadget(g,function(i){if(!i[g]||i[g].error){h.call(f,{error:i[g].error})}else{var j={};var k=i[g]["modulePrefs"];if(k&&k.features){j=k.features}h.call(f,j)}})};this.isOpenSocialFeatureRequired=function(g,k,l){var i="opensocial-"+g;var j=k[i]||null;if(j&&j.required){return true}if(l){var f=k[l]||null;if(f&&f.params.specificationVersion){var h=f.params.specificationVersion;h=$j.trim(h.toString());if(h.length>g.length){h=h.substring(0,g.length)}if(h===g){return true}}}return false};this.sendNotification=function(g){g=g||{};var h=g.message;var f=g.severity||"info";if(typeof(h)!="undefined"){$j("<p/>").html(h).message({style:f})}};this.setTitle=function(){};this.maximizeApp=function(){};this.reload=function(){};this.closeApp=function(){};this.resizeContainerHeight=function(){};this.resizeContainerWidth=function(){};this.requestNavigateTo=function(){};this.scrollIntoView=function(){};this.handleAppAlert=function(f){};this.initPlacePicker=function(f,h){var g=new c(f);g.showPicker(h)};this.initUserPicker=function(g,j){var i={multiple:false};g=$j.extend(i,g);var h=new jive.UserPicker.SelectPeopleView();var f=function(k){h.close();j(k)};h.setOptions(g).addListener("select",f).open()};this.invokeCredentials=function(){};this.destroyCredentials=function(){};this.invokeSettings=function(){};this.destroySettings=function(){};this.closeModal=function(f){};this.setModalTitle=function(f){d.setWhichModalTitle();whichTitle.text(f)};d.setWhichModalTitle=function(){var f=".js-app-title-main";var g=$j(".js-app-title > *");whichTitle=f?g.filter(f):null};d.enableSparkline=function(g){if(g.developmentApp){this.sparklineEnabled=true;var f=null;$j(".j-app-sparkline").show();$j(".j-app-sparkline").hover(function(){me=$j(this);img=$j("img",me);if(f){window.clearInterval(f)}f=window.setInterval(function(){me.css("background-image","url("+img.attr("src").replace(/ts=\d+/,"ts="+new Date().getTime())+")")},250)},function(){if(f){window.clearInterval(f)}f=null;me.css("background-image","")})}else{this.sparklineEnabled=false}};this.refresh=function(){this.emit("app.reload");this.displayRefreshMsg(true)};this.displayRefreshMsg=function(f,j){var g=f?"info":"error";var i=f?"appframework.app.development.refresh":"error.general";var h=jive.apps.container.renderMessage({messageKey:i});this.sendNotification({message:h,severity:g})};this.handleConfigurationDialog=function(h,i){var g=this;var k=h.getApp();var f=$j(jive.apps.container.blockingAlertView());if(k.configurationError){f.find("#j-app-blocking-alert-submit").hide();f.find("#j-app-blocking-alert-cancel").addClass("j-btn-callout")}var j=new a({app:k,domTarget:f.find("#app-blocking-alert-detail")});j.addListener("app.service.wire.cancel",function(l){$j("#j-app-blocking-alert-cancel").click(function(){var m=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.cancel"});g.sendNotification({severity:"warn",message:m});$j(".j-modal-close-top").click()})});j.addListener("app.service.wire.submit",function(l){$j("#j-app-blocking-alert-submit").click(l.callback)});j.addListener("app.configure.success",function(){var l=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.success"});g.sendNotification({severity:"info",message:l});if(i&&i.configureCallback){i.configureCallback(true)}g.emit("app.reload",false)});j.addListener("app.configure.failed",function(){var l=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.failure"});g.sendNotification({severity:"error",message:l});if(i&&i.configureCallback){i.configureCallback(false)}});$j("#j-app-modal-parent iframe").css({display:"none"});$j("#j-app-modal-parent").append(f)};this.resizeModal=function(f,h,g){};this.restoreChromeNav=function(){};this.hideChromeNav=function(){};this.getRenderedApp=function(){};this.getMaximumHeight=function(){};this.getMaximumWidth=function(){};this.boundedHeight=function(f){f=(f+"").match(/\d+/)[0]/1;var g=Math.min(Math.max(f,this.bounds.minHeight),this.bounds.maxHeight);return g};this.boundedWidth=function(f){f=(f+"").match(/\d+/)[0]/1;var g=Math.min(Math.max(f,this.bounds.minWidth),this.bounds.maxWidth);return g};d.delayedRunner=function(h,g,f){var j=new Date().getTime();var i=window.setInterval(function(){var k=new Date().getTime();if(k-j>1500||f()){h();window.clearInterval(i)}},g)};d.recenter=function(i,g){g=!($j.browser.msie&&$j.browser.version<9)&&g;var f=i.height();var h=i.width();i.css({position:"fixed",top:"50%",marginTop:i.outerHeight()/-2,left:"50%",marginLeft:i.outerWidth()/-2});if(g){i.animate({marginLeft:h/-2,marginTop:f/-2},{duration:300,queue:false})}else{i.css({marginLeft:h/-2,marginTop:f/-2},{duration:300,queue:false})}}})});
;
define("jive.JAF.PreferencesView",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(c){this.domTarget=c};this.create_message=function(c,d){var e=jive.apps.preferences.renderAppDataErrorMessage({messageKeys:[c]});return{message:e,style:d}};this.edit_app_preferences=function(h,f){var d=this;var e=h.instanceAppID;if(!f.preferences||f.preferences.length<1){d.emit("app.service.wire.nav.hide");this.domTarget.html("");this.domTarget.append(a(jive.apps.preferences.renderNoPreferences()))}else{var g=a(jive.apps.preferences.renderPreferences({instanceAppID:e,appPreferences:f.preferences.length?f.preferences:[f.preferences]}));var c=function(){var i=g.find(".jive-widget-edit-elem-url");if(i.length){a(i.get(0)).focus()}};d.emit("app.service.wire.submit",{callback:function(){d.emit("app.preferences.save",g.find("form"))}});this.domTarget.html("");this.domTarget.append(g)}}})});
;
define("jive.JAF.Preferences.Model",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(){this.GADGET_ENDPOINT=jive.rest.url("/app");this.options=function(f,d,e,c){if(e){d=d+"?"+a.param(e)}return{type:f,url:this.GADGET_ENDPOINT+d,dataType:"json",contentType:"application/json; charset=utf-8",success:c}}};this.setPref=function(g,c,e){var d=this;var f={n:c,v:e};a.ajax(this.options("PUT","/"+g+"/prefs",f,function(h){d.emit("app.preferences.set",h)}))};this.getPreferences=function(d){var c=this;a.ajax(this.options("GET","/"+d+"/prefs/",null,function(e){c.emit("app.preferences.get",e.pref)}))};this.setPreferences=function(d){var c=this;d.ajaxSubmit({url:this.GADGET_ENDPOINT+"/setprefs/",type:"POST",dataType:"json",success:function(e){c.emit("app.preferences.set.all",e.dashboardAppSrc)}})};this.cancelEdit=function(d){var c=this;a.ajax(this.options("GET","/"+d,null,function(e){c.emit("app.preferences.cancel.edit",e)}))};this.getPreferencesView=function(d){var c=this;a.ajax(this.options("GET","/"+d+"/prefs/view",null,function(e){c.emit("app.preferences.get.pref.view",e.appPrefView)}))}})});
;
define("jive.JAF.Preferences",["jive.JAF.Preferences.Model","jive.JAF.PreferencesView"],function(b,a){return jive.oo.Class.extend(function(c){jive.conc.observable(this);c.init=function(f,d){this.source=new b();var e=this;this.defaultView=new a(d);this.defaultView.addListener("app.service.wire.submit",function(g){e.emit("app.service.wire.submit",g)});this.defaultView.addListener("app.service.wire.cancel",function(g){e.emit("app.service.wire.cancel",g)});this.defaultView.addListener("app.service.wire.none");this.source.addListener("app.preferences.get.pref.view",function(g){if(g.customView){e.emit("app.service.wire.none");e.emit("app.preferences.get.custom.view",g.viewUrl)}else{e.defaultView.addListener("app.preferences.save",function(h){e.source.setPreferences(h)});e.defaultView.edit_app_preferences(f,g)}});this.source.addListener("app.preferences.set.all",function(){e.emit("app.preferences.default.saved",{message:"Your preferences have been saved."})});this.source.getPreferencesView(f.instanceAppID)}})});
;
define("jive.JAF.CoreContainer.AppServicesView",["jquery","jive.JAF.CoreContainer.AppsContainerView","jive.JAF.Configuration.ConfigureMainV2","jive.JAF.Preferences"],function(d,a,b,c){return a.extend(function(e,f){jive.conc.observable(this);var h;var g;this.init=function(k,i,j){f.init.call(this,i,j);this.app=k;this.commonContainer=i;this.options=j;this.serviceSites=[]};this.setMarketApp=function(i){this.marketApp=i};this.isActive=function(){return d("#app-services-container").length?true:false};this.createUI=function(){return d(jive.apps.container.servicesView({app:this.app}))};this.activate=function(){this.determineLeftNavItems(this.app);this.registerLeftNavHandlers();d(".j-modal-nav li a").click(function(i){d(this).parent("li").addClass("selected").siblings("li").removeClass("selected")});this.hideNav();d("#j-app-svcs-about").click()};e.determineLeftNavItems=function(i){d("#j-app-svcs-settings").parent().show();if(!i.userPrefsAvailable){d("#j-app-svcs-settings").hide()}if(!i.configurationAvailable||i.configurationError){d("#j-app-svcs-config").hide()}};e.hideNav=function(){d("#app-services-container .j-modal-footer").hide()};e.showNav=function(){d("#app-services-container .j-modal-footer").show()};e.wireButtonListeners=function(j){var i=this;j.addListener("app.service.wire.submit",function(k){i.showNav();d("#j-app-services-submit").click(k.callback)});j.addListener("app.service.wire.cancel",function(k){i.showNav();d("#j-app-services-cancel").click(k.callback)});j.addListener("app.service.wire.nav.show",function(){i.showNav()});j.addListener("app.service.wire.nav.hide",function(){i.hideNav()})};this.prepareDetail=function(){var i=d("#app-services-detail");i.html("");return i};e.registerLeftNavHandlers=function(){var i=this;if(d("#j-app-sys-settings").length==1){d("#j-app-sys-settings").click(function(m){i.hideNav();var n="sys-settings-view";var k=i.prepareDetail();i.setCurrentSettingsView(n);var l=i.prepareSiteViewIfRequired(n,k[0]);i.showSpinner(k);i.requestNavigateTo(i.app,l,"system-settings",null,function(o){l.jiveData=new JiveSiteData(i,i.app,{});l.jiveData.setGadgetMetaData(o)});i.emit("app.navigate.admin-settings");m.preventDefault()})}d("#j-app-svcs-settings").click(function(l){i.hideNav();var k={};var n="user-settings-view";var o=i.prepareDetail();i.setCurrentSettingsView(n);var m=new c(i.app,o);i.wireButtonListeners(m);m.addListener("app.preferences.get.custom.view",function(r){var p=o[0];var q=i.prepareSiteViewIfRequired(n,p);i.showSpinner(o);i.requestNavigateTo(i.app,q,"user-prefs",null,function(s){q.jiveData=new JiveSiteData(i,i.app,{});q.jiveData.setGadgetMetaData(s)})});m.addListener("app.preferences.default.saved",function(p){i.servicesClose();i.sendNotification({severity:"info",message:p.message});i.emit("app.reload")});i.emit("app.navigate.user-prefs");l.preventDefault()});d("#j-app-svcs-config").click(function(m){var k=i.prepareDetail();var n="app-service-config-view";i.setCurrentSettingsView(n);var l=new b({app:i.app,domTarget:k});i.wireButtonListeners(l);l.addListener("app.configure.success",function(){i.servicesClose();var o=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.success"});i.sendNotification({severity:"info",message:o});i.emit("app.reload")});l.addListener("app.configure.failed",function(){var o=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.failure"});i.sendNotification({severity:"error",message:o})});i.emit("app.navigate.configure");m.preventDefault()});d("#j-app-svcs-developer").click(function(m){i.hideNav();var n="app-developer-view";i.setCurrentSettingsView(n);var l=i.prepareDetail();var o=i.app;if(typeof(o.developerModel)=="undefined"){o.developerModel=new jive.JAF.Configuration.DeveloperModel()}var k=new jive.JAF.Configuration.Developer({app:o,domTarget:l});i.emit("app.navigate.developer");m.preventDefault()});d("#j-app-svcs-about").click(function(o){var p="app-about-view";if(i.currentView==p){return}i.hideNav();var l=i.prepareDetail();i.setCurrentSettingsView(p);var m=i.prepareSiteViewIfRequired(p,l[0]);if(i.app.aboutViewAvailable){i.requestNavigateTo(i.app,m,"about",null,function(r){m.jiveData=new JiveSiteData(i,i.app,{});m.jiveData.setGadgetMetaData(r)})}else{var q={};if(i.app.appUUID){q.market={experience:"about"};q.market.appUUID=i.app.appUUID}else{q.market={experience:"default"}}var k=i.prepareMarketContext(q);var n=i.getEmbeddedContext(k.embeddedID);n.target.view="embedded";i.renderAppEE_(l[0],i.marketApp,n,function(s,r){aboutSite=s;aboutSite.jiveData=new JiveSiteData(i,i.marketApp,{});aboutSite.jiveData.setEEContext(n);aboutSite.jiveData.setGadgetMetaData(r);var t=l.find("iframe");t.removeData();if(i.marketApp.marketFeatureAvailable){t.data("hasMarketFeature",true)}t.css({height:"500px",width:"450px"})})}i.emit("app.navigate.about");o.preventDefault()});var j=function(k){i.servicesClose();k.preventDefault()};d(".j-modal-back-top").click(j);d("#j-app-services-cancel").click(j)};e.servicesClose=function(i){this.setCurrentSettingsView(null);this.emit("app.services.close")};this.setCurrentSettingsView=function(i){if(this.currentView!=i){if(this.serviceSites[i]){this.commonContainer.closeGadget(this.serviceSites[i]);this.currentView=null;this.serviceSites[i]=null}}this.currentView=i};this.prepareSiteViewIfRequired=function(k,i){var j=this.serviceSites[k];if(j){return j}this.serviceSites[k]=this.commonContainer.newGadgetSite(i);this.currentView=k;return this.serviceSites[k]};this.requestNavigateTo=function(l,i,k,j,m){l.view=k;this.renderApp_(i,l,m,j)};e.showSpinner=function(i){var j=new jive.loader.LoaderView({size:"small",inline:true});j.appendTo(d(i));j.show()}})});
;
define("jive.JAF.CoreContainer.TokenProvider",function(){return jive.oo.Class.extend(function(b){jive.conc.observable(this);var e=null;var d=10000;var c=5;var a=0;this.init=function(f){this.model=f};this.updateContainerSecurityToken=function(){var g=this;a++;if(e!=null){window.clearTimeout(e);e=null}var f=g.model.getContainerSecurityToken();f.addCallback(function(j){if(j&&j.token){var h=j.token;shindig.auth.updateSecurityToken(h);var i=d;if(j.ttl){i=j.ttl*1000}a=0;g.emit("container.token.refreshed",j);e=window.setTimeout(g.updateContainerSecurityToken.bind(g),i*0.9)}else{this.handleFailSecurityTokenUpdate_()}}.bind(g)).addErrback(function(h){this.handleFailSecurityTokenUpdate_()}.bind(g))};this.handleFailSecurityTokenUpdate_=function(){var f=this;if(console){console.log("Fail to update container security token")}if(a<c){if(console){console.log("Will try to update container security token later.")}e=window.setTimeout(f.updateContainerSecurityToken.bind(f),d)}else{if(console){console.log("Max number of tries to update container security token has expired.")}a=0;f.emit("container.token.refreshed","")}};this.getSecurityToken=function(){return shindig.auth.getSecurityToken()}})});
;
jive.namespace("JAF.CoreContainer");define("jive.JAF.CoreContainer.AppsContainerModel",["jive.JAF.CoreContainer.TokenProvider"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);var d={};var c;this.init=function(e,f){c=this;this.commonContainer=e;this.options=f;this.tokenProvider=new a(c);this.tokenProvider.updateContainerSecurityToken();this.tokenProvider.addListener("container.token.refreshed",function(h){var g=false;if(h.anonymous){g=true}c.emit("container.token.refreshed",g)})};this.getApp=function(l,e){var k=d[l];var h;var j=new jive.conc.Promise();var f=this;if(k&&!k.outdated){j.emitSuccess(k)}else{var i=function(m){k=f.cacheApp(m,false,l);j.emitSuccess(k)};var g=function(p){var m=null;if(p.status==404){try{var n=JSON.parse(p.responseText);if(n.appUUID){m=k=f.cacheApp(n,true)}}catch(o){}}j.emitError(m)};if(e){h=jive.api.apps("instances/appinstance");$j.ajax({url:h+"/"+e,contentType:"application/json",dataType:"json",type:"GET",cache:false,success:i,error:g})}else{if(l){h=jive.api.apps("instances/my");$j.ajax({url:h+"/"+l,contentType:"application/json",dataType:"json",type:"GET",cache:false,success:i,error:g})}}}return j};this.getContainerSecurityToken=function(){var e=jive.api.apps("containersecuritytoken");var f=new jive.conc.Promise();$j.ajax({url:e,contentType:"application/json",dataType:"json",type:"GET",cache:false,success:function(g){f.emitSuccess(g)},error:function(g){f.emitError(g.status)}});return f};this.getAppsMarketApp=function(){var h=d.market;var f;var g=new jive.conc.Promise();var e=this;if(h){g.emitSuccess(h)}else{f=jive.api.apps("instances/market");$j.ajax({url:f,contentType:"application/json",dataType:"json",type:"GET",cache:false,success:function(i){h=e.cacheApp(i,true);g.emitSuccess(h)},error:function(i){g.emitError()}})}return g};this.cacheApp=function(h,f,g){h.appURL=h.src?decodeURIComponent(h.src).match(/url=(.*?)&/)[1]:null;var e=h.src?decodeURIComponent(h.src).match(/nocache=([01]{1})&/)[1]:"0";if(e==="1"){h.nocache=true}else{h.nocache=false}g=f?"market":(g?g:h.appUUID);h=d[g]=d[g]?$j.extend(d[g],h):h;delete h.outdated;return h};this.deleteApp=function(f,e,g){e=e||function(){};g=g||function(){};var h=jive.api.apps("instances/instance/"+f);$j.ajax({url:h,contentType:"application/json",dataType:"json",type:"DELETE",success:e,error:g})};this.refreshApp=function(g,e,f){e=e||function(){};f=f||function(){};$j.ajax({url:g,dataType:"json",type:"POST",success:e,error:f})};this.appRemove=function(g,h,e,f){e=e||function(){};f=f||function(){};$j.ajax({type:"PUT",url:jive.api.apps("instances/"+g+"/"+h),success:e,error:f})};this.acknowledgeThrottle=function(g,e,f){e=e||function(){};f=f||function(){};$j.ajax({type:"PUT",url:jive.api.apps("instances/throttle/violation/"+g),success:e,error:f})};this.appHide=function(g,e,f){e=e||function(){};f=f||function(){};$j.ajax({type:"PUT",url:jive.api.apps("instances/hide/"+g),success:e,error:f})}})});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.apps=="undefined"){jive.nav.menu.apps={}}if(typeof jive.nav.menu.apps.instances=="undefined"){jive.nav.menu.apps.instances={}}jive.nav.menu.apps.instances.content=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-pop-row"><h2 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.subTitle"),[])),'</h2></div><div id="j-quick-launch-apps">');if(A!=null&&A.links&&A.links.length>0){B.append('<ul id="j-quick-launch-apps-list" class="clearfix ');jive.nav.menu.apps.instances.computeWidthIcon__Cce8({count:A.links.length},B);B.append('">');var E=A.links;var F=E.length;for(var D=0;D<F;D++){var C=E[D];jive.nav.menu.apps.instances.renderAppInstanceLink({appUUID:C.appUUID,url:C.url,largeIconSrc:C.largeIconSrc,smallIconSrc:C.iconSrc,iconSize:A.links.length<=9?128:48,title:C.displayTitle,blockedAppInstance:C.blockedAppInstance},B)}B.append("</ul>")}else{B.append('<div class="j-no-apps-installed j-empty-view"><div class="j-empty-container"><div class="j-ui-elem jive-icon-appsmarket"></div><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.name.plural.capitalized"),["Apps"])),'</h2><p class="font-color-meta"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.no.apps"),["There are currently no apps installed."])),'</strong></p><div class="j-divider"></div><p>');jive.shared.soy.i18nHelper({i18nKey:"nav.bar.apps.market.no.apps.expound",arg0:'<a class="js-launch-app-market" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.catalog.title"),[]))+'<span class="j-ui-elem j-cta-arrow"></span></a>',noAutoEscape:true},B);B.append("</p></div></div>")}B.append('</div><div id="app-market-links" class="j-pop-row j-last"><ul id="j-app-market-nav" class="');jive.nav.menu.apps.instances.computeWidthIcon__Cce8({count:A.links.length},B);B.append('"><li><a id="app-launch-your-apps" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.manage.title"),[])),'</a></li><li><a id="app-launch-market" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.apps.market.catalog.title"),[])),"</a></li></ul></div>");return G?"":B.toString()};jive.nav.menu.apps.instances.computeWidthIcon=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count==0)?"app-list-cols-0 app-list-lg-icon":(A.count==1)?"app-list-cols-1 app-list-lg-icon":(A.count<=4)?"app-list-cols-2 app-list-lg-icon":(A.count<=9)?"app-list-cols-3 app-list-lg-icon":(A.count<=16)?"app-list-cols-4 app-list-sm-icon":(A.count<=25)?"app-list-cols-5 app-list-sm-icon":"app-list-cols-6 app-list-sm-icon");return C?"":B.toString()};jive.nav.menu.apps.instances.renderAppInstanceLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-quick-launch-app-item"><a ',(A.appUUID)?'id="app-ql-'+soy.$$escapeHtmlAttribute(A.appUUID)+'"':"",' href="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.url)),'" ',(A.blockedAppInstance)?'class="j-quick-launch-app-warn-alert"':"",'><img src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.iconSize==48?A.smallIconSrc:A.largeIconSrc)),'" width="',soy.$$escapeHtmlAttribute(A.iconSize?A.iconSize:"128"),'" height="',soy.$$escapeHtmlAttribute(A.iconSize?A.iconSize:"128"),'" class="js-app-icon"/><div class="j-app-title">',(A.blockedAppInstance)?'<span class="jive-icon-med  jive-icon-warn"></span>':"",soy.$$escapeHtml(A.title),"</div></a></li>");return C?"":B.toString()};jive.nav.menu.apps.instances.computeWidthIcon__Cce8=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count==0)?"app-list-cols-0 app-list-lg-icon":(A.count==1)?"app-list-cols-1 app-list-lg-icon":(A.count<=4)?"app-list-cols-2 app-list-lg-icon":(A.count<=9)?"app-list-cols-3 app-list-lg-icon":(A.count<=16)?"app-list-cols-4 app-list-sm-icon":(A.count<=25)?"app-list-cols-5 app-list-sm-icon":"app-list-cols-6 app-list-sm-icon");return C?"":B.toString()}
;
jive.namespace("Apps");jive.AppMarketLaunch=$Class.extend({init:function(a){var b=this;this.appLaunchView=a.appLaunchView},showAppMarket:function(a){if(window.appContainer){window.appContainer.handleMarketContext(a)}},addApp:function(b){var a=$j(jive.nav.menu.apps.instances.renderAppInstanceLink({appLink:b}));this.appLaunchView.showLaunchPad();$j(this.appLaunchView.$menu).find("#j-quick-launch-apps-list").fadeIn(200).append(a)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}jive.nav.loading=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta-light j-menu-loading clearfix"><img src="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-image-loading.gif")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),'" /> <span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),"</span></p>");return C?"":B.toString()}
;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo["abstract"]=function(){};jive.oo._abstract=jive.oo["abstract"];
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.AbstractListView=jive.AbstractView.extend(function(a,b){this.init=function(d,f,e){var c=this;c.$menu=$j(f);c.$button=$j(d);c.menuOpts=e||{};c.popoverOpen=false;c.$button.click(function(g){if(!c.popoverOpen){c.$button.addClass("active");c.showSpinner();if(c.spinning){c.spinning=false;c.openPopover();c.spinning=true}c.emitP("toggle").addCallback(function(h){c.data=h||c.data;c.render(c.data);c.openPopover()}).always(function(){c.hideSpinner();var h=c.getContent();if(h&&h.length){jive.Accessibility.focusIn(h)}})}g.preventDefault()})};this.render=jive.oo._abstract;a.setContent=function(c,d){this.content=$j(c);if(this.popoverOpen){this.$menu.trigger("popover.html",[this.content,d])}else{this.$menu.children().remove();this.$menu.append(this.content);if(d){d()}}};this.getContent=function(){this.content=this.content||this.$menu.children();return this.content};this.close=function(){this.$menu.trigger("close")};a.createSpinner=function(){if(!this.popoverOpen){this.spinner=new jive.loader.LoaderView();this.setContent(this.spinner.getContent());this.openPopover()}else{b.createSpinner.call(this)}this.spinning=true};a.destroySpinner=function(){this.spinning=false;b.destroySpinner.call(this);if(this.spinner){this.spinner.destroy()}};a.openPopover=function(){var c=this;if(!c.popoverOpen&&!c.spinning){c.$button.addClass("active");c.$menu.popover($j.extend({context:c.$button,onClose:function(){c.$button.removeClass("active");c.popoverOpen=false},onLoad:function(){c.$menu.trigger("navbarPopoverLoad")}},c.menuOpts));c.popoverOpen=true}}});
;
(function(b){b.path={};var a={rotate:function(f,g){var e=g*3.141592654/180;var h=Math.cos(e),d=Math.sin(e);return[h*f[0]-d*f[1],d*f[0]+h*f[1]]},scale:function(c,d){return[d*c[0],d*c[1]]},add:function(d,c){return[d[0]+c[0],d[1]+c[1]]},minus:function(d,c){return[d[0]-c[0],d[1]-c[1]]}};b.path.bezier=function(g){g.start=b.extend({angle:0,length:0.3333},g.start);g.end=b.extend({angle:0,length:0.3333},g.end);this.p1=[g.start.x,g.start.y];this.p4=[g.end.x,g.end.y];var d=a.minus(this.p4,this.p1);var e=a.scale(d,g.start.length);e=a.rotate(e,g.start.angle);this.p2=a.add(this.p1,e);var c=a.scale(d,-1);var f=a.scale(c,g.end.length);f=a.rotate(f,g.end.angle);this.p3=a.add(this.p4,f);this.f1=function(h){return(h*h*h)};this.f2=function(h){return(3*h*h*(1-h))};this.f3=function(h){return(3*h*(1-h)*(1-h))};this.f4=function(h){return((1-h)*(1-h)*(1-h))};this.css=function(k){var i=this.f1(k),n=this.f2(k),l=this.f3(k),j=this.f4(k);var h=this.p1[0]*i+this.p2[0]*n+this.p3[0]*l+this.p4[0]*j;var m=this.p1[1]*i+this.p2[1]*n+this.p3[1]*l+this.p4[1]*j;return{top:m+"px",left:h+"px"}}};b.path.arc=function(d){for(var c in d){this[c]=d[c]}this.dir=this.dir||1;while(this.start>this.end&&this.dir>0){this.start-=360}while(this.start<this.end&&this.dir<0){this.start+=360}this.css=function(g){var f=this.start*(g)+this.end*(1-(g));f=f*3.1415927/180;var e=Math.sin(f)*this.radius+this.center[0];var h=Math.cos(f)*this.radius+this.center[1];return{top:h+"px",left:e+"px"}}};b.fx.step.path=function(e){var d=e.end.css(1-e.pos);for(var c in d){e.elem.style[c]=d[c]}}})(jQuery);
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.render=function(f){this.stripDomain(f);var e=b(jive.nav.menu.apps.instances.content({links:f}));this.$menu.html(e);var g=new jive.AppMarketLaunch({appLaunchView:this});window.appsMarketLaunchPad=g;var c=function(h){window.location=jive.app.url({path:"/apps/market"})};b(this.$menu).find("#app-launch-market").unbind("click").click(c);b(this.$menu).find(".js-launch-app-market").unbind("click").click(c);b(this.$menu).find("#app-launch-your-apps").unbind("click").click(function(h){window.location=jive.app.url({path:"/apps/market/yourApps"})});var d=this;jive.switchboard.addListener("at",function(i,h){d.animateInstall(i,h)})};this.showLaunchPad=function(){var c=this;c.$button.click()};this.toggleButton=function(d){var c=this;if(d>0){c.$button.show()}else{c.$button.hide()}};a.stripDomain=function(d){var e=/^https?:\/\/.+?\//;if(d&&d.length){for(var c=0;c<d.length;++c){d[c].url=d[c].url.replace(e,"/");d[c].iconSrc=d[c].iconSrc.replace(e,"/");d[c].largeIconSrc=d[c].largeIconSrc.replace(e,"/");d[c].favIconSrc=d[c].favIconSrc.replace(e,"/")}}}});
;
jive.AppInstanceSource=jive.RestService.extend(function(a){a.init=function(b){this.resourceType="instance";this.pluralizedResourceType="instances";this.RESOURCE_ENDPOINT=jive.api.apps(this.pluralizedResourceType)}});
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.Main=jive.oo.Class.extend(function(a){a.init=function(c,e,d){var b=this;this.initialized=false;this.listView=this.buildListView(c,e,d);this.itemSource=this.buildItemSource();this.listView.addListener("toggle",function(f){b.populate(f)})};a.populate=function(c){var b=this;if(!b.initialized){if(b.itemSource!=null){b.itemSource.findAll(b.sourceParams()).addCallback(function(d){c.emitSuccess(d);b.initialized=true})}else{c.emitSuccess({});b.initialized=true}}else{c.emitSuccess()}return c};a.invalidate=function(){this.initialized=false};a.sourceParams=function(){return{}};a.buildListView=jive.oo._abstract;a.buildItemSource=jive.oo._abstract});
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.Main=jive.Navbar.Menu.Main.extend(function(a,c){var b=jive.Navbar.Menu.Apps.Instances;this.init=function(e,g,f){c.init.call(this,e,g,f);var d=this;if(window.appContainer){window.appContainer.getMarketEvents().addListener("app_install",function(k,o){var n=o&&o.offset();if($j.isArray(k)){for(var m=0,j=k.length;m<j;++m){h(k[m])}}else{h(k)}function h(i){jive.Navbar.Menu.Apps.animatedInstall(i,n).addErrback(function(){d.invalidate();var l=jive.apps.container.renderMessage({messageKey:"appframework.app.installed"});$j("<p/>").html(l).message({style:"info"})})}});window.appContainer.getMarketEvents().addListener("show_app_detail",function(h){if(h&&h.appUUID){var i=jive.app.url({path:"/apps/market/marketapp/"})+h.appUUID;window.open(i)}})}jive.switchboard.addListener("apps_market.apps_have_changed",function(){d.invalidate()})};this.buildListView=function(d,f,e){return new b.ListView(d,f,e)};this.buildItemSource=function(){return new jive.AppInstanceSource()};a.sourceParams=function(){return{ts:new Date().getTime()}}});
;
jive.namespace("Navbar.Menu.Apps");jive.Navbar.Menu.Apps.InstallAnimation=jive.oo.Class.extend(function(a){var e=jQuery;var f=new jive.conc.Promise();var d="";var c={initialDelay:500,delayAfterPlacedInLauncher:250,targetSlide:750,iconSweep:2500,multiInstallDelay:333,showMarkers:false,showDouble:false};jive.conc.observable(this);this.init=function(){this._animationQueue=[];this._active=-1;this._animationRunning=false};this.getPromise=function(){return f};a.begin=function(){var g=this;g.emitP("begin").addCallback(function(i){if(i&&i.length>0){g.stripDomain(i);var h=g.showTarget(i);if(h){window.setTimeout(function(){g.animate()},c.initialDelay)}else{g._animationQueue.length=0;g.addToQueue("--last-item--");g.hideTarget()}}else{g._animationQueue.length=0;g.end(false)}}).addErrback(function(){g._animationQueue.length=0;g.end(false)})};a.stripDomain=function(h){var j=/^https?:\/\/.+?\//;if(h&&h.length){for(var g=0;g<h.length;++g){h[g].url=h[g].url.replace(j,"/");h[g].iconSrc=h[g].iconSrc.replace(j,"/");h[g].largeIconSrc=h[g].largeIconSrc.replace(j,"/");h[g].favIconSrc=h[g].favIconSrc.replace(j,"/")}}};a.showTarget=function(E){var v=this;var z=$j("<div/>").css({position:"absolute",width:"100%",top:"0",left:"0",visibility:"hidden","z-index":"9999"}).html($j("#j-header-wrap").clone());z.find("#j-header-wrap").removeAttr("id");z.appendTo($j("body"));z.delegate("*","click",function(i){i.preventDefault()});var o=z.find("#appsQuickLaunchLink").addClass("active");var r=o.offset().top+o.outerHeight();var u=$j(document).scrollTop();var x=z.outerHeight();var C=u-x-40;var D=$j("<div/>").addClass("j-pop").css({position:"absolute",top:"0",left:"0",visibility:"hidden","z-index":"9999"}).append($j("<div/>").addClass("j-quick-menu j-pop-main").attr("id","animatedAppQuickLaunchMenu").html($j(jive.nav.menu.apps.instances.content({links:E}))));D.append($j("<span/>").addClass("belowArrow pointer"));D.insertBefore(z);D.delegate("*","click",function(i){i.preventDefault()});d=D.find(".app-list-sm-icon").length?"app-list-sm-icon":"app-list-lg-icon";var g=$j(document).scrollTop()+r+8+3;var l=D.outerHeight();var B=g-l-r-40;var s=o.offset().left+o.outerWidth()/2;var k=D.outerWidth();var w=Math.max(s-k/2,96);D.find("> .pointer").css("left",(s-w-9)+"px");var t=window.setTimeout(function(){t=null;u=$j(document).scrollTop();C=Math.max(u-x-40,($j("body > .jive-modal").length==0)?0:-9999);z.css({top:C+"px",visibility:""});z.animate({top:u+"px"},c.targetSlide,"easeInOutSine",function(){v.emit("animation.show-header.end")});g=$j(document).scrollTop()+r+8+3;B=g-l-r-40;D.css({top:B+"px",left:w+"px",visibility:""});D.animate({top:g+"px"},c.targetSlide,"easeInOutSine",function(){v.emit("animation.show-target.end")})},c.initialDelay);var j=this.hideTarget;var A=this.resolveTarget;var h=this.addToQueue;this.hideTarget=function(){v.hideTarget=j;v.resolveTarget=A;if(t){window.clearTimeout(t);t=null;z.remove();D.remove();n.remove();v.end(false);return}C=Math.max(u-x-20,($j("body > .jive-modal").length==0)?0:-9999);z.animate({top:C+"px"},c.targetSlide,"easeInOutSine",function(){v.emit("animation.hide-header.end");z.remove();v.end(true)});D.animate({top:B+"px"},c.targetSlide,"easeInOutSine",function(){v.emit("animation.hide-target.end");D.remove()});n.remove()};this.resolveTarget=function(G){if(G.end.position&&G.end.position.resolved){return}G.end.element=D.find(G.end.selector);if(G.end.element.length){var H=G.end.element.offset();var J=G.end.element.find(".js-app-icon");G.end.size=J.innerWidth();if(G.start.size!=G.end.size){var F=G.start.element.find("img.js-app-icon");F.css("margin-top",((F.css("margin-top")||0)+(128-G.start.size)/2)+"px");var I=F.clone().attr("src",J.attr("src"));F.addClass("app-icon-1").css({width:G.start.size+"px",height:G.start.size+"px",opacity:"1","margin-left":(0-G.start.size)+"px"});I.addClass("app-icon-2").css({width:G.start.size+"px",height:G.start.size+"px",opacity:"0.001"});I.insertBefore(F);G.start.element.find(".app-icon-1").css({"margin-top":"-"+G.start.size+"px"})}if(c.showMarkers){jive.Navbar.Menu.Apps.InstallAnimation.rt(0,0).prependTo(G.end.element)}var i=v.getIconCenter(G.start.element);G.end.position={x:H.left+w,y:H.top+g,resolved:true};if(!G.start.position.resolved){G.start.position={x:G.start.position.x-i.left,y:G.start.position.y-i.top,resolved:true}}}};this.addToQueue=function(i){if(i==="--last-item--"){v.addToQueue=h;return}i.start.element.prependTo(n);this.resolveTarget(i);this._animationQueue.push(i);h.apply(this,arguments);i.start.element.css({top:i.start.position.y+"px",left:i.start.position.x+"px"})};var n=$j("<span/>").attr("id","__animation_appIconHolder").addClass("j-pop").addClass(d).css({position:"absolute",top:"0",left:"0"}).appendTo($j("body"));var m=0;for(var y=0;y<this._animationQueue.length;++y){var p=this._animationQueue[y];p.start.element.prependTo(n);this.resolveTarget(p);if(p.end.element.length){m++;p.start.element.css({top:p.start.position.y+"px",left:p.start.position.x+"px"});if(!c.showDouble){p.end.element.css({visibility:"hidden"})}}else{p.start.element.remove()}}this.emit("animation.app-icon.start");this._animationRunning=true;return m};a.hideTarget=function(){this.end(true)};a.resolveTarget=function(g){g.end.element=[]};a.addToQueue=function(g){this._animationQueue.push(g)};a.animate=function(){var k;do{k=this._animationQueue.shift();if(!k){this.addToQueue("--last-item--");return}}while(!k.end.element.length);this._active++;var j=this;window.setTimeout(function(){j.animate()},c.multiInstallDelay);var g={x:$j(window).width()/2+$j(document).scrollLeft(),y:$j(window).height()/2+$j(document).scrollTop()};function h(n,m,o){return{x:n.x+m,y:n.y+o}}k.start.element.delegate("*","click",function(m){m.preventDefault()});var i=[k.start.position,g,h(k.end.position,0,150),h(k.end.position,0,-32),k.end.position];var l={css:function(q){var p=1-q;var r=i.concat();while(r.length>1){for(var o=0,n=1,m=r.length;n<m;++o,++n){r[o]={x:Math.round(r[o].x*q+r[n].x*p),y:Math.round(r[o].y*q+r[n].y*p)}}r.length--}return{left:r[0].x+"px",top:r[0].y+"px"}}};k.start.element.animate({path:l},c.iconSweep,"easeOutSine",function(){function m(){k.start.element.remove();j._active--;if(j._active==0){j.emit("animation.app-icon.end");j.hideTarget()}}if(c.showDouble){k.end.element.css({visibility:""});window.setTimeout(m,c.delayAfterPlacedInLauncher);return}k.end.element.css({visibility:"",opacity:"0.001"});k.end.element.animate({opacity:"1"},Math.round(c.delayAfterPlacedInLauncher*0.333),"easeInOutSine");k.start.element.animate({opacity:"0"},Math.round(c.delayAfterPlacedInLauncher),"easeInOutSine",m)});if(k.start.size!=k.end.size){k.start.element.find(".app-icon-1").animate({opacity:"0.001",width:k.end.size+"px",height:k.end.size+"px","margin-top":"-"+k.end.size+"px"},c.iconSweep,"easeOutCubic");k.start.element.find(".app-icon-2").animate({opacity:"1",width:k.end.size+"px",height:k.end.size+"px"},c.iconSweep,"easeOutCubic");k.start.element.find(".app-icon-2, .j-app-title").animate({opacity:"1"},c.iconSweep)}else{k.start.element.find(".j-app-title").animate({opacity:"1"},c.iconSweep)}};a.end=function(g){if(g){f.emitSuccess()}else{f.emitError()}if(this._animationQueue.length){f=new jive.conc.Promise();this.begin()}else{this.emit("destroy");this._active=false}};function b(h){var g=h?/^(0|[1-9]\d*)(.\d+)?/.exec(h):null;return g?Number(g[0]):0}a.getIconCenter=function(g){var i=g.position();var h=g.find("img.js-app-icon");var k=h.position();var j={top:k.top-i.top+b(h.css("margin-top"))+h.innerHeight()/2,left:k.left-i.left+b(h.css("margin-left"))+h.innerWidth()/2};console.log("getIconCenter(ele,ctr,box,child)",g,j,i,k);return j};this.install=function(g,j){var k=g.iconAnimationStart||{};switch(k.size||128){case 48:new Image().src=g.iconSrc;break;default:new Image().src=g.largeIconSrc;break;k.size=128}var h=$j(jive.nav.menu.apps.instances.renderAppInstanceLink({largeIconSrc:g.largeIconSrc,smallIconSrc:g.iconSrc,iconSize:k.size,url:"#",title:g.title})).css({position:"absolute","z-index":"9999"});h.find(".j-app-title").css({opacity:"0.001"});if(c.showMarkers){jive.Navbar.Menu.Apps.InstallAnimation.rt(0,0).prependTo(h)}j=j||{};j.left=j.left||$j(window).width()/2+$j(document).scrollLeft();j.top=j.top||$j(window).height()/2+$j(document).scrollTop();var i={start:{element:h,position:{x:j.left+(k.x||0),y:j.top+(k.y||0)},size:k.size},end:{selector:"li:has(#app-ql-"+g.appUUID+")"}};this.addToQueue(i);if(this._active==-1){this._active=0;this.begin()}};this.isAnimationRunning=function(){return this._animationRunning}});jive.Navbar.Menu.Apps.InstallAnimation.rt=function(a,d){var c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAADCmlDQ1BJQ0MgcHJvZmlsZQAAeNqt0GlQjHEABvDnv9vulrZjabElvaHI1eHckLZaybkU2uTYtrUVdl+7b7ZzVwnjGCvSUJFc44gkx0RRTBmZSnIMOUthjElNE40hHxiNj2b8Pj3zfHlmHoC9RxIUIGXZA7SO0QUvlsjD5REUrx5csAEAUCj1tEQmmwcAGq1Ghb8RoPsxCAA0jpMEBUjxbzhKWscAqADgE63SKwF0AVAbGJoBSCQAh6i1NAMQGoDD2rDFgQDJAFh8RpXAAECglk7UxapjGMpbLBZTkmhtlIoKTdQzqvV6KkSj1OporU7BqKIB/N4AAJsgLUMFK2I11AQvN/xn4fII6lfq+6ev66OM1238cyVgDwpe8IcMq0EjDZkoQDEq0YA36CCECIgr8SYSsogoyAaSTvaSo+QiuUUekGbSyRKwprIUrJ2sq6xWtpA9i53APsdusXCyCLPYY1HL4XPmccycRq6Iq+Ce5X7hSXlZvDZLseVuy1YrP6uDVt39lvS7Yi2yNlq38hfwS23cbfbb8myTbNvt1Hav7SPtnwrkgqb+q/q3DdAM+OqwReggPDFQPLBu0JrBGJwn8hU1ORqdhjvVDGGcKee6oSYXH5d3VL5r+DDhsMbhWSOWuTm7tboXjUwZNddjiMfn0dVj8scmjVs2foqno2evV5v3fZ+yCWcn5k0yT946xTg1UWzwNUxLmm6asc0vc+Zh/3OSmwEPAz9KObNcg/1nK0K2zCmc+2g+WeC5cLUsa1FNKDts5pLUpTfCiXx2ROby5yvGrExZVa9wjzIpn6nEa3LUP2JVcXXrfNef1jrRZh1Xv4n5vjHV0JuYkcxPyTaOMF1KC05/kRG/VbCtaLtsR9eu3N1Sc0dmwb7Q/ZbZFQeSc8S5PYfK8zcXzD8mOv7+5LVT5jPqwoDzLhdQ3FJSc7nk6pFS8/X0csNNbWXc7ZiquDuau/H3TLW76vMaLjRWP3r15Nszx+czXka93tF8+e3bd8IPcz6mfSpr7+n07TJ2V/XYfYv8Xtjb+xNi+gXqNdAgEAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wDFxEhNwqAGqkAAAKVSURBVDjLfdRfaNVlGAfwz++4tmlj5YqNDNNtOJfTFsPmtFMiGPRHkklIkVEX7SK6UbIuKhiYQs4KpYskuoiobmLreBFkBzZT52ReSI6YXXShjmyRom6CnXP2e7s4v532j5735vk+z/vlfXmf7/ddZOFYY69r/lyotWgOrlCn1Q6d0uo1KFeQMzVzSzSL0OQFWyx12qRH/KpC2oQBvUYXOi9ll+O+8DhYbp9VYKOjsl5TNp+wV9aOEn5At/oS2ua4d+eSXpHVkeQP2qPXb09nGt+yMqm1+dHrMwnNsrYnebfLJgUhhDAZxuxP6s/ot3aaUKnb0ST/Tk4oriRybZmkd8R+i6cv0m89+EBOLJ5BiUMc8j4C65yyvEh5yiCoNyaIBbEJf4dbIQ4hxCGEP7SAAc+LUiLtToCX1CASXNTlUS8bEUSo6dwJ+rWT0miNG+rU6Ehuett7fvJsNOxtE0VNPLHBfercsFpjmS6tKlWb0oIgcsegV33i/uiIO6oFkSZ7xJo9rKvM91a5oE++M93XIEKF9iijVp91yhNRXfGNMs9ZIpNy1i+CERfvGfIPqHIgNC57X6WPVYO8YaNG5I0YIrJdf3HC4WryQnG46arrppIXHLcJ/ODFopAfMqgZln4eCiEOcQghGadYrOCrZAjnpnW3xEGHilY4MBAKxRGWRlow5C6wz2FVSqIb8GRR0Wu/DOMhn5xS8JdvlYMOP9sw02i7HUv8QfrDw5+ddMlpn9qS1Or1eWe2hxc7KGNjCa/Qo6mEHtPrkLtne7/gjFpvavC7m7hXqwuuYZnd3nBCj9vzvZ+y3i6bjMnK2eyMYKuVzvra8H9fRjTH0FVqpbVp1uCSUeedMp4o7X8iJdKiR5tIan77XzJSAOFH3IwfAAAAAElFTkSuQmCC";var b=$j("<img/>").attr("src",c).css({position:"absolute",left:(a-12)+"px",top:(d-12)+"px",width:"25px",height:"25px"});return $j("<div/>").css({position:"relative",overflow:"visible","z-index":"10001",visibility:""}).append(b).appendTo($j("body"))};
;
jive.namespace("Navbar.Menu.Apps");(function(){var a=null;jive.Navbar.Menu.Apps.animatedInstall=function(c,f){var b=$j.browser.msie&&$j.browser.version<9;if(c.iconAnimationStart&&!b){if(!a){a=new jive.Navbar.Menu.Apps.InstallAnimation();var d=new jive.AppInstanceSource();a.addListener("begin",function(g){d.findAll({}).addCallback(function(h){g.emitSuccess(h)}).addErrback(function(){g.emitError()})});a.addListener("destroy",function(){a=null});a.offset=f}a.install(c,a.offset);return a.getPromise()}else{var e=new jive.conc.Promise();e.emitError();return e}};jive.Navbar.Menu.Apps.whenAnimationStarts=function(){var b=new jive.conc.Promise();if(a&&!a.isAnimationRunning()){a.addListener("animation.app-icon.start",function(){b.emitSuccess();jive.switchboard.emit("app.install.animation.started")})}else{b.emitError()}return b};jive.Navbar.Menu.Apps.whenAnimationEnds=function(){var b=new jive.conc.Promise();if(a){a.addListener("destroy",function(){b.emitSuccess();jive.switchboard.emit("app.install.animation.ended")})}else{b.emitError()}return b}})();
;
define("jive.JAF.CoreContainer.MarketEvents",function(){return jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(){var b=this;this.addListener("market_hidden",this.marketClose.bind(this));this.addListener("app_install",this.appInstall.bind(this));this.addListener("app_uninstall",this.appUninstall.bind(this))};a.marketClose=function(){};a.appInstall=function(d,c,b){jive.switchboard.emit("apps_market.apps_have_changed")};a.appUninstall=function(c,d,b){jive.switchboard.emit("apps_market.apps_have_changed")}})});
;
define("jive.JAF.CoreContainer.CommentProvider",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);var c={type:"osapi.jive.core.Comment"};var d={type:"osapi.jive.core.Message"};b.listeningForActivityStreamsForms=false;b.listeningForInboxForms=false;this.init=function(){this.commentContext=null;this.activityStreamContext=null};this.getCommentContext=function(){return this.commentContext};this.getActivityStreamContext=function(){return this.activityStreamContext};this.getInboxEntryContext=function(){return this.activityStreamContext};this.addListeners=function(){var m=this;m.commentContext=null;var k=function(o){var n={content:{}};a.extend(n.content,o,c);if(n.content.inReplyTo){a.extend(n.content.inReplyTo,c)}return n};var i=function(n){m.commentContext=k(n)};var f=function(o){var n={content:{}};a.extend(n.content,{id:0},d);if(o.isReply){a.extend(n.content,{inReplyTo:{id:o.parentMessageId}});n.content.parent=o.parent}if(n.content.inReplyTo){a.extend(n.content.inReplyTo,d)}return n};var e=function(n){m.commentContext=f(n)};var g=function(n){var o="osapi.jive.core.Unsupported("+n+")";switch(n){case 2:case"2":o="osapi.jive.core.Discussion";break;case 38:case"38":o="osapi.jive.core.Post";break;case 102:case"102":o="osapi.jive.core.Document";break;case 105:case"105":o="osapi.jive.core.Comment";break}return o};var l=function(o){m.init();var n;switch(o.objectType){case"2":n=f({discussionId:o.parent.jiveObject.id,parentMessageId:o.objectID,isReply:true,parent:{id:o.parent.jiveObject.threadID,type:g(o.objectType)}});break;case"18":n=k({id:0,parent:{id:o.parent.jiveObject.id,type:g(o.objectType)}});break;case"38":n=k({id:0,parent:{id:o.parent.jiveObject.id,type:g(o.objectType)}});break;case"102":n=k({id:0,parent:{id:o.parent.jiveObject.id,type:g(o.objectType)}});break;case"105":n=k({id:0,inReplyTo:{id:o.objectID,type:g(o.objectType)},parent:{id:o.parent.jiveObject.id,type:g(o.parent.jiveObject.objectType)}});break}m.activityStreamContext=n};if(jive.CommentApp&&jive.CommentApp.comments){jive.CommentApp.comments.addCommentListViewListener("createComment",i);jive.CommentApp.comments.addCommentListViewListener("editComment",i);jive.CommentApp.comments.addCommentListViewListener("replyComment",i);jive.CommentApp.comments.addCommentListViewListener("formClosed",function(n){m.commentContext=null})}if(jive.DiscussionApp&&jive.DiscussionApp.instance){jive.DiscussionApp.instance.addDiscussionListViewListener("formReady",e)}function j(){if(!m.listeningForActivityStreamsForms){if(jive.ActivityStreamApp&&jive.ActivityStreamApp.instance){jive.ActivityStreamApp.instance.addActivityStreamListViewListener("formReady",l);m.listeningForActivityStreamsForms=true}}}jive.switchboard.addListener("activity.stream.controller.initialized",j);j();function h(){if(!m.listeningForInboxForms){if(jive.ActivityStream&&jive.ActivityStream.GlobalCommunicationStreamController){jive.ActivityStream.GlobalCommunicationStreamController.attachListEventListener("showRTE",function(n,o,p){l(n)});m.listeningForInboxForms=true}}}jive.switchboard.addListener("activity.communication.controller.initialized",h);h();if(jive.rte&&jive.rte.renderedContent){jive.rte.renderedContent.addListener("renderedContentWithSelector",function(n,o){m.emit("modifyRenderedContent",n,o)})}}})});
;
function JiveSiteData(b,c,a){return{mvcView:b,app:c,view:c.view,viewParams:a,getAppView:function(){return this.view},getActionInfo:function(){return this.actionInfo},setActionInfo:function(d){this.actionInfo=d},getGadgetMetaData:function(){return this.gadgetInfo},setGadgetMetaData:function(d){this.gadgetInfo=d},getEEContext:function(){return this.context},setEEContext:function(d){this.context=d;if(d&&d.target&&d.target.view){this.view=d.target.view}},getSelection:function(){return this.selection},setSelection:function(d){this.selection=d}}}JiveSiteData.get=function(b){var a=b[osapi.container.GadgetSite.RPC_ARG_KEY];return a.jiveData};
;
define("jive.JAF.CoreContainer.ModalView",["jquery","jive.JAF.CoreContainer.AppsContainerView","jive.JAF.Alerts.AlertMainV2","jive.JAF.CoreContainer.CommentProvider"],function(d,b,c,a){return b.extend(function(f,i){jive.conc.observable(this);var j={LINK:"app.link.run",RTE:"app.rte.run",CONTENT:"app.content.run"};var g;var e;var h={width:0,height:0};this.init=function(m,n){i.init.call(this,m,n);this.commentContext=null;this.activityStreamContext=null;this.modalCommentProvider=new a();var l=this;this.modalCommentProvider.addListener("modifyRenderedContent",function(o,p){l.modifyRenderedContent(o,p)});this.resizeToLatest=function(){if(h.width){l.resizeContainerWidth(h.width,false)}if(h.height){l.resizeContainerHeight(h.height,false)}};d(window).bind("resize",this.resizeToLatest);d(window).bind("scroll",function(){l.recenterModal(false)});var k=null;l.appFrame={css:function(o,q){var p=o;if(arguments.length=2){p={};p[o]=q}k=d.extend(k||{},p)},animate:function(o){k=d.extend(k||{},o)},applyCSS:function(o){o.css(k);k=null}}};f.handleAppAlert=function(l){var m=l.getActiveAlert();var k=this;k.hideChromeNav();d(".j-modal-back-top").hide();f.revokeStaticModalDimensions();if(m.code==1000||m.code==1010){this.handleConfigurationDialog(l,{configureCallback:function(n){k.restoreChromeNav();k.restoreStaticDimensions()}});k.recenterModal(false);return}l.applyBlock();k.recenterModal(false);f.setStaticDimensions(650,280,false);l.addListener("app.block",function(n){l.routeActionClicks(n,function(){k.handleConfigurationDialog(l)},function(){k.closeModal()},function(){k.closeModal();var o=jive.apps.container.renderMessage({messageKey:"error.general"});k.sendNotification({severity:"error",message:o})},k)})};this.documentReady=function(){var k=this;d('li[name="os-action-link"] a').click(function(m){var l=d(m.target).closest("li");k.handleCreateActionSelect(l,j.LINK);m.preventDefault()});this.modalCommentProvider.addListeners()};this.getCommentContext=function(){return this.modalCommentProvider.getCommentContext()};this.getActivityStreamContext=function(){return this.modalCommentProvider.getActivityStreamContext()};this.getInboxEntryContext=function(){return this.modalCommentProvider.getInboxEntryContext()};this.getActionOriginEnum=function(){return j};this.handleCreateActionSelect=function(m,l){var k=m;this.fireActionEvent(l,{actionId:k.attr("actionid"),appURL:k.attr("appURL"),appInstanceUUID:k.attr("appInstanceUUID"),appUUID:k.attr("appUUID"),label:d.trim(k.find("a span.label").text()),selectionType:k.attr("selectionType"),selectionID:k.attr("selectionID"),view:k.attr("view")})};this.handleEditActionSelect=function(l,k){this.fireActionEvent(k,l)};f.fireActionEvent=function(k,l){this.emit(k,l)};this.handleEmbeddedView=function(n,m,k){var l=n;this.emit(m,{appUUID:l.attr("__appuuid"),isDevelopment:l.hasClass("j-apps-developerApp"),label:d.trim(l.text()),context:JSON.parse(l.attr("__context")||"{}"),view:l.attr("__view"),url:l.attr("__url")||"",embeddedID:k})};this.filterTitle=function(k,m){var l=(m?m:h.width)/8-9;k=k.length>l?(k.substring(0,l)+" ..."):k;return k};this.resetTitle=function(m,l){if(!(this.fullTitle||m||e)){return}var k=this.fullTitle?this.fullTitle:this.getRealTitle(m?m:e.jiveData.app);k=this.filterTitle(k,l);this.setModalTitle(k)};this.render=function(u,l,B,t,k,o){var x=this;var p=t||function(){};var r=o||{};var s=(l&&l.embeddedID)?l.embeddedID:"";var m=x.getEmbeddedContext(s);var v=function(){x.resetTitle(u);var C=g.find(".jive-modal-content")[0];if(m&&m.target.type&&m.target.type==="embed"){var D=x.renderAppEE_(C,u,m,function(F,E){e=F;F.jiveData=new JiveSiteData(x,u,r);F.jiveData.setGadgetMetaData(E);F.jiveData.setActionInfo(l);F.jiveData.setEEContext(m);x.renderModalCallback(E,F,u,p);x.registerModalEventHandlers();if(n){x.recenterModal()}},r);if(!D){e=x.commonContainer.newGadgetSite(C);e.jiveData=new JiveSiteData(x,u,r);e.jiveData.setSelection(B);e.jiveData.setActionInfo(l);e.jiveData.setEEContext(m)}}else{e=x.commonContainer.newGadgetSite(C);e.jiveData=new JiveSiteData(x,u,r);e.jiveData.setSelection(B);e.jiveData.setActionInfo(l);x.renderApp_(e,u,function(E){e.jiveData.setGadgetMetaData(E);x.renderModalCallback(E,e,u,p);x.registerModalEventHandlers();if(n){x.recenterModal()}},r)}x.enableSparkline(u)};if(!g){this.html=d(jive.apps.container.chromeApp({app:u}));var A=this.html.find("#j-app-modal-parent");var w=u.view;if(m&&m.target){w=m.target.view?m.target.view:"embedded"}var q=this.computeAppDimensions(u,w);var z=q.width;var y=q.height;var n=true;if(z>0){n=false;A.css({width:(z+"px")})}if(y>0){n=false;A.css({height:(y+"px")})}h.height=q.isMaximum?"max":y;h.width=q.isMaximum?"max":z;g=this.html.lightbox_me({closeSelector:".close",destroyOnClose:true,centered:true,modalCSS:{top:"0px"},initialFocusSelector:"#jive-app-settings",onLoad:function(){jive.conc.nextTick(v.bind(x))},onClose:function(){g=null;x.closeApp_(true,true);x.rendered=false;if(typeof k==="function"){k()}}})}else{v();this.restoreStaticDimensions()}};this.setTitle=function(k){this.fullTitle=k;this.setModalTitle(this.filterTitle(k))};f.registerModalEventHandlers=function(){var k=this;if(d.browser.msie&&d.browser.version<8){k.appFrame.css({marginBottom:0})}d(".j-modal-gear-top").unbind("click").click(function(l){k.hideChromeNav();var m=d(l.currentTarget).attr("data-appuuid");k.emit("app.services.show",m);l.preventDefault()});d(".j-modal-refresh-top").unbind("click").click(function(l){k.emit("app.services.refresh",l.currentTarget);l.preventDefault()})};f.restoreChromeNav=function(){d(".j-modal-gear-top").show();d(".j-modal-refresh-top").show();d(".j-modal-back-top").hide();f.setSparklineVisibility(true)};f.hideChromeNav=function(){d(".j-modal-gear-top").hide();d(".j-modal-refresh-top").hide();d(".j-modal-back-top").show();f.setSparklineVisibility(false)};this.maximizeApp=function(){var k=this;this.resizeMax(false)};this.resizeMax=function(k){this.resizeContainerHeight("max",k);this.resizeContainerWidth("max",k)};this.getRenderedApp=function(){return e?e.jiveData.app:null};this.reload=function(l){if(!e){return}var k=e.jiveData;this.closeApp_(false,false);k.app.view=k.getAppView();this.render(k.app,k.getActionInfo(),k.getSelection(),function(m){l(m,k.getActionInfo())},null,k.viewParams)};this.closeModal=function(k){k=k||{};this.closeApp_(true,true);this.html.find(".close").click();g=null;this.rendered=false;if(typeof(k.navigateTo)!="undefined"){var l=k.navigateTo;if(!(/^http(s)?\:\/\//i.test(l))){if(!l.startsWith("/")){l="/"+l}if(!l.startsWith(window._jive_base_url)){l=window._jive_base_url+l}}window.location.href=l}};this.closeApp_=function(k,l){if(k){this.emit("app.chrome.close")}if(e){this.commonContainer.closeGadget(e)}e=null;if(l){this.html.find("#j-app-modal-parent").css({width:"",height:""});h={width:0,height:0};this.appStaticDimensions=null;this.notPrimary=false;this.fullTitle=null}};f.getChromeHeight=function(){if(!this.rendered){return 43}var k=this.html.outerHeight();var l=this.appFrame.height();return k-l};f.getChromeWidth=function(){if(!this.rendered){return 10}var l=this.html.outerWidth();var k=this.appFrame.width();return l-k};this.getMaximumHeight=function(){return d(window).height()-f.getChromeHeight()};this.getMaximumWidth=function(){return d(window).width()-f.getChromeWidth()};this.resizeContainerHeight=function(p,k){k=!(d.browser.msie&&d.browser.version<9)&&k;if(this.notPrimary){return}if(p!=="max"&&p<this.bounds.minHeight){p=this.bounds.minHeight}var l=d("#j-app-modal-parent iframe").height();if(l===p){return}if(p!=="max"&&p>this.bounds.maxHeight){p="max"}var n=f.getChromeHeight(),r=this.bounds.minHeight,q=this.getMaximumHeight();var o=p==="max";if(o){p=q}h.height=o?"max":p;var s=this;var m;k=k&&p<(q/2);if(k){d("#j-app-modal-parent")[k?"animate":"css"]({height:(p+"px")},{duration:100,queue:false});m=Math.min(Math.max(p,r),q);s.lastResizeTs=new Date().getTime();s.html.animate({position:"fixed",top:"50%",marginTop:d(s.html).outerHeight()/-2},{duration:100,queue:false});s.html.animate({marginTop:(m/-2)-n/2},{duration:100,queue:false});s.appFrame.animate({height:m},{duration:100,queue:false})}else{d("#j-app-modal-parent").css({height:(p+"px")});m=Math.min(Math.max(p,r),q);s.lastResizeTs=new Date().getTime();s.html.css({position:"fixed",top:"50%",marginTop:d(s.html).outerHeight()/-2});s.html.css({marginTop:(m/-2)-n/2});s.appFrame.css({height:m})}};this.resizeContainerWidth=function(r,l){l=!(d.browser.msie&&d.browser.version<9)&&l;if(this.notPrimary){return}if(r!=="max"&&r<this.bounds.minWidth){r=this.bounds.minWidth}var m=d("#j-app-modal-parent iframe").width();if(m===r){return}if(r!=="max"&&r>this.bounds.maxWidth){r="max"}var n=this.bounds.minWidth,p=this.getMaximumWidth();var o=r==="max";if(o){r=p}h.width=o?"max":r;var k=this;var q=d(k.html).outerWidth();if(l){d("#j-app-modal-parent")[l?"animate":"css"]({width:(r+"px")},{duration:100,queue:false});modalWidth=Math.min(Math.max(r,n),p);k.lastResizeTs=new Date().getTime();k.html.animate({position:"fixed",left:"50%",marginLeft:d(k.html).outerWidth()/-2},{duration:100,queue:false});k.html.animate({marginLeft:(modalWidth/-2)-4},{duration:100,queue:false});k.appFrame.animate({width:modalWidth},{duration:100,queue:false});k.resetTitle()}else{d("#j-app-modal-parent").css({width:(r+"px")});modalWidth=Math.min(Math.max(r,n),p);k.lastResizeTs=new Date().getTime();k.html.css({position:"fixed",left:"50%",marginLeft:q/-2});k.html.css({marginLeft:(modalWidth/-2)-4});k.appFrame.css({width:modalWidth});k.resetTitle()}};f.renderModalCallback=function(m,n,p,l){var k=this;var q=l||function(){};if(m.error){}else{var o=g.find("iframe");if(k.appFrame.applyCSS){k.appFrame.applyCSS(o)}k.appFrame=o;k.appFrame.removeData();if(p.marketFeatureAvailable){k.appFrame.data("hasMarketFeature",true);d(".j-modal-gear-top").hide()}if(p.actionHeight===9999&&p.actionWidth===9999){k.appFrame.css({height:k.getMaximumHeight(),width:k.getMaximumWidth});k.resetTitle()}else{if(p.actionHeight&&p.actionWidth){k.appFrame.css({height:k.boundedHeight(p.actionHeight?p.actionHeight:0),width:k.boundedWidth(p.actionWidth)})}}k.rendered=true;q.call(k,n)}};this.requestNavigateTo=function(q,k,m,l,r){var o=this;if(m.indexOf("canvas")==0){var n=q.url;if(m||l){var p=[];if(m){p.push(m)}else{p.push("canvas")}if(l&&Object.keys(l).length>0){p.push(JSON.stringify(l))}n+="#"+p.join(":")}window.location=n}else{q.view=m;k.jiveData=new JiveSiteData(o,q,l);this.renderApp_(k,q,function(s){o.renderModalCallback(s,k,q,r)},l)}};this.scrollIntoView=function(q,p){var l=p||{};var n=l.bottomOffset;var k=l.verticalAlignment==null?"bottom":l.verticalAlignment;var o=d("#"+q).parents(".js-app-chrome");var m;if(k==="top"){m=-8}else{if(k==="center"||k==="middle"){m=(20+o.height()-d(window).height())/2}else{if(isFinite(k)){m=Number(k)}else{n=isFinite(n)?Number(n):0;m=5-n+o.height()-d(window).height()}}}d.scrollTo(o,{duration:500,offset:{left:0,top:m}})};f.restoreAppIframe=function(){var k=this;this.html.find(".j-app-modal-content").remove();f.restoreStaticDimensions();d("#j-app-modal-parent iframe").css({display:"block"});this.recenterModal(false)};f.resizeModal=function(k,n,m){m=!(d.browser.msie&&d.browser.version<9)&&m;var l=this.html.find(".j-app-modal-content");this.html.css({position:"fixed",top:"50%",marginTop:this.html.outerHeight()/-2,left:"50%",marginLeft:this.html.outerWidth()/-2});this.html[m?"animate":"css"]({marginLeft:n/-2,marginTop:k/-2},{duration:300,queue:false});l[m?"animate":"css"]({width:n,height:k},{duration:300,queue:false})};f.recenterModal=function(k){f.recenter(d("#jive-modal-appAction"),k)};this.invokeSettings=function(k){var l=this;f.invokeNonPrimarySurface(l,function(){f.revokeStaticModalDimensions();l.hideChromeNav();d("#j-app-modal-parent iframe").css({display:"none"});var m=k.createUI();d("#j-app-modal-parent").append(m);l.resizeModal(550,600,false);l.resetTitle(null,500);k.activate()})};this.destroySettings=function(){this.notPrimary=false;this.restoreChromeNav();this.restoreAppIframe();this.resetTitle()};this.invokeCredentials=function(l){var k=this;f.invokeNonPrimarySurface(k,function(){k.hideChromeNav();f.revokeStaticModalDimensions();d("#j-app-modal-parent iframe").css({display:"none"});var m=l.createUI();d("#j-app-modal-parent").append(m);d(".j-modal-back-top").hide();k.resizeModal(200,540,true);k.resetTitle(null,480);l.activate()})};this.destroyCredentials=function(){this.notPrimary=false;this.restoreChromeNav();this.restoreAppIframe();this.resetTitle()};this.invokeOauthDance=function(l){var k=this;f.invokeNonPrimarySurface(k,function(){k.hideChromeNav();f.revokeStaticModalDimensions();d("#j-app-modal-parent iframe").css({display:"none"});d(".j-modal-back-top").hide();var q=l.getApp();var p=new c(q);var o={appTitle:q.title,code:2060,message:"",creator:"",errorMessage:"",iconSrc:q.iconSrc};var m=d("#j-app-modal-parent");var n=p.applyBlock(m,q,o);k.recenterModal(false);l.launch_popup(d(n));l.addListener("popup.closed",function(){d(n).remove();k.restoreChromeNav();k.restoreAppIframe();f.restoreStaticDimensions();k.notPrimary=false;l.invokeCallback()})})};f.invokeNonPrimarySurface=function(k,l){if(k.notPrimary){return false}k.notPrimary=true;f.delayedRunner(l,150,function(){var m=new Date().getTime();return(!k.lastResizeTs||m-k.lastResizeTs>300)})};f.setSparklineVisibility=function(k){var l=d(".j-app-sparkline");if(this.sparklineEnabled&&k){l.show()}else{l.hide()}};f.revokeStaticModalDimensions=function(k,m){k=!(d.browser.msie&&d.browser.version<9)&&k;var l=d("#j-app-modal-parent");this.appStaticDimensions={width:l.width()+"px",height:l.height()+"px"};l[k?"animate":"css"]({width:"",height:""},300,m||function(){})};f.restoreStaticDimensions=function(k,l){if(this.appStaticDimensions){f.setStaticDimensions(this.appStaticDimensions.width,this.appStaticDimensions.height,k)}};f.setStaticDimensions=function(m,k,l){l=!(d.browser.msie&&d.browser.version<9)&&l;var n=d("#j-app-modal-parent");if(l){n.animate({width:m,height:k},300,callback||function(){})}else{n.width(m).height(k)}};this.modifyRenderedContent=function(k,o){var m=this;d(document).off("click.embeddedAppArtifact").on("click.embeddedAppArtifact","a.jive_macro_appEmbeddedView",function(s){var r=d(this);var q=m.buildEmbedContext(r);var u=r.attr("__appuuid")||"";var t=r.attr("__action_id")||"";var p=r.attr("id")||String(Math.random());m.setEmbeddedContext(p,q);m.setEmbeddedContext("latest",q);if(u.length==36&&q.target&&q.target.type=="embed"){s.preventDefault();m.handleEmbeddedView(r,j.CONTENT,p)}});var l=this.getEmbeddedExperienceToShowOnLoad();if(l){var n=k.find(".jive_macro_appEmbeddedView").filter("#"+l);if(n.length>1){n=d(n[0])}if(n.length==1){jive.conc.nextTick(function(){n.click()})}}};f.getEmbeddedExperienceToShowOnLoad=function(){if(typeof this.embeddedExperienceToShowOnLoad==="undefined"){this.embeddedExperienceToShowOnLoad="";var k=/^#([a-zA-Z0-9_-]+)$/.exec(window.location.hash||"");if(!k){k=/[?&]ee=([a-zA-Z0-9_-]+)(&|$)/.exec(window.location.search)}this.embeddedExperienceToShowOnLoad=k?k[1]:null}return this.embeddedExperienceToShowOnLoad};f.buildEmbedContext=function(p){var k={};var q=p.attr("__view")||p.attr("__context")?"embed":p.attr("href")?"url":"none";switch(q){case"embed":var r=p.attr("__view")||"embedded";k.target={type:"embed",view:r};var o=p.attr("__context");if(o){k.target.context=JSON.parse(o)}break;case"url":k.target={type:"url",url:p.attr("href")};break}var n=p.hasClass("jive-link-app-preview")?"image":"text";switch(n){case"image":var l=p.find("> img");k.display={type:"image",previewImage:l.attr("src")};var m=l.attr("title");if(m){k.display.label=m}break;case"text":k.display={type:"text",label:p.text()||""};if(p.hasClass("jive-link-app-icon")){k.display.icon=p.attr("__icon")}break}k.actionId=p.attr("__action_id")||"";k.jive=JSON.parse(p.attr("data-jive-context")||"{}");return k};this.computeAppDimensions=function(p,l){var o=i.computeAppDimensions.call(this,p,l);var m=o.isMaximum,n=o.width,k=o.height;if(m){k=this.getMaximumHeight();n=this.getMaximumWidth()}else{if(n){n=this.boundedWidth(n)}if(k){k=this.boundedHeight(k)}}n=n<this.bounds.minWidth?this.bounds.minWidth:n;k=k<this.bounds.minHeight?this.bounds.minHeight:k;return{height:k,width:n,isMaximum:m}}})});
;
jive.namespace("JAF.CoreContainer");define("jive.JAF.CoreContainer.NavigateApp",function(){return jive.oo.Class.extend(function(a){var d={};var c=/(\/apps\/)([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/;var b=/(\/apps\/)([a-zA-Z0-9\/\-._]{1,120})/;this.init=function(e){};this.setCanvasToken=function(e){d=e};this.getCanvasToken=function(){return d};this.getCanvasAppInfoFromUrl=function(f){var g=f||window.location.pathname;var e=c.exec(g);if(e!==null){return e[2]}e=b.exec(g);if(e!=null){return e[2]}return null};this.addActionQueueItemToViewParams=function(f){var h=(typeof(f)!=="undefined"&&f!==null)?f:{};var g=/&aq=([1-9]\d*)/.exec(window.location.search+" "+window.location.hash);if(g){var e=g[1];h.jive_aq=e}return h}})});
;
jive.namespace("JAF.CoreContainer");define("jive.JAF.CoreContainer.Main",["jive.AppFileUploader","jive.JAF.Configuration.OAuthMain","jive.JAF.CoreContainer.AppCredentialsView","jive.JAF.CoreContainer.AppServicesView","jive.JAF.CoreContainer.AppsContainerModel","jive.JAF.CoreContainer.MarketEvents","jive.JAF.CoreContainer.ModalView","jive.JAF.Preferences.Model"],function(d,c,g,f,h,e,b,a){jive.JAF.CoreContainer.Main=jive.oo.Class.extend(function(i){jive.conc.observable(this);var k=jive.JAF.CoreContainer;var n={};var m={};var l=new e();var j=new jive.Apps.RteArtifacts();this.init=function(p){this.options=p=p||{};if((typeof osapi==="undefined")||(typeof osapi.container==="undefined")){return}this.initializeOpenSocialCommonContainer(p);this.modalView=new b(this.commonContainer,p);jQuery.extend(n,this.modalView.getActionOriginEnum());this.model=new h(this.commonContainer,p);this.rpcRegister();this.initializeEventHandlers();osapi=osapi||{};osapi.jive=osapi.jive||{};osapi.jive.corev3=osapi.jive.corev3||{};osapi.jive.corev3.extensions=osapi.jive.corev3.extensions||{};var o=[];osapi.jive.corev3.extensions.runWhenReady=function(q){o.push(q)};this.model.addListener("container.token.refreshed",function(q){for(var r=0;r<o.length;r++){jive.conc.nextTick(o[r])}delete osapi.jive.corev3.extensions.runWhenReady})};i.initializeOpenSocialCommonContainer=function(o){var p=osapi.container.util.newMetadataRequest;osapi.container.util.newMetadataRequest=function(q){var r=p(q);r.view=window.__METADATA_VIEW||"canvas";return r};this.commonContainer=new osapi.container.Container(this.createConfig(o));osapi.container.Service.prototype.getLanguage=function(){try{var q=_jive_locale;return q.split("_")[0]||"all"}catch(r){return"all"}};osapi.container.Service.prototype.getCountry=function(){try{var q=_jive_locale;return q.split("_")[1]||"ALL"}catch(r){return"ALL"}}};this.initEditContext=function(p){this.options.editedContentBean=p;var o=p.appContextBean;if(o){this.editContext={jive:{content:{type:o.coreAPIType,id:o.containerId<0?0:o.containerId}}}}};i.initializeEventHandlers=function(){var o=this;$j.each(n,function(q,p){o.modalView.addListener(p,function(r){o.handleRunAction(r,p)})});this.applyAppReloadHandlers(this.modalView);this.modalView.addListener("app.services.show",function(p){if(o.servicesView&&o.servicesView.isActive()){return}if(o.servicesView){delete o.servicesView}if(p){o.model.getApp(p).addCallback(function(q){o.servicesView=new f(q,o.commonContainer,o.options);o.servicesView.addListener("app.reload",function(){o.reloadApp()});o.model.getAppsMarketApp().addCallback(function(r){o.servicesView.setMarketApp(r);o.servicesView.addListener("app.services.close",function(){o.modalView.destroySettings();if(q.developerModel){o.modalView.setSparkline(q.developerModel.getMonitorState())}});o.modalView.invokeSettings(o.servicesView)})})}});this.modalView.addListener("app.chrome.close",function(){delete o.servicesView;if(o.credentialsView){o.credentialsView.cleanup();delete o.credentialsView}o.servicesView=null;o.credentialsView=null;o.oauthView=null});l.addListener("show_information",function(r,p,q){o.sendNotification(q,r)});l.addListener("app_install",function(t,r,s){var q=$j.isArray(t)?(t.length?t[0]:null):t;if(o.postInstallActionRun){var v=o.postInstallActionRun.actionInfo;var w=o.postInstallActionRun.origin;var x=function(){if(o.postInstallActionRun&&q&&v&&w&&q.appUUID===q.appUUID){delete o.postInstallActionRun;o.handleRunAction(v,w);o.postInstallActionRun=null}jive.switchboard.removeListener("app.install.animation.ended",x)};jive.switchboard.addListener("app.install.animation.ended",x);setTimeout(x,4250)}else{var p=s[osapi.container.GadgetSite.RPC_ARG_KEY];var u=p.jiveData.mvcView;o.model.cacheApp(q,false);u.handleAppsMarketInstall(q)}});o.applyAppAlertHandlers(o.modalView);o.applyOAuthHandlers(o.modalView);o.applyRefreshHandlers(o.modalView);o.applyCredentialsHandlers(o.modalView);$j(document).ready(function(){o.modalView.documentReady()})};i.applyAppReloadHandlers=function(q){var o=this;var p=function(){if(o.oauthView){delete o.oauthView}if(o.servicesView){delete o.servicesView}if(o.credentialsView){delete o.credentialsView}};q.addListener("app.reload",function(r){p();o.reloadApp(r)})};i.applyOAuthHandlers=function(p){var o=this;p.addListener("app.oauth.show",function(q){if(o.oauthView){return}o.oauthView=new c(q.app,q.options.alias,q.options.redirectURI,q.options.windowChars,q.callback);p.invokeOauthDance(o.oauthView);o.oauthView.addListener("popup.closed",function(){delete o.oauthView})})};i.applyRefreshHandlers=function(p){var o=this;p.addListener("app.services.refresh",function(q){var s=$j(q).attr("data-appuuid");var r=$j(q).attr("data-endpoint");o.model.refreshApp(r,function(){p.refresh()},function(){p.displayRefreshMsg(false)})})};i.applyCredentialsHandlers=function(p){var o=this;p.addListener("app.credentials.show",function(q){if(o.credentialsView){return}o.credentialsView=new g(q);p.invokeCredentials(o.credentialsView);o.credentialsView.addListener("app.credentials.complete.error",function(){p.closeModal()});o.credentialsView.addListener("app.credentials.complete.success",function(){p.destroyCredentials();delete o.credentialsView});o.credentialsView.addListener("app.service.message",function(r){p.sendNotification(r)})})};i.applyAppAlertHandlers=function(p){var o=this;p.addListener("app.remove.banned",function(s,q,r){o.model.appRemove("ban",s.id,q,r);jive.switchboard.emit("apps_market.apps_have_changed")});p.addListener("app.remove.blacklisted",function(s,q,r){o.model.appRemove("blacklist",s.id,q,r);jive.switchboard.emit("apps_market.apps_have_changed")});p.addListener("app.remove.throttle.violation",function(s,q,r){o.model.acknowledgeThrottle(s.id,function(){q();o.reloadApp(false)},r)});p.addListener("app.hide",function(s,q,r){o.model.appHide(s.id,q,r);jive.switchboard.emit("apps_market.apps_have_changed")});p.addListener("app.refresh",function(){o.reloadApp(false)});p.addListener("app.delete",function(s,q,r){o.model.deleteApp(s.appInstanceUUID,q,r);jive.switchboard.emit("apps_market.apps_have_changed")})};i.rpcRegister=function(){var o=this;this.commonContainer.rpcRegister("actions.bindAction",o.bindAction.bind(o));this.commonContainer.rpcRegister("maximize_app",o.maximizeApp.bind(o));this.commonContainer.rpcRegister("set_pref",o.setPref.bind(o));this.commonContainer.rpcRegister("set_title",o.setTitle.bind(o));this.commonContainer.rpcRegister("close_app",o.closeApp.bind(o));this.commonContainer.rpcRegister("editor_insert",o.editorInsert.bind(o));this.commonContainer.rpcRegister("send_notification",o.sendNotification.bind(o));this.commonContainer.rpcRegister("request_place_picker",o.initPlacePicker.bind(o));this.commonContainer.rpcRegister("request_user_picker",o.initUserPicker.bind(o));this.commonContainer.rpcRegister("requestNavigateTo",o.requestNavigateTo.bind(o));this.commonContainer.rpcRegister("request_upload_app_data_media_item",o.requestNavigateTo.bind(o));this.commonContainer.rpcRegister("request_core_api_upload",o.requestCoreApiUploadMediaItem.bind(o));this.commonContainer.rpcRegister("actions",this.router.bind(o));this.commonContainer.rpcRegister("resize_iframe",this.resizeContainerHeight.bind(o));this.commonContainer.rpcRegister("resize_iframe_width",this.resizeContainerWidth.bind(o));this.commonContainer.rpcRegister("scroll_into_view",this.scrollIntoView.bind(o));this.commonContainer.rpcRegister("get_canvas_dimensions",this.getCanvasDimensions.bind(o));this.commonContainer.rpcRegister("fire_market_events",this.fireMarketEvents.bind(o));this.commonContainer.rpcRegister("build_artifact_markup",this.buildArtifactMarkup.bind(o));this.commonContainer.rpcRegister("host_app_icon",this.uploadAppIcon.bind(o));this.commonContainer.rpcRegister("gather_oauth_credentials",o.gatherOAuthCredentials.bind(o));this.commonContainer.rpcRegister("halt_app",o.gatherCredentials.bind(o));this.commonContainer.rpcRegister("editing_finished",o.editingFinished.bind(o));this.commonContainer.rpcRegister("editing_canceled",o.editingCanceled.bind(o));this.commonContainer.rpcRegister("ee_gadget_rendered",this.eeGadgetRendered.bind(o));gadgets.rpc.registerDefault(function(p){})};this.initActionLinkContext=function(o){this.actionLinkContext={jive:{content:{type:o.coreAPIType,id:o.id}}}};this.renderCanvasView=function(p){var o=this;define(["jive.JAF.CoreContainer.CanvasView"],function(u){i.loadCanvasView(o,u);var r=null;if(p.viewParamsToken!==null){var t=p.viewParamsToken;if(t.view!==null){p.appInstanceView.view=t.view}if(t.params!==null){r=t.params}}if(p.isMarketApp){p.marketContext=o.buildMarketContext(p.appInstanceView,o.canvasView,p.marketInitialToken);p.marketContext=o.canvasView.getEmbeddedContext(p.marketContext.embeddedID);p.marketContext.target.view="default"}var s=shindig.auth.getSecurityToken();var q=function(v){if(!v){o.model.cacheApp(p.appInstanceView,p.isMarketApp);o.canvasView.render(p.appInstanceView,r,p.marketContext,function(w){})}else{window.location.reload()}};if(s){q(s)}else{o.model.addListener("container.token.refreshed",q)}})};i.loadCanvasView=function(o,p){if(typeof(o.canvasView)=="undefined"){o.canvasView=new p(o.commonContainer,{});jQuery.extend(n,o.canvasView.getActionOriginEnum());o.applyAppReloadHandlers(o.canvasView);o.applyAppAlertHandlers(o.canvasView);o.applyOAuthHandlers(o.canvasView);o.applyRefreshHandlers(o.canvasView);o.applyCredentialsHandlers(o.canvasView);o.canvasView.addListener("app.services.show",function(q){if(o.servicesView&&o.servicesView.isActive()){return}o.servicesView=new f(q,o.commonContainer,o.options);o.model.getAppsMarketApp().addCallback(function(r){o.servicesView.setMarketApp(r);o.canvasView.invokeSettings(o.servicesView,q);o.servicesView.addListener("app.services.close",function(){o.canvasView.destroySettings();if(q.developerModel){o.canvasView.setSparkline(q.developerModel.getMonitorState())}})});o.servicesView.addListener("app.reload",function(){o.reloadApp()})});o.canvasView.addListener("app.canvas.modal.close",function(){delete o.servicesView;if(o.credentialsView){o.credentialsView.cleanup();delete o.credentialsView}o.servicesView=null;o.credentialsView=null;o.oauthView=null})}};i.createConfig=function(p){p=p||{};var o={};o[osapi.container.ServiceConfig.API_PATH]=jive.app.url({path:"/gadgets/api/rpc"});if(typeof(window.__JAF_DEBUG)!=="undefined"&&window.__JAF_DEBUG===1){o[osapi.container.ContainerConfig.RENDER_DEBUG]=true}else{o[osapi.container.ContainerConfig.RENDER_DEBUG]=false}for(var q in osapi.container.ContainerConfig){if(osapi.container.ContainerConfig.hasOwnProperty(q)){if(p.hasOwnProperty(q)){o[q]=p[q]}}}return o};i.router=function(o,p){switch(p){case"bindAction":this.bindAction(o,o.a[1]);break;case"runAction":case"removeAction":case"getActionsByPath":case"getActionsByDataType":case"addShowActionListener":case"addHideActionListener":break}};i.bindAction=function(p,o){if(m[o.id]){var q={};q.actionId=o.id;q.selectionObj=this.commonContainer.selection.getSelection();gadgets.rpc.call(m[o.id],"actions",null,"runAction",q);delete m[o.id]}};i.handleRunAction=function(q,p){if(window._jive_current_user.anonymous||window._jive_current_user.partner){return}var o=this;delete this.postInstallActionRun;this.model.getApp(q.appUUID,q.appInstanceUUID).addCallback(function(r){o.preCacheAppResources(r);r.appURL=typeof(q.appURL)!=="undefined"?q.appURL:r.appURL;r.view=q.view;r.actionHeight=(r.heightByView&&r.heightByView[q.view])||r.height;r.actionWidth=(r.widthByView&&r.widthByView[q.view])||r.width;r.actionLabel=q.label;o.runAction(r,q,p)}).addErrback(function(r){if(r&&q&&q.appUUID){if(console){console.log("App URL passed to market:",q.url)}o.handleMarketContext({experience:"marketapp",appUUID:q.appUUID,embeddedID:q.embeddedID,isDevelopmentApp:q.isDevelopment||false,alternateUrl:q.url});o.postInstallActionRun={actionInfo:q,origin:p}}})};i.runAction=function(r,q,o){var p=this.setSelection(q,o);this.modalView.render(r,q,p,function(s){m[q.actionId]=s.getActiveGadgetHolder().getIframeId()})};i.setSelection=function(q,o){var p;switch(o){case n.CONTENT:break;case n.LINK:p=this.actionLinkContext;break;case n.RTE:p=this.determineContainerContext();p.jive.rte=this.determineRTEContext();if(q.currentArtifact){$j.extend(p,q.currentArtifact)}p.actionId=q.actionId;break}this.commonContainer.selection.setSelection(p);return p};i.determineContainerContext=function(){var q=$j.extend(true,{},this.editContext||this.actionLinkContext);if(jive.discussions&&jive.discussions.instance){q.jive.content.type="osapi.jive.core.Discussion";q.jive.content.id=jive.discussions.instance.getObjectId()}if(this.modalView.getCommentContext()!=null){q.jive.content=$j.extend(this.modalView.getCommentContext().content,{parent:q.jive.content})}else{if(this.modalView.getInboxEntryContext()!=null){q.jive.content=this.modalView.getInboxEntryContext().content}else{if(this.modalView.getActivityStreamContext()!=null){q.jive.content=this.modalView.getActivityStreamContext().content}else{if(jive.advancedComment&&jive.advancedComment.instance){var p=jive.advancedComment.instance.getAppContext();$j.extend(q.jive.content,{id:jive.advancedComment.instance.getObjectId(),parent:{id:p.containerId,type:p.coreAPIType},type:"osapi.jive.core.Message"});$j.extend(q.jive.content,function(r){return r?{inReplyTo:{id:r.id,type:"osapi.jive.core.Message"}}:{}}(jive.advancedComment.instance.getParent()))}else{var o=this.editContext?this.editContext.jive:undefined;o=o||this.actionLinkContext.jive;$j.extend(q.jive,o)}}}}return q};i.determineRTEContext=function(){return this.rteContext};i.maximizeApp=function(p){var o=p[osapi.container.GadgetSite.RPC_ARG_KEY];o.jiveData.mvcView.maximizeApp(o)};i.initPlacePicker=function(q,p){var o=q[osapi.container.GadgetSite.RPC_ARG_KEY];o.jiveData.mvcView.initPlacePicker(p,q.callback)};i.initUserPicker=function(q,p){var o=q[osapi.container.GadgetSite.RPC_ARG_KEY];o.jiveData.mvcView.initUserPicker(p,q.callback)};i.requestNavigateTo=function(q,o,r,s){var p=q[osapi.container.GadgetSite.RPC_ARG_KEY];p.jiveData.app.view=o;p.jiveData.mvcView.requestNavigateTo(p.jiveData.app,p,o,r,s)};i.gatherCredentials=function(q,p){var o=q[osapi.container.GadgetSite.RPC_ARG_KEY];var r=o.jiveData.app;o.jiveData.mvcView.emit("app.credentials.show",{app:r,callback:q.callback,args:p})};i.gatherOAuthCredentials=function(q,p){var o=q[osapi.container.GadgetSite.RPC_ARG_KEY];var r=o.jiveData.app;o.jiveData.mvcView.emit("app.oauth.show",{app:r,callback:q.callback,options:p})};i.requestCoreApiUpload=function(p,r,o,q){o=o||{};new d(this,r,o,q,p.callback)};i.requestCoreApiUploadMediaItem=function(p,r,o,q){this.requestCoreApiUpload(p,r,o,q)};i.setPref=function(p,u,q,r){var o=p[osapi.container.GadgetSite.RPC_ARG_KEY];var t=o.jiveData.app;var s=new a();s.setPref(t.instanceAppID,q,r)};i.setTitle=function(p,r){var o=p[osapi.container.GadgetSite.RPC_ARG_KEY];var q=o.jiveData.app;o.jiveData.mvcView.setTitle(r)};i.editingFinished=function(q,p){var o=q[osapi.container.GadgetSite.RPC_ARG_KEY];var r=o.jiveData.app;if(p&&p.message){o.jiveData.mvcView.emit("app.service.message",{message:p.message})}o.jiveData.mvcView.emit("app.services.close");this.reloadApp()};i.editingCanceled=function(q,p){var o=q[osapi.container.GadgetSite.RPC_ARG_KEY];var r=o.jiveData.app;if(p&&p.message){o.jiveData.mvcView.emit("app.service.message",{message:p.message})}o.jiveData.mvcView.emit("app.services.close")};i.scheduleModalClose=function(o,p){jive.conc.nextTick(function(){var q=function(){o.closeModal(p)};if(jive.Navbar.Menu.Apps.whenAnimationStarts){jive.Navbar.Menu.Apps.whenAnimationStarts().always(q)}else{q()}if(jive.Navbar.Menu.Apps.whenAnimationEnds){jive.Navbar.Menu.Apps.whenAnimationEnds()}})};i.editorInsert=function(s,r){var q=s[osapi.container.GadgetSite.RPC_ARG_KEY];var o=q.jiveData.mvcView;if(typeof(r.html)!=="undefined"&&this.appActionDataPromise){var p=new jive.Apps.RteArtifacts();p.makeArtifactURLsAbsolute(r,q.jiveData.app);this.appActionDataPromise.resolve(r,s,this.options.editedContentBean)}i.scheduleModalClose(o,r)};i.closeApp=function(s,r){var q=s[osapi.container.GadgetSite.RPC_ARG_KEY];var o=q.jiveData.mvcView;if(typeof(r.navigateTo)!=="undefined"){if(/^http(s)?\:\/\//i.test(r.navigateTo)){var t=gadgets.io.getProxyUrl().split("?")[0].replace(/\/gadgets\/proxy/,"");if(!r.navigateTo.startsWith(t)){console.error("Error: Unable to navigation to external URL: "+r.navigateTo);delete r.navigateTo}}}if(typeof(r.data||r.html)!=="undefined"&&this.appActionDataPromise){var p=new jive.Apps.RteArtifacts();p.makeArtifactURLsAbsolute(r.data,q.jiveData.app);this.appActionDataPromise.resolve(r.data,s,this.options.editedContentBean)}i.scheduleModalClose(o,r)};i.sendNotification=function(s,r){var q=s?s[osapi.container.GadgetSite.RPC_ARG_KEY]:null;r=r||{};if(typeof(r.message)!=="undefined"){if(typeof(r.severity)!=="undefined"){r.severity=r.severity.toLowerCase();if(!(r.severity in {error:1,info:1,success:1})){throw"Invalid severity: must be 'error', 'info' or 'success'"}}}if(q){var o=q.jiveData.mvcView;o.sendNotification(r)}else{r=r||{};var t=r.message;var p=r.severity||"info";if(typeof(t)!="undefined"){$j("<p/>").html(t).message({style:p})}}};this.reloadApp=function(o){var q=this;function p(){if(q.modalView){q.modalView.reload(function(s,t){m[t.actionId]=s.getActiveGadgetHolder().getIframeId()})}if(q.canvasView){q.canvasView.reload()}}if(o){p()}else{var r=this.modalView.getRenderedApp()||(this.canvasView&&this.canvasView.getRenderedApp());if(r){r.outdated=true;this.model.getApp(r.appUUID).addCallback(function(s){q.preCacheAppResources(s);p()})}}};this.preCacheAppResources=function(q){var o=q.appUUID;var p=encodeURIComponent(q.appURL);$j("body").append('<iframe src="'+jive.app.url({path:"/gadgets/concatresources"})+"?appId="+o+"&gadget="+p+'" width="1px" height="1px"></iframe>')};this.handleRTEActionSelect=function(q,o,p){this.appActionDataPromise=p;this.rteContext=o;this.modalView.handleCreateActionSelect(q,n.RTE)};this.handleRTEActionContextEdit=function(r,o,s,q){this.appActionDataPromise=q;this.rteContext=o;var p={actionId:r.id,appURL:r.appURL,appInstanceUUID:r.appInstanceUUID,appUUID:r.appUUID,label:r.label,selectionType:"",selectionID:"",view:r.view,currentArtifact:s};this.modalView.handleEditActionSelect(p,n.RTE)};this.handleMarketContext=function(s){var r=this;var q=null;this.appActionDataPromise=$j.Deferred();this.appActionDataPromise.done(function(v,u){if(v){q=$j("#"+u.f);r.fireMarketEventsImpl(v.events,q,u)}});var t=function(){l.emit("market_shown")};var p=function(){l.emit("market_hidden")};var o={};if(typeof s==="string"){o.initialToken=s}else{if(s){o=s}else{o={}}}r.model.getAppsMarketApp().addCallback(function(v){var u=r.buildMarketContext(v,r.modalView,s);r.modalView.render(v,u,null,t,p,o)})};this.buildMarketContext=function(t,s,p){var r=this.buildJiveContextForMarket(p);if(typeof p==="string"){this.hackInitialTokenIntoMarketContext(p,r.market)}var q=s.prepareMarketContext(r);if(p&&p.view){var o=s.getEmbeddedContext(q.embeddedID);if(o){o.target.view=p.view}}return q};this.getMarketEvents=function(){return l};i.buildJiveContextForMarket=function(p){var o=p&&p.embeddedID&&this.modalView.getEmbeddedContext(p.embeddedID);var q=(o&&o.jive)?$j.extend({},o.jive):{};q.market={experience:p.experience||"default"};if(p.appUUID){q.market.appUUID=p.appUUID}if(p.appFilter){q.market.appFilter=p.appFilter}if(p.appShortName){q.market.appShortName=p.appShortName}if(p.isDevelopmentApp){q.market.isDevelopmentApp=p.isDevelopmentApp}if(p.alternateUrl){q.market.alternateUrl=p.alternateUrl}return q};i.hackInitialTokenIntoMarketContext=function(r,q){var o=r.split(";");q.experience=o[0]||"default";for(var p=1;p<o.length;p++){var s=o[p].split("=",2);if(s[1]){if(s[0]=="uuid"){q.appUUID=s[1]}else{if(s[0]=="name"){q.appFilter=s[1]}}}}};this.removeAppFromPage=function(o){this.commonContainer.closeGadget(o)};i.eeGadgetRendered=function(q){var p=q[osapi.container.GadgetSite.RPC_ARG_KEY];if(p){var s=p.currentGadgetHolder_.renderParams_;var r=s.eeDataModel;return r?r.context:null}else{var o=this.modalView.getEmbeddedContext("latest");if(o){return o}else{return{}}}};i.resizeContainerHeight=function(q,o){var p=q[osapi.container.GadgetSite.RPC_ARG_KEY];if(!p){return}p.jiveData.mvcView.resizeContainerHeight(o,true,p)};i.resizeContainerWidth=function(p,q){var o=p[osapi.container.GadgetSite.RPC_ARG_KEY];if(!o){return}o.jiveData.mvcView.resizeContainerWidth(q,true);if(p.callback){p.callback.call()}};i.scrollIntoView=function(p){var o=p[osapi.container.GadgetSite.RPC_ARG_KEY];var r=p.f;var q=p.a[0]||{};o.jiveData.mvcView.scrollIntoView(r,q)};i.getCanvasDimensions=function(r){var q=$j(window);var p=q.width();var s=q.height();var t=$j("#"+r.f);var o=t.parents(".js-app-chrome");if(o.length){p-=(o.outerWidth()-t.innerWidth());s-=(o.outerHeight()-t.innerHeight())}r.callback({width:p,height:s})};i.ensureHasMarketFeature=function(o){if(!$j("#"+o).data("hasMarketFeature")){throw"Unauthorized call to market restricted RPC function"}};i.fireMarketEvents=function(o,p){this.ensureHasMarketFeature(o.f);if(p&&p.events){this.fireMarketEventsImpl(p.events,$j("#"+o.f),o)}};i.fireMarketEventsImpl=function(r,t,p){if(r&&r.length){for(var q=0,o=r.length;q<o;++q){var s=r[q];if(s&&s.eventName){l.emit(s.eventName,s.eventData,t,p)}}}};i.buildArtifactMarkup=function(p,o){j.buildArtifactMarkup(p,o)};i.uploadAppIcon=function(q,p){var o=q?q[osapi.container.GadgetSite.RPC_ARG_KEY]:null;var u=q.callback;var t=o.jiveData.app;var r=p.iconUrl;var s=j.uploadArtifactIcon(r,t.appInstanceUUID);s.addCallback(function(v){u(v)}).addErrback(function(v){if(console){console.log("error uploading "+r,v)}u()})}});return jive.JAF.CoreContainer.Main});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.apps=="undefined"){jive.apps={}}if(typeof jive.apps.container=="undefined"){jive.apps.container={}}jive.apps.container.appModalHeader=function(A,C){var B=C||new soy.StringBuilder();B.append('<header><h2><img class="j-app-fav-icon" src="',soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.app.favIconSrc)),'" /> <span class="js-app-title"><span class="js-app-title-main"></span></span></h2></header>');return C?"":B.toString()};jive.apps.container.chromeApp=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-pop jive-modal j-app-modal js-app-chrome" id="jive-modal-appAction"><!-- start chrome actions --><a id="jive-app-settings" href="#" data-appuuid="',soy.$$escapeHtmlAttribute(A.app.appUUID),'" class="j-modal-gear-top"><span class="jive-icon-med jive-icon-app-manage"></span></a>',(A.app.developerRefreshURL)?'<a href="#" data-appuuid="'+soy.$$escapeHtmlAttribute(A.app.appUUID)+'" data-endpoint="'+soy.$$escapeHtmlAttribute(A.app.developerRefreshURL)+'" class="j-modal-refresh-top"><span class="jive-icon-sml jive-glyph-refresh j-ui-elem"></span></a>':"",'<a href="#" data-appuuid="',soy.$$escapeHtmlAttribute(A.app.appUUID),'" class="j-modal-back-top"><span class="j-ui-elem"></span> Back</a><!-- end chrome actions -->');jive.apps.container.appModalHeader(A,B);B.append('<label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'"><span class="j-close-icon j-ui-elem" role="img"></span></a><div id="j-app-modal-parent" class="jive-modal-content j-pop-main"></div>',(A.app.developerRefreshURL)?'<div class="j-app-sparkline" style="display:none;"><img data-Id="" src="/api/throttle/usage/1402/'+soy.$$escapeHtmlAttribute(A.app.id)+'/sparkline.png?fg=ccf&amp;ts=0"/></div>':"","</div>");return C?"":B.toString()};jive.apps.container.canvasConfigurationModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-app-modal j-pop js-app-chrome" id="jive-canvas-modal">');jive.apps.container.appModalHeader(A,B);B.append('<label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'"><span class="j-close-icon j-ui-elem" role="img"></span></a><div id="j-app-modal-parent" class="jive-modal-content j-pop-main"></div></div>');return C?"":B.toString()};jive.apps.container.servicesView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="app-services-container" class="j-app-modal-content"><div class="j-modal-column"><ul class="j-modal-nav">',(A.app.systemSettingsAvailable)?'<li><a href="#" id="j-app-sys-settings">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.apps.system.settings"),[]))+"</a></li>":"",'<li class="selected"><a href="#" id="j-app-svcs-settings">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.options.preferences"),[])),'</a></li><li><a href="#" id="j-app-svcs-config">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.options.configure"),[])),'</a></li><li><a href="#" id="j-app-svcs-about">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.options.about"),[])),'</a></li></ul></div><div class="j-modal-main-wrap"><div class="j-modal-main"><div id="app-services-detail"></div><div class="j-modal-footer"><button id="j-app-services-submit" type="submit" class="j-btn-callout">Submit</button><button id="j-app-services-cancel" type="submit" class="j-btn-global">Cancel</button></div></div></div></div>');return C?"":B.toString()};jive.apps.container.blockingAlertView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="app-blocking-alert-container" class="j-app-modal-content j-pop-main j-app-alert"><div id="app-blocking-alert-detail"></div><div class="j-modal-footer"><button id="j-app-blocking-alert-submit" type="submit" class="j-btn-callout">Submit</button><button id="j-app-blocking-alert-cancel" type="submit" class="j-btn-global">Cancel</button></div></div>');return C?"":B.toString()};jive.apps.container.credentialsView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="app-credentials-container" class="j-app-modal-content j-pop-main"></div>');return C?"":B.toString()};jive.apps.container.renderMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<span>");switch(A.messageKey){case"success.app.refresh":B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.development.refresh"),[])));break;default:B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.messageKey),[])))}B.append("</span>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.apps=="undefined"){jive.apps={}}if(typeof jive.apps.configure=="undefined"){jive.apps.configure={}}jive.apps.configure.renderServicesSection=function(H,E){var B=E||new soy.StringBuilder();B.append('<section class="app-services-section"><h3 class="j-app-config-header font-color-normal">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.services.header"),[])),'</h3><ul class="ul-sections">');var G=H.configureAppView.serviceView;var J=G.length;for(var K=0;K<J;K++){var A=G[K];if(H.configureAppView.configured&&A.serviceOptionView.length<2||!H.configureAppView.configured&&A.selected){B.append('<li class="j-service-block-alert" data-serviceid="',soy.$$escapeHtml(A.selectedService.serviceID),'" data-alias="',soy.$$escapeHtml(A.selectedService.alias),'"><p><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jaf/j-icon-service-generic.png"),'" class="jaf-icon-svc" > ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configuration.service"),[])),"&nbsp;<b>",soy.$$escapeHtml(A.name),"</b>&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configuration.ready"),[])),"</p></li>")}else{B.append('<li class="j-service-block-alert"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configuration.found"),[])),"&nbsp;",soy.$$escapeHtml(A.serviceOptionView.length),"&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configuration.instances"),[])),"&nbsp; <b>",soy.$$escapeHtml(A.name),"</b>.&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configuration.select"),[])),"</p><div>");var F=A.serviceOptionView;var D=F.length;for(var I=0;I<D;I++){var C=F[I];B.append('<p class="j-form-row"><input type="radio" name="service-',soy.$$escapeHtml(C.optionGroupID),'" value="',soy.$$escapeHtml(C.serviceID),'" class="j-service-radio" data-serviceid="',soy.$$escapeHtml(C.serviceID),'" data-alias="',soy.$$escapeHtml(C.alias),'" data-optionid="',soy.$$escapeHtml(C.optionID),'" data-optiongroupid="',soy.$$escapeHtml(C.optionGroupID),'" id="j-service-',soy.$$escapeHtml(C.optionID),'"',(A.selectedService&&A.selectedService.serviceID==C.serviceID)?" checked":"",'><label for="j-service-',soy.$$escapeHtml(C.optionID),'"><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jaf/j-icon-service-generic.png"),'" class="jaf-icon-svc" > ',soy.$$escapeHtml(C.name),"</label></p>")}B.append("</div></li>")}}B.append("</ul></section>");return E?"":B.toString()};jive.apps.configure.renderAppDataErrorMessage=function(A,G){var C=G||new soy.StringBuilder();var F=A.messageKeys;var B=F.length;for(var D=0;D<B;D++){var E=F[D];C.append('<span class="error-message">');switch(E){case"configure.success":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.success"),[])));break;case"configure.cancel":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.cancel"),[])));break;case"configure.cancel.not.changed":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.cancel.not.changed"),[])));break;case"configure.noneed":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.no.need"),[])));break;case"credentials.cancel":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.credentials.cancel"),[])));break;case"credentials.success":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.credentials.success"),[])));break;case"credentials.fail":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.credentials.fail"),[])));break;case"missing.endpoint":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.error.missing.endpoint"),[])));break;case"missing.credential":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.error.missing.credential"),[])));break;case"permissions.acceptance":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.install.permissions.acceptance"),[])));break;case"install.error":C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.install.error"),[])));break;default:C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.general"),[])))}C.append("</span>")}return G?"":C.toString()};jive.apps.configure.renderConfigureApp=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="clearfix">');if(A.configureAppView.cannotConfigure){B.append('<div class="jaf-cannot-configure j-rc4"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.failure"),[])),"</p></div>")}else{B.append('<div id="jive-modal-app-configure-feedback" style="display:none; color:red;"></div>');if(A.configureAppView.requiresServices){jive.apps.configure.renderServicesSection(A,B)}}B.append("</section>");return C?"":B.toString()};jive.apps.configure.renderConfigureAppNotNeeded=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="clearfix"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.service.no.need"),[])),"</p></section>");return C?"":B.toString()};jive.apps.configure.renderCredentials=function(B,G){var C=G||new soy.StringBuilder();C.append('<form href="#" action="post" onsubmit="return false;" class="j-form"><section class="j-service-credentials" data-optionid="',soy.$$escapeHtml(B.selectedService.optionID),'" data-optiongroupid="',soy.$$escapeHtml(B.selectedService.optionGroupID),'" id="j-service-credentials-',soy.$$escapeHtml(B.selectedService.serviceID),'"><p class="j-form-text">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.services.prompt"),[])),"</p>");var E=B.selectedService.credentials;var D=E.length;for(var F=0;F<D;F++){var A=E[F];C.append('<div class="j-form"><p><label for="j-service-cred-',soy.$$escapeHtml(B.selectedService.serviceID),"-",soy.$$escapeHtml(A.name),'">',soy.$$escapeHtml(A.label),"</label>");switch(A.format){case"text":C.append('<input class="j-form-element-text j-service-focus-hint j-service-credential" id="j-service-cred-',soy.$$escapeHtml(B.selectedService.serviceID),"-",soy.$$escapeHtml(A.name),'" data-name="',soy.$$escapeHtml(A.name),'" type="text" />');break;case"password":C.append('<input class="j-form-element-password j-service-focus-hint j-service-credential" id="j-service-cred-',soy.$$escapeHtml(B.selectedService.serviceID),"-",soy.$$escapeHtml(A.name),'" data-name="',soy.$$escapeHtml(A.name),'" type="password" autocomplete="off" />');break;case"textarea":case"textbox":C.append('<textarea class="j-form-element-textarea j-service-focus-hint j-service-credential" cols="80" rows="20" id="j-service-cred-',soy.$$escapeHtml(B.selectedService.serviceID),"-",soy.$$escapeHtml(A.name),'" data-name="',soy.$$escapeHtml(A.name),'" />');break}C.append("</p></div>")}C.append("</section></form>");return G?"":C.toString()};jive.apps.configure.renderConfigureCredentialBlocks=function(A,G){var C=G||new soy.StringBuilder();C.append('<section class="jive-modal-content clearfix">');var E=A.credentialsSetupView.serviceOptionView;var F=E.length;if(F>0){for(var D=0;D<F;D++){var B=E[D];C.append('<div class="j-service-block-container" id="j-service-block-container',soy.$$escapeHtml(B.serviceID),'" ',(!(D==0))?'style="display:none"':"",'><div class="j-service-block" data-serviceid="',soy.$$escapeHtml(B.serviceID),'" data-connectionid="',soy.$$escapeHtml(B.connectionID),'"><h3 class="j-app-config-header font-color-normal">',soy.$$escapeHtml(B.name),"&nbsp;",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configuration.accessRequest"),[])),"</h3>");jive.apps.configure.renderCredentials({selectedService:B},C);C.append('</div><div class="clearfix"><button type="button" class="app-config-save j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.approve"),[])),'</button><button type="button" class="app-config-cancel j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.deny"),[])),"</button></div></div>")}}else{C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.configure.no.need"),[])))}C.append("</section>");return G?"":C.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.apps=="undefined"){jive.apps={}}if(typeof jive.apps.preferences=="undefined"){jive.apps.preferences={}}jive.apps.preferences.renderAppDataErrorMessage=function(A,G){var E=G||new soy.StringBuilder();var C=A.messageKeys;var D=C.length;for(var F=0;F<D;F++){var B=C[F];E.append('<span class="error-message">');switch(B){case"preferences.success":E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.options.preferences.success"),[])));break;default:E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.general"),[])))}E.append("</span>")}return G?"":E.toString()};jive.apps.preferences.renderPreferences=function(A,G){var B=G||new soy.StringBuilder();B.append('<section><form action="#" id="jivewidgetpropform-',soy.$$escapeHtml(A.instanceAppID),'" class="j-form"><input type="hidden" name="appId" value="',soy.$$escapeHtml(A.instanceAppID),'"/>');var D=A.appPreferences;var F=D.length;for(var E=0;E<F;E++){var C=D[E];B.append('<p><label for="app-pref-',soy.$$escapeHtml(A.instanceAppID),"-",soy.$$escapeHtml(C.identifier),'">',soy.$$escapeHtml(C.name),"</label>");switch(C.dataType){case"enum":jive.apps.preferences.prefSelect({pref:C,instanceAppID:A.instanceAppID},B);break;case"bool":jive.apps.preferences.prefBool({pref:C,instanceAppID:A.instanceAppID},B);break;default:B.append('<input type="text" size="40" class="jive-widget-edit-elem-url" id="app-pref-',soy.$$escapeHtml(A.instanceAppID),"-",soy.$$escapeHtml(C.identifier),'" name="',soy.$$escapeHtml(C.identifier),'" value="',soy.$$escapeHtml(C.value),'" />')}B.append("</p>")}B.append("</form></section>");return G?"":B.toString()};jive.apps.preferences.renderNoPreferences=function(A,C){var B=C||new soy.StringBuilder();B.append("<section><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.preferences.none"),[])),"</p></section>");return C?"":B.toString()};jive.apps.preferences.renderPrefs=function(A,G){var B=G||new soy.StringBuilder();B.append('<form action="#" id="jivewidgetpropform-',soy.$$escapeHtml(A.instanceAppID),'" class="j-form"><input type="hidden" name="appId" value="',soy.$$escapeHtml(A.instanceAppID),'"/>');var D=A.prefs;var F=D.length;for(var E=0;E<F;E++){var C=D[E];B.append('<p><label for="app-pref-',soy.$$escapeHtml(A.instanceAppID),"-",soy.$$escapeHtml(C.identifier),'">',soy.$$escapeHtml(C.name),"</label>");switch(C.dataType){case"enum":jive.apps.preferences.prefSelect({pref:C,instanceAppID:A.instanceAppID},B);break;case"bool":jive.apps.preferences.prefBool({pref:C,instanceAppID:A.instanceAppID},B);break;default:B.append('<input type="text" size="40" class="jive-widget-edit-elem-url" id="app-pref-',soy.$$escapeHtml(A.instanceAppID),"-",soy.$$escapeHtml(C.identifier),'" name="',soy.$$escapeHtml(C.identifier),'" value="',soy.$$escapeHtml(C.value),'" />')}B.append("</p>")}B.append('<p><button type="button" id="app-pref-save">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.save_settings"),[])),"</button></p></form>");return G?"":B.toString()};jive.apps.preferences.prefSelect=function(A,G){var B=G||new soy.StringBuilder();B.append('<select class="jive-widget-edit-elem-url" id="app-pref-',soy.$$escapeHtml(A.instanceAppID),"-",soy.$$escapeHtml(A.pref.identifier),'" name="',soy.$$escapeHtml(A.pref.identifier),'">');var D=A.pref.values;var F=D.length;for(var E=0;E<F;E++){var C=D[E];B.append('<option value="',soy.$$escapeHtml(C.identifier),'" ',(C.selected)?'selected="selected"':"",">",soy.$$escapeHtml(C.name),"</option>")}B.append("</select>");return G?"":B.toString()};jive.apps.preferences.prefBool=function(A,C){var B=C||new soy.StringBuilder();B.append('<input type="checkbox" class="jive-widget-edit-elem-url" id="app-pref-',soy.$$escapeHtml(A.instanceAppID),"-",soy.$$escapeHtml(A.pref.identifier),'" name="',soy.$$escapeHtml(A.pref.identifier),'" value="true" ',(A.pref.value)?"checked='checked'":"","/>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.apps=="undefined"){jive.apps={}}if(typeof jive.apps.base=="undefined"){jive.apps.base={}}jive.apps.base.renderAppDataUploadPopup=function(A,C){var B=C||new soy.StringBuilder();B.append('<header><h2 class="jive-modal-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("appframework.app.upload.title"),[])),": ",soy.$$escapeHtml(A.options.dialogTitle),'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><div class="jive-modal-content j-pop-main"><div class="modal-block">',(A.options.instructionMsg)?"<p>"+soy.$$escapeHtml(A.options.instructionMsg)+"</p>":"","<form action=",soy.$$escapeHtml(A.options.actionUrl),' class="jive-modal-file-upload" target="jive-modal-file-upload-iframe" enctype="multipart/form-data" method="post"><input type="hidden" name="request" value="" />',(A.options.binaryDocument==true)?'<p><label for="subject">Subject</label><input type="text" name="subject" id="subject" value="" /></p>':"",'<div class="jive-error-box clearfix" style="display:none" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-redalert"></span><span class="message"></span></div></div><p><label for="file">File:</label><br /><input type="file" name="file" /></p>',(A.options.showTitle)?'<p><label for="title">'+((A.options.showTitle==true)?"Title":soy.$$escapeHtml(A.options.showTitle))+':</label><br /><input type="text" name="title" id="title"/></p>':"",(A.options.showDescription)?'<p><label for="description">'+((A.options.showDescription==true)?"Description":soy.$$escapeHtml(A.options.showTitle))+':</label><br /><textarea name="description"></textarea></p>':"",'<p><input type="submit" value="',soy.$$escapeHtml(A.options.submitText),'" /></p><iframe name="jive-modal-file-upload-iframe" id="jive-modal-file-upload-iframe" style="display:none" src="about:blank"></iframe></form></div></div>');return C?"":B.toString()};jive.apps.base.renderAppProfileTooltip=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-app-profile-toolip" style="position:absolute;top:',soy.$$escapeHtml(A.top),"px;left:",soy.$$escapeHtml(A.left),'px;" class="jive-tooltip2"><div class="jive-tooltip2-mid j-mini-modal"><div class="jive-tooltip2-mid-padding j-modal-content clearfix" id="jive-app-profile-toolip-body"></div></div></div>');return C?"":B.toString()};jive.apps.base.renderAppIcon=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"small":B.append('<img class="j-app-fav-icon" src="',soy.$$escapeHtml(A.app.favIconSrc?A.app.favIconSrc:jive.soy.func.normalizeUrl(window._jive_base_url,"images/jaf/j-icon-jaf-16.png")),' "/>');break;case"medium":B.append('<img class="j-app-icon" src="',soy.$$escapeHtml(A.app.iconSrc?A.app.iconSrc:jive.soy.func.normalizeUrl(window._jive_base_url,"images/jaf/j-icon-jaf-48.png")),'"/>');break;case"large":B.append('<img class="j-app-icon" src="',soy.$$escapeHtml(A.app.largeIconSrc?A.app.largeIconSrc:jive.soy.func.normalizeUrl(window._jive_base_url,"images/jaf/j-icon-jaf-128.png")),'"/>');break;default:B.append('<img class="j-app-icon" src="',soy.$$escapeHtml(A.app.iconSrc?A.app.iconSrc:jive.soy.func.normalizeUrl(window._jive_base_url,"images/jaf/j-icon-jaf-48.png")),'"/>')}return C?"":B.toString()}
;
